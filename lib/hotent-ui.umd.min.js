(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vuedraggable"),require("jszip"),require("element-ui"),require("lodash"),require("jquery"),require("axios"),require("html2canvas"),require("js-base64")):"function"===typeof define&&define.amd?define(["vuedraggable","jszip","element-ui","lodash","jquery","axios","html2canvas","js-base64"],t):"object"===typeof exports?exports["hotent-ui"]=t(require("vuedraggable"),require("jszip"),require("element-ui"),require("lodash"),require("jquery"),require("axios"),require("html2canvas"),require("js-base64")):e["hotent-ui"]=t(e["vuedraggable"],e["jszip"],e["element-ui"],e["lodash"],e["jquery"],e["axios"],e["html2canvas"],e["js-base64"])})("undefined"!==typeof self?self:this,(function(__WEBPACK_EXTERNAL_MODULE__289a__,__WEBPACK_EXTERNAL_MODULE__5877__,__WEBPACK_EXTERNAL_MODULE__5f72__,__WEBPACK_EXTERNAL_MODULE__60bb__,__WEBPACK_EXTERNAL_MODULE_c5e1__,__WEBPACK_EXTERNAL_MODULE_cebe__,__WEBPACK_EXTERNAL_MODULE_f230__,__WEBPACK_EXTERNAL_MODULE_f43e__){return function(e){var t={};function i(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="fb15")}({"00e0":function(e,t,i){},"00f7":function(e,t,i){},"0132":function(e,t,i){"use strict";i("d68f")},"025e":function(module,__webpack_exports__,__webpack_require__){"use strict";var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("8bbf"),vue__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(vue__WEBPACK_IMPORTED_MODULE_0__),utils={isMobile(){const e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPod","iPad"];for(let i=0;i<t.length;i++)if(e.indexOf(t[i])>=0)return!0;return!1},isEmpty:e=>null===e||void 0===e||""===e,isVoid:e=>void 0===e||null===e||""===e,validObject:e=>{if(!e)return{};const t={...e};return Object.keys(t).forEach(e=>{const i=t[e];utils.isVoid(i)&&delete t[e]}),t},uniqueArrayObject(e,t){return e.reduce((e,i)=>{const a=e.map(e=>e[t]);return a.includes(i[t])?e:[...e,i]},[])},getName:()=>Math.random().toString(36).substr(2,10),getWriteable:e=>"n"!==e&&"r"!==e,mergeValidate:(e,t)=>{if(!t||t.constructor!==Object&&t.constructor!==String)return e;let i=!0,a=t.constructor===String,s=!0;if(void 0===e||null===e)i=a,e=a?"":{};else{if(e.constructor!==Object&&e.constructor!==String)throw`rules的类型为${typeof e}，只能为Object类型或String类型。`;i=e.constructor===String}if(s=i&&a,s){const i=utils.stringSplit(e,"|"),a=utils.stringSplit(t,"|");let s={},l={};i.forEach(e=>{const t=utils.stringSplit(e,":")[0];s[t]=e}),a.forEach(e=>{const t=utils.stringSplit(e,":")[0];l[t]=e});const n=Object.assign(s,l);return Object.values(n).join("|")}{let s={},l={};return s=i?utils.validateString2Object(e):{...e},l=a?utils.validateString2Object(t):{...t},Object.assign(s,l)}},reduceValidate:(e,t)=>{if(!e||!t||t.constructor!==Object&&t.constructor!==String)return e;let i=[];if(t.constructor===String){const e=utils.validateString2Object(t);i=Object.keys(e)}else i=Object.keys(t);if(e.constructor===Object)return Object.keys(e).forEach(t=>{i.some(e=>e==t)&&delete e[t]}),e;if(e.constructor===String){const t=utils.stringSplit(e,"|"),a=t.reduce((e,t)=>{const a=utils.stringSplit(t,":")[0];return i.every(e=>e!=a)&&e.push(t),e},[]);return a.join("|")}throw`rules的类型为${typeof e}，只能为Object类型或String类型。`},validateString2Object:e=>{if(!e||e.constructor!==String)return e;let t={};const i=utils.stringSplit(e,"|");return i.forEach(e=>{const i=utils.stringSplit(e,":");if(1==i.length)t[i[0]]=!0;else if(i.length>1){const e=utils.stringSplit(i[1],",");t[i[0]]=e}}),t},someRuleInValidate:(e,t)=>{if(!e||e.constructor!==Object&&e.constructor!==String||!t||t.constructor!==Array||0==t.length)return!1;let i=e;return e.constructor===String&&(i=utils.validateString2Object(e)),Object.keys(i).some(e=>t.indexOf(e)>-1)},stringSplit:(e,t)=>{if(!e||e.constructor!==String||!t||t.constructor!==String)return[];let i=e.split(t);return i=i.map(e=>e.trim()),i=i.trim(),i},addRequiredOrNot:(e,t)=>{let i=t;return"b"===e&&(i=utils.mergeValidate("required",t)),i||""},formatDate:e=>{let t=null;if(!e)return t;if(e.constructor!=Date||isNaN(e.getTime())){if(e.constructor!=String&&e.constructor!=Number)throw"格式化日期时，传入的数据格式不正确。";t=new Date(e)}else t=e;let i=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;let s=t.getDate();s=s<10?"0"+s:s;let l=t.getHours();l=l<10?"0"+l:l;let n=t.getMinutes();n=n<10?"0"+n:n;let o=t.getSeconds();return o=o<10?"0"+o:o,i+"-"+a+"-"+s+" "+l+":"+n+":"+o},formatDateYear:e=>{let t=new Date(e),i=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;let s=t.getDate();return s=s<10?"0"+s:s,i+"-"+a+"-"+s},dateIsBefore:(e,t,i)=>{if(!e||!t)return!0;e=e.replace(/-/g,"/"),t=t.replace(/-/g,"/");var a=new Date(e).getTime()||new Date((new Date).format("yyyy-MM-dd")+" "+e).getTime(),s=new Date(t).getTime()||new Date((new Date).format("yyyy-MM-dd")+" "+t).getTime();return i?!(a>s):s>a},dateCalc:(e,t,i)=>{if(!e||!t||0==e.length||0==t.length)return 0;i&&i.constructor==String||(i="day");const a=["year","month","day","hour","minute","second"];if(-1==a.indexOf(i))throw`计算日期的单位只能从${a}中选择`;let s=new Date(Date.parse(e.replace(/-/g,"/"))).getTime(),l=new Date(Date.parse(t.replace(/-/g,"/"))).getTime();if(!Number.isInteger(s)||!Number.isInteger(l)){const i=new Date;let a=i.getFullYear()+"/"+(i.getMonth()+1)+"/"+i.getDate();if(Number.isInteger(s)||(s=new Date(`${a} ${e}`).getTime()),Number.isInteger(s)||(l=new Date(`${a} ${t}`).getTime()),!Number.isInteger(s)||!Number.isInteger(l))return 0}let n=0,o=l-s;switch(i){case"year":n=parseInt(o/31104e6);break;case"month":n=parseInt(o/2592e6);break;case"day":n=parseInt(o/864e5);break;case"hour":n=parseInt(o/36e5);break;case"minute":n=parseInt(o/6e4);break;case"second":n=parseInt(o/1e3)}return n},dateDuration:(e,t)=>{const i=utils.dateCalc(e,t,"day"),a=utils.dateCalc(e,t,"hour"),s=utils.dateCalc(e,t,"minute"),l=utils.dateCalc(e,t,"second");return{days:i,hours:a,minutes:s,seconds:l}},nest2tile:(e,t,i)=>{if(e&&e.constructor===Array)return t||(t="children"),[].concat(...e.map(e=>{let a={...e};return void 0!=i&&0!=i||delete a[t],e[t]&&e[t].length?[].concat(a,...utils.nest2tile(e[t]||[],t,i)):[].concat(a)}))},tile2nest:(e,t,i,a)=>{if(!e||e.constructor!==Array)return e;let s=[...e];t=t||"id",i=i||"parentId",a=a||"children";let l=[];return s.map(e=>{if("N"==e.isLeaf&&(e.isLeaf=!1),"Y"==e.isLeaf&&(e.isLeaf=!0),e[t]!==e[i]){let n=s.filter(a=>a[t]===e[i]);n&&1==n.length&&(n[0][a]=n[0][a]||[],n[0][a].push(e),l.push(e[t]))}}),l.map(e=>{s=s.filter(i=>i[t]!==e)}),s},getOnlineFormInstance:e=>{if(e==e.$root)return e;if(!e)throw"VueComponent实例为空.";return e.hasOwnProperty("watchMap")?e:e.$parent?utils.getOnlineFormInstance(e.$parent):void 0},getRuntimeTemplateOnlineForm:e=>{if(e==e.$root)return e;if(!e)throw"VueComponent实例为空.";return"HtRuntimeTemplate"==e.$options.componentName?e:e.$parent?utils.getRuntimeTemplateOnlineForm(e.$parent):void 0},getSubScopeElAndIndex:e=>{if(!e||!(e instanceof HTMLElement))return{subScopeEl:null,index:null,subname:null};let t=utils.getParentElementByAttribute(e,"data-subname");if(t||(t=utils.getParentElementByClassNamePrefix(e,"data-subname__")),!t)return{subScopeEl:null,index:null,subname:null};let i=t.dataset["index"];if(void 0===i){const e=t.className.split(" ").find(e=>e.startsWith("data-index__"));e&&(i=e.replace("data-index__",0))}if(void 0===i)throw"要计算的子表行未获取到index属性.";i=Number.parseInt(i);let a=t.dataset["subname"];if(!a){const e=t.className.split(" ").find(e=>e.startsWith("data-subname__"));e&&(a=e.replace("data-subname__",""))}if(a){let a=utils.getSubtablePageVue(e);a&&a.internalCurrentPage>1&&i<(a.internalCurrentPage-1)*a.internalPageSize&&(i=(a.internalCurrentPage-1)*a.internalPageSize+i,t.dataset["index"]=i)}return{subScopeEl:t,index:i,subname:a}},getSubtablePageVue(e){while(e&&"TABLE"!=e.parentElement.nodeName)e=e.parentElement;return e&&e.parentElement&&e.parentElement.getElementsByClassName("el-pagination")&&e.parentElement.getElementsByClassName("el-pagination")[0]&&e.parentElement.getElementsByClassName("el-pagination")[0].__vue__._data?e.parentElement.getElementsByClassName("el-pagination")[0].__vue__._data:null},getSubInputScopeByModelExpression:(e,t)=>{const i=e.getElementsByClassName("inputs");let a=null;for(var s,l=0;s=i[l++];){let e=s.__vue__.$vnode.data.model&&s.__vue__.$vnode.data.model.expression?s.__vue__.$vnode.data.model.expression:"";s.__vue__.$vnode&&s.__vue__.$vnode.componentOptions&&s.__vue__.$vnode.componentOptions.propsData&&s.__vue__.$vnode.componentOptions.propsData.modelExpression&&(e=s.__vue__.$vnode.componentOptions.propsData.modelExpression),s&&s.__vue__&&s.__vue__.$vnode.data.model&&e===t&&(a=s.__vue__)}return a},validateForm:(e,t)=>new Promise((i,a)=>{e.$root.$validator.validateAll(t).then(t=>{t?i(t):a(e.$root.$validator.errors.items)})}),getParentElementByAttribute:(e,t)=>{if(null===e||void 0===e||!(e instanceof HTMLElement))return null;if(!e.hasAttribute||"function"!=typeof e.hasAttribute)throw"传入的元素el不能为空且必须为HTMLHtmlElement类型.";if(!t||t.constructor!==String)throw"传入的属性attribute不能为空且必须为String类型.";return e.hasAttribute(t)?e:"HTML"===e.tagName?null:utils.getParentElementByAttribute(e.parentElement,t)},getParentElementByClassNamePrefix:(e,t)=>{if(null===e||void 0===e)return null;if(!e.hasAttribute||"function"!=typeof e.hasAttribute)throw"传入的元素el不能为空且必须为HTMLHtmlElement类型.";if(!t||t.constructor!==String)throw"传入的classNamePrefix不能为空且必须为String类型.";const i=e.className.split(" ");return i&&i.some(e=>e.startsWith(t))?e:"HTML"===e.tagName?null:utils.getParentElementByClassNamePrefix(e.parentElement,t)},getSomeAttributeFromParentElement:(e,t)=>{let i=utils.getParentElementByAttribute(e,t);return i&&i.getAttribute&&i.getAttribute.constructor===Function?i.getAttribute(t):null},getWholePathOfSub:function(e,t,i){if(!e||!t||null===i||!Number.isInteger(i))return null;var a=e.split(".");return a&&a.length>1?"".concat(t,"[").concat(i,"].").concat(a[a.length-1]):null},getValueByPath:(e,t,i)=>{if(!e||!t||t.constructor!=String)return null;if(!/^\w?.*[\w|\]]$/.test(t))return null;let a=t.split(".");if(1==a.length)return e[t];if(a.length>1){let t=e;for(var s=0;s<a.length;s++){if(null===t||void 0===t)return null;const e=a[s],l=/^(\w+)\[(\d+)\]$/.exec(e);if(l)t=t[l[1]][l[2]];else if(t&&t.constructor===Array){let a=0;if(null!=i&&void 0!=i){let e=Number.parseInt(i);isNaN(e)||(a=e)}t=t[a][e]}else t=t[e]}return t}return null},setValueByPath:(e,t,i,a)=>{if(!e||!t||t.constructor!=String)return;if(!/^\w?.*[\w|\]]$/.test(t))return;let s=t.split(".");if(1==s.length)e[t]=i;else if(s.length>1){let t=e;for(var l=0;l<s.length;l++){const e=s[l],n=/^(\w+)\[(\d+)\]$/.exec(e);if(l==s.length-1)if(n)t[n[1]][n[2]]=i;else if(t&&t.constructor===Array){let s=0;if(null!=a&&void 0!=a){let e=Number.parseInt(a);isNaN(e)||(s=e)}t[s][e]?t[s][e]=i:vue__WEBPACK_IMPORTED_MODULE_0___default.a.prototype.$set(t[s],e,i)}else t[e]=i;else t=n?t[n[1]][n[2]]:t[e]}}},parseToJson:(jsonStr,type)=>{if(type=type||1,!jsonStr||""===jsonStr)return null;try{let obj;switch(type){case 1:obj=JSON.parse(jsonStr);break;case 2:obj=eval(`(${jsonStr})`);break;default:throw"解析json对象错误"}return obj}catch(e){return utils.parseToJson(jsonStr,type+1)}},convertCurrency:e=>{var t,i,a,s,l,n,o,r,c,h,u,d,p,m,g=99999999999.99,f="零",y="壹",b="贰",_="叁",v="肆",w="伍",S="陆",C="柒",D="捌",x="玖",T="拾",P="佰",E="仟",O="万",k="亿",I="",$="元",A="角",B="分",M="整";if(e=e.toString(),""==e)return"";if(null!=e.match(/[^,.\d]/))return"";if(null==e.match(/^((\d{1,3}(,\d{3})*(.((\d{3},)*\d{1,3}))?)|(\d+(.\d+)?))$/))return"";if(e=e.replace(/,/g,""),e=e.replace(/^0+/,""),Number(e)>g)return"";if(s=e.split("."),s.length>1?(t=s[0],i=s[1],i=i.substr(0,2)):(t=s[0],i=""),l=new Array(f,y,b,_,v,w,S,C,D,x),n=new Array("",T,P,E),o=new Array("",O,k),r=new Array(A,B),a="",Number(t)>0){for(c=0,h=0;h<t.length;h++)u=t.length-h-1,d=t.substr(h,1),p=u/4,m=u%4,"0"==d?c++:(c>0&&(a+=l[0]),c=0,a+=l[Number(d)]+n[m]),0==m&&c<4&&(a+=o[p]);a+=$}if(""!=i)for(h=0;h<i.length;h++)d=i.substr(h,1),"0"!=d&&(a+=l[Number(d)]+r[h]);return""==a&&(a=f+$),""==i&&(a+=M),a=I+a,a},getUrlKey:e=>decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||["",""])[1].replace(/\+/g,"%20"))||null,arrayMove:(e,t,i)=>{if(i=i||"down",!t||t.constructor!==Object&&t.constructor!==Array)return e;if(t.constructor===Object&&(t=[t]),"up"==i)t.forEach(t=>{let i=e.indexOf(t,1);if(i>0){let t=[...e];t[i-1]=e[i],t[i]=e[i-1],e=t}});else if("down"==i)for(var a,s=t.length-1;a=t[s--];){let t=e.indexOf(a,0);if(t>-1&&t<e.length-1){let i=[...e];i[t+1]=e[t],i[t]=e[t+1],e=i}}return e},getValueByConfigKey:(e,t,i)=>{if(!t.hasOwnProperty(i))throw"config对象中未找到属性"+i;const a=t[i],s=utils.getOnlineFormInstance(e.$parent),{subScopeEl:l,index:n,subname:o}=utils.getSubScopeElAndIndex(e.$el);if(l){let e=o;4==e.split(".").length&&-1==e.indexOf("[")&&(e=e.split(".")[0]+"."+e.split(".")[1]+"."+e.split(".")[2]+"["+n+"]."+e.split(".")[3]);let t=utils.getWholePathOfSub(a,e,n);return utils.getValueByPath(s,t)}return utils.getValueByPath(s,a)},setValueByConfigKey:(e,t,i,a)=>{if(!t.hasOwnProperty(i))return;const s=t[i],l=utils.getOnlineFormInstance(e.$parent),{subScopeEl:n,index:o,subname:r}=utils.getSubScopeElAndIndex(e.$el);if(n){let e=r;4==e.split(".").length&&-1==e.indexOf("[")&&(e=e.split(".")[0]+"."+e.split(".")[1]+"."+e.split(".")[2]+"["+o+"]."+e.split(".")[3]);let t=utils.getWholePathOfSub(s,e,o);utils.setValueByPath(l,t,a)}else utils.setValueByPath(l,s,a)},objectEquals:(e,t,i)=>{if(i&&i.constructor===Array||(i=[]),!e||!t)return e===t;for(let a in e)if(!(i.length>0&&-1===i.indexOf(a))){if(e.hasOwnProperty(a)!=t.hasOwnProperty(a))return!1;if(typeof e[a]!=typeof t[a])return!1}for(let a in t)if(!(i.length>0&&-1===i.indexOf(a))){if(e.hasOwnProperty(a)!=t.hasOwnProperty(a))return!1;if(typeof e[a]!=typeof t[a])return!1;if(e.hasOwnProperty(a))if(e[a]instanceof Array&&t[a]instanceof Array){if(!utils.arrayEquals(e[a],t[a]))return!1}else if(e[a]instanceof Object&&t[a]instanceof Object){if(!utils.objectEquals(e[a],t[a]))return!1}else if(e[a]!=t[a])return!1}return!0},arrayEquals:(e,t)=>{if(!e||!t)return e===t;if(e.length!=t.length)return!1;for(var i=0,a=e.length;i<a;i++)if(e[i]instanceof Array&&t[i]instanceof Array){if(!utils.arrayEquals(e[i],t[i]))return!1}else if(e[i]instanceof Object&&t[i]instanceof Object){if(!utils.objectEquals(e[i],t[i]))return!1}else if(e[i]!=t[i])return!1;return!0},trimEachLine:e=>{if(!e||e.constructor!=String||-1==e.indexOf("\n"))return e;let t=e.split("\n"),i=0;return t.reduce((e,t,a)=>{if(1==a){const e=/^(\s+).*$/.exec(t);e&&2==e.length&&(i=e[1].length)}return e+"\n"+t.slice(i,t.length)})},hashCode:e=>{var t,i=0;if(0==e.length)return i;for(var a=0;a<e.length;a++)t=e.charCodeAt(a),i=(i<<5)-i+t,i&=i;return i},parseExp:(e,t)=>{if(!e||e.constructor!=String)return e;t=t||{};var i=/(\$\{(\w+)\})/,a=null,s=0;while(a=i.exec(e)){if(s++,s>999)break;null!=a&&(e=e.replace(a[1],t.hasOwnProperty(a[2])?t[a[2]]:""))}return e},thousandBit:e=>{if(""==(e+"").trim())return"";if(isNaN(e))return e;if(e+="",/^.*\..*$/.test(e)){const t=e.lastIndexOf("."),i=e.substring(t+1,e.length);let a=e.substring(0,t);a+="";const s=/(-?\d+)(\d{3})/;while(s.test(a))a=a.replace(s,"$1,$2");e=a+"."+i}else{e+="";const t=/(-?\d+)(\d{3})/;while(t.test(e))e=e.replace(t,"$1,$2")}return e},parseUrl:e=>{if(""!==e){var t=window.context,i=/^(\$\{(\w+)\})\/.*$/,a=i.exec(e);if(null!=a){var s=a[2],l=a[1],n=t[s];if(!n)throw new Error("The '"+s+"' in url:"+e+" does not defined in context provider.");return e.replace(l,n)}return e}}};Array.prototype.remove=function(e){let t=this.findIndex(t=>t===e);t>-1&&this.splice(t,1)},Array.prototype.unique=function(e){const t=new Map;return this.filter(i=>e?!t.has(i[e])&&t.set(i[e],1):!t.has(i)&&t.set(i,1))},Array.prototype.trim=function(){return this.filter(e=>""!==e)},Array.prototype.groupByKey=function(e){let t={};return this.forEach(i=>{let a=t[i[e]];a||(a=[],t[i[e]]=a),a.push(i)}),t},Array.prototype.extractByKey=function(e){let t=new Set;return this.forEach(i=>{e&&i[e]&&t.add(i[e])}),Array.from(t)},Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return e},__webpack_exports__["a"]=utils},"02f3":function(e,t,i){},"0355":function(e,t,i){"use strict";i("424b")},"03d5":function(e,t,i){"use strict";i("48b0")},"047f":function(e,t,i){},"0b00":function(e,t,i){"use strict";i("ac74")},"0bba":function(e,t,i){},"0bd7":function(e,t,i){},"0cbd":function(e,t,i){"use strict";i("da4f")},"0cfa":function(e,t,i){"use strict";i("d850")},"0f36":function(e,t,i){},"0fca":function(e,t,i){"use strict";i("02f3")},"0fde":function(e,t,i){},1191:function(e,t,i){},"11c9":function(e,t,i){},1612:function(e,t,i){},1639:function(e,t,i){"use strict";var a=i("8bbf"),s=i.n(a),l=i("025e");const n={_map:new Map,set:(e,t)=>{n._map.set(e,t),t.rows&&n._digest(t.rows)},clear:e=>{n._map.delete(e),n._map.delete(n._vueComponentKey(e))},_digest:e=>{if(e&&e.length>0){const t=e[0];s.a.set(e,0,t)}},_vueComponentKey:e=>e+":VueComponent",importData:(e,t,i,a)=>new Promise((s,o)=>{if(n._map.has(e)){const r=n._vueComponentKey(e);n._map.has(r)||o(`未找到${e}所对应的数据实例，无法导入数据。`);const c=n._map.get(e),h=n._map.get(r),u=c.rows;switch(i){case"override":l["a"].setValueByPath(h,e,t);break;case"append":{const i=u.concat(t);l["a"].setValueByPath(h,e,i);break}case"merge":{a||a.constructor==Function||o("合并导入必须提供合并导入的方法："+a);const i=a(u,t);l["a"].setValueByPath(h,e,i);break}}c.rows=l["a"].getValueByPath(h,e),n._digest(c.rows),s()}else o(`未找到${e}所对应的子表数据`)}),exportData:(e,t,i,a)=>new Promise((s,o)=>{if(a)if(n._map.has(e))if("current"==t)s(n.pagingByPath(e));else if("all"==t){const t=n._map.get(e);s(t.rows)}else o("未知的导出类型："+t);else o(`未找到${e}所对应的子表数据`);else{let t=l["a"].getValueByPath(i,e);s(t)}}),pagingByPath:(e,t)=>{const i=n._vueComponentKey(e);if(!n._map.has(i)&&t&&n._map.set(i,t),n._map.has(e)){const t=n._map.get(e),i=t.rows,a=t.pageSize,s=(t.currentPage-1)*a;return s+a>=i.length?i.slice(s,i.length):i.slice(s,s+a)}return[]},getPageOffset:(e,t)=>{let i=0;const a=n._vueComponentKey(e);if(!n._map.has(a)&&t&&n._map.set(a,t),n._map.has(e)){const{pageSize:t,currentPage:a}=n._map.get(e);t&&a&&(i=(a-1)*t)}return i}};t["a"]=n},1693:function(e,t,i){"use strict";i("8fa1")},1907:function(e,t,i){},1989:function(e,t,i){"use strict";i("70a4")},"1aa3":function(e,t,i){},"1c94":function(e,t,i){"use strict";i("f3c1")},"1ce6":function(e,t,i){},"1fcb":function(e,t,i){},"1fd4":function(e,t,i){"use strict";i("3dbf")},"20cd":function(e,t,i){"use strict";i("1aa3")},"210e":function(e,t,i){},"243d":function(e,t,i){},"248e":function(module,__webpack_exports__,__webpack_require__){"use strict";var _services_SubPagination_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("1639"),_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("025e"),_util_base64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("c46f"),_locale__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("fe07");const{saveAs:saveAs}=__webpack_require__("9588");__webpack_exports__["a"]={name:"HtSubImportDialog",props:{rows:Array,subDesc:{type:String,default(){return Object(_locale__WEBPACK_IMPORTED_MODULE_3__["c"])("ht.subTable.subTableTemplate")}},dataSubname:{type:String,required:!0},maxRow:{type:String,default:null},mergeExpression:{type:String,default:null},dataColumns:{type:String,required:!0}},data(){return{dialogVisible:!1,importRows:null,showRowData:!1,mergeFunc:null,mode:"append",modeOptions:[{mode:"append",desc:this.$t("ht.subTable.append")},{mode:"override",desc:this.$t("ht.subTable.override")},{mode:"merge",desc:this.$t("ht.subTable.merge"),disabled:!0}]}},computed:{columns:function(){return eval(Object(_util_base64_js__WEBPACK_IMPORTED_MODULE_2__["a"])(this.dataColumns))}},watch:{dialogVisible:{handler:function(e){!e&&this.$refs.selectFile&&(this.$refs.selectFile.value="",this.importRows=null,this.showRowData=!1)},immediate:!0},mergeExpression:{handler:function(newVal){if(newVal){this.$set(this.modeOptions[2],"disabled",!1),this.mode="merge";const funcExp=Object(_util_base64_js__WEBPACK_IMPORTED_MODULE_2__["a"])(newVal);this.mergeFunc=eval(`(${funcExp})`)}},immediate:!0}},created(){this.$XLSX||console.warn(this.$t("ht.subTable.xlsxWarnMsg"))},mounted(){const e=_utils_js__WEBPACK_IMPORTED_MODULE_1__["a"].getOnlineFormInstance(this);_services_SubPagination_js__WEBPACK_IMPORTED_MODULE_0__["a"]._map.has(this.dataSubname)||_services_SubPagination_js__WEBPACK_IMPORTED_MODULE_0__["a"].set(this.dataSubname,{rows:this.rows||[]});const t=_services_SubPagination_js__WEBPACK_IMPORTED_MODULE_0__["a"]._vueComponentKey(this.dataSubname);!_services_SubPagination_js__WEBPACK_IMPORTED_MODULE_0__["a"]._map.has(t)&&e&&_services_SubPagination_js__WEBPACK_IMPORTED_MODULE_0__["a"]._map.set(t,e)},destroyed(){_services_SubPagination_js__WEBPACK_IMPORTED_MODULE_0__["a"].clear(this.dataSubname)},methods:{exportFormSub(){let e=this.columns.filter(e=>!(e.ctrlType&&("sunDiv"===e.ctrlType||"suntable"===e.ctrlType)));this.$requestConfig.downloadSubtableTemplate(this.subDesc,e).then(({data:e})=>{const t=new Blob([e]);saveAs(t,this.subDesc+".xls")}).catch(e=>{this.$message.error(`${this.$t("ht.subTable.downloadTemplateError")}：${e}`)})},getNameByDesc(e){var t="";return this.columns.forEach(i=>{i.desc==e&&(t=i.name)}),t},changeRowKey(e){var t=[];return e.forEach(e=>{var i={};for(let t in e)i[this.getNameByDesc(t)]=e[t];t.push(i)}),t},dialogConfirm(){if(0!=this.importRows.length){if(this.maxRow){let e=parseInt(this.maxRow);if("override"==this.mode){let t=this.importRows.length;if(t>e&&0!=e)return void this.$message.error(this.$t("ht.subTable.exceededMaximumRows")+"【"+e+"】")}else if("append"==this.mode){const t=_utils_js__WEBPACK_IMPORTED_MODULE_1__["a"].getOnlineFormInstance(this.$parent.$parent);t&&t.data||this.$message.error(this.$t("ht.subTable.cannotImport"));let i=t.data,a=this.dataSubname.split("."),s=i[a[1]][a[2]]||[],l=this.importRows.length+s.length;if(l>e&&0!=e)return void this.$message.error(this.$t("ht.subTable.exceededMaximumRows")+"【"+e+"】")}else if("merge"==this.mode){const e=_utils_js__WEBPACK_IMPORTED_MODULE_1__["a"].getOnlineFormInstance(this.$parent.$parent);e&&e.data||this.$message.error(this.$t("ht.subTable.cannotImport"))}}_services_SubPagination_js__WEBPACK_IMPORTED_MODULE_0__["a"].importData(this.dataSubname,this.importRows,this.mode,this.mergeFunc).then(()=>{this.$message.success(this.$t("ht.subTable.importSuccess")),this.dialogVisible=!1}).catch(e=>{this.$message.error(`${this.$t("ht.subTable.importError")}：${e}`)})}else this.$message.error(this.$t("ht.subTable.selectImportData"))},fileChange(e){e&&e.target&&e.target.files&&1==e.target.files.length&&(this.importRows=[],this.readWorkbookFromLocalFile(e.target.files[0],e=>{this.importRows=this.changeRowKey(e)}))},readWorkbookFromLocalFile(e,t){const i=new FileReader;i.onload=e=>{const i=e.target.result;let a=null;try{a=this.$XLSX.read(i,{type:"binary"})}catch(o){return void this.$message.error(this.$t("ht.subTable.notValidExcelFile"))}const s=a.SheetNames,l=a.Sheets[s[0]];if(l["!merges"]&&l["!merges"].length>0){const e=l["!merges"][0],t=Number(e["e"]["r"]);return void this.$message.error(this.$t("ht.subTable.cannotHaveMergedCells",{rowNum:t+1}))}const n=this.$XLSX.utils.sheet_to_json(l,{raw:!1});n&&n.constructor==Array?t&&t(n):this.$message.error(this.$t("ht.subTable.dataWrongFormat"))},i.readAsBinaryString(e)}}}},"289a":function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__289a__},"29c2":function(e,t,i){},"2b12":function(e,t,i){},"2c66":function(e,t,i){"use strict";i("a091")},"2cf4":function(e,t,i){"use strict";i("4d09")},"2d16":function(e,t,i){},"2ee6":function(e,t,i){"use strict";i("5ff6")},"307d":function(e,t,i){"use strict";i("b6ba")},"30a8":function(e,t,i){},3187:function(e,t,i){},3588:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return formula})),__webpack_require__.d(__webpack_exports__,"a",(function(){return Formulas}));var element_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("5f72"),element_ui__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(element_ui__WEBPACK_IMPORTED_MODULE_0__),_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("025e");const conformanceJudge=(e,t)=>!Number.isNaN(e)||(console.error(`在组件：${JSON.stringify(t.componentOptions.propsData)}上设置的计算公式计算结果为NaN，请检查公式。`),!1),formula={bind(e,t,i){if(!conformanceJudge(t.value.value,i))return;const a=i.context.$options.propsData;let s=_utils_js__WEBPACK_IMPORTED_MODULE_1__["a"].getValueByPath(a,t.value.bindPath);if(void 0==s){let e=t.value.bindPath.split(".");if(3==e.length)i.context.$set(i.context.data[e[1]],e[2],"");else if(4==e.length){let t=/^(\w+)\[(\d+)\]$/.exec(e[2]);i.context.$set(i.context.data[e[1]][t[1]][t[2]],e[3],"")}}if(t.value.value&&t.value.value!==s&&!t.value.type&&e.__vue__.$emit("input",t.value.value),a&&!s){let s=t.value.value;t.value.value instanceof Date&&(s=t.value.value.format(t.value.format)),e.__vue__.$emit("input",s),_utils_js__WEBPACK_IMPORTED_MODULE_1__["a"].setValueByPath(a,t.value.bindPath,s),i.context.$forceUpdate()}},update(e,t,i){if(!conformanceJudge(t.value.value,i))return;const a=i.context.$options.propsData;if(t.oldValue.value instanceof Date){if(t.oldValue.value.getTime()!==t.value.value.getTime()){const s=t.value.value.format(t.value.format);e.__vue__.$emit("input",s),_utils_js__WEBPACK_IMPORTED_MODULE_1__["a"].setValueByPath(a,t.value.bindPath,s),i.context.$forceUpdate()}}else{let s=_utils_js__WEBPACK_IMPORTED_MODULE_1__["a"].getValueByPath(a,t.value.bindPath);if(s&&t.value.type&&"default"===t.value.type)return;t.oldValue.value==t.value.value&&t.oldValue.bindPath==t.value.bindPath||(e.__vue__.$emit("input",t.value.value),_utils_js__WEBPACK_IMPORTED_MODULE_1__["a"].setValueByPath(a,t.value.bindPath,t.value.value),i.context.$forceUpdate())}}},Formulas={d1900:new Date(Date.UTC(1900,0,1)),WEEK_STARTS:[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],LastMonth:(e,t)=>{if(t=parseInt(t),e=parseInt(e),t>0&&t<13&&e>0){if(1===t)return 12;let e=t-1;return e<10&&(e="0"+e),e}},LastYear:(e,t)=>{if(t=parseInt(t),e=parseInt(e),t>0&&t<13&&e>0)return 1===t?e-1:e},ABS:e=>(e=Formulas.parseNumber(e),Math.abs(e)),AVERAGE:(...e)=>{let t=0;return e.forEach(e=>{t+=Formulas.parseNumber(e)}),0===e.length?0:t/e.length},AVERAGESUB:e=>{let t=Formulas.getArrayByPath(e);return Formulas.AVERAGE(...t)},CEILING:(e,t)=>{if(e=Formulas.parseNumber(e),t=Formulas.ABS(t),0===t)return 0;let i=-Math.floor(Math.log(t)/Math.log(10));return e>0?Formulas.ROUND(Math.ceil(e/t)*t,i):Formulas.ROUND(Math.floor(e/t)*t,i)},COUNT:(...e)=>e.length,COUNTSUB:e=>{let t=e.data;return t.length},COUNTIF:(list,condition)=>{condition.startsWith(">")||condition.startsWith("<")||(condition=isNaN(condition)?"==='"+condition+"'":"==="+condition);let i=0;return list.forEach(item=>{eval("item"+condition)&&i++}),i},COUNTIFSUB:(e,t)=>{let i=Formulas.getArrayByPath(e);return Formulas.COUNTIF(i,t)},FIXED:(e,t)=>(e=Formulas.parseNumber(e),t=Formulas.parseNumber(t),Number(e).toFixed(t)),FLOOR:(e,t)=>{if(e=Formulas.parseNumber(e),t=Formulas.ABS(t),0===t)return 0;let i=-Math.floor(Math.log(t)/Math.log(10));return e>0?Formulas.ROUND(Math.floor(e/t)*t,i):Formulas.ROUND(Math.ceil(e/t)*t,i)},INT:e=>(e=Formulas.parseNumber(e),parseInt(e)),LARGE:(e,t)=>(t=Formulas.parseNumber(t),e.sort((function(e,t){return t-e}))[t-1]),LARGESUB:(e,t)=>{let i=Formulas.getArrayByPath(e);return Formulas.LARGE(i,t)},LOG:(e,t)=>(e=Formulas.parseNumber(e),t=Formulas.parseNumber(t),0===t?0:Math.log(e)/Math.log(t)),MAX:(...e)=>(e=Formulas.parseNumberArray(e),0===e.length?0:Math.max(...e)),MAXSUB:e=>{let t=Formulas.getArrayByPath(e);return Formulas.MAX(...t)},MIN:(...e)=>(e=Formulas.parseNumberArray(e),0===e.length?0:Math.min(...e)),MINSUB:e=>{let t=Formulas.getArrayByPath(e);return Formulas.MIN(...t)},MOD:(e,t)=>{e=Formulas.parseNumber(e),t=Formulas.parseNumber(t);let i=Math.abs(e%t);return t>0?i:-i},POWER:(e,t)=>(e=Formulas.parseNumber(e),t=Formulas.parseNumber(t),Math.pow(e,t)),PRODUCT:(...e)=>{let t=1;return e.forEach(e=>{e=Formulas.parseNumber(e),t*=e}),0===e.length?0:t},PRODUCTSUB:e=>{let t=Formulas.getArrayByPath(e);return Formulas.PRODUCT(...t)},RAND:()=>Math.random(),ROUND:(e,t)=>Math.round(e*10**t)/10**t,SMALL:(e,t)=>(e=Formulas.parseNumberArray(e),e.sort((function(e,t){return e-t}))[t-1]),SMALLSUB:(e,t)=>{let i=Formulas.getArrayByPath(e);return Formulas.SMALL(i,t)},SQRT:e=>(e=Formulas.parseNumber(e),Math.sqrt(e)),SUM:(...e)=>{let t=0;return e.forEach(e=>{e=Formulas.parseNumber(e),t+=e}),t},SUMSUB:e=>{let t=Formulas.getArrayByPath(e);return Formulas.SUM(...t)},SUMPRODUCT:(...e)=>{if(!e)return 0;let t=Number.MAX_VALUE,i=0;e.forEach(e=>{e.length<t&&(t=e.length)});for(let a=0;a<t;a++){let t=1;for(let i=0;i<e.length;i++)t*=Formulas.parseNumber(e[i][a]);i+=t}return i},SUMPRODUCTSUB:(...e)=>{if(!e)return 0;let t=[];return e.forEach(e=>{t.push(Formulas.getArrayByPath(e))}),Formulas.SUMPRODUCT(...t)},CONCATENATE:(...e)=>{let t="";return e.forEach(e=>{e&&(t+=e)}),t},CHAR:e=>(e=Formulas.parseNumber(e),String.fromCharCode(e)),EXACT:(e,t)=>e===t,ISEMPTY:e=>!!e,LEFT:(e,t)=>(t=Formulas.parseNumber(t),e.substr(e,t)),LEN:e=>e.length,LOWER:e=>e.toLowerCase(),MID:(e,t,i)=>e.substr(t-1,i),REPLACE:(e,t,i,a)=>{let s=Formulas.MID(e,t,i);return s?e.replace(s,a):e+a},REPT:(e,t)=>{let i="";for(let a=0;a<Formulas.parseNumber(t);a++)i+=e;return i},RIGHT:(e,t)=>e.substr(e.length-t,e.length),UPPER:e=>e.toUpperCase(),TEXT:e=>e+"",VALUE:e=>Formulas.parseNumber(e),TRIM:e=>e.trim(),COUNTNO:(e,t)=>""==e?0:e.indexOf(t)>-1?e.split(t).length:1,AND:(...e)=>{let t=!0;return e.forEach(e=>{e||(t=!1)}),t},FALSE:()=>!1,IF:(e,t,i)=>e?t:i,NOT:e=>!e,OR:(...e)=>{let t=!1;return e.forEach(e=>{e&&(t=!0)}),t},TRUE:()=>!0,XOR:(...e)=>{let t=0;return e.forEach(e=>{e||t++}),t!==e.length&&0!==t},DATE:e=>{let t=Formulas.parseDate(e);if("Invalid Date"!=t)return t;element_ui__WEBPACK_IMPORTED_MODULE_0__["Notification"].error({title:"错误",message:"无效日期"})},DATEDELTA:(e,t)=>{let i=new Date(e).getTime();return i+=864e5*t,Formulas.DATE(i)},HALFDAY:(e,t)=>{let i=.5,a=Formulas.second(Formulas.parseStringToDate(e)),s=Formulas.second(Formulas.parseStringToDate(t));if(isNaN(a)||isNaN(s))return"";let l=Math.ceil((s-a)/43200);return l*i},COUNTHOURS:(e,t)=>{let i=Formulas.second(Formulas.parseStringToDate(e)),a=Formulas.second(Formulas.parseStringToDate(t));if(isNaN(i)||isNaN(a))return"";let s=Math.ceil((a-i)/3600);return s},DAY:e=>{let t=Formulas.DATE(e);return t.getDate()},DAYS:(e,t)=>{let i=Formulas.serial(Formulas.parseStringToDate(e)),a=Formulas.serial(Formulas.parseStringToDate(t));return isNaN(i)||isNaN(a)?"":a-i},DAYS360:(e,t,i)=>{if(!e||!t)return 0;e=Formulas.parseStringToDate(e),t=Formulas.parseStringToDate(t);let a,s,l=e.getMonth(),n=t.getMonth();if(i)a=31===e.getDate()?30:e.getDate(),s=31===t.getDate()?30:t.getDate();else{let i=new Date(e.getFullYear(),l+1,0).getDate(),o=new Date(t.getFullYear(),n+1,0).getDate();a=e.getDate()===i?30:e.getDate(),t.getDate()===o?a<30?(n++,s=1):s=30:s=t.getDate()}return 360*(t.getFullYear()-e.getFullYear())+30*(n-l)+(s-a)},HOUR:e=>{let t=Formulas.DATE(e);return t.getHours()},ISOWEEKNUM:e=>{e=Formulas.parseStringToDate(e),e.setHours(0,0,0),e.setDate(e.getDate()+4-(e.getDay()||7));let t=new Date(e.getFullYear(),0,1);return Math.ceil(((e-t)/864e5+1)/7)},MINUTE:e=>{let t=Formulas.DATE(e);return t.getMinutes()},MONTH:e=>{let t=Formulas.DATE(e);return t.getMonth()+1},NOW:()=>Formulas.parseDate((new Date).getTime()),SECOND:e=>{let t=Formulas.DATE(e);return t.getSeconds()},SYSTIME:()=>{},TIME:(e,t,i)=>(e=Formulas.parseNumber(e),t=Formulas.parseNumber(t),i=Formulas.parseNumber(i),e=e<0?0:e,t=t<0?0:t,i=i<0?0:i,(3600*e+60*t+i)/86400),TIMESTAMP:e=>{if(e)return e=Formulas.parseStringToDate(e),e.getTime()},TODAY:()=>(new Date).format(_utils_js__WEBPACK_IMPORTED_MODULE_1__["a"].isMobile()?"yyyy/MM/dd HH:mm:ss":"yyyy-MM-dd HH:mm:ss"),WEEKNUM:(e,t)=>{if(!e)return;if(e=Formulas.parseStringToDate(e),void 0===t&&(t=1),21===t)return Formulas.ISOWEEKNUM(e);let i=Formulas.WEEK_STARTS[t],a=new Date(e.getFullYear(),0,1),s=a.getDay()<i?1:0;return a-=24*Math.abs(a.getDay()-i)*60*60*1e3,Math.floor((e-a)/864e5/7+1)+s},YEAR:e=>{let t=new Date(e);return t.getFullYear()},UUID:()=>{function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},WEEKDAY:(e,t)=>{if(!e)return;e=Formulas.parseStringToDate(e);const i=["日","一","二","三","四","五","六"],a=e.getDay();return t?a:"星期"+i[a]},CURRENCY:e=>{let t=Formulas.parseNumber(e);return _utils_js__WEBPACK_IMPORTED_MODULE_1__["a"].convertCurrency(t)},THOUSAND:e=>{(e||0===e)&&(e+="");let t=/(\d)(?=(?:\d{3})+\b)/g;return e&&e.replace(t,"$1,")},throwErr(e,t){throw element_ui__WEBPACK_IMPORTED_MODULE_0__["Notification"].error({title:t+"公式运算错误",message:e}),e},typeofType(e,t){if(""!==e&&typeof e!=t)throw"传入参数必须是"+t+"类型"},parseNumber(e){return e=parseFloat(e),isNaN(e)?0:e},parseNumberArray(e){return e.map(e=>Formulas.parseNumber(e))},parseDate(e){return e=Formulas.parseNumber(e),new Date(e)},parseStringToDate(e){return e?new Date(Date.parse(e.replace(/-/g,"/"))):new Date("")},getArrayByPath(e){let t=[];return e.data?(e.data.forEach(i=>{t.push(Formulas.parseNumber(i[e.path]))}),t):t},serial(e){let t=e>-22038912e5?2:1;return Math.ceil((e-Formulas.d1900)/864e5)+t},second(e){let t=e>-22038912e5?2:1;return Math.ceil((e-Formulas.d1900)/1e3)+t},install:e=>{e.prototype.$Formulas=Formulas}}},"35a8":function(e,t,i){},"3a16":function(e,t,i){"use strict";i("1191")},"3b02":function(e,t,i){},"3b5c":function(e,t,i){},"3c76":function(module,__webpack_exports__,__webpack_require__){"use strict";var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("8bbf"),vue__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(vue__WEBPACK_IMPORTED_MODULE_0__);__webpack_exports__["a"]={name:"HtCustomComponent",componentName:"HtCustomComponent",props:["data","permission","ccAlias"],data(){return{loadOver:!1,vueObj:{},component:{},componentName:""}},methods:{init(){if(this.component={},this.vueObj.jsCode){let jsCode=Base64.decode(this.vueObj.jsCode,"utf-8"),parseJsCode=function(){return eval("(function(){return {"+jsCode+"} })()")};this.component=parseJsCode()}if(this.component.props=["data","permission","vueObj","component"],this.vueObj.template?this.component.template=Base64.decode(this.vueObj.template,"utf-8"):this.component.template="<div></div>",this.vueObj.dataCode){let dataCodeStr=Base64.decode(this.vueObj.dataCode),parseDataCode=function(){return eval("(function(){return "+dataCodeStr+" })()")},data=parseDataCode();this.component.data=function(){return data}}this.componentName=this.ccAlias+"-component",vue__WEBPACK_IMPORTED_MODULE_0___default.a.component(this.componentName,this.component),this.loadOver=!0}},mounted(){},created(){this.$requestConfig.getFormCustomComponentByAlias(this.ccAlias).then(e=>{this.vueObj=e,this.init()})}}},"3dbf":function(e,t,i){},"3e58":function(e,t,i){"use strict";i("3187")},"3f39":function(e,t,i){"use strict";i("687f")},4092:function(e,t,i){},4154:function(e,t,i){"use strict";i("0bba")},"424b":function(e,t,i){},"42de":function(e,t,i){"use strict";i("94df")},4538:function(e,t,i){"use strict";i("d678")},"45b3":function(e,t,i){"use strict";i("79e1")},"45fd":function(e,t,i){"use strict";function a(e){return window.navigator.userAgent.indexOf("Chrome")>=1||window.navigator.userAgent.indexOf("Safari")>=1?window.webkitURL.createObjectURL(e):window.URL.createObjectURL(e)}i.d(t,"a",(function(){return a}))},4767:function(e,t,i){"use strict";i("54ed")},"48b0":function(e,t,i){},"49a8":function(e,t,i){},"4afe":function(e,t,i){"use strict";i("5f7b")},"4b76":function(e,t,i){},"4c6c":function(e,t,i){"use strict";i("1907")},"4d09":function(e,t,i){},"4e5d":function(e,t,i){},"4ebe":function(module,__webpack_exports__,__webpack_require__){"use strict";var _utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("025e"),_util_base64__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("c46f"),jquery__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("c5e1"),jquery__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_2__);__webpack_exports__["a"]={name:"HtTemplateForm",props:{templateKey:{type:String},action:{type:String},isShare:{type:Boolean},openType:{type:String},dataParam:String,inDialog:{type:Boolean,default:!1},dialogParam:{type:Object},isCustomHandleClose:{type:Boolean,default:!1},quitAfterSaving:{type:Boolean,default:!1},showOperation:{type:Boolean,default:!0},isMobile:{type:Boolean,default:!1}},data(){return{alias_new:"statement",html:null,data:null,permission:null,reloadOnlineForm:!1,isView:!1,disabled:!1,boAlias:"",id:"",startFlow:!1,recordId:"",defKey:"",formKey:"",fillField:"",fillValue:"",bindList:[],print:!1,isShow:!0,tempAlias:"",startLable:"发起流程",printLable:"打印"}},computed:{closeSave(){return!(!this.$route.query.quitAfterSaving||"true"!=this.$route.query.quitAfterSaving)||this.quitAfterSaving}},watch:{templateKey:function(e,t){e&&t&&e!=t&&this.init()},permission:{handler(e){if(this.formKey&&"get"==this.action)for(let t in e.fields[this.formKey])"w"==e.fields[this.formKey][t]&&(e.fields[this.formKey][t]="r")},deep:!0}},updated(){let e=window.location.href.split("?")[0].split("/");"get"!=this.action&&"get"!=e[e.length-1]&&"get"!=e[e.length-2]||(this.isShow=!1),window.location.href.split("?")[1]&&window.location.href.split("?")[1].split("&")&&window.location.href.split("?")[1].split("&")[1]&&"startFlow=false"==window.location.href.split("?")[1].split("&")[1]&&(this.startFlow=!1),this.dialogParam&&this.dialogParam.isStartFlow&&(this.startFlow=!1)},created(){this.init()},methods:{loadSuccess(){this.$route.query.isPrint&&this.printDetail()},printDetail(){this.$refs.btnRegion.style.display="none",setTimeout(()=>{const e=jquery__WEBPACK_IMPORTED_MODULE_2___default()("input");e.each((function(){jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).attr("value",jquery__WEBPACK_IMPORTED_MODULE_2___default()(this).val())}));const t=jquery__WEBPACK_IMPORTED_MODULE_2___default()("textarea");if(t)for(var i=0;i<t.length;i++)jquery__WEBPACK_IMPORTED_MODULE_2___default()(t[i]).html(t[i].value);document.body.innerHTML=document.getElementsByClassName("custom-form")[0].innerHTML,window.print(),this.$refs.btnRegion.style.display="block",location.reload()},500)},getFormData(e){return this.$refs.onlineForm.getData(e)},start(){this.getFormData(!0).then(e=>this.processStart(e)).catch(()=>{})},processStart(e){let t={flowKey:this.defKey};e&&(t.data=Object(_util_base64__WEBPACK_IMPORTED_MODULE_1__["b"])(JSON.stringify(e))),this.disabled=!0,this.$requestConfig.start(t).then(()=>{this.close(!0)}).catch(()=>{this.disabled=!1})},boSave(e){this.getFormData(!0).then(t=>{let i={boAlias:this.boAlias,boData:t};this.disabled=!0,e&&(i.delDraftId=e),i.formKey=this.formKey,i.templateKey=this.templateKey,this.$requestConfig.boSave(i).then(e=>{if(e.state){if(this.closeSave)return void this.close();"edit"===this.action||"add"===this.action?(this.$message.success(e.message),this.isMobile?this.$dialog.confirm({title:"提示",message:"保存成功，是否退出？",confirmButtonText:"立即退出",cancelButtonText:"继续操作"}).then(()=>{this.close(!1)}).catch(()=>{this.$refs.onlineForm.init(),this.disabled=!1,"editDraft"===this.action?this.editDraftHandler():this.handler()}):this.$confirm("保存成功，是否退出？","提示",{confirmButtonText:"立即退出",cancelButtonText:"继续操作",type:"warning"}).then(()=>{this.close(!1)}).catch(()=>{this.$refs.onlineForm.init(),this.disabled=!1,"editDraft"===this.action?this.editDraftHandler():this.handler()})):this.close(!0)}else this.disabled=!1}).catch(()=>{this.disabled=!1})}).catch(()=>{})},boSaveAndDelDraft(){this.boSave(this.draftId)},boSaveDraft(){this.getFormData(!1).then(e=>{let t={tempAlias:this.tempAlias,dataJson:JSON.stringify(e)};this.draft&&(t.id=this.draft.id,t.title=this.draft.title,t.createBy=this.draft.createBy,t.createTime=this.draft.createTime),this.disabled=!0,this.$requestConfig.boSaveDraft(t).then(e=>{e.state?(this.$message.success(e.message),this.inDialog||this.isCustomHandleClose?this.$emit("close"):this.$router.go(-1)):(this.disabled=!1,this.$message.error(e.message))})}).catch(()=>{})},close(){this.inDialog||this.isCustomHandleClose?this.$emit("close"):sessionStorage.getItem("replaceHome")?(this.$router.push("/"),sessionStorage.setItem("replaceHome",!1)):this.$requestConfig.goBack?this.$requestConfig.goBack():this.$router.go(-1)},handler(){let e=this;this.$requestConfig.getDataTemplateForm(this.formKey,this.boAlias,this.id||"",this.action,this.recordId||"",this.templateKey||"").then(t=>{if(t.result){if(e.data=t.data,e.bindList&&e.bindList.length>0)for(var i=0;i<e.bindList.length;i++){let t=e.bindList[i].key;void 0==e.data[e.boAlias][t]&&(t=t.toUpperCase()),""==e.data[e.boAlias][t]&&(e.data[e.boAlias][t]=e.bindList[i].value)}if(t.permission&&"get"==e.action){const i=t.permission;let s="";if(s="manage"==e.type?"w":"r",i.fields&&s)for(let e in i.fields){const t=i.fields[e];if(t)for(var a in t)("w"==s||"r"==s&&"n"!=t[a])&&(t[a]=s);i.fields[e]=t}if(i.table&&s)for(let e in i.table){const t=i.table[e];t&&("w"==s?(t["hidden"]=!1,t["add"]=!0,t["del"]=!0):"r"==s&&(t["add"]=!1,t["del"]=!1,t["required"]=!1,t["edit"]=!1)),i.table[e]=t}e.permission=i}else e.permission=t.permission;e.html=t.form.formHtml,this.handlerJs(t.form),this.handlerParams()}})},handlerJs(rep){let _this=this;_this.reloadOnlineForm=!0,setTimeout(()=>{eval(rep.diyJs)},10)},handlerParams(){if(this.dataParam){let e=JSON.parse(Object(_util_base64__WEBPACK_IMPORTED_MODULE_1__["a"])(this.dataParam));for(let t in e)this.data[this.boAlias][t]=e[t]}},editDraftHandler(){let e=this;this.$requestConfig.getTempDraftData(e.draftId).then(t=>{t.result&&(e.data=t.data,e.draft=t.draft,t.permission&&(e.permission=t.permission),e.html=t.form.formHtml,this.handlerJs(t.form))})},init(){this.id=this.inDialog?this.dialogParam.id:_utils_js__WEBPACK_IMPORTED_MODULE_0__["a"].getUrlKey("id"),this.recordId=this.inDialog?this.dialogParam.recordId:_utils_js__WEBPACK_IMPORTED_MODULE_0__["a"].getUrlKey("recordId");let e=this.inDialog?this.dialogParam.bindList:_utils_js__WEBPACK_IMPORTED_MODULE_0__["a"].getUrlKey("bindList");e&&(this.bindList=JSON.parse(Object(_util_base64__WEBPACK_IMPORTED_MODULE_1__["a"])(decodeURIComponent(e)))),this.draftId=this.inDialog?this.dialogParam.draftId:_utils_js__WEBPACK_IMPORTED_MODULE_0__["a"].getUrlKey("draftId"),this.isView="get"==this.action;let t=this;this.$requestConfig.getBpmDataTemplateInfo({templateKey:this.templateKey}).then(e=>{if(e.state){if(2==e.value.allowShare&&t.isShare)return void t.$router.push("/messageFillPage/5");if(t.boAlias=e.value.boDefAlias,t.defKey=e.value.defId,t.formKey=t.isMobile?e.value.mobileFormAlias:e.value.formKey,t.tempAlias=e.value.alias,e.value.manageField){let t=JSON.parse(e.value.manageField);t.forEach(e=>{"startFlow"==e.name?e.right&&this.getStartFlowRight(e.right).then(t=>{t?(this.startFlow=!0,this.startLable=e.desc):this.startFlow=!1}).catch(()=>{this.startFlow=!1}):"print"==e.name&&(this.printLable=e.desc)})}else this.startFlow=!0;this.reloadOnlineForm=!1,"editDraft"===this.action?this.editDraftHandler():this.handler()}})},getStartFlowRight(e){return new Promise(t=>{let i=JSON.parse(e);for(let e=0;e<i.length;e++){let a=i[e];if("everyone"==a.type)return void t(!0)}let a=this.$requestConfig.getUserId();this.$requestConfig.getUserRightMapByIds(a).then(e=>{let s=e[a];for(let a=0;a<i.length;a++){let e="pos"==i[a].type?"job":i[a].type;if(this.calcAuth(i[a].id,s[e]))return void t(!0)}t(!1)})})},calcAuth(e,t){if(!e||!t)return!1;let i=e.split(","),a=t.replace(/'/g,"").split(",");return a.some(e=>i.includes(e))}}}},"4ef4":function(e,t,i){},5118:function(e,t,i){(function(e){var a="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,s=Function.prototype.apply;function l(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new l(s.call(setTimeout,a,arguments),clearTimeout)},t.setInterval=function(){return new l(s.call(setInterval,a,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(a,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},i("aca7"),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,i("c8ba"))},5291:function(e,t,i){},"52cb":function(e,t,i){"use strict";i("ca30")},"535b":function(e,t,i){"use strict";i("4b76")},5360:function(e,t,i){"use strict";i("7619")},5421:function(e,t,i){"use strict";i("c960")},5422:function(e,t,i){"use strict";i("2b12")},"54ed":function(e,t,i){},"55f3":function(e,t,i){"use strict";i("30a8")},"565f":function(e,t,i){"use strict";i("4e5d")},5877:function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__5877__},"597c":function(e,t,i){},"59e8":function(e,t,i){"use strict";i("91ab")},"5a03":function(module,__webpack_exports__,__webpack_require__){"use strict";var _utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("025e"),FormMath={toNumber:function(e){if(null===e||void 0===e||""===e)return"";"string"==typeof e&&(e=e.replace(/,/g,""));var t=e.toString().match(/([$|￥])\d+\.?\d*/);return t&&(e=e.replace(t[1],"")),Number(e)},abs:function(e){return Math.abs(e)},round:function(e){return Math.round(e)},ceil:function(e){return Math.ceil(e)},floor:function(e){return Math.floor(e)},max:function(e){for(var t,i=0,a=e.length,s=0;s<a;s++)i=FormMath.toNumber(e[s]),isNaN(i)||""===i||(void 0===t||i>t)&&(t=i);return t=FormMath.toNumber(t),t},min:function(e){for(var t,i=0,a=e.length,s=0;s<a;s++)i=FormMath.toNumber(e[s]),isNaN(i)||""===i||(void 0===t||i<t)&&(t=i);return t=FormMath.toNumber(t),t},sqrt:function(e){return Math.sqrt(e)},average:function(e){for(var t,i=0,a=e.length,s=0;s<a;s++)i=FormMath.toNumber(e[s]),isNaN(i)||""===i||(void 0===t?t=i:t+=i);return t=FormMath.toNumber(t/a),t},sum:function(e){for(var t,i=0,a=e.length,s=0;s<a;s++)i=FormMath.toNumber(e[s]),isNaN(i)||""===i||(void 0===t?t=i:t+=i);return t=FormMath.toNumber(t),t},tofixed:function(e,t){var i=FormMath.toNumber(e);return t=FormMath.toNumber(t),isNaN(i)||""===i||isNaN(t)?e:i.toFixed(t)},convertCurrency:function(e){var t=FormMath.toNumber(e);return isNaN(t)?e:_utils_js__WEBPACK_IMPORTED_MODULE_0__["a"].convertCurrency(t)},parseFuncexpField:e=>{var t=/[{|[].*?\((.*?)\)[}|\]]/g,i=t.exec(e),a=[];while(null!=i){for(var s,l=i[1],n=!1,o=0;s=a[o++];)s==l&&(n=!0);n||a.push(l),i=t.exec(e)}return a},calcSubExpValue:function(exp,scope,prefix,index){if(!exp||!scope||!prefix)return 0;var reg=/\{.*?\((.*?)\)\}/g;return exp=exp.replace(reg,(function(){var e=arguments[1],t=0;if(2!=e.split(".").length)throw`子表运算中${e}必须为xxx.xxx格式的表达式`;var i=_utils_js__WEBPACK_IMPORTED_MODULE_0__["a"].getValueByPath(scope,`${prefix}[${index}].${e.split(".")[1]}`);return i=FormMath.toNumber(i),isNaN(i)||""==i||(t=i),t})),"FormMath.tofixed"!=exp.substring(0,16)?FormMath.isValue(FormMath.tofixed(eval(`(${exp})`),0)):FormMath.isValue(eval(`(${exp})`))},calcExpValue:function(exp,scope){if(!exp)return 0;var reg=/([\[|\{]).*?\((.*?)\)[\}|\]]/g;return exp=exp.replace(reg,(function(){var e=arguments[1],t=arguments[2],i=0;if(scope)if("["==e){var a=[],s=t.split(".");if(s.length<1)throw`子表统计的表达式${t}错误`;const e=s.length;var l=s[e-1],n=s.filter((t,i)=>i<e-1),o=n.join("."),r=_utils_js__WEBPACK_IMPORTED_MODULE_0__["a"].getValueByPath(scope,o);if(r&&r.length>0)for(var c,h=0;c=r[h++];)a.push(c[l]);i="["+a.join(",")}else{var u=_utils_js__WEBPACK_IMPORTED_MODULE_0__["a"].getValueByPath(scope,t);u=FormMath.toNumber(u),isNaN(u)||""==u||(i=u)}return i||(i=0),i})),"FormMath.tofixed"!=exp.substring(0,16)?FormMath.isValue(FormMath.tofixed(eval(`(${exp})`),0)):FormMath.isValue(eval(`(${exp})`))},isValue:function(e){return e?"Infinity"==e?"":e:""}};__webpack_exports__["a"]=FormMath},"5a63":function(e,t,i){"use strict";i("243d")},"5ad0":function(e,t,i){},"5c25":function(e,t){e.exports="data:image/png;base64,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"},"5ee2":function(e,t,i){"use strict";i("047f")},"5f72":function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__5f72__},"5f722":function(e,t){e.exports=require("element-resize-detector")},"5f7b":function(e,t,i){},"5ff6":function(e,t,i){},"60bb":function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__60bb__},"647e":function(e,t,i){},"64bf":function(e,t,i){"use strict";i("65a6")},"65a6":function(e,t,i){},6669:function(e,t,i){"use strict";i("ac18")},6858:function(e,t,i){},"687f":function(e,t,i){},"68d7":function(e,t,i){},"690d":function(e,t,i){"use strict";i("ba07")},"69da":function(module,__webpack_exports__,__webpack_require__){"use strict";var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("8bbf"),vue__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(vue__WEBPACK_IMPORTED_MODULE_0__),_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("025e"),_mixins_permission_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("d215"),_mixins_inputName_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("895f"),_mixins_form_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("e49c"),_util_base64__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("c46f");__webpack_exports__["a"]={name:"HtEditor",mixins:[_mixins_inputName_js__WEBPACK_IMPORTED_MODULE_3__["a"],_mixins_permission_js__WEBPACK_IMPORTED_MODULE_2__["a"],_mixins_form_js__WEBPACK_IMPORTED_MODULE_4__["a"]],props:{value:String,textValue:String,showBorder:{type:Boolean,default:!0},borderColor:{type:String,default:"#ccc"},borderWidth:{type:Number,default:1},disabled:{type:Boolean,default:!1},config:{type:Object,default:()=>({})},encode:{type:Boolean,default:!1},noToolbar:{type:String,default:"false"},initialFrameWidth:{type:String,default:""},type:{type:String,default:""},initialFrameHeight:{type:String,default:"300"},customMenus:{type:Array,default:()=>["head","bold","fontSize","fontName","italic","underline","strikeThrough","indent","lineHeight","foreColor","backColor","link","list","todo","justify","quote","emoticon","image","video","table","code","splitLine","undo","redo"]}},data(){return{editor:null,editorId:"editor_"+_utils_js__WEBPACK_IMPORTED_MODULE_1__["a"].getName(),compiledTextValue:null,formInstance:null}},computed:{hasTextValue(){return null!=this.textValue&&void 0!=this.textValue},inputVal(){return this.hasTextValue?this.compiledTextValue:this.getValue(this.value)},textDivStyle(){return{border:`${this.borderWidth}px solid ${Object(_util_base64__WEBPACK_IMPORTED_MODULE_5__["a"])(this.borderColor)}`,padding:"0 10px"}},styleEditor(){let e={};return this.initialFrameWidth&&(e={width:this.initialFrameWidth+"px"}),e}},watch:{value:function(e){if(this.editor&&e){let t=this.editor.txt.html();t!==e&&Object(_util_base64__WEBPACK_IMPORTED_MODULE_5__["b"])(t)!==e&&this.editor.txt.html(this.getValue(e))}},textValue:{handler:function(e){this.loadCompiledTextValue(e)},immediate:!0},permission_sub:function(e,t){e!==t&&"n"==e&&this.destroyEditor()},inputWriteable:function(e,t){e!==t&&(e&&!this.hasTextValue&&this.initEditor(),e&&!this.hasTextValue||this.destroyEditor())},formInstance:function(e,t){!t&&e&&e.$on&&(e.$off("updateData",this.loadCompiledTextValue),e.$on("updateData",this.loadCompiledTextValue))}},mounted(){this.initEditor()},beforeDestroy(){this.formInstance&&this.formInstance.$off&&this.formInstance.$off("updateData",this.loadCompiledTextValue),this.destroyEditor()},methods:{destroyEditor(){this.editor&&(this.editor.destroy(),this.editor=null)},initEditor(){if(!this.$WangEditor)throw this.$t("ht.editor.errorMsg");if(this.editor||!this.inputWriteable||this.hasTextValue)return;const that=this;this.$nextTick(()=>{if(!this.inputWriteable)return;this.editor=new this.$WangEditor("#"+this.editorId),Object.assign(this.editor.config,this.$WangEditorConfig,this.config,{onchange(){that.$emit("change",that.setValue(that.editor.txt.html())),that.$emit("input",that.setValue(that.editor.txt.html()))},onblur(e){that.$emit("onblur",that.setValue(e))},onfocus(e){that.$emit("onfocus",that.setValue(e))}});let menus=[...this.customMenus];eval(this.noToolbar)&&(menus=[]),this.editor.config.zIndex=0,this.editor.config.height=eval(this.initialFrameHeight),this.editor.config.menus=menus,this.editor.config.uploadImgHeaders&&!this.editor.config.uploadImgHeaders.Authorization&&(this.editor.config.uploadImgHeaders.Authorization=this.$requestConfig.getToken()),this.editor.create(),this.disabled?this.editor.disable():this.editor.enable(),this.editor.txt.html(this.inputVal)})},setValue(e){return this.encode?Object(_util_base64__WEBPACK_IMPORTED_MODULE_5__["b"])(e):e},getValue(e){return this.encode?Object(_util_base64__WEBPACK_IMPORTED_MODULE_5__["a"])(e):e},loadCompiledTextValue(){this.textValue&&this.$nextTick(()=>{this.getTextValue(Object(_util_base64__WEBPACK_IMPORTED_MODULE_5__["a"])(this.textValue)).then(e=>{this.compiledTextValue=e})})},getTextValue(e){null==this.formInstance&&(this.formInstance=_utils_js__WEBPACK_IMPORTED_MODULE_1__["a"].getOnlineFormInstance(this));const t=this.formInstance||this;return new Promise(i=>{const a=vue__WEBPACK_IMPORTED_MODULE_0___default.a.extend({data(){return{data:t.data}},template:`<div>${e}</div>`}),s=(new a).$mount();s.$nextTick(()=>{i(s.$el.innerHTML)})})}}}},"6abe":function(module,__webpack_exports__,__webpack_require__){"use strict";var _util_base64__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("c46f");const dict={"zh-CN":{messages:{alpha:()=>"只能是字母",alpha_dash:()=>"只能是字母数字横线下划线",alpha_num:()=>"只能是字母数字",alpha_spaces:()=>"只能是字母空格",between:(e,t)=>`必须是大于等于${t[0]}且小于等于${t[1]}的数字`,confirmed:()=>"两次输入的值必须相同",digits:(e,t)=>`必须是${t[0]}位的数字`,email:()=>"不是有效的邮箱地址",is:(e,t)=>"内容必须是"+t[0],max:(e,t)=>"文本长度不能超过"+t[0],max_value:(e,t)=>"数值不能大于"+t[0],min:(e,t)=>"文本长度至少需要"+t[0],min_value:(e,t)=>"数值不能小于"+t[0],numeric:()=>"请输入整数",regex:(field,args)=>{let msg="校验失败";if(args&&args.constructor==Array){let _reg=args;if(Object(_util_base64__WEBPACK_IMPORTED_MODULE_0__["c"])(_reg[0])){let _value=Object(_util_base64__WEBPACK_IMPORTED_MODULE_0__["a"])(_reg);msg=eval("("+_value+")").regex.message}else msg=args[1]?args[1]:msg}return args&&args.constructor==Object&&(msg=args["message"]?args["message"]:msg),msg},method:(e,t)=>t&&t["message"]?t["message"]:"校验失败",required:()=>"必填",isBefore:(e,t)=>"日期必须小于"+t,isAfter:(e,t)=>"日期必须大于"+t,isEnd:(e,t)=>"日期必须小于或等于"+t,isStart:(e,t)=>"日期必须大于或等于"+t,mobile:()=>"请输入正确的手机号码",frontJSValidate:(e,t,i)=>i&&i.message?i.message:"前端js校验失败",decimal:()=>"只能输入数字",backendValidate:(e,t,i)=>{let a="后端验证失败";return t&&t.constructor==Array&&(a=t[1]?t[1]:a),t&&t.constructor==Object&&(a=t["message"]?t["message"]:a),a},id_card:()=>"请输入正确的身份证号",url:()=>"请输入正确的URL"},names:{expression:"常用语"}},"zh-TW":{messages:{alpha:()=>"只能是字母",alpha_dash:()=>"只能是字母數位橫線底線",alpha_num:()=>"只能是字母數位",alpha_spaces:()=>"只能是字母空格",between:(e,t)=>`必須是大於等於${t[0]}且小於等於${t[1]}的數位`,confirmed:()=>"兩次輸入的值必須相同",digits:(e,t)=>`必須是${t[0]}比特的數位`,email:()=>"不是有效的郵箱地址",is:(e,t)=>"內容必須是"+t[0],max:(e,t)=>"文字長度不能超過"+t[0],max_value:(e,t)=>"數值不能大於"+t[0],min:(e,t)=>"文字長度至少需要"+t[0],min_value:(e,t)=>"數值不能小於"+t[0],numeric:()=>"請輸入整數",regex:(e,t)=>{let i="校驗失敗";return t&&t.constructor==Array&&(i=t[1]?t[1]:i),t&&t.constructor==Object&&(i=t["message"]?t["message"]:i),i},method:(e,t)=>t&&t["message"]?t["message"]:"校驗失敗",required:()=>"必填",isBefore:(e,t)=>"日期必須小於"+t,isAfter:(e,t)=>"日期必須大於"+t,isEnd:(e,t)=>"日期必須小於或等於"+t,isStart:(e,t)=>"日期必須大於或等於"+t,mobile:()=>"請輸入正確的手機號碼",frontJSValidate:(e,t,i)=>i&&i.message?i.message:"前端js校驗失敗",decimal:()=>"只能輸入數字",backendValidate:(e,t,i)=>{let a="後端驗證失敗";return t&&t.constructor==Array&&(a=t[1]?t[1]:a),t&&t.constructor==Object&&(a=t["message"]?t["message"]:a),a},id_card:()=>"請輸入正確的身份證號",url:()=>"請輸入正確的URL"},names:{expression:"常用語"}},"en-US":{messages:{alpha:()=>"Must be letters",alpha_dash:()=>"Must be alphanumeric underscores",alpha_num:()=>"Must be alphanumeric",alpha_spaces:()=>"Must be letter spaces",between:(e,t)=>`Must greater than or equal to ${t[0]} and less than or equal to ${t[1]}`,confirmed:()=>"The values entered twice must be the same",digits:(e,t)=>`Must be a ${t[0]} digit`,email:()=>"Not a valid email address",is:(e,t)=>"Content must be "+t[0],max:(e,t)=>"Text length cannot exceed "+t[0],max_value:(e,t)=>"The value cannot be greater than "+t[0],min:(e,t)=>"Text length needs to be at least "+t[0],min_value:(e,t)=>"The value cannot be less than "+t[0],numeric:()=>"Please key in numbers",regex:(e,t)=>{let i="Verification failed";return t&&t.constructor==Array&&(i=t[1]?t[1]:i),t&&t.constructor==Object&&(i=t["message"]?t["message"]:i),i},method:(e,t)=>t&&t["message"]?t["message"]:"Verification failed",required:()=>"Required",isBefore:(e,t)=>"Must be less than "+t,isAfter:(e,t)=>"Must be greater than "+t,isEnd:(e,t)=>"Must be less than or equal to "+t,isStart:(e,t)=>"Must be greater than or equal to "+t,mobile:()=>"Please enter the correct phone number",frontJSValidate:(e,t,i)=>i&&i.message?i.message:"Front end JS verification failed",decimal:()=>"Can only enter numbers",backendValidate:(e,t,i)=>{let a="Backend validation failed";return t&&t.constructor==Array&&(a=t[1]?t[1]:a),t&&t.constructor==Object&&(a=t["message"]?t["message"]:a),a},id_card:()=>"Please enter the correct ID number",url:()=>"Please enter the correct URL"},names:{expression:"Common words"}}};__webpack_exports__["a"]=dict},"6ad9":function(e,t,i){"use strict";i("c647")},"6bde":function(e,t,i){"use strict";i("1ce6")},"6d96":function(e,t,i){"use strict";i("5ad0")},"6f45":function(e,t,i){},"702f":function(e,t,i){"use strict";i("68d7")},"70a4":function(e,t,i){},7619:function(e,t,i){},"76ce":function(e,t){e.exports="data:image/png;base64,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"},"78a8":function(e,t,i){"use strict";i("1612")},"79e1":function(e,t,i){},"7b1b":function(module,__webpack_exports__,__webpack_require__){"use strict";var _mixins_permission_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("d215");__webpack_exports__["a"]={name:"HtHyperlink",mixins:[_mixins_permission_js__WEBPACK_IMPORTED_MODULE_0__["a"]],props:{desc:String,address:String,target:String,login:{type:Boolean,default:!0,require:!1},formData:{type:Object,require:!1}},data(){return{targetAddress:"",data:{},loginToken:"",title:""}},created(){},watch:{address:{handler(e){this.targetAddress=e}},formData:{handler(e){this.data=e,""===this.loginToken&&(this.loginToken=this.$requestConfig.getToken().replace("Bearer ","")),this.change()},immediate:!0,deep:!0}},methods:{change(){let url="",temp=this.address.replaceAll("{{","'+this.").replaceAll("}}","+'"),add=eval("'"+temp+"'");this.login&&(url=-1!==add.indexOf("?")?add+"&token="+this.loginToken:add+"?token="+this.loginToken),this.targetAddress=url,-1!==this.desc.indexOf("{{")?this.title=eval(this.desc.replaceAll("{{","{{this.")):this.title=this.desc}}}},"7ced":function(e,t,i){},"7ffd":function(e,t,i){},"800a":function(e,t,i){},"80a3":function(e,t,i){"use strict";i("f567")},8212:function(e,t,i){"use strict";i("ad78")},"83a4":function(e,t,i){"use strict";i("eef7")},"83ee":function(e,t,i){"use strict";i("0f36")},"863b":function(e,t,i){"use strict";i("00f7")},8653:function(e,t,i){"use strict";i("800a")},"893c":function(e,t,i){},"895f":function(e,t,i){"use strict";var a=i("025e"),s=i("fe07");t["a"]={props:{name:String,modelName:String,size:{type:String,validator(e){return["large","medium","small","mini"].includes(e)}},placeholder:{type:String,default(){return Object(s["c"])("ht.common.enter")}}},data(){return{inputNameLast:""}},computed:{inputSize(){return this.size||this.$HOTENT.size},inputName:function(){return this.inputNameLast&&this.inputNameLast.includes("__")||(this.inputNameLast=this.name?`${this.name}__${a["a"].getName()}`:a["a"].getName()),this.inputNameLast}}}},"8a57":function(e,t,i){"use strict";i("7ced")},"8bbf":function(e,t){e.exports=require("vue")},"8d8b":function(module,__webpack_exports__,__webpack_require__){"use strict";var _utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("025e"),vee_validate__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("9718"),vee_validate__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(vee_validate__WEBPACK_IMPORTED_MODULE_1__),_locale_validate_dict_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("6abe"),_util_base64__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("c46f"),_locale__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("fe07");const validate={install:Vue=>{Vue.use(vee_validate__WEBPACK_IMPORTED_MODULE_1___default.a,{fieldsBagName:"inputs",events:"change|blur"}),vee_validate__WEBPACK_IMPORTED_MODULE_1__["Validator"].localize(_locale_validate_dict_js__WEBPACK_IMPORTED_MODULE_2__["a"]);const getDatevalAndCompare=function(e,t,i){let a=t;if(!a)return!0;let s="";e&&e.constructor==String?s=e:e&&"object"==typeof e&&(s=e.value);let l=!1;return 1==i?l=_utils_js__WEBPACK_IMPORTED_MODULE_0__["a"].dateIsBefore(s,a):2==i?l=_utils_js__WEBPACK_IMPORTED_MODULE_0__["a"].dateIsBefore(s,a,!0):3==i?l=_utils_js__WEBPACK_IMPORTED_MODULE_0__["a"].dateIsBefore(a,s):4==i&&(l=_utils_js__WEBPACK_IMPORTED_MODULE_0__["a"].dateIsBefore(a,s,!0)),l},datelessthan={validate:(e,[t])=>getDatevalAndCompare(e,t,1)},daterangeend={validate:(e,[t])=>getDatevalAndCompare(e,t,2)},datemorethan={validate:(e,[t])=>getDatevalAndCompare(e,t,3)},daterangestart={validate:(e,[t])=>getDatevalAndCompare(e,t,4)},regexTest=(reg,value)=>{if(reg){if(reg.constructor==String){let _reg=reg;if(Object(_util_base64__WEBPACK_IMPORTED_MODULE_3__["c"])(reg)){let _value=Object(_util_base64__WEBPACK_IMPORTED_MODULE_3__["a"])(reg);_reg=eval("("+_value+")").regex.exp}return"/"===_reg[_reg.length-1]&&(_reg=_reg.slice(0,_reg.length-1)),"/"===_reg[0]&&(_reg=_reg.slice(1,_reg.length)),new RegExp(_reg).test(value)}return reg.constructor!=RegExp||reg.test(value)}return!0};vee_validate__WEBPACK_IMPORTED_MODULE_1__["Validator"].extend("isBefore",datelessthan),vee_validate__WEBPACK_IMPORTED_MODULE_1__["Validator"].extend("isAfter",datemorethan),vee_validate__WEBPACK_IMPORTED_MODULE_1__["Validator"].extend("isEnd",daterangeend),vee_validate__WEBPACK_IMPORTED_MODULE_1__["Validator"].extend("isStart",daterangestart),vee_validate__WEBPACK_IMPORTED_MODULE_1__["Validator"].extend("date",{validate:e=>{if(e){let i="";if(e.constructor==String)i=e;else if("object"==typeof e&&(i=e.value,!i||e.constructor==Date||i&&i.constructor==Date))return!0;var t=/^([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})-(((0[13578]|1[02])-(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)-(0[1-9]|[12][0-9]|30))|(02-(0[1-9]|[1][0-9]|2[0-8])))/g.test(i.trim());return t}return!0}}),vee_validate__WEBPACK_IMPORTED_MODULE_1__["Validator"].extend("confirmed",{validate:(e,[t])=>!e||e==t}),vee_validate__WEBPACK_IMPORTED_MODULE_1__["Validator"].extend("regex",{validate:(e,t)=>{if(!t)return!0;if(t.constructor==Array)return regexTest(t[0],e);if(t.constructor==Object){const i=t["exp"];return regexTest(i,e)}return!0}}),vee_validate__WEBPACK_IMPORTED_MODULE_1__["Validator"].extend("numeric",{validate:e=>!e||/(^-?[1-9]([0-9]*)$|^-?[0-9]$)/.test(e)}),vee_validate__WEBPACK_IMPORTED_MODULE_1__["Validator"].extend("method",{validate:(e,t)=>!t||(t.constructor==Array&&t[0]&&"function"==typeof t[0]?t[0](e,t):t.constructor!=Object||!t["callback"]||"function"!=typeof t["callback"]||t["callback"](e,t))}),vee_validate__WEBPACK_IMPORTED_MODULE_1__["Validator"].extend("mobile",{validate:e=>!e||/(^1\d{10}$)/.test(e)}),vee_validate__WEBPACK_IMPORTED_MODULE_1__["Validator"].extend("frontJSValidate",{validate:(e,t)=>new Promise(i=>{let a=t[0];a=Object(_util_base64__WEBPACK_IMPORTED_MODULE_3__["a"])(a);let s=document.getElementsByName("online-form"),l=document.getElementsByName("data-view"),n={},o="data";if(s&&1==s.length){let e=s[0].__vue__;n=JSON.parse(JSON.stringify(e.data)),o="data"}else if(l&&1==l.length){let e=l[0].__vue__.$children[0];n=JSON.parse(JSON.stringify(e.searchForm)),o="searchForm"}function r(){let t=Function("value",o,a),i=t(e,n);return i}e&&e._isVue&&(e=e.value);try{let e=r();void 0!==e&&null!==e||(e=!0),i(e)}catch(c){i({valid:!1,data:{message:Object(_locale__WEBPACK_IMPORTED_MODULE_4__["c"])("ht.validate.jsError")}})}})}),vee_validate__WEBPACK_IMPORTED_MODULE_1__["Validator"].extend("backendValidate",{validate:(e,t)=>{let i=t[0],a=t.submitFormData||!1;return new Promise(t=>{Vue.prototype.$requestConfig.backendValidate({url:i,param:e,submitFormData:a}).then(e=>{t(e&&e.valid)})})}}),vee_validate__WEBPACK_IMPORTED_MODULE_1__["Validator"].extend("id_card",{validate:e=>!e||/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/.test(e)})}};"undefined"!==typeof window&&window.Vue&&validate.install(window.Vue),__webpack_exports__["a"]=validate},"8dfe":function(e,t,i){},"8f8d":function(e,t,i){},"8fa1":function(e,t,i){},9093:function(e,t,i){"use strict";i("1fcb")},"91ab":function(e,t,i){},"91b7":function(e,t,i){"use strict";i("29c2")},9224:function(e){e.exports=JSON.parse('{"a":"1.0.13"}')},9232:function(e,t,i){"use strict";i("a651")},9333:function(e,t,i){},"93cc":function(e,t,i){"use strict";i("647e")},"94df":function(e,t,i){},"953f":function(e,t,i){},9588:function(e,t){e.exports=require("file-saver")},9718:function(e,t){e.exports=require("vee-validate")},9745:function(e,t,i){"use strict";i("6f45")},"97d6":function(e,t,i){},9813:function(e,t,i){"use strict";i("d1c5")},9942:function(e,t,i){"use strict";i("49a8")},"9a01":function(e,t,i){"use strict";i("597c")},"9c1f":function(e,t,i){"use strict";i("e672")},"9c6b":function(e,t,i){"use strict";i("6858")},"9ce6":function(e,t,i){},"9f33":function(e,t){e.exports="data:image/png;base64,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"},a002:function(e,t,i){},a091:function(e,t,i){},a128:function(e,t,i){"use strict";i("ec82")},a3a8:function(e,t,i){"use strict";i("7ffd")},a3f1:function(e,t,i){},a548:function(e,t,i){"use strict";i("ae5e")},a651:function(e,t,i){},a7fc:function(e,t,i){"use strict";i("c03f")},a8b9:function(module,__webpack_exports__,__webpack_require__){"use strict";var vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("8bbf"),vue__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(vue__WEBPACK_IMPORTED_MODULE_0__),element_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("5f72"),element_ui__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(element_ui__WEBPACK_IMPORTED_MODULE_1__),hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("025e"),hotent_ui_src_util_brower_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("45fd"),jszip__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("5877"),jszip__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(jszip__WEBPACK_IMPORTED_MODULE_4__),html2canvas__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("f230"),html2canvas__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(html2canvas__WEBPACK_IMPORTED_MODULE_5__),jquery__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("c5e1"),jquery__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_6__),lodash__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("60bb"),lodash__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_7__);const{Base64:Base64}=__webpack_require__("f43e"),axios=__webpack_require__("cebe"),{saveAs:saveAs}=__webpack_require__("9588"),req=function(e,t={},i={}){const a={url:e,data:t,method:i.method||"GET",params:i.params||{},onUploadProgress:i.onUploadProgress||null,headers:i.headers||"",responseType:i.responseType||"json"};return axios(a)};__webpack_exports__["a"]={props:{templateKey:String,defKey:String,taskType:{type:String,default:""},dataView:Object,isJoinFlow:{type:Boolean,default:!1},parameterqQuerys:String},data(){return{treeQuerys:[],alias_new:"statement",loading:!1,QRCodeurl:"",QRCodeDialog:!1,html:"",tableData:{selectRows:[],querys:""},dialogExportVisible:!1,exportData:{getType:"all",expField:[]},displayFields:[],exportSellection:[],searchForm:{},queryForm:{queryData:""},formType:!1,labelPosition:"left",incons:"el-icon-arrow-down",options:{fullscreen:!0,lock:!0},rowTemplateId:null,rowId:null,QRCodeShow:!0,asideShow:!0,QRCodeDesc:[],tree:[],customDialog:[],dialogSubVisible:!1,tabs:[],ents:[],modifyRecord:{pagination:{pageBean:{page:1,pageSize:10,total:0}}},recordList:[],recordRefId:"",dialogRecordVisible:!1,recordTableLoading:!1,multipleTemplateTableloading:!1,modifyDetailDialogVisible:!1,currentModify:{},refId:"",querySubValue:"",subTableLoading:!1,currentTabName:"",currentTab:{},exportType:"main",subDisplayFields:[],subDisplayFieldsList:[],notPrint:!1,displayField:{},treeList:[],rows:[],pagination:{page:1,pageSize:10,total:1},paginationLayout:"total, sizes, prev, pager, next, jumper",total:0,permission:{print:!0,add:!0,del:!0,export:!0,edit:!0,hidden:!1,copy:!0},showRightMenu:!0,listSelectable:!0,filters:{},sorter:null,dialogSunVisible:!1,sunTabs:[],querySunValue:"",operateColWidth:"240",summaryFields:[],dialogVisible:!1,pageResult:{page:1,pageSize:20,total:0},logData:[],notSortableFields:["bpm_status_","bpm_proc_inst_id_","bpm_subject_","bpm_proc_def_name_","bpm_create_time_","bpm_end_time_","bpm_is_forbidden_","bpm_creator_"],defaultValueList:[],ignoredAlias:["appCenterFront"],QRCodePattern:!0,QRCodeType:"",isMobile:hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_2__["a"].isMobile(),activeNames:["1"],switchMap:{},filterMap:{},dataViewDialogVisible:!1,dialogWidth:"1580px",dialogHeight:"740px",srcUrl:"",filedList:[],flowBtnPermission:{},selectedDefId:"",selectedInstId:"",selectedTaskId:"",showScriptButton:{},scriptBtnShow:{},curSelectParams:{},importCacheKey:"",isInit:!0,updatingRow:null,subDialogOptions:{import:!1,export:!0},importLogTableData:[],statusMap:{1:this.$t("ht.templatePreview.importSuccess"),0:this.$t("ht.templateImportResult.importFail")},importLogVisible:!1,importLogDefaultQuery:[{group:"main",operation:"EQUAL",property:"TEMP_ALIAS_",relation:"AND",value:this.templateKey}],quickSearchProps:[{prop:"IMPORT_ACCOUNT_",label:this.$t("ht.templatePreview.importAccount")},{prop:"IMPORT_NAME_",label:this.$t("ht.templatePreview.importUser")}],templateSearchQuery:[],hasSearchQuery:!1,hasSelectedData:!1,openType:"new",failureReasonVisible:!1,errorInfo:"",noDataImg:__webpack_require__("5c25"),filterQuerys:[],allSummaryConfig:{},customSummary:"",summaryTableData:[],mainTalbeName:"",checkRepeatObj:{},summaryTableHeight:0,defaultCurrentInnerHeight:this.currentTableHeight?window.innerHeight-280:.85*window.innerHeight,batchUpdataTitle:""}},watch:{templateSearchQuery:{handler(e){this.hasSearchQuery=e&&e.length>0},deep:!0},"tableData.selectRows":{handler(e){this.hasSelectedData=e&&e.length>0,lodash__WEBPACK_IMPORTED_MODULE_7___default.a.debounce(()=>{e&&e.length>0?(this.filterOldSummaryValByType("selected"),this.summaryTableData.unshift({project:this.$t("ht.templatePreview.selectSummary"),key:"selected",...this.getCurrentSummaryConfig(e)})):this.summaryTableData=this.summaryTableData.filter(e=>"selected"!==e.key),this.loadCompiledCustomSummary()},200)()},deep:!0},ents:{handler:function(e,t){e&&e.length>=1&&e!=t&&this.getSubData(this,this.refId)},deep:!0,immediate:!0},templateInfo:{handler:function(e){if(e&&e.id){let s=this;if(s.templateInfo=e,1==s.templateInfo.needPage&&(s.pagination.pageSize=s.templateInfo.pageSize),s.templateInfo.displayField){let e=hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_2__["a"].parseToJson(s.templateInfo.displayField);for(let t=0;t<e.length;t++)e[t]&&e[t].type&&this.displayFields.push(e[t]),this.getChildren(e[t],this.displayFields)}if(s.templateInfo.manageField){let e=["add","switch","export","import"],t=hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_2__["a"].parseToJson(s.templateInfo.manageField);for(let i=0;i<t.length;i++)-1==e.indexOf(t[i].name)&&t[i].linePosition&&this.filedList.push(t[i]);1==t.length&&"add"==t.name&&(s.showRightMenu=!1)}if(s.templateInfo.conditionField){let e=hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_2__["a"].parseToJson(s.templateInfo.conditionField);for(var t=0;t<e.length;t++){var i=e[t].colPrefix+e[t].name;this.$set(this.searchForm,i,"")}}let l={templateId:s.templateInfo.id},n={pageBean:{page:"1",pageSize:e.pageSize,showTotal:"true"}};if(l.pagination=n,s.isJoinFlow&&(l.isJoinFlow=!0,l.taskType=s.taskType,l.defKey=s.defKey),s.dataView&&(s.handelBindFiledValua(),s.dataView.selectList&&s.dataView.selectList.length>0&&(l.selectList=s.dataView.selectList),l.refIdValue=s.dataView.refIdValue),this.parameterqQuerys){var a=JSON.parse(Base64.decode(decodeURIComponent(this.parameterqQuerys)));l.pagination.querys=a}let o=this.buildDefaultQuerys();if(o.length>0&&(l.pagination.querys?l.pagination.querys.concat(o):l.pagination.querys=o),this.templateInfo.sortField){let e=JSON.parse(this.templateInfo.sortField),t=[];for(let i=0;i<e.length;i++){const a=e[i],s=this.getColPreFix(e,a.name),l=this.getQueryPre(e,a.name);t.push({property:l+s+a.name,direction:a.sort})}l.pagination.sorter=t}if(l.templateId,e.treeField&&"{}"!==e.treeField){let t=JSON.parse(e.treeField);t.alias&&(this.initTree(t),this.formGetSubEntsByFormKey())}e.summaryField&&(this.summaryFields=JSON.parse(e.summaryField))}},deep:!0,immediate:!0},currentTabName:function(e){e&&(this.querySubValue="")},rows:{handler:function(e){if(this.templateInfo.defId){let t=this,i=this.templateInfo.boDefAlias,a=[],s=this.templateInfo.pkField;e.forEach(e=>{e["bpm_proc_inst_load_done"]||a.push(e[s])}),0!=a.length&&this.$requestConfig.getInstanceByPks(a,i).then(i=>{if(i&&i.state){let a=i.value;e.forEach(e=>{let i=a[e[s]];Object.keys(i).forEach(a=>{t.$set(e,a,i[a])}),t.$set(e,"bpm_proc_inst_load_done",!0)}),this.$forceUpdate(),t.checkFlowPermission()}})}else this.multipleTemplateTableloading=!1;this.filterOldSummaryValByType("currentPage"),this.summaryTableData.unshift({project:this.$t("ht.templatePreview.currentPageSummary"),key:"currentPage",...this.getCurrentSummaryConfig(e)}),this.loadCompiledCustomSummary()}},summaryTableData(e){e&&this.$nextTick(()=>{document.getElementById("summaryDiv")&&(this.summaryTableHeight=document.getElementById("summaryDiv").clientHeight)})}},computed:{showDraftList(){return!this.isJoinFlow},navbarCollapseStyle:function(){return this.asideShow?{left:"200px"}:{left:"0px"}},tableHeaderFilters(){return Object.keys(this.statusMap).map(e=>({text:this.statusMap[e],value:e}))},showTabsList(){let e=[];return this.tabs.length>0&&(e=this.tabs.filter(e=>e.attributeList.length>0)),e},tableHeight(){return this.summaryFields&&this.summaryFields.length>0?this.defaultCurrentInnerHeight-this.summaryTableHeight:this.defaultCurrentInnerHeight}},mounted(){this.$root.$on("resize",()=>{this.defaultCurrentInnerHeight=this.currentTableHeight?window.innerHeight-280:.85*window.innerHeight}),this.handelBindFiledValua();let e=this;this.$on("data-reload-success",(function(){e.calcScriptBtnPermission()})),this.$emit("afterMounted")},methods:{getRowKey(e){return this.checkRepeatObj||(this.checkRepeatObj={}),e?e.id?this.checkRepeatObj[e.id]?(e._secondId||(e._secondId=Math.random()+""),e._secondId):(this.checkRepeatObj[e.id]=1,e.id):e.id_?this.checkRepeatObj[e.id_]?(e._secondId||(e._secondId=Math.random()+""),e._secondId):(this.checkRepeatObj[e.id_]=1,e.id_):(e._secondId||(e._secondId=Math.random()+""),e._secondId):Math.random()+""},filterOldSummaryValByType(e){const t=this.summaryTableData.map(e=>e.key);t&&t.length&&t.includes(e)&&(this.summaryTableData=this.summaryTableData.filter(t=>t.key!==e))},getAllSummary(e){const t=e.reduce((e,t)=>(e[t.field]=t.val,e),{});Object.keys(t).length&&(this.filterOldSummaryValByType("all"),this.summaryTableData.push({project:this.$t("ht.templatePreview.allSummary"),key:"all",...t}))},getCurrentSummaryConfig(e){let t={};return e&&e.length&&this.summaryFields&&this.summaryFields.map(i=>{t[i.field]=this.summary(i.method,i.field,i.decimal,e)}),t},loadCompiledCustomSummary(){this.templateInfo.summaryRegionHtml&&this.$nextTick(()=>{this.getCustomSummary(Base64.decode(this.templateInfo.summaryRegionHtml)).then(e=>{this.customSummary=e})})},getCustomSummary(e){const t=this;return new Promise(i=>{const a=vue__WEBPACK_IMPORTED_MODULE_0___default.a.extend({data(){return{summaryResult:t.summaryTableData,summaryFields:t.summaryFields,currentPageRows:t.rows,currentSelectedRows:t.tableData.selectRows}},template:`<div>${e}</div>`}),s=(new a).$mount();s.$nextTick(()=>{i(s.$el.innerHTML)})})},handleQuickSearchParams(e,t){let i=[];if(e&&t){let a=e.split(","),s=t.split("/");a.forEach((e,t)=>{i.push({label:s[t],prop:e})})}return i},getChildren(e,t){e&&e.children&&e.children.forEach(e=>{e&&e.type&&t.push(e),this.getChildren(e,t)})},handleCloseFailureReasonDialog(){this.failureReasonVisible=!1},checkFailureReason(e){this.failureReasonVisible=!0,this.$requestConfig.getImportErrorInfoById(e.id).then(e=>{e.value.reason&&(this.errorInfo=e.value.reason)})},getQueryPre(e,t){e=e||[];const i=e.find(e=>e.name===t||this.getRelevancyOldName(e,t))||{};return i.queryPre||i.tableName&&i.tableName+"."||""},getRelevancyOldName(e,t){let i=(e.tableName+e.name).replace(/_/g,"").toLowerCase();return i===t},getRelevancyProperty(e=[],t){let i=e.find(e=>(e.tableName+e.name).replace(/_/g,"").toLowerCase()===t);return i&&i.name?i.name:""},exportCommand(e){this.exports(e)},handleCloseImportLogDialog(){this.importLogVisible=!1},loadData(e,t){this.$requestConfig.getImportLogData(e).then(e=>{const{page:t,pageSize:i,total:a,rows:s}=e||{};this.importLogTableData=s,this.pageResult={page:t,pageSize:i,total:a}}).finally(()=>{t()})},renderHeaderMethod(e,{column:t}){return e("div",{class:"filter-colum__wrap"},[e("span",t.label),e("i",{class:"icon-screen el-table__column-filter-trigger"})])},headerCellClassName({column:e}){const t=["status"];if(t.includes(e.property))return"filter-column"},queryFormatterData(e,t){let i=[];if(e||0===e){let a=Base64.decode(t);if(a)if(a=JSON.parse(a)||[],"number"!=typeof e&&-1!=e.indexOf(",")){let t=e.split(",");t.forEach(e=>{let t=a.find(t=>t.key_==e)||{};i.push(t.value_||e)})}else{let t=a.find(t=>t.key_==e)||{};i.push(t.value_||e)}else i.push(e)}return i.join(",")},calcScriptBtnPermission(){let e={print:!0,add:!0,edit:!0,del:!0,batchUpdate:!0,batchSave:!0,export:!0,import:!0,switch:!0,url:!0,copy:!0,js:!0,addFlow:!0,addData:!0,searchData:!0};if(this.templateInfo&&this.templateInfo.manageField){let t=JSON.parse(this.templateInfo.manageField),i=this;t.forEach(t=>{if(t.buttonId&&(e[t.buttonId]=!0),t.beforeScriptValue){let a=i.beforeScript(t.beforeScriptValue,t);a.then(i=>{e[t.buttonId]=i,e[t.name]=i})}})}this.showScriptButton=e},getButtonShowByJs(e,t){return this.showScriptButton&&this.showScriptButton[e||t]},scriptBeforeHandler(e,t){if(e){let a=Base64.decode(e);if(void 0==a||""==a)return!0;let s=this,l=req,n=this.rows,o=t;function i(){let e=Function("_req","_this","_rows","_row",a),t=e(l,s,n,o);return t}let r=i();return r}return!0},formGetSubEntsByFormKey(){this.$requestConfig.getSubEntsByFormKey(this.templateInfo.formKey).then(e=>{e.forEach(e=>{let t=[];e.attributeList.forEach(e=>{t.push({desc:e.comment,name:e.fieldName,type:e.columnType})}),this.subDisplayFields.push({fields:t,name:e.name,comment:e.comment})})})},handleRightMenu(){if(this.$el&&this.$el.querySelector){let e=this.$el.querySelector("div.top_btn_col");e&&(e.querySelector("i.el-icon-delete")||e.querySelector("i.el-icon-edit")||e.querySelector("i.el-icon-s-grid"))||(this.listSelectable=!1);let t=this;setTimeout((function(){let e=t.$el.querySelector("td.right_menu");e&&(e.querySelector("button")||e.querySelector("switch"))||(t.showRightMenu=!1)}),200)}},loadImportLogData(e,t){let i=e.querys||[],a=!1;this.handelBindFiledValua();let s=this.dataView.refIdValue;i.forEach(e=>{"PId"==e.property&&(a=!0)}),a||(i.push({operation:"EQUAL",group:"defalut",property:"PId",relation:"AND",value:s}),i.push({operation:"EQUAL",group:"defalut",property:"boAlias",relation:"AND",value:this.templateInfo.boDefAlias})),e.querys=i,this.$requestConfig.getDataTemplateImportLogData(e).then(e=>{let t=e;this.logData=t.rows,this.pageResult={page:t.page,pageSize:t.pageSize,total:t.total}}).finally(()=>{t()})},handelBindFiledValua(){let e=this;if(this.dataView){const t=hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_2__["a"].getOnlineFormInstance(this.$parent.$parent.$parent.$parent);t.data&&!t.data[this.dataView.boDefAlias]&&this.dataView.boDefAlias&&(this.dataView.boDefAlias=Object.keys(t.data)[0]);let i=hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_2__["a"].getValueByPath(t,"data."+this.dataView.boDefAlias+".id_");sessionStorage.getItem("formImportTempRefId")&&!i?i=sessionStorage.getItem("formImportTempRefId"):i||(i=(new Date).getTime(),sessionStorage.setItem("formImportTempRefId",i)),e.dataView.refIdValue=i,t.permission&&t.permission.table&&t.permission.table[this.templateInfo.boDefAlias]&&(this.permission=t.permission.table[this.templateInfo.boDefAlias]),this.permission.hidden&&(this.$parent.showDateView=!1);let a=this.dataView.selectList;if(a&&a.length>0)for(let l=0;l<a.length;l++)if(a[l].selectField){const i="data."+this.dataView.boDefAlias+"."+a[l].selectField,s=hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_2__["a"].getValueByPath(t,i);a[l].selectValue=s,t.$watch(i,(function(t,i){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{t!==i&&e.search()},500)}))}let s=this.dataView.bindList;if(s&&s.length>0)for(let l=0;l<s.length;l++)if(s[l].fillField){const i="data."+this.dataView.boDefAlias+"."+s[l].fillField,a=hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_2__["a"].getValueByPath(t,i);s[l].fillValue=a,t.$watch(i,(function(t,i){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{t!==i&&e.search()},500)}))}}},printList(){this.notPrint=!0,setTimeout(()=>{document.body.innerHTML=document.getElementById("printData").innerHTML,window.print(),location.reload()},200),setTimeout(()=>{this.notPrint=!1},200)},printDetail(e,t,i){sessionStorage.menu_alias&&(this.alias_new=sessionStorage.menu_alias);var a="/templateForm/"+this.templateKey+"/"+i+"?single=true";t&&(a=a+"&id="+t);var s="&startFlow=false";let l=a+s;-1!=l.indexOf("othermenu")&&(l=l.replace("/othermenu","/")),this.$router.push({path:l,query:{isPrint:!0}})},complete(e,t){if("todo"==t)this.$requestConfig.getBpmTaskByInstId(e.bpm_proc_inst_id_).then(e=>{0==e.data.length?this.$message.error(this.$t("ht.templatePreview.notExist")):1==e.data.length?this.$router.push("/reportModuleInst/"+e.data[0].id+"/0/"+this.defKey+"/true/"+this.templateKey):this.$message.error(this.$t("ht.templatePreview.notSupported"))});else if("done"==t)this.$router.push("/reportModuleInstDone/"+e.bpm_proc_inst_id_+"/doneList/"+this.defKey+"/"+this.templateKey);else if("request"==t)this.$router.push("/reportModuleInstDone/"+e.bpm_proc_inst_id_+"/request/"+this.defKey+"/"+this.templateKey);else if("todoRead"==t){let t={page:1,pageSize:10,showTotal:"true"},i=e.bpm_status_;this.$requestConfig.getNoticeTodoReadList({pageBean:t,querys:[{property:"proc_inst_id_",value:e.bpm_proc_inst_id_,operation:"EQUAL",relation:"AND"}]}).then(t=>{if(t.rows&&t.rows.length>0){let a=t.rows[0].id,s="";s="FOLLOW"==i?"/reportModuleInstTaskRead/"+a+"/FOLLOW/"+this.defKey+"/"+this.templateKey:"COMMU"==i?"/reportModuleInst/"+a+"/0/"+this.defKey+"/true/"+this.templateKey:"/reportModuleInstRead/"+e.bpm_proc_inst_id_+"/read/"+a+"/"+this.defKey+"/"+this.templateKey,this.$router.push(s)}})}else if("doneRead"==t){let t={page:1,pageSize:10,showTotal:"true"};this.$requestConfig.getNoticeDoneReadList({pageBean:t,querys:[{property:"proc_inst_id_",value:e.bpm_proc_inst_id_,operation:"EQUAL",relation:"AND"}]}).then(t=>{if(t.rows&&t.rows.length>0){let i=t.rows[0].id;this.$router.push("/reportModuleInstDone/"+e.bpm_proc_inst_id_+"/read/done/"+i+"/"+this.defKey+"/"+this.templateKey)}})}else if("myRead"==t){let t={page:1,pageSize:10,showTotal:"true"};this.$requestConfig.getMyNoticeReadList({pageBean:t,querys:[{property:"proc_inst_id_",value:e.bpm_proc_inst_id_,operation:"EQUAL",relation:"AND"}]}).then(t=>{if(t.rows&&t.rows.length>0){let i=t.rows[0].id;this.$router.push("/reportModuleInstMyRead/"+e.bpm_proc_inst_id_+"/"+i+"/myRead/"+this.defKey+"/"+this.templateKey)}})}else"myDelegate"==t&&this.$router.push("/reportModuleInstRead/"+e.bpm_proc_inst_id_+"/delegate/"+this.defKey+"/"+this.templateKey)},downloadAllQRCode(e,t,i,a,s){this.QRCodePattern=s;const l=this.$refs.multipleTemplateTable.selection;if(0===l.length)return void this.$message.warning(this.$t("ht.templatePreview.selectLeastOneData"));this.loading=!0;let n=this.$requestConfig.mobileUrl,o="",r=new jszip__WEBPACK_IMPORTED_MODULE_4___default.a,c=r.folder("images"),h=[];for(let d=0;d<l.length;d++){o=(this.QRCodePattern,n+"/QRCodeForm/"+this.templateKey+"?id="+l[d][a]);let e=document.createElement("canvas");this.$qrcode.toCanvas(e,o,(function(e){console.error(e)}));let t=document.createElement("div");t.setAttribute("id","QRCodeAndDescAll"+d),t.setAttribute("style","text-align:center;width:"+e.width+"px;"),t.appendChild(e),i||(i=[]);for(let a=0;a<i.length;a++){let e=JSON.parse(i[a]);if(l[d][e.name]){let i=document.createElement("div");i.innerHTML=e.desc+":"+l[d][e.name],t.appendChild(i)}}document.getElementById("QRCodeAndDescAll").appendChild(t),h.push(this.downloadQRCodeAndDesc("#QRCodeAndDescAll"+d,t))}let u=this;Promise.all(h).then(e=>{document.getElementById("QRCodeAndDescAll").innerHTML="";for(let t=0;t<e.length;t++){let i=e[t],a=i.toDataURL().split(";base64,")[1];c.file(t+".png",a,{base64:!0})}r.generateAsync({type:"blob"}).then((function(e){let t=document.createElement("a");t.download=u.$t("ht.templatePreview.qrCode")+".zip",t.style.display="none",t.href=Object(hotent_ui_src_util_brower_js__WEBPACK_IMPORTED_MODULE_3__["a"])(e),document.body.appendChild(t),t.click(),document.body.removeChild(t)})),this.loading=!1})},onCopy(){this.$message.success(this.$t("ht.templatePreview.copy"))},onError(){this.$message.error(this.$t("ht.templatePreview.copyError"))},downloadQRCode(){let e=[],t=document.querySelector("#QRCodeAndDesc");e.push(this.downloadQRCodeAndDesc("#QRCodeAndDesc",t)),Promise.all(e).then(e=>{let t=e[0],i=document.createElement("a");i.href=t.toDataURL(),i.setAttribute("download",this.$t("ht.templatePreview.qrCode")+".jpg"),i.style.display="none",document.body.appendChild(i),i.click()})},downloadQRCodeAndDesc(e,t){let i=new Promise(i=>{let a=document.createElement("canvas"),s=parseInt(window.getComputedStyle(t).width),l=parseInt(window.getComputedStyle(t).height);a.width=2*s,a.height=2*l,a.style.width=s+"px",a.style.height=l+"px";let n=a.getContext("2d");return n.scale(2,2),html2canvas__WEBPACK_IMPORTED_MODULE_5___default()(document.querySelector(e),{canvas:a}).then((function(e){i(e)}))});return i},QRCodeDialogClose(){this.QRCodeType="",this.QRCodeDialog=!1},foundQRCode(){if("add"==this.QRCodeType){let e=this.templateInfo.defId?"true":"false";this.QRCodeurl=this.$requestConfig.mobileUrl+"/templateForm/"+this.templateKey+"/add/?startFlow="+e}else this.QRCodePattern,this.QRCodeurl=this.$requestConfig.mobileUrl+"/QRCodeForm/"+this.templateKey+"?id="+this.rowId;let e=document.getElementById("QRCode");this.$qrcode.toCanvas(e,this.QRCodeurl,(function(e){console.log(e)})),this.QRCodeShow=!0},getQRCode(e,t,i,a,s,l){this.QRCodePattern=l,this.QRCodeDesc=[],a||(a=[]);for(let n=0;n<a.length;n++){let e=JSON.parse(a[n]);this.rows[s][e.name]&&this.QRCodeDesc.push(e.desc+":"+this.rows[s][e.name])}this.mobileFormAlias=i,this.QRCodeShow=!1,this.QRCodeDialog=!0,this.rowTemplateId=e,this.rowId=t},handleSizeChange:function(e){this.pagination.page=1,this.pagination.pageSize=e,this.$refs.multipleTemplateTable.handleFilterChange()},handleCurrentChange:function(e){this.pagination.page=e,this.$refs.multipleTemplateTable.handleFilterChange()},getParam(e){let t={};if("find"==e&&(this.pagination.page=1),t=this.formType?this.getQueryFilter():jquery__WEBPACK_IMPORTED_MODULE_6___default()(".search-query").length>0?this.getConditionQuery():this.getQueryFilter(),t.pagination&&t.pagination&&t.pagination.querys){let e=[],i={};t.pagination.querys.forEach(t=>{if(!t.value||"BETWEEN"==t.operation&&t.value.constructor!=Array){if(t.value){let e=t;i[t.property]&&(e=i[t.property],e.value=[e.value],e.value.push(t.value)),i[t.property]=e}}else e.push(t)});for(const t in i)e.push(i[t]);t.pagination.querys=e}return t},search(e,t,i){let a={},s=!!this.$refs.multipleTemplateTable&&this.$refs.multipleTemplateTable.showAdvancedSearch;if(s?a=this.getQueryFilter():(e=this.handleQuickParams(e),a=this.getConditionQuery(e)),this.templateSearchQuery=a.pagination&&a.pagination.querys||[],a.pagination||(a.pagination={}),a.pagination.querys||(a.pagination.querys=[]),e&&e.sorter&&e.sorter.length>0){let t=JSON.parse(this.templateInfo.sortField);a.pagination=a.pagination||{},a.pagination.sorter=[],e.sorter.forEach(e=>{let i=this.getColPreFix(t,e.property),s=this.getQueryPre(t,e.property),l=this.getRelevancyProperty(t,e.property);l&&(e.property=l),a.pagination.sorter.push({property:s+i+e.property,direction:e.direction})})}else if(this.templateInfo.sortField){let e=JSON.parse(this.templateInfo.sortField),t=[];for(let i=0;i<e.length;i++){const a=e[i];if(!a.sort||"ASC"!=a.sort&&"DESC"!=a.sort)continue;let s=this.getColPreFix(e,a.name),l=this.getQueryPre(e,a.name);l||(s=a.joinTableField&&a.tableName?`${a.tableName}.${s}`:"t."+s),t.push({property:l+s+a.name,direction:a.sort})}a.pagination.sorter=t}else e.querys&&e.querys.length>0&&a.pagination.querys.concat(e.querys);if(a.pagination&&a.pagination.querys){let e=[],t={};a.pagination.querys.forEach(i=>{if(void 0==i.value||"BETWEEN"==i.operation&&i.value.constructor!=Array){if(i.value){let e=i;t[i.property]&&(e=t[i.property],e.value=[e.value],e.value.push(i.value)),t[i.property]=e}}else e.push(i)});for(const i in t)e.push(t[i]);a.pagination.querys=e,a.pagination.querys=a.pagination.querys?a.pagination.querys.concat(this.treeQuerys):this.treeQuerys}this.treeQuerys&&this.treeQuerys.length>0&&(a.pagination.querys=a.pagination.querys?a.pagination.querys.concat(this.treeQuerys):this.treeQuerys),this.isInit&&(this.isInit=!1,this.handleInitQuery(a)),this.dataView&&(this.handelBindFiledValua(),a.refIdValue=this.dataView.refIdValue,this.dataView.selectList&&this.dataView.selectList.length>0&&(a.selectList=this.dataView.selectList));const l=this;l.isJoinFlow&&(a.isJoinFlow=!0,a.taskType=l.taskType,a.defKey=l.defKey),jquery__WEBPACK_IMPORTED_MODULE_6___default.a.isEmptyObject(this.searchForm),this.getBpmTemplateByPagination(a,t)},handleQuickParams(e){return e&&e.querys&&e.querys.length&&e.querys.forEach(e=>{if("quick"===e.group){const t=JSON.parse(this.templateInfo.conditionField)||[];let i=t.find(t=>t.name===e.property);i&&i.queryPre&&(e.property=i.queryPre+e.property)}}),e},handleInitQuery(e){const t=JSON.parse(this.templateInfo.conditionField)||[],i=[];t.forEach(e=>{e.defaultValue&&i.push({property:`${e.queryPre||""}${e.colPrefix}${e.name}`,value:e.defaultValue,operation:e.qt.toUpperCase(),relation:"AND",group:"defaultQuery"})});const a=JSON.parse(this.templateInfo.filteringField)||[];a.forEach(e=>{e.defaultValue&&e.defaultValue.length&&i.push({property:`${e.queryPre||""}${e.colPrefix}${e.name}`,value:e.defaultValue,operation:"IN",relation:"AND",group:"defaultQuery"})}),i.length&&Array.prototype.push.apply(e.pagination.querys,i)},getBpmTemplateByPagination(e,t,i){this.multipleTemplateTableloading=!0;const a={templateId:e.templateId,queryFilter:e.pagination};e.isJoinFlow&&e.taskType&&e.defKey&&(a.isJoinFlow=e.isJoinFlow,a.taskType=e.taskType,a.defKey=e.defKey),e.selectField&&(a.selectField=e.selectField,a.selectValue=e.selectValue),e.selectList&&(a.selectList=e.selectList),a.refIdValue=e.refIdValue,this.curSelectParams=a,this.$requestConfig.getDataTemplateDataList(a).then(e=>{this.rows=e.rows,this.total=e.total,this.$set(this.pagination,"page",e.page),this.$set(this.pagination,"pageSize",e.pageSize),this.$set(this.pagination,"total",e.total),this.$set(this,"flowBtnPermission",{}),this.$emit("data-reload-success"),e.summary&&e.summary.length&&this.getAllSummary(e.summary),this.templateInfo.summaryRegionHtml&&this.loadCompiledCustomSummary()}).finally(()=>{this.multipleTemplateTableloading=!1,t&&t(),i&&i()})},getQueryFilter(){let e=this.getSearchItems(),t=this.getFieldType(),i=this.getSpecialMap(),a=[],s={},l={pageBean:this.pagination},n={templateId:this.templateInfo.id};if(n.pagination=l,!jquery__WEBPACK_IMPORTED_MODULE_6___default.a.isEmptyObject(this.searchForm)){let s=hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_2__["a"].parseToJson(this.templateInfo.conditionField);for(let l in this.searchForm)if("undefined"!=typeof this.searchForm[l]&&""!=this.searchForm[l]&&null!=this.searchForm[l])if(this.searchForm[l]instanceof Array)for(let t=0;t<this.searchForm[l].length;t++){let i=this.getQueryPre(s,l);a.push({property:i+l,value:this.searchForm[l][t],group:"main",operation:e[l],relation:"AND"})}else if(this.searchForm[l]&&[","].includes(this.searchForm[l])&&!i[l]){let t=this.searchForm[l].split(","),i=this.getQueryPre(s,l);a.push({property:i+l,value:t,group:"main",operation:e[l],relation:"AND"})}else{let i=this.searchForm[l];t[l]&&"number"==t[l]&&(i=parseFloat(this.searchForm[l]));let n=this.getQueryPre(s,l);a.push({property:n+l,value:i,group:"main",operation:e[l],relation:"AND"})}this.clearQueryByGroupName(a,"filter"),this.buildFilterParams(a)}let o=this.$refs["multipleTemplateTable"].querys;return o&&o.some(e=>"filter"===e.group)&&Array.prototype.push.apply(a,o.filter(e=>"filter"===e.group).map(e=>{let t={...e},i="",a=this.displayFields.filter(e=>e.name===t.property)[0];return a&&(i=a.colPrefix||""),t.property=`${i}${t.property}`,t})),s={pageBean:this.pagination,querys:a},n.pagination=s,n},getColPreFix(e,t){e=e||[];const i=e.find(e=>e.name===t)||{};if(!i.colPrefix&&this.displayFields){const e=this.displayFields.find(e=>e.name===t)||{};return e.colPrefix||""}return i.colPrefix},matchBind(e,t,i,a){const s=this.getBindValue(e,t);return s==i||s==a},getBindValue(e,t){if(e&&e[t])return e[t];if(this.templateInfo){const e=1===this.templateInfo.isExternal?"":"F_";t=`${this.templateInfo.mainTalbeName}${e}${t}`,t=t.toLowerCase().replaceAll("_","")}return e[t]},getBindField(e,t){if(e&&e[t])return t;if(this.templateInfo){const e=1===this.templateInfo.isExternal?"":"F_";t=`${this.templateInfo.mainTalbeName}${e}${t}`,t=t.toLowerCase().replaceAll("_","")}return t},buildFilterParams(e){let t=[];if(this.filters&&Object.keys(this.filters).length>0){let i=JSON.parse(this.templateInfo.filteringField||"[]");Object.keys(this.filters).forEach(a=>{let s=this.getColPreFix(i,a),l=this.getQueryPre(i,a);const n=this.filters[a];let o={property:l+s+a,value:n[0],group:"filter",relation:"AND"};1==n.length?o.operation="EQUAL":n.length>1&&(o.operation="IN",o.value=n),e&&e.push(o),t.push(o)})}return t},clearQueryByGroupName(e,t){let i=[];e&&e.forEach(e=>{e.group==t&&i.push(e)}),i.forEach(t=>{e.remove(t)})},handleSortChange(){console.warn(this.$t("ht.templatePreview.sortWarning"))},handleFilterChange(e){this.filters={...this.filters,...e},Object.keys(this.filters).forEach(e=>{this.filters[e]&&0!=this.filters[e].length||delete this.filters[e]}),this.search()},getSearchItems(){let e=jquery__WEBPACK_IMPORTED_MODULE_6___default()(".search-item"),t={},i={like:"LIKE",equal:"EQUAL",between:"BETWEEN",left_like:"LEFT_LIKE",right_like:"RIGHT_LIKE"};if(e)for(let a=0;a<e.length;a++){let s="=";"undefined"!=typeof jquery__WEBPACK_IMPORTED_MODULE_6___default()(e[a]).attr("ht-query")?(s=jquery__WEBPACK_IMPORTED_MODULE_6___default()(e[a]).attr("operation"),t[jquery__WEBPACK_IMPORTED_MODULE_6___default()(e[a]).attr("ht-query")]="undefined"!=typeof i[s]?i[s]:s):"undefined"!=typeof jquery__WEBPACK_IMPORTED_MODULE_6___default()(e[a]).children().attr("ht-query")&&(s=jquery__WEBPACK_IMPORTED_MODULE_6___default()(e[a]).children().attr("operation"),t[jquery__WEBPACK_IMPORTED_MODULE_6___default()(e[a]).children().attr("ht-query")]="undefined"!=typeof i[s]?i[s]:s)}return t},getFieldType(){let e=jquery__WEBPACK_IMPORTED_MODULE_6___default()(".search-item"),t={},i={number:"number",text:"text"};if(e)for(let a=0;a<e.length;a++){let s="=";"undefined"!=typeof jquery__WEBPACK_IMPORTED_MODULE_6___default()(e[a]).attr("ht-query")?(s=jquery__WEBPACK_IMPORTED_MODULE_6___default()(e[a]).attr("type"),t[jquery__WEBPACK_IMPORTED_MODULE_6___default()(e[a]).attr("ht-query")]="undefined"!=typeof i[s]?i[s]:s):"undefined"!=typeof jquery__WEBPACK_IMPORTED_MODULE_6___default()(e[a]).children().attr("ht-query")&&(s=jquery__WEBPACK_IMPORTED_MODULE_6___default()(e[a]).children().attr("type"),t[jquery__WEBPACK_IMPORTED_MODULE_6___default()(e[a]).children().attr("ht-query")]="undefined"!=typeof i[s]?i[s]:s)}return t},getSpecialMap(){let e=jquery__WEBPACK_IMPORTED_MODULE_6___default()(".search-item"),t={};if(e)for(var i=0;i<e.length;i++)"undefined"!=typeof jquery__WEBPACK_IMPORTED_MODULE_6___default()(e[i]).attr("ht-query")?t[jquery__WEBPACK_IMPORTED_MODULE_6___default()(e[i]).attr("ht-query")]="undefined"!=typeof jquery__WEBPACK_IMPORTED_MODULE_6___default()(e[i]).attr("special-query"):"undefined"!=typeof jquery__WEBPACK_IMPORTED_MODULE_6___default()(e[i]).children().attr("ht-query")&&(t[jquery__WEBPACK_IMPORTED_MODULE_6___default()(e[i]).children().attr("ht-query")]="undefined"!=typeof jquery__WEBPACK_IMPORTED_MODULE_6___default()(e[i]).children().attr("special-query"));return t},getConditionQuery(e){let t=[],i={},a={pageBean:this.pagination},s={templateId:this.templateInfo.id};if(s.pagination=a,this.buildFilterParams(t),e&&e.querys){let i=[...e.querys],a=hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_2__["a"].parseToJson(this.templateInfo.conditionField);const s=hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_2__["a"].parseToJson(this.templateInfo.filteringField);i.forEach(e=>{let i=this.getColPreFix(a,e.property);i||(i=this.getColPreFix(s,e.property)),e.property=i+e.property,t.push(e)})}if(this.parameterqQuerys){let e=JSON.parse(Base64.decode(this.parameterqQuerys));e&&e.length>0&&e.forEach(e=>{let i=1===this.templateInfo.isExternal?"":"F_";e.property=i+e.property,this.$set(this.searchForm,e.property,e.value),t.push(e)})}return i={pageBean:this.pagination,querys:t},s.pagination=i,s},advanced(){this.formType=!this.formType,this.formType?(this.incons="el-icon-arrow-up",this.queryForm.queryData=""):(this.incons="el-icon-arrow-down",this.searchForm={})},searchEnterFun:function(e){let t=window.event?e.keyCode:e.which;13==t&&this.search()},reset(e){if(this.queryForm.queryData="",this.templateInfo.conditionField){let e=hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_2__["a"].parseToJson(this.templateInfo.conditionField);for(let t=0;t<e.length;t++){let i=e[t].colPrefix+e[t].name;this.$set(this.searchForm,i,""),this.$set(this.searchForm,e[t].name,"")}}this.filters={},this.$refs.multipleTemplateTable.clearFilter&&this.$refs.multipleTemplateTable.clearFilter(),e||this.search()},handleSelectionChange(e){this.tableData.selectRows=e},deleted(){if(null==this.tableData.selectRows||0==this.tableData.selectRows.length)return this.$message.warning(this.$t("ht.templatePreview.deleteWaring")),!1;this.$confirm(this.$t("ht.templatePreview.deleteTip"),this.$t("ht.common.tips"),{confirmButtonText:this.$t("ht.common.confirm"),cancelButtonText:this.$t("ht.common.cancle"),type:"warning"}).then(()=>{let e=[];for(let i=0;i<this.tableData.selectRows.length;i++)e.push(this.tableData.selectRows[i][this.templateInfo.pkField]);let t={ids:e.join(","),boAlias:this.templateInfo.boDefAlias,formKey:this.templateInfo.formKey};this.$requestConfig.deleteTemplateDataById(t).then(e=>{e.state?(this.$message.success(e.message),this.pagination.page=1,this.search()):this.$message.error(e.message)})}).catch(()=>{this.$message({type:"info",message:this.$t("ht.templatePreview.cancelDelete")})})},del(e){this.$confirm(this.$t("ht.templatePreview.deleteDataTip"),this.$t("ht.common.tips"),{confirmButtonText:this.$t("ht.common.confirm"),cancelButtonText:this.$t("ht.common.cancle"),type:"warning"}).then(()=>{let t={ids:e,boAlias:this.templateInfo.boDefAlias,formKey:this.templateInfo.formKey};this.$requestConfig.deleteTemplateDataById(t).then(t=>{if(t.state){this.$message.success(t.message);let i={};this.tableData.selectRows.length&&(this.tableData.selectRows=this.tableData.selectRows.filter(t=>(t.id_!=e&&t.id!==e||(i=t),t.id_!==e||t.id!==e))),this.$refs.multipleTemplateTable.$refs.htTable.toggleRowSelection(i,!1),this.pagination.page=1,this.search()}else this.$message.error(t.message)})}).catch(()=>{this.$message({type:"info",message:this.$t("ht.templatePreview.cancelDelete")})})},operating(templateId,id,action,defId,isStartFlow,openType,quitAfterSaving,clickType){if(this.templateInfo.manageField&&!isStartFlow){"add"==action&&""==isStartFlow&&(isStartFlow=!0),"edit"==action&&!1===isStartFlow&&(isStartFlow=!0);let e=JSON.parse(this.templateInfo.manageField);for(let t=0;t<e.length;t++){if("add"==action&&"startFlow"==e[t].name){isStartFlow=!1;break}if("edit"==action&&"startFlow"==e[t].name){isStartFlow=!1;break}}}templateId||(templateId=this.templateInfo.id,action="select"==action?"get":"add"),!sessionStorage.menu_alias||this.dataView||this.ignoredAlias.includes(sessionStorage.menu_alias)||(this.alias_new=sessionStorage.menu_alias);var url="/templateForm/"+this.templateKey+"/"+action;this.isJoinFlow&&(this.alias_new="statement"),this.single;let isDataView=!1;this.dataView&&this.dataView.boDefAlias&&""!=this.dataView.boDefAlias&&(isDataView=!0),("new"==openType||this.isJoinFlow||isDataView)&&(url+="/new"),id?url=url+"?id="+id+"&":url+="?";let startFlowStr="startFlow=false";("add"==action&&defId&&!1===isStartFlow||id&&!1===isStartFlow&&defId)&&(startFlowStr="startFlow=true");let dataUrl="";if(this.dataView&&this.dataView.bindList&&this.dataView.bindList.length>0){let e=[];for(var i=0;i<this.dataView.bindList.length;i++){let t={key:this.dataView.bindList[i].bindFilld,value:this.dataView.bindList[i].fillValue};e.push(t)}dataUrl="&bindList="+encodeURIComponent(Base64.encode(JSON.stringify(e)))}let path=url+startFlowStr;if(""!=dataUrl&&(path=url+startFlowStr+dataUrl),"new"==openType||this.isJoinFlow||isDataView)window.open(this.$router.resolve({path:path+"&isNewPage=true",query:{quitAfterSaving:quitAfterSaving}}).href,"_blank");else if("dialog"===openType){let dialogWidth=this.dialogWidth,dialogHeight=this.dialogHeight;clickType&&"detail"===clickType&&this.templateInfo.displayField&&Array.isArray(eval(this.templateInfo.displayField))&&eval(this.templateInfo.manageField).forEach(e=>{"detail"===e.name&&(dialogWidth=e.dialogWidth+"px",dialogHeight=e.dialogHeight+"px")}),this.$refs.templateFormDialog.showDialog({templateKey:this.templateInfo.alias,action:action,dialogParam:{id:id,isStartFlow:isStartFlow},dialogWidth:dialogWidth,dialogHeight:dialogHeight,quitAfterSaving:quitAfterSaving})}else this.$router.push({path:path,query:{quitAfterSaving:quitAfterSaving}})},openUrl(e,t,i,a,s,l,n){if(i&&n){let t=JSON.parse(Base64.decode(n)||"[]");t.forEach((t,a)=>{e+=0===a?"?"+t.name+"="+(i[t.field]||""):"&"+t.name+"="+(i[t.field]||"")})}i&&a&&(e=this.handledUrlParams(e,i,a)),"new"==t?window.open(e,"_blank"):"dialog"===t?this.$refs.templateIframeDialog.showDialog({url:e,dialogWidth:s,dialogHeight:l}):window.location.href=e},getParentId(e,t,i){for(let a of e||[]){if(a[i]==t)return a;const e=this.getParentId(a.children,t,i);if(e)return e}},handledUrlParams(e,t,i){if(this.templateInfo.displayField){let a=JSON.parse(this.templateInfo.displayField),s=this.getParentId(a,i,"name");if(s&&s.urlParams&&s.urlParams.length>0){let i=s.urlParams,a="";if(i.forEach(e=>{a&&(a+="&"),a=a+e.name+"="+t[e.field]}),a)return e=-1!=e.indexOf("?")?e+"&"+a:e+"?"+a,e}}return e},viewReport(e,t,i){let a=JSON.parse(Base64.decode(t)),s=a.conditionField,l=[];if(s&&s.length>0&&s.forEach(t=>{t.parameter&&l.push({property:t.key,value:e[t.parameter],group:"main",operation:t.qt,relation:"AND"})}),!this.$requestConfig.viewReportURLHandler)return this.isMobile&&this.$message.error("移动端暂不支持通过该方式打开其他报表"),void console.error(this.$t("ht.templatePreview.notUrl"));l.length>0&&encodeURIComponent(Base64.encode(JSON.stringify(l)));this.$requestConfig.viewReportURLHandler({item:a,querys:l}).then(e=>{e?"new"==i?window.open(this.$router.resolve(e).href,"_blank"):"dialog"==i?this.$refs.templateIframeDialog.showDialog({url:this.$router.resolve(e).href}):this.$router.push(e):this.$message.error(this.$t("ht.templatePreview.notGetMenu",{alias:a.alias}))}).catch(e=>{console.error(`${this.$t("ht.templatePreview.pageJumpFail")}，${e}`)})},toStartFlow(){},async startFlowByTopButton(e,t,i,a){var s=this.tableData.selectRows;if(!s||s.length<=0)return void this.scriptClick("startFlow",t,{templateId:i,id:"",action:"startFlow",defId:a,isStartFlow:!1,openType:"",quitAfterSaving:""});let l=element_ui__WEBPACK_IMPORTED_MODULE_1__["Loading"].service({fullscreen:!0}),n=s.length,o=0,r=0;for(let m=0;m<s.length;m++){var c=s[m][e],h=s[m]["bpm_proc_inst_id_"];if(h&&""!=h){o++;continue}let t={defKey:this.templateInfo.defId,businessKey:c,boAlias:this.templateInfo.boDefAlias};var u=await this.$requestConfig.startFormPromise(t);u&&u.state||r++}l.close();let d=n-r-o;var p=d+" 条执行成功 <br/> ";o>0&&(p+=o+" 已存在流程实例，执行跳过 <br/> "),r>0&&(p+=r+" 条执行失败"),this.$message({type:"success",message:p,dangerouslyUseHTMLString:!0})},startFlow(e){let t={defKey:this.templateInfo.defId,businessKey:e,boAlias:this.templateInfo.boDefAlias},i=element_ui__WEBPACK_IMPORTED_MODULE_1__["Loading"].service({fullscreen:!0});this.$requestConfig.startForm(t).then(e=>{i.close(),e.state?(this.$message.success(e.message),this.search()):(this.disabled=!1,this.$message.warning(e.message))})},exports(e=""){this.curSelectParams.queryFilter=this.curSelectParams.pagination,this.curSelectParams.queryFilter||(this.curSelectParams.queryFilter={pageBean:this.pagination}),this.curSelectParams.queryFilter.querys||(this.curSelectParams.queryFilter.querys=[]),this.treeQuerys&&this.treeQuerys.forEach(e=>{this.curSelectParams.queryFilter.querys.push(e)}),"searchResult"===e&&(this.curSelectParams.queryFilter.querys=this.templateSearchQuery),this.$requestConfig.exportByBtnSetting({id:this.templateInfo.id,params:this.curSelectParams}).then(({data:e,headers:t})=>{const i=decodeURIComponent(t["content-disposition"].split(";")[1].split("filename=")[1]),a=new Blob([e]);saveAs(a,i)})},importCommand(e){switch(e.command){case"downloadTempFile":this.downloadMainTempFile();break;case"importMain":this.importMain();break;case"log":this.openLog();break;case"showImportResult":this.$refs["importResult"].showDialog(this.importCacheKey);break;case"showImportLog":this.importLogVisible=!0,this.$nextTick(()=>{this.$refs.importLogTable.load()});break;default:break}},openLog(){this.dialogVisible=!0},downloadMainTempFile(){let e="";if(this.templateInfo&&this.templateInfo.manageField){let t=JSON.parse(this.templateInfo.manageField);for(let i=0;i<t.length;i++){let a=t[i];if("import"==a.name){a.importTemplate&&a.importTemplate.length>0&&(e=a.importTemplate[0].id);break}}}if(e)this.$requestConfig.download(e).then(({data:e,headers:t})=>{const i=decodeURIComponent(t["content-disposition"].split(";")[1].split("filename=")[1]),a=new Blob([e],{type:"application/pdf"});saveAs(a,i)});else{let e=element_ui__WEBPACK_IMPORTED_MODULE_1__["Loading"].service({fullscreen:!0});this.$requestConfig.downloadTempFile(this.templateInfo.alias).then(({data:t,headers:i})=>{const a=decodeURIComponent(i["content-disposition"].split(";")[1].split("filename=")[1]),s=new Blob([t]);saveAs(s,a),e.close()}).catch(t=>{console.error(t),e.close()})}},importMain(e){let t=new FormData;t.append("file",e.file);let i={data:t,alias:this.templateInfo.alias};this.dataView&&(this.handelBindFiledValua(),i.bindFilld=this.dataView.bindFilld||"",i.fillValue=this.dataView.fillValue||"",i.refIdValue=this.dataView.refIdValue);let a=element_ui__WEBPACK_IMPORTED_MODULE_1__["Loading"].service({fullscreen:!0});this.$requestConfig.dataTemplateMainImport(i).then(t=>{t&&t.state?(e.onSuccess(),this.importCacheKey=t.value,this.$refs["importResult"].showDialog(t.value)):e.onError()}).finally(()=>{a.close()})},afterImportSave(){this.importCacheKey="",this.search()},showSubList(e,t){t&&(this.subDialogOptions=t),this.refId=e,this.getSubEntsByFormKey(e)},addFlow(e,t){let i=JSON.parse(Base64.decode(e));if(t||this.checkSelect()&&(t=this.tableData.selectRows[0]),!t)return;if(i.paramFields&&i.paramFields.length>0){var a={};i.paramFields.forEach(e=>{a[e.targetField]=t[e.sourceField]})}let s={bizType:"startFlow",openType:i.openType,parameters:{defId:i.flow.id,data:encodeURIComponent(Base64.encode(JSON.stringify(a)))}};this.$requestConfig.openUrl(s)},addData(e,t){let i=JSON.parse(Base64.decode(e));if(t||this.checkSelect()&&(t=this.tableData.selectRows[0]),!t)return;if(i.paramFields&&i.paramFields.length>0){var a={};i.paramFields.forEach(e=>{a[e.targetField]=t[e.sourceField]})}let s={bizType:"addData",openType:i.openType,parameters:{previewTemplateAlias:i.report.key,data:encodeURIComponent(Base64.encode(JSON.stringify(a)))}};this.$requestConfig.openUrl(s)},searchData(e,t){let i=JSON.parse(Base64.decode(e));if(t||this.checkSelect()&&(t=this.tableData.selectRows[0]),!t)return;let a=[];i.paramFields&&i.paramFields.length>0&&i.paramFields.forEach(e=>{a.push({property:e.targetField,value:t[e.sourceField],group:"main",operation:"EQUAL",relation:"AND"})});let s={bizType:"searchData",openType:i.openType||"new",parameters:{previewTemplateAlias:i.report.key,data:encodeURIComponent(Base64.encode(JSON.stringify(a)))}};this.$requestConfig.openUrl(s)},openRecordList(e){this.dialogRecordVisible=!0,this.recordRefId=e;let t={pageBean:{page:1,pageSize:10,showTotal:!0},sorter:[{direction:"ASC",property:"modifyTime"}],querys:[{property:"ref_id_",value:this.recordRefId,group:"main",operation:"EQUAL",relation:"AND"}]};this.recordTableLoading=!0,this.$requestConfig.boDataModifyRecord(t).then(e=>{this.recordTableLoading=!1,this.recordList=e.rows,this.modifyRecord.pagination.pageBean={pageSize:e.pageSize,page:e.page,total:e.total}})},handleRecordCurrentChange(e,t){t.pagination.pageBean.page=e;let i={pageBean:t.pagination.pageBean,sorter:[{direction:"ASC",property:"modifyTime"}],querys:[{property:"ref_id_",value:this.recordRefId,group:"main",operation:"EQUAL",relation:"AND"}]};this.recordTableLoading=!0,this.$requestConfig.boDataModifyRecord(i).then(e=>{this.recordTableLoading=!1,this.recordList=e.rows,this.modifyRecord.pagination.pageBean={pageSize:e.pageSize,page:e.page,total:e.total}})},recordCancel(){this.dialogRecordVisible=!1,this.recordList=[],this.recordRefId="",this.modifyRecord={pagination:{pageBean:{page:1,pageSize:10,total:0}}}},openModifyDetail(e){this.currentModify=e,this.modifyDetailDialogVisible=!0},showModifyRecord(e,t){var i="/templateForm/"+this.templateKey+"/get?single=true&id="+t+"&startFlow=false&recordId="+e+"&isNewPage=true";window.open(this.$router.resolve(i).href,"_blank")},openBatchSaveList(e){this.$refs.batchSaveDialog.showDialog(e)},batchSaveConfirm(){this.search()},submitExport(){!this.exportData||this.exportData.expField.length<1?this.$message({type:"info",message:this.$t("ht.templatePreview.selectExportField")}):"main"===this.exportType?this.exportMain():this.exportSubData(this.exportData.expField,this.refId,this.currentTab.entName)},exportMain(){let e="";for(let a=0;a<this.exportData.expField.length;a++)a>0&&(e+=","),e+=this.exportData.expField[a].name;e=Base64.encode(e);let t={boAlias:this.templateInfo.alias,getType:this.exportData.getType,expField:e,filterKey:""};t.query=this.getParam().pagination,this.dataView&&this.dataView.bindSelectd&&t.query.querys.push({value:this.dataView.selectValue,operation:"EQUAL",property:"F_"+this.dataView.bindSelectd});let i=element_ui__WEBPACK_IMPORTED_MODULE_1__["Loading"].service({fullscreen:!0});this.$requestConfig.templateExport(t).then(({data:e,headers:t})=>{const a=decodeURIComponent(t["content-disposition"].split(";")[1].split("filename=")[1]),s=new Blob([e]);saveAs(s,a),i.close(),this.dialogExportVisible=!1});for(let a=0;a<this.subDisplayFieldsList.length;a++)this.exportSubData(this.$refs["subExportTable"][a].selection,"",this.subDisplayFieldsList[a].name),this.$set(this.$refs["subExportTable"][a],"selection",[])},exportSubData(e,t,i){let a=[];for(let n=0;n<e.length;n++)a.push({key:e[n].name,value:e[n].desc});let s={alias:i,refId:t,type:this.exportData.getType,expField:JSON.stringify(a),filterKey:""};s.queryFilter=this.currentTab.pagination;let l=element_ui__WEBPACK_IMPORTED_MODULE_1__["Loading"].service({fullscreen:!0});this.$requestConfig.dataTemplateSubExport(s).then(({data:e,headers:t})=>{const i=decodeURIComponent(t["content-disposition"].split(";")[1].split("filename=")[1]),a=new Blob([e]);saveAs(a,i),l.close(),this.dialogExportVisible=!1}).catch(e=>{console.error(e),l.close()})},exportCancel(){this.dialogExportVisible=!1,this.exportData.expField=[]},subCancel(){this.dialogSubVisible=!1,this.tabs=[],this.ents=[]},sunCancel(){this.dialogSunVisible=!1,this.sunTabs=[]},handleExportSelectionChange(e){this.exportData.expField=[],e&&(this.exportData.expField=e)},handleExportSelectAll(){this.exportData.expField=this.displayFields},sort(e,t){if("up"==t)if(0===e)this.$message({message:this.$t("ht.templatePreview.isFirst"),type:"warning"});else{let t=this.displayFields[e-1];this.$set(this.displayFields,e-1,this.displayFields[e]),this.$set(this.displayFields,e,t)}else if(e===this.displayFields.length-1)this.$message({message:this.$t("ht.templatePreview.isLast"),type:"warning"});else{this.isTransition=!0;let t=this.displayFields[e+1];this.$set(this.displayFields,e+1,this.displayFields[e]),this.$set(this.displayFields,e,t)}},async getSunData(e,t){let i=e.childEnts,a=e.pkKey,s="";if(s=t[a.toLocaleLowerCase()]?t[a.toLocaleLowerCase()]:t[a.toUpperCase()],this.subTableLoading=!0,i&&i.length>0)for(let l=0;l<i.length;l++){let e=await this.getBoData(i[l],s);this.sunTabs.push(e)}this.subTableLoading=!1,this.dialogSunVisible=!0},getBoData(e,t){let i=e.attributeList.filter(e=>!e.isShow),a={refId:t,pkKey:e.pkKey,name:e.tableName,entName:e.name,title:e.comment,attributeList:i,comment:e.comment,pagination:{pageBean:{pageSize:10,page:1,total:0}},childEnts:[]};return e.childEnts&&e.childEnts.length>0&&(a.childEnts=e.childEnts),new Promise(i=>{this.getSubDataPagination(a,e.name,t,i,null)})},getSubEntsByFormKey(e){this.getSubData(this,e)},async getSubData(e,t){let i=JSON.parse(e.templateInfo.subField);if(i&&i.length>0)for(let a=0;a<i.length;a++){i[a].attributeList.forEach(e=>{e.fieldName=e.fieldName.toLowerCase()}),i[a].childEnts.forEach(e=>{e.attributeList.forEach(e=>{e.fieldName=e.fieldName.toLowerCase()})});let e=await this.getBoData(i[a],t);this.tabs.push(e)}this.showTabsList&&this.showTabsList.length&&(this.currentTabName=this.showTabsList[0].comment),this.dialogSubVisible=!0},nodeClick(e){this.pagination.page=1;let t={pageBean:{page:1,pageSize:this.pagination.pageSize}};if(this.filterQuerys.length>0?t.querys=lodash__WEBPACK_IMPORTED_MODULE_7___default.a.cloneDeep(this.filterQuerys):t.querys=[],!e.id||-1!=e.id){let i=JSON.parse(this.templateInfo.treeField),a=i.queryScope;i.querys.forEach(s=>{let l=e[s.value_],n="EQUAL";"currentAndSubordinate"===a&&(l=this.getTreeBindValue(s.value_,i.pidVal,e,i),n="IN"),s.key_&&s.value_&&t.querys.push({property:`${s.key_.colPrefix}${s.key_.name}`,value:l,group:"main",operation:n,relation:"AND"})})}this.treeQuerys=t.querys;let i={templateId:this.templateInfo.id,pagination:t};this.reset(!0),this.dataView&&this.dataView.selectList&&this.dataView.selectList.length>0&&(i.selectList=this.dataView.selectList);const a=this;a.isJoinFlow&&(i.isJoinFlow=!0,i.taskType=a.taskType,i.defKey=a.defKey),this.handleInitQuery(i),this.getBpmTemplateByPagination(i)},filterChange(e){if(e&&Object.keys(e).length>0){const t=Object.keys(e)[0],i=e[t];if(!i||i.length<=0)return void(this.filterQuerys=[]);let a={property:t,value:i[0],group:"filter",relation:"AND"};1==i.length?a.operation="EQUAL":i.length>1&&(a.operation="IN",a.value=i);const s=JSON.parse(this.templateInfo.filteringField||"[]");if(s.map(e=>{(e.name===t&&!t.startsWith("F_")||e.id===t&&!t.startsWith("F_"))&&(this.templateInfo.mainTalbeName&&this.templateInfo.mainTalbeName.toLowerCase()==e.tableName.toLowerCase()?a.property=`${e.tableName}.${e.oldTableField}`:e.queryPre?a.property=e.queryPre+e.oldTableField:a.property=e.colPrefix+t)}),this.filterQuerys.length>0){const e=lodash__WEBPACK_IMPORTED_MODULE_7___default.a.cloneDeep(this.filterQuerys);e.map(e=>{e.property.replace("F_","")===t&&hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_2__["a"].arrayEquals(e.value,i)||this.filterQuerys.push(a)})}else this.filterQuerys.push(a)}else this.filterQuerys=[]},toTreeData(e,t,i,a,s){let l=e.filter(e=>e[t]==e[i]||null==e[i]||e[i]==s);return l||(l=e.filter(e=>"undefined"!==e[i]&&null!=e[i]&&e[t]!=e[i])),l},initTree(e){const t=this;this.$requestConfig.getCustomDialogByAlias(e.alias).then(i=>{t.customDialog=i,this.$requestConfig.getCustomDialogTreeData(e.alias).then(e=>{if(t.customDialog.displayfield){let i=JSON.parse(t.customDialog.displayfield);t.displayField=i,t.treeList=e;let a={};a[i.displayName]=t.$t("ht.selector.all"),a.id=-1,t.tree.push(a),t.$nextTick(()=>{t.setDefaultExpand()})}})})},loadTree(e,t){if(e)if(-1===e.data.id){let e=this.toTreeData(this.treeList,this.displayField.id,this.displayField.pid,this.displayField.displayName,this.displayField.pvalue?this.displayField.pvalue:"0");t(e)}else t(this.treeList.filter(t=>t[this.displayField.pid]===e.data[this.displayField.id]));else t([])},handleSubCurrentChange(e,t){t.pagination.pageBean.page=e,this.handleLoadSubData(t)},handleSubSizeChange(e,t){t.pagination.pageBean.pageSize=e,this.handleLoadSubData(t)},handleLoadSubData(e){this.subTableLoading=!0,this.getSubDataPagination(e,e.entName,e.refId?e.refId:this.refId,null,()=>{this.subTableLoading=!1})},getSubDataPagination(e,t,i,a,s){this.$requestConfig.getDataTemplateSubData({pagination:e.pagination,name:t,refId:i}).then(t=>{t&&t.rows.length>0?(e.dataList=t.rows,e.pagination.pageBean.pageSize=t.pageSize,e.pagination.pageBean.page=t.page,e.pagination.pageBean.total=t.total):(e.dataList=[],e.pagination.pageBean.pageSize=10,e.pagination.pageBean.page=1,e.pagination.pageBean.total=0),a&&a(e)}).finally(()=>{s&&s()})},querySubTable(e){e.pagination.querys=[],this.querySubValue?e.attributeList.forEach(t=>{e.pagination.querys.push({property:t.fieldName,value:this.querySubValue,group:"other",operation:"LIKE",relation:"OR"})}):this.querySunValue&&e.attributeList.forEach(t=>{e.pagination.querys.push({property:t.fieldName,value:this.querySunValue,group:"other",operation:"LIKE",relation:"OR"})}),this.handleSubCurrentChange(1,e)},importSub(e){let t=new FormData;t.append("file",e.file);let i={data:t,alias:this.currentTab.entName,refId:this.refId,formKey:this.templateInfo.formKey};this.$requestConfig.dataTemplateSubImport(i).then(t=>{t&&t.state?(this.$message({type:"success",message:t.message}),e.onSuccess(),this.handleSubCurrentChange(1,this.currentTab)):(this.$message.error(t.message),e.onError())})},exportSub(e){this.exportType="sub",this.currentTab=e,this.displayFields=[],this.subDisplayFieldsList=[],e.attributeList.forEach(e=>{e.isShow||this.displayFields.push({desc:e.comment,name:e.fieldName,type:e.columnType})}),this.dialogExportVisible=!0},importButton(e){this.currentTab=e},myDraftList(){!sessionStorage.menu_alias||this.dataView||this.ignoredAlias.includes(sessionStorage.menu_alias)||(this.alias_new=sessionStorage.menu_alias);let e=!1;this.dataView&&this.dataView.boDefAlias&&""!=this.dataView.boDefAlias&&(e=!0);let t="/templateDraftList/"+this.templateInfo.alias+"?dataViewFlag="+e;("new"==this.openType||e)&&(t+="&isNew=true"),e?window.open(t,"_blank"):this.$router.push(t)},initSwitchStatus(){let e=hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_2__["a"].parseToJson(this.templateInfo.manageField);for(let t=0;t<e.length;t++)if("switch"===e[t].name){let i=e[t].bind;this.$set(this.switchMap,i,{}),this.switchMap[i].on=e[t].switchOn,this.switchMap[i].off=e[t].switchOff,this.switchMap[i].onLabel=e[t].switchOnLabel,this.switchMap[i].offLabel=e[t].switchOffLabel}},switchChange(e,t,i,a,s,l){let n=this;const o=this.getBindField(s,a);let r=this.getBindValue(s,a);n.$confirm(n.$t("ht.templatePreview.isChangeDataTip"),{confirmButtonText:n.$t("ht.common.confirm"),cancelButtonText:n.$t("ht.common.cancle"),type:"warning"}).then(()=>{r==t?(this.$set(s,o,i),r=i):r==i?(this.$set(s,o,t),r=t):"true"==l?(this.$set(s,o,i),r=i):(this.$set(s,o,t),r=t);let c=n.templateInfo.formKey,h=n.templateInfo.boDefAlias;this.$requestConfig.getDataTemplateForm(c,h,e).then(e=>{let t=e.data;t[h][a]=r;let i={boAlias:n.templateInfo.boDefAlias,boData:e.data,templateKey:this.templateInfo.alias};i.formKey&&(i.boData.formKey=i.formKey),i.templateKey&&(i.boData.templateKey=i.templateKey),n.$requestConfig.boSave(i).then(e=>{e.state?n.$message({type:"success",message:n.$t("ht.templatePreview.savaSuccess")}):n.$message({type:"error",message:n.$t("ht.templatePreview.hasCancelOperate")})})})}).catch(()=>{n.$message({message:n.$t("ht.templatePreview.savaFail")})})},display(e){return!this.isMobile||"1"===e},getFixed(e){return e},summary(e,t,i,a){let s=t.toLowerCase();const l=a||this.rows;let n=l&&l.filter(e=>void 0!==e[s]&&""!==e[s]).map(e=>Number(e[s]));if(!n||0==n.length)return;const o={count:"getCount",sum:"getSum",min:"getMinNum",max:"getMaxNum",avg:"getAverage"};return o[e]?this[o[e]](n,i):void 0},getSum(e,t){const i=e.reduce((e,t)=>e+t).toFixed(t);return i?hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_2__["a"].thousandBit(i):i},getCount(e){return e.length},getMinNum(e,t){return Math.min(...e).toFixed(t)},getMaxNum(e,t){return hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_2__["a"].thousandBit(Math.max(...e).toFixed(t))},getAverage(e,t){return(e.reduce((e,t)=>e+t)/e.length).toFixed(t)},getColor(e,t){let i="color:black",a=Base64.decode(e),s=JSON.parse(a);return s&&s instanceof Array&&s.forEach(e=>{let a=Function("data",e.proRule);a(t)&&(i="color:"+e.proColor)}),i},getProValue(e,t){const i=Math.round(e/t*1e4)/100;return isNaN(i)?1:i>100?100:i},getProColor(e,t){let i="#409eff",a=Base64.decode(e),s=JSON.parse(a);return s&&s instanceof Array&&s.forEach(e=>{let a=Function("data",e.proRule);a(t)&&(i=e.proColor)}),i},isSortable(e){let t=!1;return this.displayFields.forEach(i=>{i.name===e&&"clob"===i.type&&(t=!0)}),!this.notSortableFields.includes(e)&&!t},isPropTable(e,t,i){return this.templateInfo.mainTalbeName.toLowerCase()==t.toLowerCase()?"t."+i:`${t}.${i}`},customEvilJS(e,t,i){i&&i.dialogWidth&&(this.dialogWidth=i.dialogWidth+"px"),i&&i.dialogHeight&&(this.dialogHeight=i.dialogHeight+"px"),i&&i.openType&&(this.openType=i.openType);let a=Function("_req","row","_this",Base64.decode(t));a(req,e,this)},batchUpdate(e,t,i,a,s){this.batchUpdataTitle=e,this.updatingRow=s;let l=[],n=[];if(t){let o=!0,r=JSON.parse(Base64.decode(t)),c=JSON.parse(Base64.decode(i));r.forEach(e=>{if(1==e.valueType){var t=!1;e.isRequired&&(t=!0);let i=e.name;1!==this.templateInfo.isExternal&&(i=e.name.toLowerCase().replace("f_",""));let a={name:e.name,desc:c[i],outType:e.outValueType,single:!1,selectCurrent:!1,isRequired:t};if("select"==e.outValueType){let t=JSON.parse(e.outConfig);if(a.ganged={alias:"",valueBind:"",noInit:"",labelBind:"",bind:{}},t.customQuery){let e={alias:t.customQuery.alias,valueBind:t.customQuery.valueBind,noInit:"",labelBind:t.customQuery.labelBind,bind:{}};a.ganged=e}a.selectData=t.selectData}else if("dialog"==e.outValueType){let t=JSON.parse(e.outConfig),i=t.dialogConfig,s=[],l=t.parameter;for(let e in l){let t=l[e]||"";s.push({from:e,target:[t],targetSub:[t]})}let n={selectNum:i.selectNum,conditions:[],mappingConf:s,custQueryJson:[],alias:i.alias,type:i.custDialog};a.custdialog={name:this.$t("ht.common.select"),custDialog:n,resultField:i.resultField}}else if(e.outConfig&&("input"!=e.outValueType||"data"!=e.outValueType||"number"!=e.outValueType)){let t=JSON.parse(e.outConfig),i=t.parameter;for(let e in i)i[e]?i[e]="data."+i[e]:delete i[e];t.selectCurrent&&(a.selectCurrent=t.selectCurrent),t.isSingle&&(a.single=t.isSingle),a.bindConfig=i}n.push(a),o=!1}else l.push({key:e.name,value:e.defaultValue})}),o?this.updateBo(l,s,a):(this.defaultValueList=l,this.$refs.templateBatchUpdateDialog.showDialog(e,n))}else this.$message({type:"info",message:this.$t("ht.templatePreview.notUpdate")})},onConfirm(e){let t=[];for(var i in e)t.push({key:i,value:e[i]});let a=this.defaultValueList?this.defaultValueList.concat(t):this.defaultValue;this.updateBo(a)},updateBo(defaultValueList,row,afterScriptValue){this.updatingRow&&(row=this.updatingRow);let selectAll=null==this.tableData.selectRows||0==this.tableData.selectRows.length;this.$confirm(row?this.$t("ht.templatePreview.updateDataTip"):selectAll?this.$t("ht.templatePreview.updateDataAllTip"):this.$t("ht.templatePreview.updateDataTip"),this.$t("ht.common.tips"),{confirmButtonText:this.$t("ht.common.confirm"),cancelButtonText:this.$t("ht.common.cancle"),type:"warning"}).then(()=>{let ids=[];row?ids.push(row["id_"]):selectAll||this.tableData.selectRows.forEach(e=>{ids.push(e["id_"])});let data={queryFilter:this.curSelectParams.queryFilter,params:defaultValueList,ids:ids,boAlias:this.templateInfo.alias,templateId:this.templateInfo.id,title:this.batchUpdataTitle};const loading=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.$requestConfig.request({url:"${portal}/form/dataTemplate/v1/newBoBatchUpdate2",method:"post",data:data,timeout:1e8}).then(async resp=>{if(resp.state){let result=[];result=resp.value,result&&result.length>0?(result.forEach(temp=>{let data=temp.data,formals=temp.formals;formals&&formals.length>0&&formals.forEach(temp2=>{let key=temp2.field;try{data[key]=eval(temp2.value)}catch(e){throw this.$message({type:"error",message:"计算失败，"+temp2.value+" 公式配置错误"}),new Error("End Loop")}})}),await this.updateData(result,row,afterScriptValue,loading)):loading.close()}}).catch(()=>loading.close())}).catch(()=>{this.$message({type:"info",message:this.$t("ht.templatePreview.cancelUpdate")})})},updateData(e,t,i,a){this.$requestConfig.request({url:"${portal}/form/dataTemplate/v1/computeListBatchUpdate",method:"post",data:e,timeout:1e8}).then(e=>{if(e&&e.state){this.$message({type:"success",message:e.message}),this.search({querys:this.buildDefaultQuerys()||[]});let a=Base64.decode(i);this.tempScript(a,t)}}).finally(()=>a.close())},addCommand(e){"notLogin"!=e&&"login"!=e||this.getAddQRCode(e)},getAddQRCode(e){this.QRCodePattern="notLogin"==e,this.QRCodeDesc=[],this.QRCodeType="add",this.QRCodeShow=!1,this.QRCodeDialog=!0},showSearchPane(){return!0},buildDefaultQuerys(e=!0){let t=this,i=[],a=JSON.parse(t.templateInfo.conditionField);if(a.forEach(a=>{if(a.defaultValue){let s=a.colPrefix+a.na;e&&t.$set(t.searchForm,s,a.defaultValue);let l=a.defaultValue;"number"==a.ty&&(l=parseFloat(l)),i.push({property:a.queryPre?a.queryPre+s:s,value:l,group:"main",operation:a.qt.toUpperCase(),relation:"AND"})}}),this.parameterqQuerys){let a=JSON.parse(Base64.decode(this.parameterqQuerys));a&&a.length>0&&a.forEach(a=>{let s=1===this.templateInfo.isExternal?"":"F_";a.property=s+a.property,e&&t.$set(t.searchForm,a.property,a.value),i.push(a)})}let s=JSON.parse(t.templateInfo.filteringField);return s.forEach(e=>{e.defaultValue&&e.defaultValue.length>0&&(t.filterMap[e.name]=e.defaultValue,e.defaultValue.forEach(t=>{i.push({property:`${e.queryPre||""}${e.colPrefix}${e.name}`,value:t,group:"defVal_"+e.name,operation:"EQUAL",relation:"OR"})}))}),t.$on("afterMounted",()=>{const e=document.getElementById(t.templateInfo.alias);if(e&&e.__vue__){let i=e.__vue__.$refs.tableHeader?e.__vue__.$refs.tableHeader.columns:[];i.forEach(e=>{t.filterMap.hasOwnProperty(e.property)&&t.filterMap[e.property].forEach(t=>{e.filteredValue.push(t)})})}}),i},handleClose(){this.dataViewDialogVisible=!1},startFlowSucess(e){this.$message.success(e),this.search()},async scriptClick(e,t,i){i&&i.dialogWidth&&(this.dialogWidth=i.dialogWidth+"px"),i&&i.dialogHeight&&(this.dialogHeight=i.dialogHeight+"px"),i&&i.openType&&(this.openType=i.openType);let a=null;if(i){a=i.row;let e=i.id||i.pkField;a&&void 0!=a||!e||(a=this.rows.filter(t=>t[this.templateInfo.pkField]==e)[0])}if(t){let e=Base64.decode(t),i=await this.tempScript(e,a);if(!i)return}let s=["add","edit","del","print","url","import","deleted","export","copyOne","copyAll","detail","record","printDetail","sub","js","startFlow","addFlow","addData","searchData","batchSave"],l=["switch","batchUpdate"];if(-1!=s.indexOf(e))if("add"==e)this.operating(i.templateId,i.id,i.action,i.defId,i.isStartFlow,i.openType,i.quitAfterSaving);else if("edit"==e)i&&i.id?this.operating(i.templateId,i.id,i.action,i.defId,i.isStartFlow,i.openType,i.quitAfterSaving):this.checkSelect()&&(i.id=this.tableData.selectRows[0].id_,i.isStartFlow=this.tableData.selectRows[0].isStartFlow,this.operating(i.templateId,i.id,i.action,i.defId,i.isStartFlow,i.openType,i.quitAfterSaving));else if("batchSave"==e){let e={templateId:i.templateId};this.dataView&&this.dataView.selectList&&(e["bindList"]=this.dataView.bindList),this.openBatchSaveList(e)}else"del"==e?this.del(i.pkField):"print"==e?this.printList():"url"==e?this.openUrl(i.url,i.openType,i.row,i.fieldName,i.dialogWidth,i.dialogHeight,i.urlParams):"export"==e?this.exports(i.exportSettingFields):"deleted"==e?this.deleted():"copyOne"==e?this.copyOne(i):"copyAll"==e?this.copyAll():"detail"==e&&this.checkSelect()?(i.id=this.tableData.selectRows[0].id_,this.operating(i.templateId,i.id,i.action,i.defId,i.isStartFlow,i.openType,i.quitAfterSaving)):"record"==e&&this.checkSelect()?this.openRecordList(this.tableData.selectRows[0].id_):"printDetail"==e&&this.checkSelect()?(i.id=this.tableData.selectRows[0].id_,this.printDetail(i.templateId,i.id,i.action)):"sub"==e&&this.checkSelect()?this.showSubList(this.tableData.selectRows[0].id_,i):"js"==e&&this.checkSelect()?this.customEvilJS(this.tableData.selectRows[0],i.jsValue):"startFlow"==e&&i.defId&&!i.isStartFlow?this.operating(i.templateId,i.id,i.action,i.defId,i.isStartFlow,i.openType,i.quitAfterSaving):"addFlow"==e?this.addFlow(i.flowFormData,a):"addData"==e?this.addData(i.flowFormData,a):"searchData"==e&&this.searchData(i.flowFormData,a);else-1!=l.indexOf(e)&&("switch"==e?this.switchChange(i.pkField,i.switchOn,i.switchOff,i.bind,i.row,i.switchDefaultTrue,t):"batchUpdate"==e&&(i.position?this.batchUpdate(i.desc,i.batchUpdateData,i.filedsObj,t,i.row):this.batchUpdate(i.desc,i.batchUpdateData,i.filedsObj,t,null)))},checkSelect(){return this.tableData.selectRows&&0!=this.tableData.selectRows.length?!(this.tableData.selectRows.length>1)||(this.$message.warning(this.$t("ht.templatePreview.selectOneData")),!1):(this.$message.warning(this.$t("ht.templatePreview.selectOneDateTip")),!1)},copyOne(e){this.$confirm(this.$t("ht.templatePreview.copyTip"),this.$t("ht.common.tips"),{confirmButtonText:this.$t("ht.common.confirm"),cancelButtonText:this.$t("ht.common.cancle"),type:"warning"}).then(()=>{let t=[];t.push(e.pkField);let i={};i.ids=t,i.boAlias=this.templateInfo.boDefAlias;let a=element_ui__WEBPACK_IMPORTED_MODULE_1__["Loading"].service(this.$t("ht.templatePreview.copyLoadingText"));this.$requestConfig.boCopy(i).then(e=>{e.state?(this.$message({message:e.message,type:"success"}),this.$nextTick(()=>{a.close()}),this.search()):(this.$message({message:e.message,type:"warning"}),this.$nextTick(()=>{a.close()}))}).finally(()=>{a.close()})}).catch(()=>{this.$message({type:"info",message:this.$t("ht.templatePreview.cancelCopy")})})},copyAll(){if(null==this.tableData.selectRows||0==this.tableData.selectRows.length)return this.$message.warning(this.$t("ht.templatePreview.copyWaning")),!1;this.$confirm(this.$t("ht.templatePreview.copyAllDataTip"),this.$t("ht.common.tips"),{confirmButtonText:this.$t("ht.common.confirm"),cancelButtonText:this.$t("ht.common.cancle"),type:"warning"}).then(()=>{let e=[];for(let a=0;a<this.tableData.selectRows.length;a++)e.push(this.tableData.selectRows[a][this.templateInfo.pkField]);let t={ids:e,boAlias:this.templateInfo.boDefAlias},i=element_ui__WEBPACK_IMPORTED_MODULE_1__["Loading"].service(this.$t("ht.templatePreview.copyLoadingText"));this.$requestConfig.boCopy(t).then(e=>{e.state?(this.$message({message:e.message,type:"success"}),this.$nextTick(()=>{i.close()}),this.search()):(this.$message({message:e.message,type:"warning"}),this.$nextTick(()=>{i.close()}))}).finally(()=>{i.close()})}).catch(()=>{this.$message({type:"info",message:this.$t("ht.templatePreview.cancelCopy")})})},tempScript(e,t){if(void 0==e||""==e)return!0;let i=this,a=req,s=this.rows,l=t;function n(){let t=Function("_req","_this","_rows","_row",e),n=t(a,i,s,l);return n}let o=n();return o},async beforeScript(e,t){if(e){let i=Base64.decode(e),a=await this.tempScript(i,t);return a}return!0},setDefaultExpand(){let e="1",t=null;try{let i=JSON.parse(this.templateInfo.treeField);e=i.defaultExpand,t=this.$refs.filterTree.$refs.elTree}catch(l){return}if("0"==e)return;let i=t.store,a=i.root.childNodes[0]||i.root;function s(e,a){t.load(e,t=>{e.doCreateChildren(t),i._initDefaultCheckedNodes(),e.expanded=!0}),e.childNodes&&0!=e.childNodes.length?e.level>=a&&"-1"!=a||e.childNodes.forEach(e=>{s(e,a)}):e.isLeaf=!0}s(a,parseInt(e))},getTreeBindValue(e,t,i,a){let s=a.idVal,l=[i[e]],n=this.treeList;function o(i){n.forEach(a=>{a[t]==i[s]&&(l.push(a[e]),o(a))})}return o(i),l},checkFlowPermission(){let e=["approval","taskDetail","taskImage","history","revoke","phyDelete","logicDelete","taskToRead"];if(this.templateInfo&&this.templateInfo.manageField){let t=JSON.parse(this.templateInfo.manageField).filter(t=>e.includes(t.name));if(!t||0==t.length)return;let i=t.map(e=>e.name).join(","),a=[];this.rows.forEach(e=>{e["bpm_proc_inst_id_"]&&!this.flowBtnPermission.hasOwnProperty(e["bpm_proc_inst_id_"])&&a.push(e["bpm_proc_inst_id_"])}),i&&a&&a.length>0&&this.$requestConfig.getDataTemplateButtonPermission(a,i).then(e=>{e.value.forEach(e=>{let{instId:t}=e;this.$set(this.flowBtnPermission,t,e)}),this.multipleTemplateTableloading=!1})}},handleApproval(e,t){let{taskId:i}=this.flowBtnPermission[e["bpm_proc_inst_id_"]],a=`/matter/approvalForm/?taskId=${i}&instId=${e["bpm_proc_inst_id_"]}&isGetApprovalBtn=true`;if(this.$requestConfig.frontUrl)if(this.$requestConfig.frontUrl.startsWith(window.location.origin)&&"new"!==t)"old"==t&&this.$router.push(a);else{let e=sessionStorage.getItem("currentUser"),t=null;try{let i=JSON.parse(e);t=i.token}catch(s){console.log(`sessionStorage.currentUser${this.$t("ht.templatePreview.notConfigured")}token,${s}`)}a=`${this.$requestConfig.frontUrl}${a}${t?"&token="+t:""}`,window.open(a,"_blank")}else this.$message.error(this.$t("ht.templatePreview.applicationSideNotConfigured"))},showTaskImage(e){this.selectedDefId=e["bpm_proc_def_id_"],this.selectedInstId=e["bpm_proc_inst_id_"];let t=this.flowBtnPermission[this.selectedInstId].taskId;t&&(this.selectedTaskId=t),this.$nextTick(()=>{this.$refs.taskImage.handleOpen()})},showInstHistory(e){this.selectedDefId=e["bpm_proc_def_id_"],this.selectedInstId=e["bpm_proc_inst_id_"],this.$nextTick(()=>{this.$refs["processRecord"].showDialog()})},handleRevoke(e){let t=e["bpm_proc_inst_id_"],i=e["bpm_status_"];if("revokeToStart"==i)return void this.$message.warning(this.$t("ht.templatePreview.hasRevoke"));this.selectedInstId=t;let a={instanceId:t,isHandRevoke:!1};this.$prompt(this.$t("ht.templatePreview.revokeReason"),this.$t("ht.common.tips")).then(({value:e})=>{a.cause=e,this.$requestConfig.saveRevoke(a).then(e=>{this.$message.success(e.message),this.search("find")})}).catch(()=>{})},showTaskDetail(e,t,i){let a=e["bpm_proc_inst_id_"],s="/matter/approvalForm?instId="+a;const l=this.$router.resolve("/").href;if(`${window.location.origin}${l}`.startsWith(this.$requestConfig.frontUrl)&&"new"!==t){if("old"==t)this.$router.push(s);else if("dialog"===t){let e=sessionStorage.getItem("currentUser"),t=null;try{let i=JSON.parse(e);t=i.token}catch(n){console.log(`sessionStorage.currentUser${this.$t("ht.templatePreview.notConfigured")}token,${n}`)}s=`${this.$requestConfig.frontUrl}${s}${t?"&token="+t:""}&__isFull__=true`,this.$refs.templateIframeDialog.showDialog({url:s,dialogWidth:i.dialogWidth,dialogHeight:i.dialogHeight})}}else{let e=sessionStorage.getItem("currentUser"),t=null;try{let i=JSON.parse(e);t=i.token}catch(n){console.log(`sessionStorage.currentUser${this.$t("ht.templatePreview.notConfigured")}token,${n}`)}s=`${this.$requestConfig.frontUrl}${s}${t?"&token="+t:""}`,window.open(s,"_blank")}},taskToRead(e){this.$refs["templateTaskCirculate"].showDialog(e,this.flowBtnPermission)},phyDelete(e){let t=this;this.$confirm(this.$t("ht.templatePreview.deleteDraftTip"),this.$t("ht.common.tips")).then(()=>{let i=e["bpm_proc_inst_id_"];this.$requestConfig.removeFlowById(i).then(e=>{e.state&&(this.$message.success(this.$t("ht.templatePreview.deleteDraftSuccess")),t.search("find"))})}).catch(()=>{})},logicDelete(e){let t=e["bpm_proc_inst_id_"];this.$confirm(this.$t("ht.templatePreview.confirmDeleteTip"),this.$t("ht.common.tips"),{cancelButtonText:this.$t("ht.common.cancle"),confirmButtonText:this.$t("ht.common.confirm"),type:"warning",closeOnClickModal:!1}).then(()=>{this.$requestConfig.removeFlowById(t).then(e=>{e.state?(this.$message.success(e.message),this.search("find")):this.$message.error(e.message)})})},commonOpenUrl(e){"new"===this.openType?window.open(e,"_blank"):"dialog"===this.openType?this.$refs.templateIframeDialog.showDialog({url:e,dialogHeight:this.dialogHeight,dialogWidth:this.dialogWidth}):window.location.href=e},desensitization(e,t,i,a){"number"===typeof e&&(e+="");let s=lodash__WEBPACK_IMPORTED_MODULE_7___default.a.cloneDeep(e);if(s&&s.length){var l=s.length,n=s.substring(0,t-1),o=s.substring(i,l),r=(e="",0);try{for(r=0;r<i+1-t;r++)e+=a}catch(c){}return e=n+e+o,e}return""},isJSON(e){if("string"!=typeof e)return!1;try{var t=JSON.parse(e);return!("object"!=typeof t||!t)}catch(i){return!1}},formatCascade(e){let t="",i=lodash__WEBPACK_IMPORTED_MODULE_7___default.a.cloneDeep(e);return i&&this.isJSON(i)?(t=JSON.parse(i),t&&t.pathLabels&&t.pathLabels.length?t.pathLabels.join(">"):i):i}}}},a912:function(e,t,i){},ac18:function(e,t,i){},ac74:function(e,t,i){},aca7:function(e,t){e.exports=require("setimmediate")},ad78:function(e,t,i){},ae5e:function(e,t,i){},afdf:function(e,t,i){"use strict";i("893c")},b173:function(module,__webpack_exports__,__webpack_require__){"use strict";var element_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("5f72"),element_ui__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(element_ui__WEBPACK_IMPORTED_MODULE_0__),hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("025e"),vue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("8bbf"),vue__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(vue__WEBPACK_IMPORTED_MODULE_2__),jquery__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("c5e1"),jquery__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_3__),lodash__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("60bb"),lodash__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_4__);const{Base64:Base64}=__webpack_require__("f43e"),{saveAs:saveAs}=__webpack_require__("9588");__webpack_exports__["a"]={data(){return{bpmRunTime:this.$requestConfig.flowUrl,fileList:[],tableData:{selectRows:[],querys:""},dialogExportVisible:!1,exportData:{getType:"all",expField:[]},exportSellection:[],searchForm:{},displayFields:[],alarmSettingMap:{},summaryTypeMap:{},queryForm:{queryData:""},uploadParams:{id:[]},formType:!1,labelPosition:"left",incons:"el-icon-arrow-down",formatterMap:{},options:{fullscreen:!0,lock:!0},uploadError:this.$requestConfig.flowUrl+"/runtime/photoErrorCsv/v1/uploadErrorList",upoadPdfToAzure:this.$requestConfig.flowUrl+"/runtime/blob/v1/upoadPdfToAzure",uploadUnprepare:this.$requestConfig.flowUrl+"/runtime/blob/v1/upoadToAzure",summarySetting:[],activeNames:["1"],pagination:{page:1,pageSize:30,total:0},rows:[],queryParam:{},allSummaryConfig:{},customSummary:"",summaryTableData:[]}},watch:{formKey:function(e){e&&this.init()},"tableData.selectRows":function(e){if(e.length>0){let t=this;t.uploadParams.id=[],e.forEach(e=>{t.uploadParams.id.push(e.INSTID)})}lodash__WEBPACK_IMPORTED_MODULE_4___default.a.debounce(()=>{e&&e.length>0?(this.filterOldSummaryValByType("selected"),this.summaryTableData.unshift({project:this.$t("ht.templatePreview.selectSummary"),key:"selected",...this.getCurrentSummaryConfig(e)})):this.summaryTableData=this.summaryTableData.filter(e=>"selected"!==e.key),this.loadCompiledCustomSummary()},200)()},$route:"init",queryView:{handler(e){if(e.shows){let i=hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_1__["a"].parseToJson(e.shows);for(var t=0;t<i.length;t++)0==i[t].hidden&&(this.displayFields.push(i[t]),i[t].summaryType&&(this.summaryTypeMap[i[t].fieldName]=i[t].summaryType)),i[t].formater&&(this.formatterMap[i[t].fieldName]=i[t].formater),i[t].alarmSetting&&(this.alarmSettingMap[i[t].fieldName]=i[t].alarmSetting)}if(e.summarySetting&&(this.summarySetting=JSON.parse(e.summarySetting)),e&&e.id){let t=this;if(t.queryView=e,t.queryView.conditions){let e=hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_1__["a"].parseToJson(t.queryView.conditions);for(let t=0;t<e.length;t++){var i=e[t].name;this.$set(this.searchForm,i,"")}}}this.pagination.pageSize=e.pageSize||30},immediate:!0,deep:!0}},methods:{filterOldSummaryValByType(e){const t=this.summaryTableData.map(e=>e.key);t&&t.length&&t.includes(e)&&(this.summaryTableData=this.summaryTableData.filter(t=>t.key!==e))},getAllSummary(e){const t=e.reduce((e,t)=>(e[t.field]=t.val,e),{});Object.keys(t).length&&(this.filterOldSummaryValByType("all"),this.summaryTableData.push({project:this.$t("ht.templatePreview.allSummary"),key:"all",...t}))},getCurrentSummaryConfig(e){let t={};return e&&e.length&&this.summarySetting.map(i=>{t[i.field]=this.summary(i.method,i.field,i.decimal,e)}),t},loadCompiledCustomSummary(){this.queryView.summaryRegionHtml&&this.$nextTick(()=>{this.getCustomSummary(Base64.decode(this.queryView.summaryRegionHtml)).then(e=>{this.customSummary=e})})},getCustomSummary(e){const t=this;return new Promise(i=>{const a=vue__WEBPACK_IMPORTED_MODULE_2___default.a.extend({data(){return{summaryResult:t.summaryTableData,summaryFields:t.summarySetting,currentPageRows:t.rows,currentSelectedRows:t.tableData.selectRows}},template:`<div>${e}</div>`}),s=(new a).$mount();s.$nextTick(()=>{i(s.$el.innerHTML)})})},summary(e,t,i,a){const s=a||this.rows;let l=s&&s.filter(e=>void 0!==e[t]&&""!==e[t]).map(e=>Number(e[t]));if(!l||0==l.length)return;const n={count:"getCount",sum:"getSum",min:"getMinNum",max:"getMaxNum",avg:"getAverage"};return n[e]?this[n[e]](l,i):void 0},getSum(e,t){const i=e.reduce((e,t)=>e+t).toFixed(t);return i?hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_1__["a"].thousandBit(i):i},getCount(e){return e.length},getMinNum(e,t){return Math.min(...e).toFixed(t)},getMaxNum(e,t){return hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_1__["a"].thousandBit(Math.max(...e).toFixed(t))},getAverage(e,t){return(e.reduce((e,t)=>e+t)/e.length).toFixed(t)},printList(){document.body.innerHTML=document.getElementById("printData").innerHTML,window.print(),location.reload()},routerPush(e){this.$router.push(e)},dispose(e){let t;t=e.TASKID?"/task/"+e.TASKID:"/inst/"+e.INSTID,this.$router.push(t)},handleSizeChange:function(e){this.pagination.pageSize=e,this.$refs.queryViewList?this.$refs.queryViewList.load():this.search()},handleCurrentChange:function(e){this.pagination.page=e,this.$refs.queryViewList?this.$refs.queryViewList.load():this.search()},searchEnterFun:function(e){let t=window.event?e.keyCode:e.which;13==t&&(this.pagination.page=1,this.search())},search(e,t){!e&&(e={}),e.pageBean=this.pagination,this.queryParam={...e};let i={sqlAlias:this.sqlAlias||this.queryView.sqlAlias,alias:this.alias||this.queryView.alias,param:e};this.getQuerySqlViewByPagination(i,t)},getQuerySqlViewByPagination(e,t){this.$requestConfig.getQueryViewDataList(e).then(e=>{this.rows=e.rows,this.pagination.total=e.total,this.pagination.page=e.page,this.pagination.pageSize=e.pageSize,this.filterOldSummaryValByType("currentPage"),this.summaryTableData.push({project:this.$t("ht.templatePreview.currentPageSummary"),key:"currentPage",...this.getCurrentSummaryConfig(e.rows)}),e.summary&&e.summary.length&&this.getAllSummary(e.summary),this.queryView.summaryRegionHtml&&this.loadCompiledCustomSummary()}).finally(()=>{t&&t()})},getQueryFilter(){let e=this.getSearchItems(),t=this.getSpecialMap(),i=[],a={},s={pageBean:this.pagination},l={sqlAlias:this.sqlAlias||this.queryView.sqlAlias,alias:this.alias||this.queryView.alias};if(l.pagination=s,jquery__WEBPACK_IMPORTED_MODULE_3___default.a.isEmptyObject(this.searchForm))return l;for(var n in this.searchForm)if("undefined"!=typeof this.searchForm[n]&&""!=this.searchForm[n]&&null!=this.searchForm[n])if(this.searchForm[n]instanceof Array)if("BETWEEN"===e[n]){let t=[];for(let e=0;e<this.searchForm[n].length;e++)t.push(this.searchForm[n][e]);i.push({property:n,value:t.join(","),group:"main",operation:e[n],relation:"AND"})}else for(let t=0;t<this.searchForm[n].length;t++)i.push({property:n,value:this.searchForm[n][t],group:"main",operation:e[n],relation:"AND"});else if(this.searchForm[n].includes(",")&&!t[n]){let t=this.searchForm[n].split(",");for(let e=0;e<t.length;e++)""!=t[e]&&null!=t[e]&&"undefined"!=typeof t[e]||(t.splice(e,1),e-=1);t.forEach(t=>{i.push({property:n,value:t,group:"main",operation:e[n],relation:"AND"})})}else i.push({property:n,value:this.searchForm[n],group:"main",operation:e[n],relation:"AND"});return a={pageBean:this.pagination,querys:i},l.pagination=a,l},getSearchItems(){let e=jquery__WEBPACK_IMPORTED_MODULE_3___default()(".search-item"),t={},i={LK:"LIKE",EQ:"EQUAL",between:"BETWEEN",LFK:"LEFT_LIKE",RHK:"RIGHT_LIKE",NE:"NOT_EQUAL",LT:"LESS",LE:"LESS_EQUAL",GT:"GREAT",GE:"GREAT_EQUAL"};if(e)for(var a=0;a<e.length;a++){var s="=";"undefined"!=typeof jquery__WEBPACK_IMPORTED_MODULE_3___default()(e[a]).attr("ht-query")?(s=jquery__WEBPACK_IMPORTED_MODULE_3___default()(e[a]).attr("operation"),t[jquery__WEBPACK_IMPORTED_MODULE_3___default()(e[a]).attr("ht-query")]="undefined"!=typeof i[s]?i[s]:s):"undefined"!=typeof jquery__WEBPACK_IMPORTED_MODULE_3___default()(e[a]).children().attr("ht-query")&&(s=jquery__WEBPACK_IMPORTED_MODULE_3___default()(e[a]).children().attr("operation"),t[jquery__WEBPACK_IMPORTED_MODULE_3___default()(e[a]).children().attr("ht-query")]="undefined"!=typeof i[s]?i[s]:s)}return t},getFieldQuery(){let e=jquery__WEBPACK_IMPORTED_MODULE_3___default()(".search-item"),t={};if(e)for(var i=0;i<e.length;i++)"undefined"!=typeof jquery__WEBPACK_IMPORTED_MODULE_3___default()(e[i]).attr("ht-query")?t[jquery__WEBPACK_IMPORTED_MODULE_3___default()(e[i]).attr("ht-query")]=jquery__WEBPACK_IMPORTED_MODULE_3___default()(e[i]).attr("field-query"):"undefined"!=typeof jquery__WEBPACK_IMPORTED_MODULE_3___default()(e[i]).children().attr("ht-query")&&(t[jquery__WEBPACK_IMPORTED_MODULE_3___default()(e[i]).children().attr("ht-query")]=jquery__WEBPACK_IMPORTED_MODULE_3___default()(e[i]).children().attr("field-query"));return t},getSpecialMap(){let e=jquery__WEBPACK_IMPORTED_MODULE_3___default()(".search-item"),t={};if(e)for(var i=0;i<e.length;i++)"undefined"!=typeof jquery__WEBPACK_IMPORTED_MODULE_3___default()(e[i]).attr("ht-query")?t[jquery__WEBPACK_IMPORTED_MODULE_3___default()(e[i]).attr("ht-query")]="undefined"!=typeof jquery__WEBPACK_IMPORTED_MODULE_3___default()(e[i]).attr("special-query"):"undefined"!=typeof jquery__WEBPACK_IMPORTED_MODULE_3___default()(e[i]).children().attr("ht-query")&&(t[jquery__WEBPACK_IMPORTED_MODULE_3___default()(e[i]).children().attr("ht-query")]="undefined"!=typeof jquery__WEBPACK_IMPORTED_MODULE_3___default()(e[i]).children().attr("special-query"));return t},getConditionQuery(e){let t=[],i={},a={pageBean:this.pagination},s={sqlAlias:this.sqlAlias||this.queryView.sqlAlias,alias:this.alias||this.queryView.alias};if(s.pagination=a,e&&e.querys){let i=[...e.querys];i.forEach(e=>{t.push(e)})}return i={pageBean:this.pagination,querys:t},s.pagination=i,s},advanced(){this.formType=!this.formType,this.formType?(this.incons="el-icon-arrow-up",this.queryForm.queryData=""):(this.incons="el-icon-arrow-down",this.searchForm={})},reset(){this.queryForm.queryData="",this.searchForm={},this.pagination.page=1,this.search()},handleSelectionChange(e){this.tableData.selectRows=e},selectable(e){return"YES"!=e.BATCH_COVER_FLAG&&"UserTask171"==e.NODEID},exports(){this.dialogExportVisible=!0},punchOrder(){this.$store.dispatch("storeProcess/downLoadToFile","Batchkeijyo").then(()=>{})},beforeAvatarUpload(e){var t=new Array;t=e.name.split(".");const i="pdf"===t[t.length-1];return i?0!=this.tableData.selectRows.length||(this.$message({type:"warning",message:this.$t("ht.templatePreview.selectUploadFile")}),!1):(this.$message({message:this.$t("ht.templatePreview.templateTypeError"),type:"warning"}),!1)},onSuccessUpload(){this.$message.success(this.$t("ht.templatePreview.uploadSuccess")),window.location.reload()},handlePreview(){},submitExport(){if(!this.exportData||this.exportData.expField.length<1)return void this.$message({type:"info",message:this.$t("ht.templatePreview.selectExportField")});let e="";for(var t=0;t<this.exportData.expField.length;t++)t>0&&(e+=","),e+=this.exportData.expField[t].fieldName;e=Base64.encode(e).replace(/\+/g,"%2B");let i={sqlAlias:this.sqlAlias||this.queryView.sqlAlias,alias:this.alias||this.queryView.alias,getType:this.exportData.getType,expField:e};i.query=this.queryParam;let a=element_ui__WEBPACK_IMPORTED_MODULE_0__["Loading"].service({fullscreen:!0});this.$requestConfig.querySqlViewExport(i).then(({data:e,headers:t})=>{const i=decodeURIComponent(t["content-disposition"].split(";")[1].split("filename=")[1]),a=new Blob([e]);saveAs(a,i)}).finally(()=>{a.close(),this.dialogExportVisible=!1})},exportCancel(){this.dialogExportVisible=!1,this.exportData.expField=[]},handleExportSelectionChange(e){this.exportData.expField=[],e&&(this.exportData.expField=e)},handleExportSelectAll(e){this.exportData.expField=e},sort(e,t){if("up"==t)if(0===e)this.$message({message:this.$t("ht.templatePreview.isFirst"),type:"warning"});else{let t=this.displayFields[e-1];vue__WEBPACK_IMPORTED_MODULE_2___default.a.set(this.displayFields,e-1,this.displayFields[e]),vue__WEBPACK_IMPORTED_MODULE_2___default.a.set(this.displayFields,e,t)}else if(e===this.displayFields.length-1)this.$message({message:this.$t("ht.templatePreview.isLast"),type:"warning"});else{this.isTransition=!0;let t=this.displayFields[e+1];vue__WEBPACK_IMPORTED_MODULE_2___default.a.set(this.displayFields,e+1,this.displayFields[e]),vue__WEBPACK_IMPORTED_MODULE_2___default.a.set(this.displayFields,e,t)}},getSubEntsByFormKey(e){let t=this;t.tabs=[],!t.ents||t.ents.length<1?this.$requestConfig.getSubEntsByFormKey(this.templateInfo.alias).then(i=>{t.ents=i,this.getSubData(t,e)}):this.getSubData(t,e)},getSummaries(e){let t=this.summaryTypeMap;const{columns:i,data:a}=e,s=[];return i.forEach((e,i)=>{if(0!==i){if(t[e.property]&&"sum"==t[e.property]){const t=a.map(t=>Number(t[e.property]));t.every(e=>isNaN(e))?s[i]="N/A":s[i]=t.reduce((e,t)=>{const i=Number(t);return isNaN(i)?e:e+t},0)}}else s[i]=this.$t("ht.templatePreview.total")}),s},columnFormatter(row,column,cellValue){let formatter=this.formatterMap[column.property];if(!formatter)return cellValue;try{var script="var formatterFunction = function(row,column,cellValue){ "+formatter+"};",result=eval(script+"formatterFunction(row,column,cellValue);");return result}catch(e){return cellValue}},dateFormatter(e,t,i){return i?i.replace(".0",""):i},getAlarmColor(field,cellValue){let alarmSetting=this.alarmSettingMap[field],type="";if(this.displayFields.forEach(e=>{e.fieldName===field&&(type=e.dataType)}),alarmSetting)try{let alarmSettingJson=hotent_ui_src_utils_js__WEBPACK_IMPORTED_MODULE_1__["a"].parseToJson(alarmSetting),alarmScript="";for(var i=0;i<alarmSettingJson.length;i++){let e=alarmSettingJson[i],t=e.condition,a="";for(var m=0;m<t.length;m++)m>0&&(a+=" && "),a="number"===type||"bigint"===type||"int"===type?"indexOf"==t[m].op&&t[m].val?a+"'"+cellValue+"'.indexOf('"+t[m].val+"')!=-1":"notIndexOf"==t[m].op?a+"'"+cellValue+"'.indexOf('"+t[m].val+"')==-1":a+cellValue+t[m].op+t[m].val:"indexOf"==t[m].op&&t[m].val?a+"'"+cellValue+"'.indexOf('"+t[m].val+"')!=-1":"notIndexOf"==t[m].op?a+"'"+cellValue+"'.indexOf('"+t[m].val+"')==-1":a+"'"+cellValue+"'"+t[m].op+"'"+t[m].val+"'";i>0&&(alarmScript+=" else ");let s="color:"+e.color;alarmScript=alarmScript+"if("+a+"){return '"+s+"';}"}if(alarmScript){alarmScript+='else{ return "";}';var script="var alarmFunction = function(){ "+alarmScript+"};",result=eval(script+"alarmFunction();");return result}return""}catch(e){return""}},showSearchPane(){return!0}}}},b20f:function(e,t,i){e.exports={primary_color:"#409eff",success_color:"#67c23a",info_color:"#909399",warning_color:"#cf9236",danger_color:"#dd6161"}},b391:function(e,t,i){"use strict";i("5291")},b627:function(e,t,i){"use strict";i("eb95")},b6ba:function(e,t,i){},b820:function(e,t,i){"use strict";i("bdab")},b909:function(e,t,i){"use strict";i("e557")},ba07:function(e,t,i){},bbd0:function(e,t,i){"use strict";i("00e0")},bdab:function(e,t,i){},be8d:function(e,t,i){"use strict";i("11c9")},c03f:function(e,t,i){},c32d:function(e,t){e.exports=require("moment")},c3b9:function(e,t,i){},c3ca:function(e,t,i){},c46f:function(e,t,i){"use strict";i.d(t,"b",(function(){return l})),i.d(t,"a",(function(){return n})),i.d(t,"c",(function(){return o}));const{Base64:a}=i("f43e"),s=/[^A-Z0-9+\/=]/i;function l(e,t){return e?a.encode(e,t||"utf-8"):e}function n(e,t){return e?a.decode(e,t||"utf-8"):e}function o(e){if(!e||e.constructor!==String)return!1;if(""===e||""===e.trim())return!1;const t=e.length;if(!t||t%4!==0||s.test(e))return!1;const i=e.indexOf("=");return-1===i||i===t-1||i===t-2&&"="===e[t-1]}},c4f7:function(e,t,i){"use strict";i("4ef4")},c5e1:function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_c5e1__},c647:function(e,t,i){},c687:function(e,t,i){},c816:function(e,t,i){"use strict";i("3b02")},c8ba:function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(a){"object"===typeof window&&(i=window)}e.exports=i},c8d4:function(e,t,i){"use strict";i("3b5c")},c960:function(e,t,i){},ca30:function(e,t,i){},ca3a:function(module,__webpack_exports__,__webpack_require__){"use strict";var _util_base64__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("c46f"),_mixins_mobileMode_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ddb2");__webpack_exports__["a"]={mixins:[_mixins_mobileMode_js__WEBPACK_IMPORTED_MODULE_1__["a"]],name:"HtIframe",componentName:"HtIframe",props:{src:{type:String,default:""},height:{type:String,default:"500px"},width:{type:String,default:"100%"},iframeStyle:{type:String,default:""},iframeNmae:{type:String,default:"iframeControl"},frameborder:{type:String,default:"1"},data:{type:Object,default:()=>[]},permission:{type:Object,default:()=>({})},instId:{type:String,default:""},isBusinessForm:{type:Boolean,default:!1},urlParameter:{type:[Array,Object],default:()=>({})},returnParameter:{type:[Array,Object],default:()=>({})},iframeType:{type:String,default:"static"},iframeSrcJs:String},data(){return{endHeight:{},extSysMap:{},subPageData:{},endSrc:"",isReday:!1}},async mounted(){this.endHeight=this.height;let e=this;if("dynamic"==this.iframeType)await this.getDynamicSrc();else{if(!this.src)return void this.$message.error("当前URL表单地址未填写。");this.endSrc=this.src}this.isBusinessForm&&this.urlParameter&&this.urlParameter instanceof Array&&this.urlParameter.length>0&&this.disposeUrl(),window.addEventListener("message",t=>{t.data&&t.data.type&&t.data.iframeNmae==this.iframeNmae&&("getParentPageData"==t.data.type?e.getParentPageDataMsg():"getSubPageData"==t.data.type?e.getSubPageData(t.data.data):"addHeight"==t.data.type&&e.addHeight(t.data.height))}),this.isReday=!0},created(){},methods:{async getDynamicSrc(){if(!this.iframeSrcJs)return;let _this=this,data=this.data,currentUserDetail=await this.$requestConfig.getCurrentUser(),userId=this.$requestConfig.getUserId(),account=this.$requestConfig.getAccount(),token=this.$requestConfig.getToken(),extSys=await this.getExtSys();extSys=this.extSysMap;let isMobile=this.isMobile;const preScript=`const scriptFunction = function(_this,data,currentUserDetail,userId,account,token,extSys,isMobile){\n        ${Object(_util_base64__WEBPACK_IMPORTED_MODULE_0__["a"])(this.iframeSrcJs)}\n      };`;this.endSrc=eval(preScript+" scriptFunction(_this,data,currentUserDetail,userId,account,token,extSys,isMobile);")},getExtSys(){return this.$requestConfig.getExtSys({}).then(e=>{e&&e.rows&&e.rows.forEach(e=>(this.extSysMap[e.sysCode]=e.rootAddress,this.extSysMap))})},addHeight(e){this.endHeight=e},async disposeUrl(){let currentUserDetail=await this.$requestConfig.getCurrentUser(),vStr="";for(let x=0;x<this.urlParameter.length;x++){let parma=this.urlParameter[x];if(1==parma.type)vStr+=`&${parma.key}=${this.getFromData(parma.value)}`;else if(2==parma.type)vStr+=`&${parma.key}=${parma.value}`;else if(3==parma.type&&parma.value){let _this=this;const preScript=`const scriptFunction = function(_this){\n            ${Base64.decode(parma.value)}\n          };`,result=eval(preScript+" scriptFunction(_this);");result&&(vStr+=`&${parma.key}=${result}`)}else if(4==parma.type){let e="";1==parma.value?e=currentUserDetail.fullname:2==parma.value?e=currentUserDetail.userId:3==parma.value?e=currentUserDetail.account:4==parma.value?e=this.$requestConfig.getToken():5==parma.value?e=this.$route.query.taskId:6==parma.value&&(e=this.instId),vStr+=`&${parma.key}=${e}`}}this.endSrc.includes("?")?this.endSrc=this.endSrc+vStr:this.endSrc=this.endSrc+vStr.replace("&","?")},getFromData(e){let t=e.split("."),i=this.data;for(let a=0;a<t.length;a++)i=i[t[a]];return i},getSubPageData(e){this.subPageData=e,console.log(e)},getParentPageDataMsg(){const e=this.getIframeDom();e.contentWindow.postMessage({type:"getParentPageData",instId:this.instId,data:this.data,permission:this.permission},"*")},getIframeDom(){const e=document.querySelectorAll(`[name='${this.iframeNmae}']`);if(e&&e[0])return e[0];this.$message.error("当前URL表单加载不正确。")},getSubPageData(){}}}},cb64:function(e,t,i){"use strict";i("da37")},cd59:function(e,t,i){"use strict";i("a3f1")},cebe:function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_cebe__},cfcd:function(e,t,i){"use strict";i("9333")},d0ab:function(e,t,i){"use strict";i("ffa9")},d1c5:function(e,t,i){},d215:function(e,t,i){"use strict";var a=i("60bb"),s=i.n(a),l=i("025e");t["a"]={props:{validate:[Object,String],permission:{type:String,default:"w",validator:function(e){return-1!==["b","w","r","n"].indexOf(e)}}},data(){return{permission_sub:null,sub_work:!1,writeable:!0,formIsView:!1}},computed:{inputWriteable:function(){return this.writeable?l["a"].getWriteable(this.permission_sub):this.writeable},inputValidate:function(){return l["a"].addRequiredOrNot(this.permission_sub,this.validate,this)}},watch:{permission:{handler(e){this.sub_work||(this.permission_sub=s.a.cloneDeep(e)),this.$root.$emit("current-required-item",{[this.modelName]:e})}},formIsView:{handler(e){!e||"w"!=this.permission_sub&&"b"!=this.permission_sub||(this.writeable=!1)}}},created(){this.permission_sub=s.a.cloneDeep(this.permission),this.$validator=this.$root.$validator;let e=this.$parent||this.$root,t=e.$options.componentName;while(e&&(!t||"HtRuntimeTemplate"!==t))e=e.$parent,e&&(t=e.$options.componentName);e&&(this.formIsView=e.$options.propsData.isView)},mounted(){setTimeout(()=>{const{subScopeEl:e}=l["a"].getSubScopeElAndIndex(this.$el);if(e)if("true"==e.getAttribute("row_readonly")||!0===e.getAttribute("row_readonly"))this.writeable=!1;else{const t=Array.prototype.find.call(e.classList,e=>e.startsWith("row_readonly__"));t&&"row_readonly__true"==t&&(this.writeable=!1)}},50)}}},d222:function(e,t,i){"use strict";i("a002")},d2a8:function(e,t,i){"use strict";i("9ce6")},d360:function(e,t,i){"use strict";i("c3ca")},d678:function(e,t,i){},d68f:function(e,t,i){},d705:function(e,t){e.exports=require("image-conversion")},d82d:function(module,__webpack_exports__,__webpack_require__){"use strict";var _services_SubPagination_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("1639"),_util_base64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("c46f"),_utils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("025e"),_locale__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("fe07");const{saveAs:saveAs}=__webpack_require__("9588");__webpack_exports__["a"]={name:"HtSubExportDialog",props:{dataSubname:{type:String,required:!0},dataColumns:{type:String,required:!0},subtablePagination:{type:Boolean,default:!1},dataSubdesc:{type:String,default(){return Object(_locale__WEBPACK_IMPORTED_MODULE_3__["c"])("ht.subTable.subTableData")}}},computed:{columns:function(){return eval(Object(_util_base64_js__WEBPACK_IMPORTED_MODULE_1__["a"])(this.dataColumns))}},created(){this.$XLSX||console.warn(this.$t("ht.subTable.xlsxWarnMsg"))},methods:{changeRowKey(e){var t=[];return e.forEach(e=>{var i={};this.columns.forEach(t=>{"suntable"!=t.ctrlType&&(i[t.desc]=e[t.name])}),t.push(i)}),t},handleCommand(e){const t=_utils_js__WEBPACK_IMPORTED_MODULE_2__["a"].getOnlineFormInstance(this);_services_SubPagination_js__WEBPACK_IMPORTED_MODULE_0__["a"].exportData(this.dataSubname,e,t,this.subtablePagination).then(e=>{let t=this.changeRowKey(e);const i=this.$XLSX.utils.json_to_sheet(t),a=this.sheet2blob(i);saveAs(a,this.dataSubdesc+".xls")}).catch(e=>{this.$message.error(`${this.$t("ht.subTable.exportError")}：${e}`)})},sheet2blob(e,t){t=t||"sheet1";var i={SheetNames:[t],Sheets:{}};i.Sheets[t]=e;var a={bookType:"xls",bookSST:!1,type:"binary"},s=this.$XLSX.write(i,a),l=new Blob([n(s)],{type:"application/octet-stream"});function n(e){for(var t=new ArrayBuffer(e.length),i=new Uint8Array(t),a=0;a!=e.length;++a)i[a]=255&e.charCodeAt(a);return t}return l}}}},d850:function(e,t,i){},da2c:function(e,t,i){"use strict";i("210e")},da37:function(e,t,i){},da4f:function(e,t,i){},dab3:function(e,t){e.exports=require("deepmerge")},ddb2:function(e,t,i){"use strict";var a=i("025e");t["a"]={data(){return{userAgentMobile:!1}},inject:{elForm:{default:""}},computed:{isMobile:function(){return this.elForm&&this.elForm.$parent&&this.elForm.$parent.mobileMode||this.userAgentMobile}},created(){this.userAgentMobile=a["a"].isMobile()}}},de31:function(e,t,i){"use strict";i("c3b9")},df21:function(e,t,i){"use strict";i("4092")},e486:function(e,t,i){"use strict";i("8dfe")},e49c:function(e,t,i){"use strict";t["a"]={componentGroup:"HtFormInputs",props:{displayStyle:String},data(){return{curInputsDisplay:"",currentShowMode:"text"}},computed:{formInputsDisplay:function(){return this.displayStyle?this.displayStyle:this.curInputsDisplay?this.curInputsDisplay:""},isDisabled(){return this.disabled||"input"===this.currentShowMode&&!this.inputWriteable}},created(){this.$on("formExtend:update",e=>{this.curInputsDisplay=e.inputsDisplay,this.currentShowMode=e.roInputDisplayMode||"text"})}}},e50a:function(e,t,i){"use strict";i("a912")},e557:function(e,t,i){},e561:function(e,t,i){"use strict";i("953f")},e672:function(e,t,i){},e75e:function(e,t,i){"use strict";i("97d6")},eb95:function(e,t,i){},ec82:function(e,t,i){},eeb9:function(e,t,i){"use strict";i("0fde")},eef7:function(e,t,i){},efc4:function(e,t,i){"use strict";i("8f8d")},f076:function(e,t,i){"use strict";i("0bd7")},f0b6:function(module,__webpack_exports__,__webpack_require__){"use strict";var _locale__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fe07");const btnList=[{id:1,label:Object(_locale__WEBPACK_IMPORTED_MODULE_0__["c"])("ht.flowChart.notApproval"),bgColor:"#FF0000"},{id:2,label:Object(_locale__WEBPACK_IMPORTED_MODULE_0__["c"])("ht.flowChart.commit"),bgColor:"#F89800"},{id:3,label:Object(_locale__WEBPACK_IMPORTED_MODULE_0__["c"])("ht.flowChart.recommit"),bgColor:"#FFE76E"},{id:4,label:Object(_locale__WEBPACK_IMPORTED_MODULE_0__["c"])("ht.flowChart.agree"),bgColor:"#00FF00"},{id:5,label:Object(_locale__WEBPACK_IMPORTED_MODULE_0__["c"])("ht.flowChart.suspend"),bgColor:"#C33A1F"},{id:6,label:Object(_locale__WEBPACK_IMPORTED_MODULE_0__["c"])("ht.flowChart.oppose"),bgColor:"#0000FF"},{id:7,label:Object(_locale__WEBPACK_IMPORTED_MODULE_0__["c"])("ht.flowChart.reject"),bgColor:"#8A0902"},{id:8,label:Object(_locale__WEBPACK_IMPORTED_MODULE_0__["c"])("ht.flowChart.rejectToStart"),bgColor:"#FFA500"},{id:9,label:Object(_locale__WEBPACK_IMPORTED_MODULE_0__["c"])("ht.flowChart.withdraw"),bgColor:"#023B62"},{id:10,label:Object(_locale__WEBPACK_IMPORTED_MODULE_0__["c"])("ht.flowChart.withdrawToPromoter"),bgColor:"#F23B62"},{id:11,label:Object(_locale__WEBPACK_IMPORTED_MODULE_0__["c"])("ht.flowChart.countersignaturePassed"),bgColor:"#338848"},{id:12,label:Object(_locale__WEBPACK_IMPORTED_MODULE_0__["c"])("ht.flowChart.countersignatureNotPassed"),bgColor:"#82B7D7"},{id:13,label:Object(_locale__WEBPACK_IMPORTED_MODULE_0__["c"])("ht.flowChart.manualTermination"),bgColor:"#EEAF97"},{id:14,label:Object(_locale__WEBPACK_IMPORTED_MODULE_0__["c"])("ht.flowChart.finish"),bgColor:"#4A4A4A"}];__webpack_exports__["a"]={name:"FlowChart",filters:{calcDuration(e){let t="",i=1e3,a=60*i,s=60*a,l=24*s,n=Math.floor(e/l),o=Math.floor(e%l/s),r=Math.floor(e%s/a),c=Math.floor(e%a/i);return n>0&&(t+=n+Object(_locale__WEBPACK_IMPORTED_MODULE_0__["c"])("ht.common.day")),o>0&&(t+=o+Object(_locale__WEBPACK_IMPORTED_MODULE_0__["c"])("ht.common.hour")),r>0&&(t+=r+Object(_locale__WEBPACK_IMPORTED_MODULE_0__["c"])("ht.common.minute")),c>0&&(t+=c+Object(_locale__WEBPACK_IMPORTED_MODULE_0__["c"])("ht.common.second")),t}},props:{defId:{type:String,default:""},instId:{type:String,default:""},bpmnInstId:{type:String,default:""},customClass:{type:String,default:""}},data(){return{showFlowChart:!1,btnList:btnList,imgWidth:"",imgHeight:"",backGroundImg:"",listLayout:"",nodeOpinions:[]}},methods:{showLayout(e){const t=["USERTASK","SIGNTASK","CUSTOMSIGNTASK"];return t.includes(e.nodeType)},hasOpinion(e){return this.nodeOpinions[e.nodeId].hasOpinion},getData(e){return this.nodeOpinions[e.nodeId].data},getStyle(e){return{position:"absolute",top:e.y+"px",left:e.x+"px",width:e.width+"px",height:e.height+"px",border:"none",background:"none"}},handleOpen(){this.showFlowChart=!0;const data={defId:this.defId,instId:this.instId,bpmnInstId:this.bpmnInstId};this.$requestConfig.instanceFlowImage(data,instFlowInfo=>{const{defId:defId,instanceId:instanceId,bpmDefLayout:bpmDefLayout}=instFlowInfo;let myDefId="";["","null","undefined"].includes(instanceId)&&(myDefId=defId),this.$requestConfig.getBpmImage("",instanceId,myDefId,res=>{this.imgWidth=bpmDefLayout.width,this.imgHeight=bpmDefLayout.height,this.backGroundImg=res,bpmDefLayout.listLayout.forEach(e=>{const t={position:"absolute",left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px"};e.style=t}),this.listLayout=bpmDefLayout.listLayout;const tempIds=[];this.listLayout.forEach(e=>{const{nodeId:t,nodeType:i}=e;["USERTASK","SIGNTASK"].includes(i)&&tempIds.push(t)});let nodeIds=tempIds.join(",");const data={instId:this.instId,nodeIds:nodeIds};this.instId&&this.$requestConfig.getNodeOpinions(data,options=>{if(options)for(const key in options){const{data:data,hasOpinion:hasOpinion}=options[key];data&&hasOpinion&&data.forEach(ele=>{ele.qualfieds&&(ele.qualfieds=eval("("+ele.qualfieds+")"))})}nodeIds&&1==tempIds.length?this.nodeOpinions={[nodeIds]:options}:this.nodeOpinions=options})})})}}}},f230:function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_f230__},f333:function(e,t,i){"use strict";i("ff82")},f38b:function(e,t,i){"use strict";i("35a8")},f3c1:function(e,t,i){},f422:function(e,t,i){"use strict";i("ff71")},f43e:function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_f43e__},f567:function(e,t,i){},f9a3:function(e,t,i){"use strict";i("c687")},fa5c:function(e,t,i){"use strict";i("faa7")},faa7:function(e,t,i){},fb15:function(e,t,i){"use strict";var a;(i.r(t),"undefined"!==typeof window)&&((a=window.document.currentScript)&&(a=a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(i.p=a[1]));var s=i("8bbf"),l=i.n(s);const n="#72c140",o="#ed5b56",r="#f0af41",c="#4091f7",h=20;var u=function(e,t){const{modifiers:i,value:a}=t;if(null!==a&&void 0!==a&&a.constructor==Number&&a<=0)return void(e.flag&&(e.removeChild(e.lastChild),e.flag=!1));const s=Object.keys(i);let u=s.includes("dot"),d="";d=s.includes("success")?n:s.includes("warning")?r:s.includes("info")?c:o;const p=u?`<div style="border:1px solid #fff;position:absolute;top:-5px;right:-5px;height:10px;width:10px;border-radius:50%;background:${d}"></div>`:`<div style="border:1px solid #fff;background:${d};position:absolute;top:-${h/2}px;right:-${h/2}px;height:${h}px;min-width:${h}px;border-radius:${h/2}px;text-align:center;line-height:${h}px;color:#fff;padding:0 5px;">${a}</div>`;e.style.position=e.style.position||"relative";const m=l.a.extend({template:p}),g=(new m).$mount().$el;e.flag&&e.removeChild(e.lastChild),e.appendChild(g),e.flag=!0},d=i("5f72"),p={bind(e,t){if(t.modifiers.dblclick)e.addEventListener("dblclick",()=>m(e.innerText)),e.style.cursor="copy";else if(t.modifiers.icon){if(e.hasIcon)return;const t=document.createElement("i");t.setAttribute("class","el-icon-document-copy"),t.setAttribute("style","margin-left:5px"),e.appendChild(t),e.hasIcon=!0,t.addEventListener("click",()=>m(e.innerText)),t.style.cursor="copy"}else e.addEventListener("click",()=>m(e.innerText)),e.style.cursor="copy"}};function m(e){if(!document.getElementById("copyTarget")){const e=document.createElement("input");e.setAttribute("style","position:fixed;top:0;left:0;opacity:0;z-index:-1000;"),e.setAttribute("id","copyTarget"),document.body.appendChild(e)}const t=document.getElementById("copyTarget");t.value=e,t.select(),document.execCommand("copy"),Object(d["Message"])({message:"复制成功",type:"success"})}var g=function(e,t){t.arg&&(e.style.width=t.arg+"px"),e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.style.textOverflow="ellipsis"},f=function(e,t){const i=document.styleSheets[document.styleSheets.length-1],a=10,[s,l,n,o]=t.expression&&t.expression.split(",")||[],r=`content:"";position:absolute;top:-${s||a}px;bottom:-${n||a}px;right:-${l||a}px;left:-${o||a}px;`,c=e.className.split(" ");e.className=c.includes("expand_click_range")?c.join(" "):[...c,"expand_click_range"].join(" "),e.style.position=e.style.position||"relative",i.insertRule?i.insertRule(".expand_click_range::before{"+r+"}",i.cssRules.length):i.addRule(".expand_click_range::before",r,-1)},y=i("025e"),b=i("5a03"),v={componentUpdated:function(e,t,i){const a=i.context;if(!a.$vnode.data.model)return;let s=a.$vnode.data.model.expression;if(a.$vnode&&a.$vnode.componentOptions&&a.$vnode.componentOptions.propsData&&a.$vnode.componentOptions.propsData.modelExpression&&(s=a.$vnode.componentOptions.propsData.modelExpression),s&&!a._expressInit){a._expressInit=!0;let{subScopeEl:t,subname:i}=y["a"].getSubScopeElAndIndex(e),l=null;if(t){if(!i)throw"无法获取到当前子表前缀";const e=s.split("."),t=e.length;if(t<1)throw`子表中的数据绑定表达式${s}错误`;l=`${i}.${e[t-1]}`}const n=y["a"].getOnlineFormInstance(a);n.watchMap&&(n.watchMap.has(s)||n.watchMap.has(l))&&(a._watchers.some(e=>"inputVal"===e.expression)||a.$watch("inputVal",(function(e,a){if(e!==a){const e=n.watchMap.get(s)||[],a=n.watchMap.get(l)||[],o=e.concat(a),r={};o.forEach(e=>{let a=0;const s=e.target,l=r[s]||[];if(l.indexOf(e.exp)<0)if(l.push(e.exp),r[s]=l,t&&2==s.split(".").length){const l=t.dataset["index"];if(void 0===l)throw"获取不到当前子表行的索引，无法完成计算.";a=b["a"].calcSubExpValue(e.exp,n,i,l),n.$emit(s,{result:a,index:l})}else a=b["a"].calcExpValue(e.exp,n),n.$emit(s,{result:a})})}}),{immediate:!0}))}}};function w(e,t,i){this.$children.forEach(a=>{var s=a.$options.componentName;s===e?a.$emit.apply(a,[t].concat(i)):w.apply(a,[e,t].concat([i]))})}function S(e,t,i){this.$children.forEach(a=>{var s=a.$options.componentGroup;s===e?a.$emit.apply(a,[t].concat(i)):S.apply(a,[e,t].concat([i]))})}function C(e,t){const i=e.__vue__;i&&t.value&&i.$nextTick(()=>{w.apply(i,["HtFormItem","formExtend:update",t.value]),w.apply(i,["HtReadonlyInput","formExtend:update",t.value]),S.apply(i,["HtFormInputs","formExtend:update",t.value])})}var D={bind:function(e,t,i){const a=e=>{if(!e||0==e.length)return;const t=e.items[0],i=function(e,t){return-1!==e.indexOf(t)},a=function(e){return i(["radio","checkbox"],e.type)},s=function(e){return"function"===typeof e};Object.getPrototypeOf(t).constructor.prototype.updateAriaAttrs=function(){var e=this;if(this.aria&&this.el&&s(this.el.setAttribute)){var t=function(t){t.setAttribute("aria-required",e.isRequired?"true":"false"),t.setAttribute("aria-invalid",e.flags.invalid?"true":"false"),null==e.flags.invalid&&t.removeAttribute("aria-invalid")};if(a(this.el)){var i=document.querySelectorAll('input[name="'+this.el.name+'"]');window.toArray(i).forEach(t)}else t(this.el)}}},s=i.context;s.$root.$validator&&a(s.$root.$validator.fields),s&&!s.hasOwnProperty("watchMap")&&(s["watchMap"]=new Map,s.$watch("data",(function(){s.$emit("updateData")}),{deep:!0})),C(e,t)},update:function(e,t){C(e,t)}},x=function(e,t){const{value:i,modifiers:a}=t;if(!i)return;let s=i;a.toFixed&&(s=i.toFixed(2)),a.price&&(s=T(s)),e.innerText=s};function T(e){e+="";let t=e.split("."),i=t[0],a=t.length>1?"."+t[1]:"";var s=/(\d+)(\d{3})/;while(s.test(i))i=i.replace(s,"$1,$2");return i+a}var P=function(e,t){if("TR"!==e.tagName)throw"v-permit指令只能用在tr元素上.";if(!t.value||t.value.constructor!==Number)throw"v-permit指令的值只能是大于0的数字.";if(e.removeAttribute("hidden"),0==e.cells.length)e.setAttribute("hidden","hidden");else if(e.cells.length<t.value){let i=t.value-e.cells.length+1;e.cells[e.cells.length-1].setAttribute("colspan",i)}else if(e.cells.length==t.value)for(var i,a=0;i=e.cells[a++];)i.removeAttribute("colspan")};const E=function(e,t){const i=t.value,a={content:"确定执行该操作？",confirmButtonText:"确定",cancelButtonText:"取消",confirmButtonType:"primary",cancelButtonType:"default",icon:"question",iconColor:"#f90",hideIcon:!1,before:null};let s=null;if("function"==typeof i)a.confirm=i,s=t.arg;else{if("object"!=typeof i)throw"v-popconfirm需要提供表达式或者object对象";Object.assign(a,i),s={...i}}const n=l.a.extend({data(){return{visible:!1,opts:a,iconStyle:{marginRight:"10px",color:a.iconColor}}},methods:{confirm(){a.confirm&&a.confirm.apply(null,[s]),r.doClose()},cancel(){r.doClose()}},template:`<el-popover v-bind="opts" v-model="visible" trigger="click">\n    <div class="el-popconfirm">\n      <p class="el-popconfirm__main">\n        <ht-icon v-if="!opts.hideIcon" :name="opts.icon" :style="iconStyle" />\n        ${a.content}\n      </p>\n      <div class="el-popconfirm__action">\n        <el-button size="mini" :type="opts.confirmButtonType" @click="confirm">{{opts.confirmButtonText}}</el-button>\n        <el-button size="mini" :type="opts.cancelButtonType" @click="cancel">{{opts.cancelButtonText}}</el-button>\n      </div>\n    </div>\n  </el-popover>`}),o=(new n).$mount(),r=o.$children[0];return r.$refs.reference=e,e.addEventListener("click",()=>{if(a.before){const e=a.before.apply(null,[s]);e&&e.constructor==Promise?e.then(()=>r.doShow()):e&&!0===e&&r.doShow()}else r.doShow()}),o.$el};var O={bind:function(e,t){if(e.hasPopconfirm)return;const i=E(e,t);e.appendChild(i),e.hasPopconfirm=!0}},k={bind(e,t){let i="",a="";function s(){const s=document.defaultView.getComputedStyle(e);i===s.width&&a===s.height||t.value(),i=s.width,a=s.height}e.__timer__=setInterval(s,300)},unbind(e){clearInterval(e.__timer__)}},I=function(e,t){if(e.hasIcon)return;const i=$(t.value);t.modifiers&&t.modifiers.after?e.appendChild(i):e.insertBefore(i,e.childNodes[0]),e.hasIcon=!0};function $(e){let t="";if("string"==typeof e)t=`content=${e} `;else{if("object"!=typeof e)throw"v-tooltip需要提供表达式或者object对象";for(let i in e)t+=`${i}=${e[i]} `}const i=`<el-tooltip ${t}><ht-icon name="question" style="margin:0 8px" /></el-tooltip>`,a=l.a.extend({template:i}),s=(new a).$mount();return s.$el}var A={inserted:function(e){const t=e.getElementsByClassName("el-table__body-wrapper")[0]||e,i=["span","input","textarea","aside"];t&&(t.onmousedown=function(a){const s=a.target.tagName.toLowerCase();if(i.includes(s))return;t.style.cursor="grab";let l=a.clientX,n=e.scrollLeft;document.onmousemove=function(e){let i=e.clientX-l;return t.scrollLeft=n-i,!1},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}})}},B={bind(e,t,i){const a=i.context,s=e.id.replace("xh_tablegd_","").split("."),l=a.data[s[0]][s[1]],n=s[1].replace("sub_",""),{field:o,direction:r}=t.value;a.permission.table[n].hidden||0==l.length||l.sort((e,t)=>{const i=isNaN(e[o])?e[o]:Number(e[o]),a=isNaN(t[o])?t[o]:Number(t[o]),s=i<a?-1:i>a?1:0;return s*("desc"==r?-1:1)})}},M={bind(e,t,i){if(t.value){const a=i.context;let s=y["a"].getSubScopeElAndIndex(e),l=t.value.split("_"),n=l[0],o=t.value+"_"+s.index;if("sun"==n&&s.subScopeEl){const e=y["a"].getSubScopeElAndIndex(s.subScopeEl.parentElement);o=t.value+"_"+e.index+"_"+s.index}a.permission&&a.permission["subFields"]&&a.permission["subFields"][o]&&setTimeout((function(){e.__vue__&&(e.__vue__.permission_sub=a.permission["subFields"][o],e.__vue__.sub_work=!0)}),0)}},update(e,t,i){if(t.value){const a=i.context;let s=y["a"].getSubScopeElAndIndex(e),l=t.value.split("_"),n=l[0],o=t.value+"_"+s.index;if("sun"==n&&s.subScopeEl){const e=y["a"].getSubScopeElAndIndex(s.subScopeEl.parentElement);o=t.value+"_"+e.index+"_"+s.index}a.permission&&a.permission["subFields"]&&a.permission["subFields"][o]&&setTimeout((function(){e.__vue__&&(e.__vue__.permission_sub=a.permission["subFields"][o])}),0)}}},L={bind(e,t,i){if(t.value){const a=i.context;let s=y["a"].getSubScopeElAndIndex(e),l=t.value.split("_"),n=l[0],o=t.value+"_"+s.index;if("sun"==n&&s.subScopeEl){const e=y["a"].getSubScopeElAndIndex(s.subScopeEl.parentElement);o=t.value+"_"+e.index+"_"+s.index}a.permission&&a.permission["subFields"]&&a.permission["subFields"][o]&&setTimeout((function(){e.parentElement.hidden="n"==a.permission["subFields"][o]}),0)}},update(e,t,i){if(t.value){const a=i.context;let s=y["a"].getSubScopeElAndIndex(e),l=t.value.split("_"),n=l[0],o=t.value+"_"+s.index;if("sun"==n&&s.subScopeEl){const e=y["a"].getSubScopeElAndIndex(s.subScopeEl.parentElement);o=t.value+"_"+e.index+"_"+s.index}a.permission&&a.permission["subFields"]&&a.permission["subFields"][o]&&setTimeout((function(){e.parentElement.hidden="n"==a.permission["subFields"][o]}),0)}}};const F={get:e=>new Promise((t,i)=>{e||i("alias can not be null."),l.a.prototype.$requestConfig.getCustomQuery(e).then(e=>t(e)).catch(e=>i(e))}),load:(e,t,i)=>new Promise((a,s)=>{F.get(e).then(e=>{F._doQuery({...e,config:i},t,i&&i.page?"pagination":"1",t=>{let s=null;i&&i.page?(s={listKey:e.listKey,paginationConfig:{pageKey:e.pageKey,pageSizeKey:e.pageSizeKey,totalKey:e.totalKey},needPage:e.needPage},s=t.constructor===Array?{[e.listKey?e.listKey:"rows"]:t,...s}:{...t,...s}):s=t,a(s)})},()=>{s()})}),_throwException:e=>{throw d["Message"].error(e),e},_handlePostData:(e,t)=>{if(!e.dataParam||e.dataParam.constructor!=String)return t;let i={};t&&t.forEach(e=>{i[e.key]=e.value});const a=y["a"].parseExp(e.dataParam,i);try{return JSON.parse(a)}catch(s){F._throwException("POST参数不是有效的JSON格式"+e.dataParam)}},_handleGetUrl:(e,t)=>{e||F._throwException("Restful类型的url地址为空");let i=[];t&&t.forEach(e=>{i.push(`${e.key}=${e.value}`)});const a=-1==e.indexOf("?")?"?":"&";return`${e}${a}${i.join("&")}`},_doQuery:(e,t,i,a)=>{t=t||{},e={...e};const s=t.page||1;let n=[];if(e.conditionfield)try{const i=JSON.parse(e.conditionfield);i&&i.constructor==Array&&i.length>0&&i.forEach(i=>{let a={key:i.field,value:i.defaultValue||""};"1"==i.defaultType&&t.hasOwnProperty(i.field)&&(a.value=t[i.field]||"",e.config&&1!==e.config.page&&(e.config.page=1)),n.push(a)})}catch(c){F._throwException("条件字段的JSON格式错误："+c)}"dataSource"!=e.dsType&&("POST"==e.requestType?n=F._handlePostData(e,n):"GET"==e.requestType&&(e.url=F._handleGetUrl(e.url,n)));const o="dataSource"==e.dsType?"${form}/form/customQuery/v1/doQuery?alias="+e.alias+"&page="+s:e.url;let r="POST";"dataSource"!=e.dsType&&(r=e.requestType),"dataSource"!=e.dsType&&e.config&&e.config.isChangePage&&(n.pageBean.page=e.config.page),l.a.prototype.$requestConfig.request({url:o,method:r,data:n,headers:e.header},e.dsType).then(t=>{if("1"==i)if("dataSource"==e.dsType)a(t.rows);else{const i=F._handleResponse(t,e.listKey);a(i)}else if("pagination"===i)if("dataSource"==e.dsType)a(t);else{const s=F._handleResponse(t,e.listKey,i);a(s)}},()=>{a([])})},_handleResponse:(e,t,i)=>{if(!e)return d["Message"].error("返回的数据为空"),[];if(e.constructor==String)try{e=JSON.parse(e)}catch(a){F._throwException("将返回值解析为JSON对象时出错了："+a)}if(e.constructor==Object){if(!t)return i?e:[e];try{return i?e:y["a"].getValueByPath(e,t)}catch(a){F._throwException("从返回的数据中提取数组时出错了："+a)}}else{if(e.constructor==Array)return e;F._throwException("返回的数据无法解析:"+e)}}};var N=F,q={bind:function(e,t,i){const a=i.context;let s=null;t.expression&&(s=y["a"].parseToJson(t.expression)),a&&(a.preRelatedQueryParams={},a.$on("related-query:load",(t,i,l)=>{i=i||{};let n=!0;if(s&&s.cache){const e=!y["a"].objectEquals(a.preRelatedQueryParams[t],i);e?(n=!0,a.preRelatedQueryParams[t]=i):n=!1}n&&N.load(t,i).then(t=>{if(t&&t.constructor==Array&&t.length>0&&l&&l.constructor==Object){let{index:i}=y["a"].getSubScopeElAndIndex(e);const s=y["a"].getOnlineFormInstance(a),n=t[0];Object.keys(l).forEach(e=>{const t=l[e];null==i?y["a"].setValueByPath(s,t,n[e]):y["a"].setValueByPath(s,t,n[e],i)})}})}))}},V=i("3588");const R={badge:u,copy:p,ellipsis:g,expandClick:f,express:v,form:D,format:x,permit:P,popconfirm:O,resize:k,tooltip:I,subSort:B,permissionLine:M,permissionLineLable:L,formula:V["b"],tableDrag:A,relatedQuery:q};Object.keys(R).forEach(e=>l.a.directive(e,R[e])),l.a.use(V["a"]);var z=function(e){if(null==e||""==e)return"0 Bytes";var t=new Array("Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"),i=0,a=parseFloat(e);i=Math.floor(Math.log(a)/Math.log(1024));var s=a/Math.pow(1024,i);return s=s.toFixed(2),s+t[i]},H=function(e,t="yyyy-MM-dd hh:mm:ss"){return e?("yyyy-MM-dd hh:mm:ss"==t&&(t="YYYY-MM-DD HH:mm:ss"),new Date(e).format(t)):""};const U={computerSize:z,dateFormat:H};Object.keys(U).forEach(e=>l.a.filter(e,U[e]));var K=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("van-overlay",{attrs:{show:e.isShow,"custom-style":{background:"rgb(0, 0, 0, 0.2)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:5e3}}},[i("van-loading",{attrs:{size:"24px",color:e.color||"#409eff"}},[i("span",{style:{color:e.color||"#409eff"}},[e._v(e._s(e.title||"加载中···"))])])],1)],1)},j=[];function W(e,t,i,a,s,l,n,o){var r,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=i,c._compiled=!0),a&&(c.functional=!0),l&&(c._scopeId="data-v-"+l),n?(r=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},c._ssrRegister=r):s&&(r=o?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),r)if(c.functional){c._injectStyles=r;var h=c.render;c.render=function(e,t){return r.call(t),h(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,r):[r]}return{exports:e,options:c}}var Q={},J=W(Q,K,j,!1,null,null,null),G=J.exports;const Y={install:e=>{const t=e.extend(G);let i,a;function s(e="",s="",l=2e3){a||i?i.isShow=!0:(a=document.createElement("div"),i=new t({el:a,data(){return{isShow:!0,title:e,color:s}}}),document.body.appendChild(i.$el))}function l(){i&&(i.isShow=!1)}e.prototype.$showLoading=s,e.prototype.$cancelLoading=l}};var Z=Y,X=i("8d8b");const ee=i("c5e1"),te=e=>({getValue(e){return this.executeScript(e)},executeScript(t){let i="";return ee.ajax({type:"POST",async:!1,contentType:"application/json;charset=UTF-8",url:e.prototype.$requestConfig.flowUrl+"/runtime/script/v1/executeScript",data:t,beforeSend:function(t){t.setRequestHeader("Authorization",e.prototype.$requestConfig.getToken())},success:function(e){e.state?i=e.value:console.log("执行脚本失败："+e.message)},error:function(e){console.log(e.status),console.log(e.responseText)}}),i}});te.install=e=>{e.prototype.$CommonScripts=te(e)};var ie=te,ae=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!==e.permission?i("div",{directives:[{name:"express",rawName:"v-express"}],class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline",e.company?"has-company-box":""]},[e.isShowInput?i("el-input",{directives:[{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],ref:"inputEle",style:e.inputWidth,attrs:{type:e.type,size:e.inputSize,name:e.inputName,placeholder:e.placeholder,clearable:e.clearable,"show-password":e.showPassword,disabled:e.isDisabled,readonly:e.readonly,rows:e.rowsVal,cols:e.colsVal,min:e.min,max:e.max,autosize:e.autosize,resize:e.resize,tabindex:e.tabindex,"prefix-icon":e.prefixIcon,"suffix-icon":e.suffixIcon,minlength:e.minlength,maxlength:e.maxlength,"show-word-limit":e.showWordLimit},on:{blur:e.handleBlur,focus:e.handleFocus,change:e.handleChange,input:e.handleInput,clear:e.handleClear},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}},[e._t("prefix",null,{slot:"prefix"}),e._t("suffix",null,{slot:"suffix"}),e._t("prepend",null,{slot:"prepend"}),e._t("append",null,{slot:"append"})],2):e._e(),e.inputWriteable&&"number"==e.type?[e.isNumber?i("el-input-number",{directives:[{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],ref:"inputEle",style:e.inputWidth,attrs:{type:e.type,"controls-position":e.controlsPosition,size:e.inputSize,name:e.inputName,placeholder:e.placeholder,clearable:e.clearable,disabled:e.disabled,readonly:e.readonly,min:e.min,max:e.max,step:e.step,"step-strictly":e.stepStrictly,precision:e.precision},on:{blur:e.handleNumberBlur,focus:e.handleFocus,change:e.handleChange},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}}):i("el-input",{ref:"exhibit",staticClass:"exhibit",style:e.inputWidth,attrs:{type:"text","controls-position":e.controlsPosition,size:e.inputSize,name:e.inputName,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,min:e.min,max:e.max,step:e.step,"step-strictly":e.stepStrictly,precision:e.precision},on:{focus:e.exhibitFocus},model:{value:e.exhibitText,callback:function(t){e.exhibitText=t},expression:"exhibitText"}}),e.company?i("span",[e._v(e._s(e.company))]):e._e()]:e._e(),e.isShowText?i("ht-field-tail",{attrs:{"field-name":e.inputName,readonly:!e.inputWriteable,"input-value":e.readOnlyInputVal,company:e.company,precision:e.precision,type:e.type,"filter-currency":e.filtercurrency,"filterthousand-bit":e.filterthousandBit}},[e._t("prefix",null,{slot:"prefix"}),e._t("suffix",null,{slot:"suffix"}),e._t("prepend",null,{slot:"prepend"}),e._t("append",null,{slot:"append"})],2):e._e()],2):e._e()},se=[],le=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"field-tail__wrap"},[e.hasErrors?i("small",{staticClass:"el-form-item__error"},[e._v("\n    "+e._s(e.errorMessage)+"\n  ")]):e._e(),e.readonly&&0==e.tagFormatValue.length?i("div",{staticClass:"field-tail"},[e.isReadonlyTextarea?i("div",e._l(e.formatInputValue,(function(t,a){return i("div",{key:a},[t?i("p",{staticClass:"readonly_p"},[e._t("prefix"),e._t("suffix"),e._t("prepend"),e._v("\n          "+e._s(t)+"\n          "),e._t("append")],2):i("br")])})),0):e.$readonlyInput?i("el-input",{attrs:{disabled:""},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):i("span",[e._t("prefix"),e._t("suffix"),e._t("prepend"),e._v("\n      "+e._s(e.currentShowValue)+"\n      "),e.company&&!e.filterCurrency?[e._v(e._s(e.company))]:e._e(),e._t("append")],2)],1):e._e(),e.readonly&&e.tagFormatValue.constructor==Array&&e.tagFormatValue.length>0?[e._l(e.tagFormatValue,(function(t,a){return[i("el-tooltip",{key:a,staticClass:"tooltip-item",attrs:{"popper-class":"tooltip-item-popper",effect:"dark",content:t,placement:"top-start"}},[i("el-tag",{staticClass:"field-tail-tag"},[e._v("\n          "+e._s(t)+"\n        ")])],1)]}))]:e._e()],2)},ne=[],oe={name:"HtFieldTail",props:{fieldName:{type:String,required:!0},readonly:{type:Boolean,default:!1},inputValue:{type:[String,Number,Object,Array,Boolean]},tagFormatValue:{type:[Array],default(){return[]}},writeable:{type:Boolean,default:!0},company:String,filterCurrency:{type:Boolean,default:!1},filterthousandBit:{type:Boolean,default:!1},type:String,precision:Number},data(){return{scopeName:null}},computed:{fieldScopePath:function(){let e=this.fieldName;return this.scopeName&&(e=`${this.scopeName}.${this.fieldName}`),e},hasErrors:function(){return this.errors&&this.errors.has(this.fieldScopePath)},errorMessage:function(){return this.errors&&this.errors.first(this.fieldScopePath)},formatInputValue(){let e=[];return this.readonly&&"string"===typeof this.inputValue&&(e=this.inputValue.includes("↵")?this.inputValue.split("↵"):this.inputValue.includes("\n")?this.inputValue.split("\n"):[this.inputValue]),e},isReadonlyTextarea(){return"string"===typeof this.inputValue&&(this.inputValue.includes("↵")||this.inputValue.includes("\n"))},currentShowValue(){const e=this.filterthousandBit||this.filterCurrency;return"number"!==this.type||e?this.inputValue:Number(this.inputValue).toFixed(this.precision)}},mounted(){setTimeout(()=>{this.scopeName=y["a"].getSomeAttributeFromParentElement(this.$el.parentElement,"data-vv-scope");const{subScopeEl:e}=y["a"].getSubScopeElAndIndex(this.$el.parentElement);if(e)if("true"==e.getAttribute("row_readonly")||!0===e.getAttribute("row_readonly"))this.$emit("update:writeable",!1);else{const t=Array.prototype.find.call(e.classList,e=>e.startsWith("row_readonly__"));t&&"row_readonly__true"==t&&this.$emit("update:writeable",!1)}},50)},created(){this.$validator=this.$root.$validator}},re=oe,ce=(i("f9a3"),i("d360"),W(re,le,ne,!1,null,"fa7a90c8",null)),he=ce.exports;he.install=function(e){e.component(he.name,he)};var ue=he,de=i("d215"),pe=i("895f"),me=i("e49c"),ge=i("60bb"),fe=i.n(ge),ye={name:"HtInput",components:{HtFieldTail:ue},mixins:[de["a"],pe["a"],me["a"]],props:{value:[String,Number],controlsPosition:{type:String,default:"right"},width:[String,Number],clearable:{type:Boolean,default:!0},showPassword:{type:Boolean,default:!1},mathExp:String,type:{type:String,default:"text"},ctrlType:{type:String,default:""},dateCalcExp:Object,readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},min:Number,max:Number,step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},precision:Number,cols:{type:Number,default:60},rows:{type:Number,default:2},autosize:{type:[Boolean,Object],default:!1},prefixIcon:String,suffixIcon:String,tabindex:String,minlength:{type:Number},maxlength:{type:Number},showWordLimit:{type:Boolean,default:!1},format:{type:Function},formatWhenReadonly:{type:Boolean,default:!0},filterthousandBit:{type:Boolean,default:!1},filtercurrency:{type:Boolean,default:!1},configAttributes:Object,company:String,resize:{type:String}},data(){return{unwatchAry:[],morphing:!1,tempInputVal:null,isFocus:!1,exhibitText:"",isNumber:!0,numberPreBlur:!1}},computed:{inputVal:{get(){if(!this.isFocus||"number"!==this.type||0!==this.value)return this.morphing&&null!==this.tempInputVal?this.tempInputVal:y["a"].isEmpty(this.value)?"":this.value},set(e){this.isFocus&&"number"===this.type&&void 0===e?this.$emit("input",0):!this.morphing&&this.$emit("input",e)}},colsVal:function(){return"textarea"==this.type?this.cols:null},rowsVal:function(){return"textarea"==this.type?this.rows:null},inputWidth:function(){return this.width?"string"==typeof this.width?{width:this.width}:{width:this.width+"px"}:null},isShowText(){return!!this.inputWriteable||("number"===this.type?"n"!==this.permission_sub:"n"!==this.permission_sub&&"input"!==this.currentShowMode)},isShowInput(){return(this.inputWriteable||"input"===this.currentShowMode)&&"number"!==this.type},readOnlyInputVal(){return this.filterthousandBit||this.filtercurrency?this.exhibitText:this.inputVal}},watch:{value:function(){this.morphing&&null!==this.tempInputVal&&this.enterMorph()},inputWriteable:function(e,t){e!=t&&(e||this.formatWhenReadonly?this.enterMorph():this.exitMorph())}},mounted(){const e=this,t=this.mathExp,i=y["a"].getOnlineFormInstance(e);if(this.initIdentity(e,i),t){let a=this.$vnode.data.model.expression;this.modelExpression&&(a=this.modelExpression);const s=b["a"].parseFuncexpField(t);i.$on(a,(function(t){if(t.hasOwnProperty("index")){const{subScopeEl:i,index:a}=y["a"].getSubScopeElAndIndex(e.$el);if(null!=i&&null===a)throw"要计算子表行数据的输入框不在包含data-subname属性的元素中.";a==t.index&&e.$emit("input",t.result)}else e.$emit("input",t.result)})),s.forEach(e=>{if(i.watchMap.has(e)){let s=i.watchMap.get(e);s.push({target:a,exp:t}),i.watchMap.set(e,s.unique("target"))}else i.watchMap.set(e,[{target:a,exp:t}])})}if(this.dateCalcExp){let t=function(t,i){e.$emit("input",y["a"].dateCalc(t,i,e.dateCalcExp.diffType))};const{subScopeEl:a,index:s}=y["a"].getSubScopeElAndIndex(e.$el);if(a){const e=y["a"].getSubInputScopeByModelExpression(a,this.dateCalcExp.start),i=y["a"].getSubInputScopeByModelExpression(a,this.dateCalcExp.end);e.$watch("inputVal",(function(a,s){a!==s&&t(e.value,i.value)}),{immediate:!1}),i.$watch("inputVal",(function(a,s){a!==s&&t(e.value,i.value)}),{immediate:!1})}else{let a=function(a,l){if(a!==l){let a=y["a"].getValueByPath(i,e.dateCalcExp.start,s),l=y["a"].getValueByPath(i,e.dateCalcExp.end,s);t(a,l)}};i.$watch(this.dateCalcExp.start,a,{immediate:!0}),i.$watch(this.dateCalcExp.end,a,{immediate:!0})}}this.enterMorph(),"number"==this.type&&(this.filtercurrency||this.filterthousandBit)&&window.addEventListener("click",this.clickOther)},beforeDestroy(){"number"==this.type&&(this.filtercurrency||this.filterthousandBit)&&window.removeEventListener("click",this.clickOther);let e=this,t=e._watchers&&e._watchers.find(e=>"inputVal"==e.expression);t&&t.cb&&t.cb("0",e.inputVal,!0)},destroyed(){this.unwatchAry&&this.unwatchAry.forEach(e=>{e.call()})},methods:{handleNumberBlur(e){"number"!=this.type||!this.filtercurrency&&!this.filterthousandBit?this.handleBlur(e):this.numberPreBlur=!0},clickOther(e){setTimeout(()=>{if(!this.numberPreBlur)return;const t=e.path||e.composedPath&&e.composedPath(),i=t.some(e=>e.className&&e.className.indexOf("el-input-number")>-1);i||(this.handleBlur(e),this.numberPreBlur=!1)},10)},exhibitFocus(){this.isNumber=!0,this.$nextTick(()=>{this.$refs.inputEle.focus()})},handleBlur(e){this.isFocus=!1,this.enterMorph(),this.$emit("blur",e)},handleFocus(e){this.isFocus=!0,this.exitMorph(),this.$emit("focus",e)},handleChange(e){this.$emit("change",e)},handleInput(e){this.$emit("input",e)},handleClear(){this.$emit("clear")},enterMorph(){const e=["currency","number"];if(!(this.morphing||"text"!=this.type&&"currency"!==this.ctrlType&&"number"!==this.ctrlType))if(this.format){const e=this.format(this.value);e&&e.constructor==Promise?e.then(e=>{this.morphing=!0,this.tempInputVal=e}):null!=e&&void 0!=e&&(this.morphing=!0,this.tempInputVal=e)}else this.filtercurrency?(this.morphing=!0,e.includes(this.ctrlType)?(y["a"].isEmpty(this.value)&&this.min&&this.$emit("input",this.min),this.$nextTick(()=>{this.exhibitText=b["a"].convertCurrency(this.value),this.isNumber=!1})):this.tempInputVal=b["a"].convertCurrency(this.value)):this.filterthousandBit&&(this.morphing=!0,e.includes(this.ctrlType)?(y["a"].isEmpty(this.value)&&this.min&&this.$emit("input",this.min),this.$nextTick(()=>{this.exhibitText=y["a"].thousandBit(this.value),this.isNumber=!1})):this.tempInputVal=y["a"].thousandBit(this.value))},exitMorph(){this.morphing=!1,this.tempInputVal=null},recordBindIdentityInWatchMap(e){if(!e||!e.watchMap||!this.modelName)return;let t=e.watchMap.get("bindIdentityModelNameList");null!=t&&void 0!=t||(t=[]),t.push(this.modelName),t=t.unique(),e.watchMap.set("bindIdentityModelNameList",t)},initIdentity(e,t){if(this.configAttributes){if(this.isEdit=!this.configAttributes.isInputEdit,this.configAttributes.bindIdentityAlias){if(this.recordBindIdentityInWatchMap(t),this.isEdit=!1,this.value)return;var i=this.configAttributes.bindIdentityAlias;this.$requestConfig.getNextIdByAlias(i).then(e=>{if(e.state){if(this.$emit("input",e.value),e.value){var t=/(\{(.*)\}).*$/.exec(e.value);if(t){this.$emit("input",e.value.replace(t[1],""));const i=y["a"].getRuntimeTemplateOnlineForm(this);i&&t[2]&&i.$watch("data."+t[2],(i,a)=>{i!=a&&(this.modelName==="data."+t[2]?this.$message.error(this.$t("ht.input.serialNumberErrorMsg")):this.$emit("input",e.value.replace(t[1],i)))},{immediate:!0})}}}else this.$message.error(e.message)})}e.$watch("inputVal",(function(){t.$watch("identityMap",(function(i,a){if(i&&i!==a)for(const s in i)if(e.modelName==s){let a=i[s];y["a"].setValueByPath(t,a.key,a.value.replace(a.expression,e.value))}}),{immediate:!0})}))}}}},be=ye,_e=(i("a128"),W(be,ae,se,!1,null,"4c5cc602",null)),ve=_e.exports;ve.install=function(e){e.component(ve.name,ve)};var we=ve,Se=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[e.inputWriteable?i("el-checkbox-group",{directives:[{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],attrs:{size:e.inputSize,name:e.inputName,min:e.min,max:e.max,disabled:e.disabled||e.readonly},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}},e._l(e.optionsVal,(function(t){return i("el-checkbox",{key:t.key,class:{"el-checkbox-vertical":"vertical"==e.optionLayout,"el-checkbox-horizontal":"horizontal"==e.optionLayout},attrs:{label:t.key,disabled:t.disabled},on:{change:e.handleCheckboxChange}},[e._v("\n      "+e._s(t.value)+"\n    ")])})),1):e._e(),i("ht-field-tail",{attrs:{"field-name":e.inputName,readonly:!e.inputWriteable,"input-value":"","tag-format-value":e.inputVal}})],1):e._e()},Ce=[];const De={linkageHandler:(e,t)=>{if(!e||!e._isVue)throw e.$t("ht.linkage.objectIsEmpty");if(!t||t.constructor!==Object&&t.constructor!==Array)throw e.$t("ht.linkage.typeError",{exp:t});let i=t;t.constructor===Object&&(i=[t]);const a=y["a"].getOnlineFormInstance(e);if(!a)throw e.$t("ht.linkage.getFormError");e.traces={},e.subtableRestores=[],e.subtableApplies=[];const s=function(t,i){let s=y["a"].getSubScopeElAndIndex(e.$el),l=t.target.split("."),n=t.boType+"_"+l[l.length-2]+"_"+l[l.length-1],o=n+"_"+s.index,r="permission.subFields";if("sun"==t.boType){const e=y["a"].getSubScopeElAndIndex(s.subScopeEl.parentElement);n=t.boType+"_"+l[l.length-2]+"_"+l[l.length-1]+"_"+e.index,o=n+"_"+s.index}a.permission["subFields"]||y["a"].setValueByPath(a,r,{}),y["a"].setValueByPath(a,r+"."+o,i);let c=!0;const h=a.permission["subFields"];for(const e in h){const t=h[e]&&"n"==h[e];if(0==e.indexOf(n)&&!t){c=!1;break}}const u=`permission.fields.${l[l.length-2]}.${l[l.length-1]}`,d=y["a"].getValueByPath(a,u);y["a"].setValueByPath(a,u,c?"n":"n"==d?"w":d),setTimeout(()=>{a.permission=Object.assign({},a.permission)},100)},l=function(e){e&&0!=e.length&&(e.forEach(e=>{const{target:t,value:i}=e,s=y["a"].getValueByPath(a,t);let l=t.split(".");if(4==l.length&&"hidden"==l[3]&&i&&s!==i)for(let n in a.data)for(let e in a.data[n])if("sub_"+l[2]==e){a.data[n][e].splice(0,a.data[n][e].length);break}y["a"].setValueByPath(a,t,i)}),e.splice(0,e.length))},n=fe.a.debounce(()=>{const t=[];e.subtableRestores.forEach(i=>{const a=e.subtableApplies.find(e=>i.target===e.target);a?t.push({...a}):t.push({...i})}),e.subtableRestores.splice(0,e.subtableRestores.length),e.subtableApplies.splice(0,e.subtableApplies.length),l(t)},100);e._doRestoreLinkageWithTraces=function(){i.forEach(t=>{const i=[];t.effect.forEach(t=>{const l=t.target+"Init";let n=y["a"].getValueByPath(a,l);if(void 0==n&&(n=e.traces[t.target],null!==n&&void 0!==n&&y["a"].setValueByPath(a,l,n)),t.target)if(-1!=t.target.indexOf("permission.table"))null!==n&&void 0!==n&&i.push({target:t.target,value:n});else{let e=t.boType;!e||"sub"!=e&&"sun"!=e?y["a"].setValueByPath(a,t.target,n):s(t,n)}if(t.ref&&-1!=t.ref.indexOf("sub_")){let i=t.ref.split(".");if(4==i.length&&t.ref&&document.querySelector('[model-name="'+t.ref+'"]')){let i=y["a"].getSubScopeElAndIndex(e.$el),a=document.querySelectorAll('[model-name="'+t.ref+'"]');a[i.index].__vue__._data.newValidate=null}}else t.ref&&document.querySelector('[model-name="'+t.ref+'"]')&&(document.querySelector('[model-name="'+t.ref+'"]').__vue__._data.newValidate=null)}),o(i,!0)})};const o=function(t,i){t&&0!=t.length&&(i?e.subtableRestores=e.subtableRestores.concat(t):e.subtableApplies=e.subtableApplies.concat(t),n())};i.forEach(t=>{t.effect.forEach(t=>{e.traces[t.target]=y["a"].getValueByPath(a,t.target)})});const r=function(t,i,a){if(void 0==e.inputVal||!(e.inputVal instanceof Array))return a;var s=[];return t.forEach(t=>{e.inputVal.includes(t.value)&&t.effect.forEach(e=>{e.target==i&&s.push(e.value)})}),s.includes("b")?"b":s.includes("w")?"w":s.includes("r")?"r":a};e.$watch("inputVal",(function(t,l){if(t!==l){if(t&&t.constructor==Object&&y["a"].objectEquals(t,l))return;if(t&&t.constructor==Array&&y["a"].arrayEquals(t,l))return;e._doRestoreLinkageWithTraces(),i.forEach(l=>{let n=!1;t&&(t.constructor===String?n=t===l.value:t.constructor===Array&&(n=t.some(e=>e===l.value),!n&&e.$isCheckbox&&e.getOptionKeyByValue&&(n=e.getOptionKeyByValue(t).some(e=>e===l.value))));const c=[];l.effect.forEach(t=>{if(n)switch(t.type){case"=":{let e=r(i,t.target,t.value);!a.isLook||"b"!==e&&"w"!==e||(e="r");let l=t.boType;!l||"sub"!=l&&"sun"!=l?t.target&&-1!=t.target.indexOf("permission.table")?null===e||void 0===e||this.$hideTip||(c.push({target:t.target,value:e}),o(c)):y["a"].setValueByPath(a,t.target,e):s(t,e);break}case"+":if(!t.value||t.value.constructor!==Object&&t.value.constructor!==String)throw e.$t("ht.linkage.appendValidationRulesError",{value:t.value});if(t.target){const e=y["a"].getValueByPath(a,t.target),i=y["a"].mergeValidate(e,t.value);y["a"].setValueByPath(a,t.target,i)}t.ref&&setTimeout(()=>{if(document.querySelector('[model-name="'+t.ref+'"]'))if(t.ref&&-1!=t.ref.indexOf("sub_")){let i=t.ref.split(".");if(4==i.length){let i=y["a"].getSubScopeElAndIndex(e.$el),a=document.querySelectorAll('[model-name="'+t.ref+'"]'),s=a[i.index].__vue__,l=s.validate;const n=y["a"].mergeValidate(l,t.value);s._data.newValidate=n}}else{let e=document.querySelector('[model-name="'+t.ref+'"]').__vue__,i=e.validate;if(null!==t.value&&void 0!==t.value&&t.value.indexOf("confirmed:")>-1){let s=t.value.replace("confirmed:","");t.value="confirmed:"+y["a"].getValueByPath(a,s);let l=document.querySelector('[model-name="'+s+'"]').__vue__;l.$watch("inputVal",(function(t){const a=y["a"].mergeValidate(i,"confirmed:"+t);e._data.newValidate=a}))}const s=y["a"].mergeValidate(i,t.value);e._data.newValidate=s}},100);break;case"-":if(!t.value||t.value.constructor!==Object&&t.value.constructor!==String)throw e.$t("ht.linkage.decreaseValidationRulesError",{value:t.value});if(t.target){const e=y["a"].getValueByPath(a,t.target),i=y["a"].reduceValidate(e,t.value);y["a"].setValueByPath(a,t.target,i)}if(t.ref){const e=a.$refs[t.ref].validate,i=y["a"].reduceValidate(e,t.value);a.$refs[t.ref].newValidate=i}break}})})}}),{immediate:!0})}};var xe={props:{linkage:Array},mounted(){if(this.linkage){const e=this.linkage;if(e&&e.length>0){const t=y["a"].getOnlineFormInstance(this);t&&t.permission&&e.forEach(e=>{let i=e.effect;i.forEach(e=>{let i=y["a"].getValueByPath(t,e.target);e.target&&-1!=e.target.indexOf("permission")&&"n"!=e.value&&"r"==i&&(e.value=i)})})}this.$nextTick(()=>{De.linkageHandler(this,e)})}}},Te={props:{ganged:Object,props:{type:Object,default:function(){return{key:"key",value:"value"}}}},data(){return{_preParamsVal:null,isChangePage:!1}},computed:{propKey:function(){return this.props&&this.props.key?this.props.key:"key"},propValue:function(){return this.props&&this.props.value?this.props.value:"value"}},methods:{doCustomQuery:function(e,t,i){if(!this.ganged||!this.ganged.alias)return new Promise(e=>e(null));const a=e||this._prepareLoadParams(this.ganged.bind);if(y["a"].objectEquals(this._preParamsVal,a))return new Promise(e=>e(null));if(this._preParamsVal=a,!i){let e={page:1};i=e}return a.page=i.page||1,new Promise((e,s)=>{N.load(this.ganged.alias,a,i).then(a=>{this.ganged.needPage=a?a.needPage:0;const s=a&&a.listKey?y["a"].getValueByPath(a,a.listKey):a&&a.rows;if(i.page){const{paginationConfig:e}=a;this.pageBean={page:this.isChangePage?i.page:a[e.pageKey],pageSize:a[e.pageSizeKey],total:a[e.totalKey]}}if(t){const t=[],l=i.page?s:a;l.forEach(e=>{const i={};this.ganged.valueBind&&(i[this.propKey]=e[this.ganged.valueBind]),this.ganged.labelBind&&(i[this.propValue]=e[this.ganged.labelBind]),t.push(i)}),this.ganged.valueBind?e(t.unique(this.propKey)):e(t)}else e(i.page?s:a)}).catch(e=>{N._throwException(e),s(e)})})},_prepareLoadParams:function(e){let t={};if(e&&!y["a"].isEmpty(e)){let{index:i}=y["a"].getSubScopeElAndIndex(this.$el);const a=y["a"].getOnlineFormInstance(this);Object.keys(e).forEach(s=>{const l=e[s];let n=null;if(l.constructor==Object){const e=l["key"],t=l["default"],s=l["groovyScript"];e&&(n=null==i?y["a"].getValueByPath(a,e):y["a"].getValueByPath(a,e,i)),null!=n&&void 0!=n||(n=t),null!=n&&void 0!=n||!s||(n='{"groovyScript":"'+s+'"}')}else l.constructor==String&&(n=null==i?y["a"].getValueByPath(a,l):y["a"].getValueByPath(a,l,i));y["a"].isEmpty(n)||(t[s]=n)})}return t}}},Pe={data(){return{currentFormInstance:null}},watch:{currentFormInstance:function(e,t){!t&&e&&e.$on&&(e.$off("updateData",this.handleUpdateData),e.$on("updateData",this.handleUpdateData))}},mounted(){null==this.currentFormInstance&&(this.currentFormInstance=y["a"].getOnlineFormInstance(this))},beforeDestroy(){this.currentFormInstance&&this.currentFormInstance.$off&&this.currentFormInstance.$off("updateData",this.handleUpdateData)},methods:{handleUpdateData(){this.$emit("formDataUpdate")}}},Ee={name:"HtCheckbox",components:{HtFieldTail:ue},mixins:[de["a"],pe["a"],xe,Te,me["a"],Pe],props:{value:String,optionLayout:{type:String,default:"horizontal",validator:function(e){return["horizontal","vertical"].some(t=>t==e)}},options:Array,cklist:String,readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},min:Number,max:Number},data(){return{optionsVal:[]}},computed:{inputVal:{get:function(){if(y["a"].isEmpty(this.value)||!this.optionsVal||0==this.optionsVal.length)return[];if(this.value.constructor==String){const e=this.value.split(",");if(this.inputWriteable)return e;{let t=[];return e.forEach(e=>{const i=this.optionsVal.find(t=>t.key===e);i&&t.push(i.value)}),t}}return[]},set:function(){}}},watch:{options:function(){this.loadOption()}},created(){this.$on("formDataUpdate",()=>{this.loadOption()})},mounted(){this.$isCheckbox=!0,this.loadOption()},methods:{loadOption:function(){this.ganged&&this.ganged.alias?this.dynamicLoadOption():this.optionsVal=this.cklist?JSON.parse(this.cklist):this.options?this.options:[]},dynamicLoadOption(){this.doCustomQuery(null,!0).then(e=>{null==e&&void 0==e||(this.optionsVal=e)})},getOptionKeyByValue:function(e){const t=[];return e&&e.constructor===Array&&0!=e.length?(e.forEach(e=>{const i=this.optionsVal.find(t=>t.value===e);i&&t.push(i.key)}),t):t},handleCheckboxChange:function(e,t){let i=[...this.inputVal];const a=t.currentTarget.value;e?i.push(a):i.remove(a),i=i.filter(e=>""!==e),this.$emit("input",i.join(",")),this.$emit("change",e,t)}}},Oe=Ee,ke=(i("0cfa"),W(Oe,Se,Ce,!1,null,"6972e31c",null)),Ie=ke.exports;Ie.install=function(e){e.component(Ie.name,Ie)};var $e=Ie,Ae=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-main",{ref:"tablePanel",staticClass:"ht-table-panel"},[e.noHeader||e.justShowSearch?e._e():i("div",{ref:"toolbarPanel",staticClass:"toolbar-panel"},[e.justShowSearch?e._e():i("div",{staticClass:"toolbar-panel__search",class:{"ht-quick__search":!e.hideTableSearch}},[e.quickSearchConfig&&e.quickSearchConfig.length>0?i("ht-input",{ref:"quickSearch",staticClass:"quick-search",staticStyle:{"margin-right":"20px"},style:e.quickSearchWidthStyle,attrs:{placeholder:e.quickSearchPlaceholder,autofocus:!0,disabled:e.loading||e.showAdvancedSearch,debounce:2e3,"suffix-icon":"el-icon-search"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doQuickSearch(t)},click:function(t){return e.clickQuickSearch(t)}},model:{value:e.quickSearchWord,callback:function(t){e.quickSearchWord=t},expression:"quickSearchWord"}}):e._e(),i("div",{staticClass:"common-tools"},[e.hasSearchPanel&&!e.justShowSearch?i("el-button",{staticClass:"advance-search__button",on:{click:function(t){e.showAdvancedSearch=!e.showAdvancedSearch}}},[e._v("\n          "+e._s((e.showAdvancedSearch,e.$t("ht.table.baseSearch")))+"\n          "),i("i",{class:e.showAdvancedSearch?"el-icon-arrow-up":"el-icon-arrow-down"})]):e._e(),e.showExport?i("el-tooltip",{attrs:{content:e.$t("ht.table.exportData"),placement:"top"}},[i("el-button",{on:{click:function(t){return e.$emit("export")}}},[i("ht-icon",{attrs:{name:"arrow"}})],1)],1):e._e(),i("el-tooltip",{attrs:{content:e.$t("ht.table.refresh"),placement:"top"}},[i("el-button",{staticClass:"refresh-btn-icon",attrs:{icon:"el-icon-refresh"},on:{click:function(t){return e.load(!0)}}})],1),e.showCustomColumn&&!e.isCardView?i("el-tooltip",{attrs:{content:e.$t("ht.table.customColumn"),placement:"top"}},[i("el-button",{on:{click:function(t){e.customColumnDialogVisible=!0}}},[i("ht-icon",{attrs:{name:"setting"}})],1)],1):e._e(),e.multiViewSwitch?i("el-button-group",{staticClass:"multiview-switcher"},[i("el-tooltip",{attrs:{content:e.$t("ht.table.cardView"),placement:"top"}},[i("el-button",{attrs:{type:e.isCardView?"primary":"default"},on:{click:function(t){e.isCardView=!0}}},[i("ht-icon",{attrs:{name:"block"}})],1)],1),i("el-tooltip",{attrs:{content:e.$t("ht.table.tableView"),placement:"top"}},[i("el-button",{attrs:{type:e.isCardView?"default":"primary"},on:{click:function(t){e.isCardView=!1}}},[i("ht-icon",{attrs:{name:"line"}})],1)],1)],1):e._e()],1)],1)]),i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showAdvancedSearch||e.justShowSearch,expression:"showAdvancedSearch || justShowSearch"}],ref:"searchPanel",staticClass:"search-panel"},[e._t("search")],2)]),e.hasToolBar?i("div",{ref:"toolbarContainer",staticClass:"toolbar-container"},[e._t("toolbar")],2):e._e(),e.isCardView?i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading&&!e.noLoading,expression:"loading && !noLoading"}],staticClass:"ht-card",style:{height:e.tableMaxHeight+"px"}},[e.loading||e.data&&e.data.length>0?[e.cardItemMode?i("div",{staticClass:"ht-card__container"},e._l(e.data,(function(t,a){return i("el-card",{key:a,attrs:{shadow:"hover"},nativeOn:{click:function(i){return e.$emit("card-click",t)}}},[e._t("card",null,{item:t})],2)})),1):i("div",[e._t("card",null,{data:e.data})],2)]:i("div",{staticClass:"el-table__empty-block"},[e.data.length<1&&!e.emptyText?[e._t("empty-card")]:e.emptyText?i("span",{staticClass:"el-table__empty-text"},[e._v("\n        "+e._s(e.emptyText||e.t("el.table.emptyText"))+"\n      ")]):e._e()],2)],2):i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading&&!e.noLoading,expression:"loading && !noLoading"}],ref:"htTable",staticClass:"ht-table",class:{"no-data-table":e.data.length<1},style:{height:""+(e.isDataView?e.auto:e.tableMaxHeight?e.tableMaxHeight+"px":"400px")},attrs:{stripe:e.stripe,border:"",data:e.data,size:e.size,"empty-text":e.emptyText,"show-header":e.showHeader,"max-height":e.tableMaxHeight?e.tableMaxHeight:400,"tooltip-effect":e.tooltipEffect,"default-querys":e.defaultQuerys,"header-row-class-name":e.headerRowClassName,"header-cell-class-name":e.headerCellClassName,"highlight-current-row":e.highlightCurrentRow,"row-class-name":e.rowClassName,"cell-class-name":e.cellClassName,"row-key":e.rowKey},on:{"row-click":e.handleRowClick,select:e.handleTableSelect,"select-all":e.handleTableSelect,"sort-change":e.handleSortChange,"filter-change":e.handleFilterChange,"selection-change":function(t){return e.$emit("selection-change",t)}}},[e.selectable?i("el-table-column",{attrs:{type:"selection",align:"center","reserve-selection":e.reserveSelection,width:"45"}}):e._e(),e._t("default"),i("template",{slot:"empty"},[i("el-image",{attrs:{src:e.tableNoDataImg}}),i("p",{staticClass:"no-data-text"},[e._v(e._s(e.emptyText||e.t("el.table.emptyText")))])],1)],2),e.nopagination?e._e():i("div",{ref:"paginationPanel",staticClass:"pagination-panel"},[i("el-row",{attrs:{type:"flex",justify:e.tablePaginationJustify}},[i("el-pagination",{class:{"page-sizes__hidden":e.hidePageSizes},attrs:{small:e.small,disabled:e.loading,"current-page":e.pagination.page,"page-sizes":e.pageSizes,"page-size":e.pagination.pageSize,"pager-count":e.pagerCount,background:e.$paginationBackground,layout:e.layout,total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),i("custom-column",{attrs:{"custom-columns":e.customColumns,visible:e.customColumnDialogVisible},on:{"update:visible":function(t){e.customColumnDialogVisible=t},"apply-custom-column":e.handleApplyCustomColumn}})],1)},Be=[],Me=i("fe07"),Le={methods:{t(...e){return Me["c"].apply(this,e)}}};function Fe(e,t,i){this.$children.forEach(a=>{var s=a.$options.componentName;s===e?a.$emit.apply(a,[t].concat(i)):Fe.apply(a,[e,t].concat([i]))})}var Ne={methods:{dispatch(e,t,i){var a=this.$parent||this.$root,s=a.$options.componentName;while(a&&(!s||s!==e))a=a.$parent,a&&(s=a.$options.componentName);a&&a.$emit.apply(a,[t].concat(i))},broadcast(e,t,i){Fe.call(this,e,t,i)}}},qe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.visible,width:"700px","custom-class":"custom-column__dialog","append-to-body":"","before-close":e.customColumnDialogCancel},on:{"update:visible":function(t){e.visible=t}}},[i("template",{slot:"title"},[i("ht-h3",{attrs:{inline:""}},[e._v(e._s(e.$t("ht.table.customColumn")))]),i("span",{staticClass:"custom-column__desc"},[e._v("\n      "+e._s(e.$t("ht.table.customColumnDesc"))+"\n    ")])],1),i("draggable",e._b({staticClass:"el-select-dropdown__list",attrs:{tag:"ul",handle:".custom-column__handle",draggable:".draggable_disable"},model:{value:e.currentCustomColumns,callback:function(t){e.currentCustomColumns=t},expression:"currentCustomColumns"}},"draggable",e.dragOptions,!1),[i("transition-group",{attrs:{type:"transition",name:"flip-list"}},e._l(e.currentCustomColumns,(function(t,a){return i("li",{key:t.key,class:["el-select-dropdown__item",a==e.currentCustomColumns.length-1?"":"draggable"]},[i("div",[i("div",{staticClass:"column-name__head"},[i("el-checkbox",{staticClass:"column-checked",attrs:{disabled:t.required},model:{value:t.checked,callback:function(i){e.$set(t,"checked",i)},expression:"column.checked"}})],1),i("div",{class:["column-name__container",a==e.currentCustomColumns.length-1?"":"custom-column__handle"],on:{click:function(i){return e.handleNameClick(t)}}},[i("div",{staticClass:"column-name__progress",style:e.progressWidth(t.width)},[i("ht-icon",{staticClass:"column-name__sort",attrs:{name:"sort"}}),i("span",[e._v(e._s(t.value))])],1)]),i("div",{staticClass:"column-name__tail"},[t.required?i("span",{staticClass:"column-name__required"},[e._v("\n              "+e._s(e.$t("ht.table.required"))+"\n            ")]):e._e(),i("span",[e._v(e._s(e.$t("ht.table.width")))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.width,expression:"column.width"}],attrs:{type:"text"},domProps:{value:t.width},on:{input:function(i){i.target.composing||e.$set(t,"width",i.target.value)}}}),i("span",[e._v("px")])])])])})),0)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.customColumnDialogReset}},[e._v("\n      "+e._s(e.$t("ht.table.restoreDefault"))+"\n    ")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.customColumnDialogSure}},[e._v("\n      "+e._s(e.$t("ht.common.confirm"))+"\n    ")]),i("el-button",{attrs:{size:"small"},on:{click:e.customColumnDialogCancel}},[e._v("\n      "+e._s(e.$t("ht.common.cancle"))+"\n    ")])],1)],2)},Ve=[],Re=i("c46f");const ze=i("289a");var He={name:"CustomColumn",components:{draggable:ze},props:{customColumns:{type:Array,default:()=>null},visible:{type:Boolean,default:!1}},data(){return{customColumnsHashCode:null,currentCustomColumns:null,storageCustomColumns:null}},computed:{dragOptions(){return{animation:0,group:"description",disabled:!1,ghostClass:"ghost"}},progressWidth(){return e=>"auto"==e?{width:"100%"}:{width:e/500*100+"%"}}},watch:{visible:function(e){e?this.initialCurrentCustomColumn():(this.currentCustomColumns=null,this.storageCustomColumns=null)}},mounted(){setTimeout(()=>{this.initialCurrentCustomColumn(),this.applyCustomColumn()},10)},methods:{handleNameClick(e){e.required||(e.checked=!e.checked)},getCustomColumnsHashCode(){if(!this.customColumnsHashCode&&this.customColumns&&this.customColumns.length>0){const e=this.customColumns.reduce((e,t)=>e.concat(t.key),[]);this.customColumnsHashCode=y["a"].hashCode(e.join(","))}},customColumnDialogSure(){this.applyCustomColumn(),this.customColumnsHashCode&&this.setLocalStorage(this.customColumnsHashCode,this.currentCustomColumns),this.$emit("update:visible",!1)},customColumnDialogCancel(){this.$emit("update:visible",!1)},customColumnDialogReset(){this.currentCustomColumns.forEach(e=>{e.checked||(e.checked=!e.checked)})},initialCurrentCustomColumn(){this.getCustomColumnsHashCode(),this.customColumnsHashCode&&(this.currentCustomColumns=this.getLocalStorage(this.customColumnsHashCode)),this.currentCustomColumns||(this.currentCustomColumns=[...this.customColumns])},applyCustomColumn(){this.currentCustomColumns&&0!=this.currentCustomColumns.length&&this.$emit("apply-custom-column",[this.currentCustomColumns])},getObjectFromLocalStorage(){if(localStorage){let t=localStorage.getItem("customColumnSetting");t||(t="{}");try{t=JSON.parse(t)}catch(e){}return t&&"object"==typeof t||(t={}),t}return null},setLocalStorage(e,t){let i=this.getObjectFromLocalStorage();i&&(i[e]=Object(Re["b"])(JSON.stringify(t)),localStorage.setItem("customColumnSetting",JSON.stringify(i)))},getLocalStorage(e){let t=this.getObjectFromLocalStorage();if(t){const i=t[e];if(i)return JSON.parse(Object(Re["a"])(i))}return null}}},Ue=He,Ke=(i("6669"),W(Ue,qe,Ve,!1,null,"4bb2a92e",null)),je=Ke.exports,We=i("5f722"),Qe=i.n(We),Je={name:"HtTable",components:{CustomColumn:je},mixins:[Le,Ne],props:{small:{type:Boolean,default:!1},size:{type:String,default:"mini"},tooltipEffect:{type:String,default:"dark"},justShowSearch:{type:Boolean,default:!1},paginationJustify:{type:String,default:"start",validator:function(e){return-1!==["start","end","center"].indexOf(e)}},data:Array,showHeader:{type:Boolean,default:!0},pageResult:{type:Object,default:()=>({page:1,pageSize:50,total:0})},pageSizes:{type:Array,default:()=>[10,20,50,100,200,300]},pagerCount:{type:Number,default:7},nopagination:{type:Boolean,default:!1},highlightCurrentRow:{type:Boolean,default:!1},selectable:{type:Boolean,default:!0},quickSearchProps:[String,Array],headerRowClassName:[String,Function],headerCellClassName:[String,Function],rowClassName:[String,Function],cellClassName:[String,Function],showExport:{type:Boolean,default:!1},showCustomColumn:{type:Boolean,default:!0},defaultQuerys:{type:Array,default(){return[]}},defaultSorter:{type:Array,default(){return[]}},isLoadTable:{type:Boolean,default:!0},quickSearchWidth:{type:Number,default:400},customTableHeight:{type:[String,Number],validator:e=>{if("number"==typeof e)return e>0;if("string"==typeof e){const t=Number(e);return!isNaN(t)&&t>0}return!1}},multiViewSwitch:{type:Boolean,default:!1},cardView:{type:Boolean,default:!1},cardItemMode:{type:Boolean,default:!0},noHeader:{type:Boolean,default:!1},emptyText:String,rowClickSelect:{type:Boolean,default:!0},autoFix:{type:Boolean,default:!1},hidePageSizes:{type:Boolean,default:!1},tableNoDataImg:{type:String,default:i("9f33")},noLoading:{type:Boolean,default:!1},rowKey:{type:[Function,String]},reserveSelection:{type:Boolean,default:!1},stripe:{type:Boolean,default:!1},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},isDataView:{type:Boolean,default:!1}},data(){return{resetDefaultFilter:[],querys:[],sorter:null,quickSearchWord:null,quickSearchPlaceholder:this.$t("ht.table.searchPlaceholder"),quickSearchConfig:null,hasSearchPanel:!1,filters:{},pagination:{...this.pageResult},tableMaxHeight:400,showAdvancedSearch:!1,loading:!1,columns:[],customColumns:[],customColumnDialogVisible:!1,selection:[],tablePanelHeight:0,isCardView:this.cardView}},computed:{calDefaultQuerys:function(){let e=[],t={group:"defaultQueryGroup",operation:"EQUAL",relation:"AND"};return this.defaultQuerys.forEach(i=>{-1===this.resetDefaultFilter.indexOf(i.property)&&i.property&&!this.resetDefaultFilter.some(e=>i.property.includes(e))&&e.push({...t,...i})}),e},hasToolBar(){return this.$slots.toolbar&&this.$slots.toolbar.length>0},hideTableSearch(){const e=this.quickSearchConfig&&this.quickSearchConfig.length>0;return!this.showAdvancedSearch&&!this.hasToolBar&&!e},customTableHeightNum(){return"number"==typeof this.customTableHeight?this.customTableHeight:Number(this.customTableHeight)},quickSearchWidthStyle(){return{width:this.quickSearchWidth+"px"}},tablePaginationJustify(){return this.$allPaginationJustify||this.paginationJustify}},watch:{justShowSearch:{handler(e){e&&(this.showAdvancedSearch=!0)},immediate:!0},isCardView:function(e,t){e!==t&&(this.selection=[],this.$emit("view-change",e))},customTableHeight(){this.calcTableHeight()}},created(){this.initCustomColumns(),this.$on("advance-search",(e,t)=>this.advanceSearch(e,t)),setTimeout(()=>{this.quickSearchProps&&this.generateQuickSearchConfig()},100)},activated(){this.doLayout()},mounted(){this.hasSearchPanel=!!this.$scopedSlots.search,this.isLoadTable&&this.load(),this.calcTableHeight(),this.$watch("showAdvancedSearch",(e,t)=>{e!==t&&(e&&(this.quickSearchWord=null),this.calcTableHeight(300),this.$emit("advanced-show",e))}),this.$watch("pageResult",(e,t)=>{e!==t&&(this.pagination={...e})}),this.$root.$on("resize",()=>{this.tablePanelHeight=0,this.calcTableHeight(300)}),this.autoFix&&this.addResizeListener()},methods:{setColumns(e){e&&e.componentOptions&&this.columns.push(e.componentOptions.propsData),e&&e.componentOptions&&e.componentOptions.children&&e.componentOptions.children.forEach(e=>{this.setColumns(e)})},initCustomColumns(){const e=this,t=[];setTimeout(()=>{if(!e.$slots||!e.$slots.default||0==e.$slots.default.length)return;const i=e.$slots.default.length;e.$slots.default&&e.$slots.default.forEach((a,s)=>{if(e.setColumns(a),a&&a.componentOptions){const e=a.componentOptions.propsData;if(e.label){const l=a.componentOptions.children&&a.componentOptions.children.length>0;t.push({key:e.prop||e.label,value:e.label,checked:!(!0===e.hidden||""===e.hidden)||!0===e.required||""===e.required||s==i-1||l,required:!0===e.required||""===e.required||s==i-1||l,width:e.width||"auto"})}}}),e.customColumns=t},0)},handleApplyCustomColumn(e){this.broadcast("HtTableColumn","customColumn",e),this.$nextTick(()=>{setTimeout(()=>this.doLayout(),200)})},doQuickSearch(){this.clearQueryByGroupName("quick"),this.clearQueryByGroupName("advance"),this.quickSearchWord&&this.quickSearchConfig.forEach(e=>{let t={property:e.prop,value:this.quickSearchWord.trim(),group:"quick",relation:"OR",operation:"LIKE"};this.querys.push(t)}),this.load()},clickQuickSearch(e){!this.loading&&!this.showAdvancedSearch&&e&&e.target&&"I"==e.target.tagName&&this.$nextTick(()=>{this.doQuickSearch()})},advanceSearch(e,t){!this.loading&&this.showAdvancedSearch&&(this.clearQueryByGroupName("quick"),this.clearQueryByGroupName("advance"),e&&e.forEach(e=>{const t=null!=e.value&&void 0!=e.value&&""!=e.value;if(e.prop.indexOf(",")>0){const i=y["a"].stringSplit(e.prop,",");if(i&&i.length>0){const a="group_"+i[0];this.clearQueryByGroupName(a),t&&i.forEach(t=>{this.querys.push({property:t,value:e.value,group:a,relation:"OR",operation:e.operation})})}}else t&&this.querys.push({property:e.prop,value:e.value,group:"advance",relation:e.relation,operation:e.operation})}),this.load("",t))},load(e,t){this.loading=!0,e||(this.pagination.page=1);let i={pageBean:this.pagination,sorter:[]};this.sorter&&this.sorter.length>0&&(i.sorter=this.sorter),this.defaultSorter.length>0&&0==i.sorter.length&&(i.sorter=[...this.defaultSorter]),this.handleFilters(),this.querys&&this.querys.length>0&&(i.querys=this.querys),this.calDefaultQuerys.length>0&&(i.querys||(i.querys=[]),this.calDefaultQuerys.forEach(e=>{i.querys.remove(e)}),i.querys=i.querys.concat(this.calDefaultQuerys.filter(e=>{let t=i.querys.findIndex(t=>t.property===e.property||e.property&&e.property.includes(t.property));return-1===t})));const a=this;let s=1e4;this._events&&this._events.load&&this._events.load.length||(s=0);const l=setTimeout((function(){a.loading=!1,this.selection=[]}),s);this.nopagination&&(i.pageBean={});const n=()=>{clearTimeout(l),a.loading=!1,this.selection=[]};this.$emit("load",{...i},n,t),this.$emit("loading",{...i},n,t)},getColumnLabelByProp(e){let t=null;return e?(this.columns.forEach(i=>{i.prop&&i.prop===e&&(t=i.label)}),t):t},generateQuickSearchConfig(){let e=[];if("string"==typeof this.quickSearchProps){const t=y["a"].stringSplit(this.quickSearchProps,",");this.quickSearchConfig=[],t.forEach(t=>{const i=this.getColumnLabelByProp(t);i&&(e.push(i),this.quickSearchConfig.push({prop:t,label:i}))})}"object"==typeof this.quickSearchProps&&(this.quickSearchProps.forEach(t=>{t&&t.label&&e.push(t.label)}),this.quickSearchConfig=[...this.quickSearchProps]),this.quickSearchPlaceholder=`${this.t("ht.common.enter")}${e.join(",")}${this.t("ht.common.toSearch")}`},clearQueryByGroupName(e){let t=[];this.querys&&this.querys.forEach(i=>{i.group==e&&t.push(i)}),t.forEach(e=>{this.querys.remove(e)})},handleFilters(){this.clearQueryByGroupName("filter"),this.filters&&Object.keys(this.filters).length>0&&Object.keys(this.filters).forEach(e=>{const t=this.filters[e];let i={property:e,value:t[0],group:"filter",relation:"AND"};1==t.length?(i.operation="EQUAL",this.querys.push(i)):t.length>1&&(i.operation="IN",i.value=t,this.querys.push(i))})},handleSizeChange(e){this.pagination={...this.pagination,pageSize:e},this.$emit("size-change",e),this.load()},handleCurrentChange(e){this.pagination={...this.pagination,page:e},this.$emit("current-change",e),this.load(!0)},handleRowClick(e,t,i){this.rowClickSelect&&(this.selection.some(t=>t===e)?this.selection.remove(e):this.selection.push(e),this.$refs.htTable.toggleRowSelection(e)),this.$emit("row-click",e,t,i)},handleTableSelect(e,t){this.selection=e,t?this.$emit("select",e,t):this.$emit("select-all",e)},handleSortChange(e){e.order?this.sorter=[{property:e.prop,direction:"ascending"==e.order?"ASC":"DESC"}]:this.sorter=null,this.load(!0),this.$emit("sort-change",e)},handleFilterChange(e){e&&Object.keys(e).forEach(t=>{e[t]&&0==e[t].length&&-1===this.resetDefaultFilter.indexOf(t)&&this.resetDefaultFilter.push(t)}),this.filters={...this.filters,...e},Object.keys(this.filters).forEach(e=>{this.filters[e]&&0!=this.filters[e].length||delete this.filters[e]}),this.load(),this.$emit("filter-change",e)},doLayout(){this.$nextTick(()=>{this.$refs.htTable&&this.$refs.htTable.doLayout()})},initTablePanelHeight(){this.tablePanelHeight=this.$refs.tablePanel.$el.clientHeight},calcTableHeight(e){setTimeout(()=>{const e=this.$refs.toolbarPanel&&this.$refs.toolbarPanel.clientHeight||0,t=this.$refs.searchPanel&&this.$refs.searchPanel.clientHeight||0,i=this.$refs.toolbarContainer&&this.$refs.toolbarContainer.clientHeight||0,a=this.$refs.paginationPanel&&this.$refs.paginationPanel.clientHeight||0,s=t>0?20:0,l=e>0?20:0,n=i>0?20:0,o=e+l+t+s+i+n+a+15;if(this.$refs.tablePanel&&(this.tablePanelHeight=this.$refs.tablePanel.$el.clientHeight||0),this.customTableHeightNum)this.tableMaxHeight=this.customTableHeightNum-o;else{if(!this.$refs.tablePanel)return;0==this.tablePanelHeight&&this.initTablePanelHeight();const e=this.tablePanelHeight-o;this.tableMaxHeight=e}},e||0)},addResizeListener(){this.$nextTick(()=>{let e=Qe()();e.listenTo(this.$refs.htTable.$refs.headerWrapper.getElementsByTagName("tr")[0],this.doLayout)})}}},Ge=Je,Ye=(i("42de"),W(Ge,Ae,Be,!1,null,"0d10ce15",null)),Ze=Ye.exports;Ze.install=function(e){e.component(Ze.name,Ze)};var Xe=Ze,et=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.hiddenCol?e._e():i("el-table-column",{attrs:{type:e.type,align:e.align,prop:e.prop,label:e.label,width:e.widthVal,"min-width":e.minWidth,index:e.index,sortable:e.columnSortable,filters:e.filters,"filtered-value":e.filteredValue,"filter-method":e.filterMethod,"column-key":e.prop,formatter:e.columnFormatter,"render-header":e.columnRenderHeader,"show-overflow-tooltip":e.showOverflowTooltip,"class-name":e.className,fixed:e.fixed,"reserve-selection":e.reserveSelection,resizable:e.resizable}})},tt=[],it={name:"HtTableColumn",componentName:"HtTableColumn",props:{resizable:{type:Boolean,default:!0},type:{type:String,validator:e=>-1!==["selection","index","expand"].indexOf(e)},align:{default:"center",validator:e=>-1!==["left","center","right"].indexOf(e)},prop:String,label:String,width:String,minWidth:String,index:[Number,Function],sortable:{type:Boolean,default:!1},filters:Array,showOverflowTooltip:{type:Boolean,default:!1},fixed:{type:[Boolean,String],default:!1,validator:e=>-1!=[!0,!1,"left","right"].indexOf(e)},formatter:Function,renderHeader:Function,hidden:{type:Boolean,default:!1},required:{type:Boolean,default:!1},filteredValue:Array,filterMethod:Function,className:String,reserveSelection:{type:Boolean,default:!1}},data(){return{hiddenCol:null,formatterObj:null,renderHeaderObj:null,curWidth:null}},computed:{hiddenVal(){return!this.required&&(null!=this.hiddenCol?this.hiddenCol:this.hidden)},widthVal(){return this.curWidth?this.curWidth:this.width},columnSortable:{get(){return this.sortable?"custom":this.sortable}},columnFormatter:{get(){if(this.formatter||this.formatterObj||!this.$scopedSlots.default){let e=this.formatter?this.formatter:this.formatterObj;return this.$scopedSlots.default?(this.formatterObj=(t,i,a,s)=>this.$scopedSlots.default({row:t,column:i,cellValue:e(t,i,a,s),index:s}),this.formatterObj):e}return this.formatterObj=(e,t,i,a)=>this.$scopedSlots.default({row:e,column:t,cellValue:i,index:a}),this.formatterObj}},columnRenderHeader:{get(){if(this.renderHeader||this.renderHeaderObj||!this.$scopedSlots.header)return this.renderHeader?this.renderHeader:this.renderHeaderObj;{const e=this.$scopedSlots.header;return this.renderHeaderObj=(t,{column:i,$index:a})=>e({column:i,$index:a}),this.renderHeaderObj}}}},created(){this.$on("customColumn",e=>{const t=e.find(e=>this.prop&&this.prop==e.key||!this.prop&&this.label&&this.label==e.value);if(t&&!t.checked?this.hiddenCol=!0:this.hiddenCol=null,t&&t.width&&this.width!==t.width){const e=this.hiddenCol;this.curWidth=t.width,this.hiddenCol=!0,this.$nextTick(()=>{this.hiddenCol=e})}})}},at=it,st=W(at,et,tt,!1,null,null,null),lt=st.exports;lt.install=function(e){e.component(lt.name,lt)};var nt=lt,ot=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-form",{directives:[{name:"form",rawName:"v-form"}],attrs:{"data-vv-scope":"searchForm"}},[i("div",{staticClass:"search-panel__container"},[i(e.isFlexLayout?"div":"el-row",{tag:"component",staticClass:"search-panel__row",class:{"search-field__row":e.isFlexLayout}},[e._t("default")],2)],1),i("div",{staticClass:"search-btn__wrap",class:{"flex-search__group":e.isFlexLayout}},[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(t){return e.search(!0)}}},[e._v("\n      "+e._s(e.$t("ht.common.searchFor"))+"\n    ")]),i("el-button",{attrs:{size:"small",icon:"el-icon-refresh-left"},on:{click:e.reset}},[e._v("\n      "+e._s(e.$t("ht.common.reset"))+"\n    ")])],1)])},rt=[],ct={name:"HtTableSearchPanel",componentName:"HtTableSearchPanel",mixins:[Ne],props:{value:Object,divide:{type:Number,default:4,validator:e=>e>0&&e<5},labelWidth:{type:Number,default:70},isFlexLayout:{type:Boolean,default:!1},displayStyle:String},data(){return{fieldVms:[],fieldArray:[],formModelExpression:null,data:{},defaultData:{}}},computed:{calcSpan:{get(){return 24/this.divide}}},created(){this.$vnode.data.model&&this.$vnode.data.model.expression&&(this.formModelExpression=this.$vnode.data.model.expression),this.$slots.default.forEach(e=>{e.componentOptions&&this.fieldArray.push({...e.componentOptions.propsData})}),this.$on("field-loaded",e=>{this.fieldVms.push(e)}),this.$on("input-change",(e,t)=>{this.fieldArray=this.fieldArray.map(i=>i.prop==t?{...i,...e}:i)}),this.$on("search",e=>this.search(e))},mounted(){this.formModelExpression&&(this.$set(this.data,this.formModelExpression,this.value),this.defaultData=fe.a.cloneDeep(this.value)),this.broadcast("HtTableSearchField","panel-props",[this.labelWidth,this.calcSpan,this.isFlexLayout,this.displayStyle])},methods:{search(e){e?y["a"].validateForm(this,"searchForm").then(t=>{this.$parent.$parent.$emit("advance-search",this.fieldArray,e)}).catch(e=>{this.$message.error(this.$t("ht.table.validateErrorMsg",{itemsLength:e.length})),this.multipleTemplateTableloading=!1}).finally(()=>{this.multipleTemplateTableloading=!1}):this.$parent.$parent.$emit("advance-search",this.fieldArray,e)},reset(){this.formModelExpression&&Object.keys(this.data[this.formModelExpression]).forEach(e=>{this.$set(this.data[this.formModelExpression],e,this.defaultData[e]?this.defaultData[e]:null)}),this.fieldVms.forEach(e=>{e.$emit("input-reset")}),this.$nextTick(()=>{this.search()})}}},ht=ct,ut=(i("20cd"),W(ht,ot,rt,!1,null,"427ae34c",null)),dt=ut.exports;dt.install=function(e){e.component(dt.name,dt)};var pt=dt,mt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.panelIsFlexLayout?"div":"el-col",{tag:"component",class:["search-field__container",e.panelIsFlexLayout?"search-field__container-flex":""],style:e.containerStyle,attrs:{span:e.colSpanVal}},[e.hideLabel?e._e():i("div",{staticClass:"field-label-panel",class:{"is-align-right":e.isAlignRight},style:{width:e.finalLabelWidth+"px"}},[e.label?i("label",{directives:[{name:"ellipsis",rawName:"v-ellipsis"}],staticClass:"search-field-label",attrs:{title:e.label}},[e._v("\n      "+e._s(e.label)+"\n    ")]):e._e()]),i("div",{staticClass:"field-input-panel",class:{"unset-width":e.isAlignRight},style:{width:"calc(100% - "+e.inputDivJudgeWidth+"px)"}},[e.hasDefaultSlot?e._t("default"):["text"==e.type?i("ht-input",{attrs:{placeholder:e.placeholder,"display-style":e.finalDisplayStyle,"prefix-icon":e.prefixIcon,"suffix-icon":e.suffixIcon},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.textInputEnter(t)}},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}}):e._e(),"date"==e.type?i("ht-date",{attrs:{"value-format":e.valueFormat,placeholder:e.placeholder,"default-time":e.defaultTime,"display-style":e.finalDisplayStyle},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}}):e._e(),["datetimerange","daterange"].includes(e.type)?i("el-date-picker",{attrs:{size:"small",type:e.type,"default-time":["00:00:00","23:59:59"],"value-format":e.valueFormat,align:"right","unlink-panels":e.unlinkPanels,"range-separator":e.$t("ht.date.to"),"start-placeholder":e.$t("ht.date.startDate"),"end-placeholder":e.$t("ht.date.endDate"),"picker-options":e.pickerOptions},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}}):e._e(),"select"==e.type?i("ht-select",{attrs:{placeholder:e.placeholder,options:e.options,props:e.props,"display-style":e.finalDisplayStyle},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}}):e._e()]],2)])},gt=[],ft={name:"HtTableSearchField",componentName:"HtTableSearchField",mixins:[Ne],props:{value:[String,Number,Boolean,Object,Array],defaultTime:{type:String,default:"00:00:00"},unlinkPanels:{type:Boolean,default:!0},isAlignRight:{type:Boolean,default:!1},span:{type:Number,default:0},prop:{type:String,required:!0},props:{type:Object,default:null},operation:{type:String,default:"LIKE",validator:e=>-1!=["EQUAL","EQUAL_IGNORE_CASE","LESS","GREAT","LESS_EQUAL","GREAT_EQUAL","NOT_EQUAL","LIKE","LEFT_LIKE","RIGHT_LIKE","IS_NULL","NOTNULL","IN","BETWEEN"].indexOf(e)},relation:{type:String,default:"AND",validator:e=>-1!=["AND","OR"].indexOf(e)},label:String,type:{type:String,default:"text",validator:e=>-1!=["text","date","daterange","datetimerange","select"].indexOf(e)},options:Array,placeholder:{type:String,default(){return`${Object(Me["c"])("ht.common.enter")}${this.label}`}},valueFormat:{type:String,default:"yyyy-MM-dd HH:mm:ss"},hideLabel:{type:Boolean,default:!1},labelWidth:{type:Number,default:0},width:{type:Number,default:0},prefixIcon:String,suffixIcon:String,displayStyle:String,enterToSearch:{type:Boolean,default:!1}},data(){return{data:null,colspan:8,panelDisplayStyle:null,panelLabelWidth:70,panelIsFlexLayout:!1,pickerOptions:{shortcuts:[{text:this.$t("ht.date.lastWeek"),onClick(e){const t=new Date,i=new Date;i.setTime(i.getTime()-6048e5),e.$emit("pick",[i,t])}},{text:this.$t("ht.date.lastMonth"),onClick(e){const t=new Date,i=new Date;i.setTime(i.getTime()-2592e6),e.$emit("pick",[i,t])}},{text:this.$t("ht.date.lastThreeMonths"),onClick(e){const t=new Date,i=new Date;i.setTime(i.getTime()-7776e6),e.$emit("pick",[i,t])}}]}}},computed:{hasDefaultSlot(){return this.$slots.default&&this.$slots.default.length>0},colSpanVal(){return this.span>0?this.span:this.colspan},finalLabelWidth(){return this.labelWidth>0?this.labelWidth:this.panelLabelWidth},inputDivJudgeWidth(){return this.hideLabel?0:this.finalLabelWidth+(this.panelIsFlexLayout?0:30)},containerStyle(){return this.width>0?{width:this.width+"px"}:""},finalDisplayStyle(){const e=0==this.span||this.displayStyle?this.displayStyle:"block";return e||this.panelDisplayStyle}},watch:{data:function(e){this.handleInputChange(e)},value:function(e){this.handleInputChange(e)}},created(){this.$on("input-reset",()=>{this.data=null}),this.$on("panel-props",(e,t,i,a)=>{this.panelLabelWidth=e,this.colspan=t,this.panelIsFlexLayout=i,this.panelDisplayStyle=a})},mounted(){this.dispatch("HtTableSearchPanel","field-loaded",[this])},methods:{handleInputChange(e){this.dispatch("HtTableSearchPanel","input-change",[{value:e,operation:this.operation,relation:this.relation},this.prop])},textInputEnter(){this.enterToSearch&&this.dispatch("HtTableSearchPanel","search",[this])}}},yt=ft,bt=(i("80a3"),W(yt,mt,gt,!1,null,"923094ca",null)),_t=bt.exports;_t.install=function(e){e.component(_t.name,_t)};var vt=_t,wt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[e.inputWriteable?i("el-radio-group",{directives:[{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],style:e.styles,attrs:{size:e.inputSize,name:e.inputName},on:{change:e.change},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}},e._l(e.optionsVal,(function(t){return i("el-radio",{key:t[e.propKey],class:{"el-radio-vertical":"vertical"==e.optionLayout,"el-radio-horizontal":"horizontal"==e.optionLayout},attrs:{label:t[e.propKey],disabled:e.readonly||e.disabled||t.disabled}},[e._v("\n      "+e._s(t[e.propValue])+"\n    ")])})),1):e._e(),"n"!=e.permission?i("ht-field-tail",{attrs:{"field-name":e.inputName,readonly:!e.inputWriteable,"input-value":e.formatValue||e.inputVal}}):e._e()],1)},St=[],Ct={name:"HtRadio",components:{HtFieldTail:ue},mixins:[de["a"],pe["a"],xe,Te,me["a"],Pe],props:{value:[String,Number,Boolean],options:Array,optionLayout:{type:String,default:"horizontal",validator:function(e){return["horizontal","vertical"].some(t=>t==e)}},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rdlist:String,styles:Object},data(){return{formatValue:"",optionsVal:[]}},computed:{inputVal:{get:function(){return y["a"].isEmpty(this.value)?"":(null!==this.value&&void 0!==this.value&&!this.inputWriteable&&this.optionsVal&&this.optionsVal.length>0&&(this.formatValue=this.optionsVal.find(e=>e[this.propKey]==this.value).value),this.value)},set:function(e){this.$emit("input",e)}}},watch:{options(){this.loadOption()}},created(){this.$on("formDataUpdate",()=>{this.loadOption()})},mounted(){this.$nextTick(()=>{this.loadOption()})},methods:{change(e){this.$emit("change",e)},loadOption(){this.ganged&&this.ganged.alias?this.dynamicLoadOption():this.optionsVal=this.rdlist?JSON.parse(this.rdlist):this.options?this.options:[]},dynamicLoadOption(){this.doCustomQuery(null,!0).then(e=>{null==e&&void 0==e||(this.optionsVal=e)})}}},Dt=Ct,xt=(i("690d"),W(Dt,wt,St,!1,null,"80451624",null)),Tt=xt.exports;Tt.install=function(e){e.component(Tt.name,Tt)};var Pt=Tt,Et=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[e.inputWriteable?i("el-date-picker",{directives:[{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],attrs:{size:e.inputSize,name:e.inputName,type:e.type,format:e.dateFormat,clearable:e.clearable,"value-format":e.valueFormat,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,"default-time":e.defaultTime,"picker-options":e.pickerOptions},on:{blur:e.handleBlur},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}}):e._e(),i("ht-field-tail",{attrs:{"field-name":e.inputName,readonly:!e.inputWriteable,"input-value":e.inputVal}})],1):e._e()},Ot=[],kt=i("ddb2"),It={name:"HtDate",components:{HtFieldTail:ue},mixins:[de["a"],pe["a"],me["a"],kt["a"]],props:{value:String,defaultTime:{type:String},showDate:{type:Boolean,default:!1},day:Number,format:{type:String,default:"yyyy-MM-dd HH:mm:ss"},valueFormat:{type:String,default:"yyyy-MM-dd HH:mm:ss"},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},isServerDate:{type:Boolean,default:!1},pickerOptions:{type:Object,default(){return{}}}},data(){return{type:"datetime"}},computed:{dateFormat:function(){const e=this.format?this.format:this.valueFormat;return this.userAgentMobile?e.replace(/-/g,"/"):e},inputVal:{get:function(){if(!this.inputWriteable){let e=this.value;if(this.value&&this.value.constructor==String){let e=this.value.replace(/-/g,"/");return new Date(e).format(this.format)}return e&&e.constructor==Date?e.format(this.format):e}return this.value},set:function(e){e&&e.constructor==Date?this.$emit("input",e.format(this.valueFormat)):this.$emit("input",e)}}},watch:{format:{handler(e){/^\w{4}-\w{1,2}-\w{1,2}$/.test(e)&&(this.type="date")},immediate:!0}},created(){this.initDate(),setTimeout(()=>{console.log(this.inputValidate)},3e3)},methods:{handleBlur(){setTimeout(()=>{this.$validator.validate(),console.log(this.$validator)},10)},initDate(){!this.value&&this.showDate&&(this.isServerDate&&this.$requestConfig.getCurrentServerTime?this.$requestConfig.getCurrentServerTime(this.dateFormat).then(e=>this.formatAndSetDate(new Date(e))):this.formatAndSetDate(new Date))},formatAndSetDate(e){this.day&&(e=new Date(e.getTime()+24*this.day*60*60*1e3)),this.inputVal=e.format(this.valueFormat)}}},$t=It,At=(i("55f3"),W($t,Et,Ot,!1,null,"02b03061",null)),Bt=At.exports;Bt.install=function(e){e.component(Bt.name,Bt)};var Mt=Bt,Lt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!==e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[e.inputWriteable?i("el-time-select",{directives:[{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],attrs:{name:e.inputName,clearable:e.clearable,"picker-options":e.pickerOptions,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,size:e.inputSize,editable:e.editable},on:{blur:e.handleBlur},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}}):e._e(),i("ht-field-tail",{attrs:{"field-name":e.inputName,readonly:!e.inputWriteable,"input-value":e.inputVal}})],1):e._e()},Ft=[],Nt={name:"HtTimeSelect",components:{HtFieldTail:ue},mixins:[de["a"],pe["a"],me["a"]],props:{value:String,pickerOptions:{type:Object,default(){return{start:"00:00",step:"00:15",end:"23:59"}}},clearable:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!0}},computed:{inputVal:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{handleBlur(){setTimeout(()=>{this.$validator.validate()},10)}}},qt=Nt,Vt=(i("e50a"),W(qt,Lt,Ft,!1,null,"7a4b8789",null)),Rt=Vt.exports;Rt.install=function(e){e.component(Rt.name,Rt)};var zt=Rt,Ht=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[e.inputWriteable?i("el-time-picker",{directives:[{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],attrs:{"append-to-body":!1,"arrow-control":e.arrowControl,name:e.inputName,"picker-options":e.pickerOptions,disabled:e.disabled,readonly:e.readonly,editable:e.editable,clearable:e.clearable,size:e.inputSize,"start-placeholder":e.startPlaceholderVal,"end-placeholder":e.endPlaceholderVal,"is-range":e.isRange,"range-separator":e.rangeSeparator,"value-format":e.valueFormat,"default-value":e.defaultValue,placeholder:e.placeholder},on:{blur:e.handleBlur},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}}):e._e(),i("ht-field-tail",{attrs:{"field-name":e.inputName,readonly:!e.inputWriteable,"input-value":e.value}})],1):e._e()},Ut=[],Kt={name:"HtTimePicker",components:{HtFieldTail:ue},mixins:[Le,de["a"],pe["a"],me["a"]],props:{value:String,readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},editable:{type:Boolean,default:!0},defaultValue:{type:[String,Date]},valueFormat:{type:String,default:"HH:mm:ss"},rangeSeparator:{type:String,default:"-"},pickerOptions:{type:Object,default(){return{}}},arrowControl:{type:Boolean,default:!1},isRange:{type:Boolean,default:!1},endPlaceholder:{type:String},startPlaceholder:{type:String}},computed:{startPlaceholderVal(){return this.startPlaceholder?this.startPlaceholder:this.t("ht.date.startTime")},endPlaceholderVal(){return this.endPlaceholder?this.endPlaceholder:this.t("ht.date.endTime")},inputVal:{get:function(){return this.value&&this.isRange&&this.value.constructor==String?this.value.split(","):this.value},set:function(e){e&&this.isRange&&e.constructor==Array?this.$emit("input",e.join(",")):this.$emit("input",e)}}},methods:{handleBlur(){setTimeout(()=>{this.$validator.validate()},10)}}},jt=Kt,Wt=(i("9c1f"),W(jt,Ht,Ut,!1,null,"efda4800",null)),Qt=Wt.exports;Qt.install=function(e){e.component(Qt.name,Qt)};var Jt=Qt,Gt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[e.inputWriteable?i("el-select",{directives:[{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],class:e.filterable?"filterable":"",staticStyle:{width:"100%"},attrs:{name:e.inputName,size:e.inputSize,clearable:e.clearable,disabled:e.readonly||e.disabled,placeholder:e.placeholder,filterable:e.filterable,"allow-create":e.allowCreate,multiple:e.multiple,"multiple-limit":e.limitCount,"collapse-tags":e.collapseTags,"popper-class":e.popperClass},on:{change:e.change,"visible-change":e.visibleChange,"remove-tag":e.removeTag,clear:e.handleClear,blur:e.handleBlur,focus:e.handleFocus},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}},[e.optionsAry&&e.optionsAry.constructor==Array&&e.optionsAry.length>0?e._t("default",[i("div",{staticClass:"select-options"},e._l(e.optionsAry,(function(t){return i("el-option",{key:t[e.propKey],attrs:{label:t[e.propValue],value:t[e.propKey]}})})),1)],{options:e.optionsAry,propKey:e.propKey,propValue:e.propValue}):e._e(),e.isShowPage?i("el-pagination",{attrs:{"current-page":e.pageBean.page,"page-size":e.pageBean.pageSize,layout:"total, prev, pager, next",total:e.pageBean.total,"pager-count":5,"hide-on-single-page":!1,small:""},on:{"update:currentPage":function(t){return e.$set(e.pageBean,"page",t)},"update:current-page":function(t){return e.$set(e.pageBean,"page",t)},"current-change":e.handleCurrentChange}}):e._e()],2):e._e(),i("ht-field-tail",{attrs:{writeable:e.writeable,"field-name":e.inputName,readonly:!e.inputWriteable,"input-value":e.inputVal,"tag-format-value":e.tagFormatValue},on:{"update:writeable":function(t){e.writeable=t}}})],1):e._e()},Yt=[],Zt=i("dab3"),Xt=i.n(Zt),ei={name:"HtSelect",mixins:[de["a"],pe["a"],xe,Te,me["a"],Pe],props:{value:[String,Number,Boolean,Array],options:Array,selectlist:Array,disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},filterable:{type:Boolean,default:!1},allowCreate:{type:Boolean,default:!1},remoteMethod:Function,remote:{type:Boolean,default:!1},relatedQuery:{type:Array,default:function(){return[]}},limitCount:{type:Number,default:0},collapseTags:{type:Boolean,default:!1},popperClass:{type:String,default:"ht-select__dropdown"}},data(){return{optionsAry:[],tagFormatValue:[],queryVersion:0,pageBean:{page:1,pageSize:20,total:0}}},computed:{inputVal:{get(){if(y["a"].isEmpty(this.value))return"";if(this.relatedQueryLoad(),this.value.constructor==String){const e=""===this.value?[]:this.value.split(",");if(this.inputWriteable)return this.multiple?e:this.value;if(this.multiple){const e=""===this.value?[]:this.value.split(",");let t=[],i=Xt()([],e,{clone:!0});return e.forEach(e=>{this.optionsAry.find(a=>{a[this.propKey]&&a[this.propKey].toString()===e&&(t.push(a[this.propValue]),i.remove(e)),a.children&&a.children.length>0&&a.children.find(a=>{a[this.propKey]&&a[this.propKey].toString()===e&&(t.push(a[this.propValue]),i.remove(e))})})}),t=t.concat(i),this.tagFormatValue=t,e}if(this.optionsAry&&this.optionsAry.length>0){let t=[],i=Xt()([],e,{clone:!0});return e.forEach(e=>{this.optionsAry.find(a=>{a[this.propKey]&&a[this.propKey].toString()===e&&(t.push(a[this.propValue]),i.remove(e)),a.children&&a.children.length>0&&a.children.find(a=>{a[this.propKey]&&a[this.propKey].toString()===e&&(t.push(a[this.propValue]),i.remove(e))})})}),t=t.concat(i),this.tagFormatValue=t,this.value}}return this.value},set(e){let t="";if(this.multiple){if(e&&e.constructor===Array&&e.length>0){if(e[0].constructor===Number)throw this.$t("ht.select.errorMsg");t=e.join(",")}}else t=e;""!=t&&this.relatedQueryLoad(),this.$emit("input",t)}},isShowPage(){return this.ganged&&this.ganged.alias&&1==this.ganged.needPage&&this.pageBean.page}},watch:{options:function(){this.loadOption()}},created(){this.$on("formDataUpdate",()=>{this.isShowPage||this.loadOption(!0)})},mounted(){this.loadOption(!1,"init")},methods:{loadOption:function(e,t=""){if(this.ganged&&this.ganged.alias){if("init"===t&&"true"===this.ganged.noInit)return;this.dynamicLoadOption(e)}else this.optionsAry=this.selectlist?this.selectlist:this.options?this.options:[]},dynamicLoadOption(e){this.queryVersion+=1;let t=this.queryVersion;this.doCustomQuery(null,!0,{page:this.pageBean.page,isChangePage:this.isChangePage}).then(i=>{if(null===i&&(this.queryVersion-=1),!(t<this.queryVersion)&&(null!=i||void 0!=i)){const t=!this.optionsAry||0==this.optionsAry.length,a=y["a"].arrayEquals(i,this.optionsAry);this.optionsAry=i;const s=this.checkValue(i);!e||!this.inputWriteable||t||a||s||this.$nextTick(()=>{this.$emit("input","")})}})},change:function(e){let t=this.optionsAry.find(t=>t[this.propKey]===e);this.$emit("change",e,t)},visibleChange:function(e){this.pageBean.page=1,this.loadOption(),this.$emit("visible-change",e)},removeTag:function(e){this.$emit("remove-tag",e)},handleClear:function(){this.$emit("clear")},handleBlur:function(e){this.$emit("blur",e)},handleFocus:function(e){this.$emit("focus",e),this.ganged&&this.ganged.alias&&"true"===this.ganged.noInit&&!this.optionsAry.length&&this.dynamicLoadOption()},prepareLoadParams:function(e){let t={};if(e&&!y["a"].isEmpty(e)){let{index:i}=y["a"].getSubScopeElAndIndex(this.$el);if(this.$el){const a=y["a"].getOnlineFormInstance(this);Object.keys(e).forEach(s=>{let l=null;l=null==i?y["a"].getValueByPath(a,e[s]):y["a"].getValueByPath(a,e[s],i),y["a"].isEmpty(l)||(t[s]=l)})}}return t},relatedQueryLoad:function(){if(this.relatedQuery&&this.relatedQuery.constructor==Array&&this.relatedQuery.length>0){const e=y["a"].getOnlineFormInstance(this);this.relatedQuery.forEach(t=>{const i=this.prepareLoadParams(t.condition);e.$emit("related-query:load",t.alias,i,t.result)})}},checkValue(e){let t=!1;return e.forEach(e=>{this.value.split(",").includes(e[this.propKey])&&(t=!0)}),t},handleCurrentChange(e){this.isChangePage=!0,this.pageBean.page=e,this.dynamicLoadOption()}}},ti=ei,ii=(i("45b3"),W(ti,Gt,Yt,!1,null,"591a5978",null)),ai=ii.exports;ai.install=function(e){e.component(ai.name,ai)};var si=ai,li=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"],style:e.inputsContainerWidth},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"},{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],attrs:{type:"hidden",name:e.inputName},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),e.inputWriteable?i("file-upload",{ref:"fileUpload",attrs:{"list-type":e.pictureWall?"picture-card":null,"action-url":e.actionUrlVal,multiple:e.multiple,accept:e.acceptType,"before-upload":e.beforeUploadMethod,"on-success":e.uploadSuccess,"on-error":e.onError,limit:e.limit,header:e.headerVal,size:e.size,readonly:!e.inputWriteable,"with-credentials":e.withCredentials},on:{"on-progress":e.handleProgress,"handle-error":e.handleError,clear:e.handleClear},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}},[e._t("append",null,{slot:"append"})],2):e._e(),e.isMobile&&e.inputWriteable?i("div",{staticClass:"upload-tooltip"},[e._v("\n    "+e._s(e.$t("ht.file.accept",{acceptType:e.acceptType?e.acceptType:e.$t("ht.file.all")}))+","+e._s(e.$t("ht.file.limitFileSize",{size:e.size?e.size:"50MB"}))+","+e._s(e.$t("ht.file.limitCount",{limit:e.limit?e.limit:5}))+"\n  ")]):e._e(),i("ht-field-tail",{attrs:{writeable:e.writeable,"field-name":e.inputName,"input-value":e.value},on:{"update:writeable":function(t){e.writeable=t}}}),"table"==e.typeVal&&e.value&&JSON.parse(e.value).length>0?i("file-table",{attrs:{data:e.inputVal,permission:e.permission_sub,size:e.sizeType,previewable:e.previewableVal,"column-show":e.columnShow,"prop-conf":e.propConf,downloadable:e.downloadableVal,sortable:e.sortable,"input-writeable":e.inputWriteable},on:{preview:e.preview,download:e.download,move:e.move,remove:e.removeFile}}):"list"==e.typeVal?i("file-list",{attrs:{data:e.inputVal,previewable:e.previewableVal,downloadable:e.downloadableVal,sortable:e.sortable,"input-writeable":e.inputWriteable},on:{preview:e.preview,download:e.download,move:e.move,remove:e.removeFile,sort:e.handleSort}}):"card"==e.typeVal?i("file-card",{attrs:{data:e.inputVal,previewable:e.previewableVal,downloadable:e.downloadableVal,sortable:e.sortable,"input-writeable":e.inputWriteable,headers:e.headerVal,"action-url":e.actionUrlVal,"card-badge":e.cardBadge,thumbnail:e.thumbnail},on:{preview:e.preview,download:e.download,move:e.move,remove:e.removeFile,sort:e.handleSort}}):e._e()],1)},ni=[],oi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"file-upload-container"},[i("el-upload",{ref:"elUploadEl",attrs:{"list-type":e.listType,action:e.actionUrl,"file-list":e.files,headers:e.header,"show-file-list":!1,accept:e.accept,limit:e.limit,multiple:e.multiple,"before-upload":e.handleBeforeUpload,"on-progress":e.handleProgress,"on-exceed":e.handleExceed,"on-success":e.handleSuccess,"on-error":e.handleError,"with-credentials":e.withCredentials}},[i("el-tooltip",{attrs:{placement:"top",effect:"light"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("span",[e._v(e._s(e.$t("ht.file.fileAcceptType"))+"："+e._s(e.acceptLabel))]),i("br"),i("span",[e._v(e._s(e.$t("ht.file.fileSizeLimit"))+e._s(e.size)+"MB")]),i("br"),i("span",[e._v(e._s(e.$t("ht.file.fileCountLimit",{limit:e.limit})))])]),e.readonly?e._e():i("el-button",{attrs:{size:"mini",round:"",icon:"el-icon-plus"}},[e._v("\n        "+e._s(e.$t("ht.picture.uploadButtonText"))+"\n      ")])],1)],1),!e.readonly&&e.files.length>0?i("el-button",{directives:[{name:"popconfirm",rawName:"v-popconfirm",value:{content:e.$t("ht.file.confirmClear"),confirm:e.handleClear},expression:"{\n      content: $t('ht.file.confirmClear'),\n      confirm: handleClear,\n    }"}],attrs:{size:"mini",round:"",icon:"el-icon-delete"}},[e._v("\n    "+e._s(e.$t("ht.common.clear"))+"\n  ")]):e._e(),e._t("append")],2)},ri=[],ci={name:"HtFileUpload",props:{withCredentials:{type:Boolean,default:!1},value:{type:Array,required:!0},actionUrl:{type:String,required:!0},listType:{type:String},multiple:{type:Boolean},accept:{type:String},limit:{type:Number,default:5},header:{type:Object},size:{type:Number,default:50},readonly:{type:Boolean,default:!1},beforeUpload:{type:Function},onSuccess:{type:Function},onExceed:{type:Function},onError:{type:Function}},data(){return{files:[]}},computed:{acceptLabel:function(){return this.accept?this.accept:this.$t("ht.file.all")}},watch:{value:{handler(e){e&&e.length<1?this.files=[]:this.files=e},deep:!0,immediate:!0}},created(){this.files=this.value||[]},methods:{reload(e){this.files=e},exceedFileSize(e){return e.size>1024*this.size*1024},handleBeforeUpload(e){let t=!1;if(this.exceedFileSize(e)){let i=this.$options.filters["computerSize"](e.size);this.$message({message:`${this.$t("ht.file.fileSizeErrorMsg",{computerSize:i})}${this.size}MB.`,type:"warning"}),t=!1}else t=!0;return this.beforeUpload&&this.beforeUpload.constructor==Function&&t&&(t=this.beforeUpload(e)),t&&this.files.push(e),t},handleProgress(e,t,i){const a=this.files.findIndex(e=>e===t);a>-1&&this.$set(this.files,a,t),this.$emit("on-progress",e,t,i)},handleExceed(e,t){this.onExceed&&this.onExceed.constructor==Function?this.onExceed(e,t):this.$message({message:this.$t("ht.file.fileLimitErrorMsg",{limit:this.limit}),type:"warning"})},handleSuccess(e,t,i){this.onSuccess&&this.onSuccess.constructor==Function&&this.onSuccess(e,t,i);const a=this.files.findIndex(e=>e===t);t.state="success",a>-1&&this.$set(this.files,a,t)},handleError(e,t,i){this.onError&&this.onError.constructor==Function&&this.onError(e,t,i),this.$emit("handle-error",e,t,i);const a=this.files.findIndex(e=>e===t);t.state="exception",a>-1&&this.$set(this.files,a,t),this.$message({message:this.$t("ht.file.fileUploadErrorMsg",{fileName:t.name}),type:"error",onClose:()=>{this.files.remove(t)}})},handleClear(){this.files.forEach(e=>{this.abort(e)}),this.$refs.elUploadEl.clearFiles(),this.files=[],this.$emit("clear")},abort(e){e&&"uploading"===e.status&&this.$refs.elUploadEl.abort(e)},remove(e){this.abort(e),this.files.remove(e);for(var t=0;t<this.files.length;t++)this.files[t].uid==e.uid&&this.files.splice(t,1)}}},hi=ci,ui=(i("0cbd"),W(hi,oi,ri,!1,null,"1d7709e8",null)),di=ui.exports;di.install=function(e){e.component(di.name,di)};var pi=di,mi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-table",{staticClass:"file__upload-table",attrs:{data:e.data,"row-key":"uid",border:"",size:e.size}},[i("el-table-column",{attrs:{label:e.$t("ht.common.index"),align:"center",type:"index",width:"50"}}),i("el-table-column",{attrs:{label:e.$t("ht.file.fileName"),"min-width":"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{class:{"done-subject":e.previewable},on:{click:function(i){return e.$emit("preview",t.row)}}},[e._v("\n        "+e._s(t.row.name||t.row.response&&t.row.response.fileName)+"\n      ")])]}}])}),e.calColumnShow.fileType?i("el-table-column",{attrs:{prop:"type",align:"center",lalign:"center",width:"100",label:e.$t("ht.file.fileType")}}):e._e(),e.calColumnShow.fileSize?i("el-table-column",{attrs:{align:"center",lalign:"center",width:"100",label:e.$t("ht.file.fileSize")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n      "+e._s(e._f("computerSize")(t.row.size))+"\n    ")]}}],null,!1,1213810979)}):e._e(),i("el-table-column",{attrs:{align:"center",label:e.$t("ht.file.uploader"),width:"120",prop:"username"}}),e.inputWriteable?i("el-table-column",{attrs:{align:"center",label:e.$t("ht.common.status"),width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-progress",{attrs:{type:"circle",width:25,"stroke-width":2,percentage:t.row.percentage,status:e.getProgressStatus(t.row.state)}})]}}],null,!1,799110027)}):e._e(),e._l(e.propConfList,(function(t){return i("el-table-column",{key:t.name,attrs:{prop:t.name,label:t.desc,width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[i("ht-input",{attrs:{name:t.desc,permission:"w"==e.permission||"b"==e.permission?t.requried?"b":"w":e.permission},model:{value:e.data[a.$index][t.name],callback:function(i){e.$set(e.data[a.$index],t.name,i)},expression:"data[scope.$index][con.name]"}})]}}],null,!0)})})),e.inputWriteable||e.downloadable?i("el-table-column",{attrs:{align:"center",label:e.$t("ht.common.operation"),width:e.operateWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[e.sortable&&e.inputWriteable?i("el-button",{attrs:{size:"small",icon:"el-icon-arrow-up",plain:""},on:{click:function(i){return e.$emit("move",t.row,"up")}}}):e._e(),e.sortable&&e.inputWriteable?i("el-button",{attrs:{size:"small",icon:"el-icon-arrow-down",plain:""},on:{click:function(i){return e.$emit("move",t.row,"down")}}}):e._e(),e.downloadable?i("el-button",{attrs:{disabled:"success"!==t.row.status,size:"small",icon:"el-icon-download",plain:""},on:{click:function(i){return e.$emit("download",t.row)}}}):e._e(),e.inputWriteable?i("el-popconfirm",{staticClass:"table-delete__button",attrs:{title:e.$t("ht.file.confirmDelete")},on:{confirm:function(i){return e.$emit("remove",t.row)}}},[i("el-button",{attrs:{slot:"reference",plain:"",type:"danger",size:"small",icon:"el-icon-delete"},slot:"reference"})],1):e._e()]}}],null,!1,655253710)}):e._e()],2)},gi=[],fi={name:"FileTable",mixins:[Le],props:{data:{type:Array},size:{type:String,default:"small",validator:function(e){return-1!==["medium","small","mini"].indexOf(e)}},permission:{type:String,default:"w",validator:function(e){return-1!==["b","w","r","n"].indexOf(e)}},previewable:{type:Boolean,default:!0},columnShow:{type:Object},propConf:[Array,String],inputWriteable:{type:Boolean,default:!0},downloadable:{type:Boolean,default:!0},sortable:{type:Boolean,default:!0}},computed:{operateWidth(){return this.inputWriteable?this.sortable?"260":"130":"70"},calColumnShow:function(){let e={fileType:!0,fileSize:!0};return{...e,...this.columnShow}},propConfList(){const e="string"===typeof this.propConf&&this.propConf?JSON.parse(this.propConf):this.propConf;return e&&e.filter(e=>e.desc)||[]}},methods:{getProgressStatus(e){return"success"==e?"success":"fail"==e?"exception":"warning"}}},yi=fi,bi=(i("3f39"),W(yi,mi,gi,!1,null,"5b18c246",null)),_i=bi.exports,vi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("draggable",e._b({staticClass:"file-list__wrap",attrs:{tag:"ul",handle:".handle"},on:{start:function(t){e.isDragging=!0},end:function(t){e.isDragging=!1}},model:{value:e.dataVal,callback:function(t){e.dataVal=t},expression:"dataVal"}},"draggable",e.dragOptions,!1),[i("transition-group",{attrs:{type:"transition",name:"flip-list"}},e._l(e.dataVal,(function(t){return i("li",{key:t.uid,class:["file-item","el-upload-list__item",{"is-success":"success"==t.status,"is-uploading":"uploading"==t.status}]},[e.sortable&&e.inputWriteable?i("ht-icon",{staticClass:"handle",attrs:{name:"sort"}}):e._e(),i("ht-icon",{staticClass:"file_icon",attrs:{name:"file"}}),i("p",{staticClass:"file__name",class:{"done-subject":e.previewable},attrs:{title:t.name},on:{click:function(i){return e.$emit("preview",t)}}},[e._v("\n        "+e._s(t.name||t.response&&t.response.fileName)+"\n      ")]),"uploading"==t.status?i("el-progress",{staticClass:"el-progress--line",attrs:{"stroke-width":4,percentage:Math.floor(t.percentage)}}):e._e(),e.downloadable&&"success"==t.status?i("ht-icon",{staticClass:"file-hover__icon",attrs:{name:"arrow",scale:"0.9",title:e.t("ht.file.download")},on:{click:function(i){return e.$emit("download",t)}}}):e._e(),e.inputWriteable?i("el-popconfirm",{attrs:{title:e.$t("ht.file.confirmDelete")},on:{confirm:function(i){return e.$emit("remove",t)}}},[i("ht-icon",{staticClass:"file-hover__icon",attrs:{slot:"reference",name:"close",title:e.t("ht.common.remove")},slot:"reference"})],1):e._e()],1)})),0)],1)},wi=[];const Si=i("289a");var Ci={name:"FileList",components:{draggable:Si},mixins:[Le],props:{data:{type:Array},previewable:{type:Boolean,default:!0},inputWriteable:{type:Boolean,default:!0},downloadable:{type:Boolean,default:!0},sortable:{type:Boolean,default:!0}},data(){return{isDragging:!1}},computed:{dataVal:{get(){return this.data},set(e){this.isDragging&&e.constructor==Array&&e.length>0&&this.$emit("sort",e)}},dragOptions(){return{animation:0,group:"description",disabled:!1,ghostClass:"ghost"}}}},Di=Ci,xi=(i("9093"),W(Di,vi,wi,!1,null,"2f5080d3",null)),Ti=xi.exports,Pi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("draggable",e._b({staticClass:"el-upload-list el-upload-list--picture-card",attrs:{tag:"ul",handle:".handle"},on:{start:function(t){e.isDragging=!0},end:function(t){e.isDragging=!1}},model:{value:e.dataVal,callback:function(t){e.dataVal=t},expression:"dataVal"}},"draggable",e.dragOptions,!1),[i("transition-group",{attrs:{type:"transition",name:"flip-list"}},e._l(e.dataVal,(function(t){return i("li",{key:t.uid,class:["file-item","el-upload-list__item",{"is-success":"success"==t.status,"is-uploading":"uploading"==t.status}]},["success"==t.status?i("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:e.thumbnailComp(t,e.actionUrl)},on:{error:e.defaultImg}}):"uploading"==t.status?i("el-progress",{attrs:{type:"circle",percentage:Math.floor(t.percentage)}}):e._e(),e.inputWriteable||e.previewable?i("span",{staticClass:"el-upload-list__item-actions"},[e.sortable&&e.inputWriteable?i("span",{staticClass:"handle",attrs:{title:e.t("ht.file.sort")}},[i("i",{staticClass:"el-icon-rank"})]):e._e(),e.previewable?i("span",{staticClass:"el-upload-list__item-preview",attrs:{title:e.t("ht.file.preview")},on:{click:function(i){return e.$emit("preview",t)}}},[i("i",{staticClass:"el-icon-zoom-in"})]):e._e(),e.inputWriteable?i("el-popconfirm",{attrs:{title:e.$t("ht.file.confirmDelete")},on:{confirm:function(i){return e.$emit("remove",t)}}},[i("span",{staticClass:"el-upload-list__item-delete",attrs:{slot:"reference",title:e.t("ht.common.remove")},slot:"reference"},[i("i",{staticClass:"el-icon-delete"})])]):e._e()],1):e._e()],1)})),0)],1)},Ei=[];function Oi(e){const t=new RegExp(/^(http.*?\/\/.*?)\/.*$/);return t.test(e)?t.exec(e)[1]:""}const ki=i("289a"),Ii=i("76ce");var $i={name:"FileCard",components:{draggable:ki},mixins:[Le],props:{data:{type:Array},headers:{type:Object},actionUrl:{type:String},previewable:{type:Boolean,default:!0},inputWriteable:{type:Boolean,default:!0},downloadable:{type:Boolean,default:!0},sortable:{type:Boolean,default:!0},cardBadge:{type:Boolean,default:!0},thumbnail:{type:Function,default:null}},data(){return{isDragging:!1}},computed:{dataVal:{get(){return this.data},set(e){this.isDragging&&e.constructor==Array&&e.length>0&&this.$emit("sort",e)}},dragOptions(){return{animation:0,group:"description",disabled:!1,ghostClass:"ghost"}},thumbnailComp(){return this.thumbnail?this.thumbnail:this.$requestConfig.thumbnail?this.$requestConfig.thumbnail:(e,t)=>{const i=Oi(t);return e.response&&e.response.fileId?`${i}/file/onlinePreviewController/v1/getFileById_${e.response.fileId}`:Ii}}},methods:{defaultImg(e){const t=e.srcElement;t.src=Ii,t.onerror=null}}},Ai=$i,Bi=W(Ai,Pi,Ei,!1,null,null,null),Mi=Bi.exports;const{saveAs:Li}=i("9588");var Fi={name:"HtFile",components:{HtFieldTail:ue,FileUpload:pi,FileTable:_i,FileList:Ti,FileCard:Mi},mixins:[Le,de["a"],pe["a"],me["a"],kt["a"]],props:{type:{type:String,default:"table",validator:function(e){return-1!==["table","list","card"].indexOf(e)}},isSimple:{type:Boolean,default:!1},simplicity:{type:Boolean,default:!1},withCredentials:{type:Boolean,default:!1},actionUrl:{type:String,default:null},value:{type:String},multiple:{type:Boolean,default:!1},accept:{type:String},limit:{type:Number},pictureWall:{type:Boolean,default:!1},header:{type:Object},size:{type:Number},sizeType:{type:String},previewable:{type:Boolean,default:!0},allowPreview:{type:Boolean,default:!1},downloadable:{type:Boolean,default:!0},allowDownload:{type:Boolean,default:!1},sortable:{type:Boolean,default:!0},propConf:[Array,String],beforeUpload:{type:Function},onSuccess:{type:Function},onError:{type:Function},columnShow:{type:Object,default(){return{}}},cardBadge:{type:Boolean,default:!0},thumbnail:{type:Function},flowData:{type:Object,default:()=>({})},uploading:{type:Boolean,default:!1}},data(){return{writeable:!0,temp:null,refreshFileUploadDebounce:fe.a.debounce(this.refreshFileUpload,200),inputVal:[]}},computed:{typeVal:function(){return this.isSimple||this.simplicity?"list":this.type},inputsContainerWidth(){return"list"!==this.typeVal&&"block"!==this.formInputsDisplay?{width:"auto"}:{}},actionUrlVal:function(){return this.actionUrl?this.actionUrl:this.$requestConfig.uploadUrl?this.handlerUploadUrl:"https://jsonplaceholder.typicode.com/posts/"},handlerUploadUrl(){const e=this.$requestConfig.uploadUrl;if(!this.flowData.defId)return e;const t=e.indexOf("?");return-1==t?`${e}?defId=${this.flowData.defId}`:t>-1&&t==e.length-1?`${e}defId=${this.flowData.defId}`:t>-1&&t<e.length-1?`${e}&defId=${this.flowData.defId}`:e},headerVal:function(){return this.header?this.header:this.$requestConfig.header?this.$requestConfig.header():null},acceptType:function(){if(this.accept){const e=[];return this.accept.split(",").forEach(t=>{t.startsWith(".")?e.push(t):e.push("."+t)}),e.join(",")}return null},previewableVal:function(){return this.inputWriteable&&this.previewable||this.allowPreview},downloadableVal:function(){return this.inputWriteable&&this.downloadable||this.allowDownload}},watch:{value(e){y["a"].isEmpty(e)?this.inputVal=[]:e.constructor==String&&(this.inputVal=[...JSON.parse(e)]),this.uploadingJudge(this.inputVal)},inputVal:{handler(e){this.$emit("input",e.length>0?JSON.stringify(e):"")},deep:!0}},created(){this.value&&(this.inputVal=JSON.parse(this.value))},methods:{beforeUploadMethod(e){return e.name&&this.accept&&!this.accept.split(",").includes(e.name.split(".")[1])?(this.$message(this.$t("ht.file.validateMsg")),!1):!this.beforeUpload||this.beforeUpload(e)},substringType(e){let t=e.split(".");return t[t.length-1]},convertFile2Item(e){let t=e.name||e.response&&e.response.fileName;const i={name:t,size:e.size||e.response&&e.response.size,percentage:e.percentage,status:e.status,state:e.status,type:t&&t.split(".")?this.substringType(t):e.type,uid:e.uid,prop1:"",prop2:"",prop3:"",prop4:"",prop5:"",prop6:""};return e.response&&(i.response={...e.response},i.username=e.response.username||""),i},valueOpration(e,t="update",i){if("clear"==t)return this.$emit("input",""),void this.refreshFileUploadDebounce();let a=y["a"].isEmpty(this.value)?[]:JSON.parse(this.value);const s=a.findIndex(t=>t.uid==e.uid);switch(t){case"update":s>-1?a[s]=e:a.push(e);break;case"remove":a.splice(s,1);break;case"move":{const t=a.find(t=>t.uid==e.uid);a=y["a"].arrayMove(a,t,i);break}}this.$emit("input",a.length>0?JSON.stringify(a):""),this.refreshFileUploadDebounce()},uploadingJudge(e){let t=!1;e&&e.constructor==Array&&0!=e.length?e.forEach(e=>{("success"===e.status&&e.hasOwnProperty("percentage")&&void 0===e.percentage||"uploading"===e.status)&&(t=!0)}):t=!1,this.$emit("update:uploading",t)},refreshFileUpload(){this.$nextTick(()=>{this.$refs.fileUpload.reload(this.inputVal)})},handleError(e,t){this.valueOpration(this.convertFile2Item(t)),setTimeout(()=>{this.valueOpration(this.convertFile2Item(t),"remove")},3e3)},handleProgress(e,t){this.valueOpration(this.convertFile2Item(t))},handleClear(){this.valueOpration(null,"clear")},move(e,t){this.valueOpration(e,"move",t)},uploadSuccess(e,t,i){this.valueOpration(this.convertFile2Item(t)),this.$emit("onSuccess",e,t,i)},removeFile(e){this.$refs.fileUpload.abort(e),this.valueOpration(this.convertFile2Item(e),"remove"),this.$emit("remove",e,this.inputVal)},download(e){this.$options._parentListeners.download?this.$emit("download",e,this.inputVal):this.$requestConfig.download&&this.$requestConfig.download(e.response.fileId).then(({data:e,headers:t})=>{if(e&&t){const i=decodeURIComponent(t["content-disposition"].split(";")[1].split("filename=")[1]),a=new Blob([e]);Li(a,i)}}).catch(e=>{this.$message.error(`${this.$t("ht.file.fileDownloadError")}:${e}`)})},preview(e){if("success"===e.status)if(this.previewableVal)!this._events.preview&&this.$preview?this.$preview(e):this.$emit("preview",e,this.inputVal);else{let e=this.t("ht.file.nopreview");this.$message.warning(e)}else this.$message.warning(this.t("ht.file.forbiddenPreview"))},handleSort(e){this.$emit("input",JSON.stringify(e)),this.refreshFileUploadDebounce()}}},Ni=Fi,qi=(i("1989"),W(Ni,li,ni,!1,null,"332faf92",null)),Vi=qi.exports;Vi.install=function(e){e.component(Vi.name,Vi)};var Ri=Vi,zi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"inputs"},[i("div",{staticClass:"el-select",staticStyle:{width:"100%","min-width":"180px"},on:{click:e.showDialog}},[i("div",{ref:"tagSpans",class:{"el-select__tags_readonly":!e.inputWriteable,"el-select__tags":e.inputWriteable},staticStyle:{width:"calc(100% - 25px)"}},[i("span",e._l(e.demensions,(function(t,a){return i("span",{key:a,staticClass:"el-tag el-tag--info el-tag--small",on:{click:function(e){e.stopPropagation()}}},[i("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.name))]),e.inputWriteable?i("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(i){return e.handleRemove(t)}}}):e._e()])})),0)]),e.inputWriteable?i("div",{staticClass:"el-input el-input--suffix"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"},{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],ref:"inputEl",staticClass:"el-input__inner",style:{height:e.inputSuffixHeight+"px",lineHeight:e.inputSuffixHeight+"px"},attrs:{type:"text",readonly:"readonly",name:e.inputName,autocomplete:"off",placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),i("span",{staticClass:"el-input__suffix"},[i("span",{staticClass:"el-input__suffix-inner"},[i("ht-icon",{attrs:{name:"users"}})],1)])]):e._e()]),i("ht-field-tail",{attrs:{writeable:e.writeable,"field-name":e.inputName,"input-value":e.value},on:{"update:writeable":function(t){e.writeable=t}}}),i("el-dialog",{staticClass:"dialog-selector__wrapper",attrs:{title:e.$t("ht.selector.dimensionTitle"),visible:e.dialogVisible,top:"6vh","before-close":e.handleClose,"close-on-click-modal":!1,"append-to-body":e.appendToBody},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("ht-selector",{ref:"selector",attrs:{data:e.data,pagination:e.pagination,"table-columns":e.tableColumns,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField},on:{load:e.load,select:e.select,"row-click":e.rowClick},model:{value:e.demensions,callback:function(t){e.demensions=t},expression:"demensions"}}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleDialogSure}},[e._v("\n        "+e._s(e.$t("ht.common.confirm"))+"\n      ")]),i("el-button",{attrs:{size:"small"},on:{click:e.handleDialogCancel}},[e._v("\n        "+e._s(e.$t("ht.common.cancle"))+"\n      ")])],1)],1)],1)},Hi=[],Ui=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{staticClass:"e_c auto_height fullheight"},[i("el-container",{staticClass:"fullheight"},[i("div",{staticClass:"ht-header__search"},[i("el-input",{staticClass:"ht-header__input",staticStyle:{"max-width":"200px"},attrs:{size:"small",clearable:"",placeholder:e.searchPlaceholder,"prefix-icon":"el-icon-search"},on:{clear:e.clear},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}}),i("div",{staticClass:"ht-search__btn"},[i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search",disabled:e.loading},on:{click:e.search}},[e._v("\n          "+e._s(e.t("ht.common.search"))+"\n        ")]),e.isMobile?e._e():i("el-button",{attrs:{size:"small",disabled:e.loading,icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("\n          "+e._s(e.t("ht.common.reset"))+"\n        ")]),e._t("customBtn")],2)],1),i("el-main",{staticClass:"ht-selector__main"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"selectorTable",staticClass:"ht-selector__table",staticStyle:{width:"100%"},attrs:{data:e.data,stripe:"",border:"",size:e.sizeType,"highlight-current-row":e.single},on:{"row-click":e.handleRowClick,select:e.handleTableSelect,"select-all":e.handleTableSelect}},[e.single?e._e():i("el-table-column",{attrs:{type:"selection",align:"center",width:"45"}}),e.single?i("el-table-column",{attrs:{align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-radio",{attrs:{label:t.row.id},model:{value:e.selectedId,callback:function(t){e.selectedId=t},expression:"selectedId"}})]}}],null,!1,2510255007)}):e._e(),"small"==e.sizeType?i("el-table-column",{attrs:{type:"index",width:"60",align:"center",label:e.t("ht.common.index")}}):e._e(),e._l(e.tableColumns,(function(t,a){return i("el-table-column",{key:a,attrs:{align:"center",prop:t.prop,label:t.label,width:t.width},scopedSlots:e._u([{key:"default",fn:function(a){return["timestamp"==t.type?i("el-tooltip",{staticClass:"item",attrs:{effect:"light",disabled:e.hideTip(t.tipField,a.row[t.tipField]),content:a.row[t.tipField],placement:"top-end"}},[i("div",{staticClass:"cell"},[e._v("\n                "+e._s(e._f("dateFormat")(a.row[t.prop],"YYYY-MM-DD HH:mm:ss"))+"\n              ")])]):"orgname"==t.prop?i("div",{staticClass:"cell"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"light",disabled:e.hideTip(t.tipField,a.row[t.tipField]),content:a.row[t.tipField],placement:"top-end"}},[i("span",[e._v(e._s(a.row[t.prop]))])])],1):i("div",{staticClass:"cell"},[e._v(e._s(a.row[t.prop]))])]}}],null,!0)})}))],2)],1),i("el-footer",{staticClass:"ht-footer__pagination",attrs:{height:"auto"}},[i("el-row",{attrs:{type:"flex",justify:"end"}},[i("el-pagination",{attrs:{small:"",layout:e.isMobile?e.mobileLayout:e.pcLayout,disabled:e.loading,"page-sizes":e.pageSizeArr,"page-size":e.pagination.pageSize,"pager-count":5,total:e.pagination.total,"current-page":e.pagination.page},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),e.isMobile?e._e():i("el-aside",{staticClass:"right-aside",attrs:{width:"80px"}},[i("div",{staticClass:"selector-button-group"},[i("el-button",{attrs:{size:e.sizeType},on:{click:function(t){return e.move("up")}}},[e._v("\n        "+e._s(e.t("ht.common.up"))+"\n      ")]),i("el-button",{attrs:{size:e.sizeType},on:{click:function(t){return e.move("down")}}},[e._v("\n        "+e._s(e.t("ht.common.down"))+"\n      ")]),i("el-button",{attrs:{size:e.sizeType},on:{click:e.removeSelected}},[e._v("\n        "+e._s(e.t("ht.common.remove"))+"\n      ")]),i("el-button",{attrs:{size:e.sizeType},on:{click:e.clearAllSelects}},[e._v("\n        "+e._s(e.t("ht.common.clear"))+"\n      ")])],1)]),e.isMobile?e._e():i("el-aside",{staticClass:"select-aside",attrs:{width:"140px"}},[i("el-header",{staticClass:"select-header"},[i("span",{staticStyle:{"font-size":"14px"}},[e._v(e._s(e.t("ht.common.selected")))])]),i("div",{staticClass:"select-tree-div"},[i("el-tree",{ref:"selectTree",attrs:{small:"","node-key":"id",indent:e.indent,props:e.treeProps,data:e.selects,"default-checked-keys":e.defaultCheckedKeys,"show-checkbox":"","check-on-click-node":""}})],1)],1)],1)},Ki=[],ji=i("5118"),Wi={name:"HtSelector",mixins:[Le,kt["a"]],props:{searchPlaceholder:{type:String,default:""},selectLabel:{type:String,default:"name"},tableColumns:{type:Array,default:()=>[]},value:{type:Array,default:()=>[]},data:Array,single:{type:Boolean,default:!1},pagination:{type:Object,default:()=>({page:1,pageSize:10,total:31214,showTotal:!0})},quickSearchProps:{type:[String,Array],required:!0},primaryField:{type:String,default:""},indent:{type:Number,default:8}},data(){return{sizeType:"small",loading:!1,searchWord:null,paging:{page:1,pageSize:10},selectedId:null,selects:[],defaultCheckedKeys:[],currentSelectData:[],pageSizeArr:[10,50,100,200,300],pcLayout:"total, sizes, prev, pager, next ,jumper",mobileLayout:"total, prev, pager, next"}},computed:{treeProps:function(){return{label:this.selectLabel}}},watch:{data:function(e){e&&e.length>0&&this.syncCheckedStatus()},selects:{handler(e){this.currentSelectData=e,this.$emit("current-selected",e)},deep:!0}},created(){this.pagination.pageSize&&(this.paging.pageSize=this.pagination.pageSize,-1===this.pageSizeArr.indexOf(this.paging.pageSize)&&this.pageSizeArr.push(this.paging.pageSize)),this.oldPaging={...this.paging},this.$smallScreenDialog&&(this.sizeType="mini")},methods:{hideTip(e,t){return!e||!t},getSelectedData(){return this.currentSelectData},syncSelection2selects(){let e=[...this.selects];this.data.forEach(t=>{e.remove(t)}),e=[...e,...this.$refs.selectorTable.selection],this.selects=e.unique(this.primaryField?this.primaryField:"id"),this.defaultCheckedKeys=this.defaultCheckedKeys.concat(this.$refs.selectorTable.selection.extractByKey("id"))},syncCheckedStatus(){if(this.selectedId=null,this.single)1===this.selects.length&&(this.selectedId=this.selects[0].id);else{if(!this.$refs.selectorTable||!this.$refs.selectorTable.selection)throw this.$t("ht.selector.notGetData");this.$refs.selectorTable.clearSelection(),this.selects.length>0&&Object(ji["setTimeout"])(()=>{this.selects.forEach(e=>{this.data.some(t=>y["a"].objectEquals(e,t))&&this.$refs.selectorTable.toggleRowSelection(e)})})}},onShow(e){this.selects=e||[...this.value],this.defaultCheckedKeys=this.selects.extractByKey("id"),this.reset()},onHide(e){e&&this.$emit("input",this.selects)},getQueryFilter(e){let t={querys:[],pageBean:this.paging};if(this.quickSearchProps&&this.quickSearchProps.constructor==String&&this.searchWord){e||(t.pageBean.page=1);let i=this.quickSearchProps.split(",");i.forEach(e=>{let i={property:e,value:this.searchWord,group:"main",operation:"LIKE",relation:"OR"};t.querys.push(i)})}return t},load(e){this.loading=!0,this.$emit("load",this.getQueryFilter(e),()=>{this.loading=!1})},search(){this.loading||(this.paging=this.oldPaging,this.load())},reset(){this.$emit("reset"),this.searchWord=null,this.paging=this.oldPaging,this.load()},clear(){this.reset()},handleRowClick(e,t,i){if(this.single)this.selects=[e],this.selectedId=e.id,this.defaultCheckedKeys=[],this.defaultCheckedKeys.push(this.selectedId);else{if(!this.$refs.selectorTable||!this.$refs.selectorTable.selection)throw this.$t("ht.selector.notGetData");let t=!0;this.$refs.selectorTable.selection.forEach(i=>{i===e&&(this.$refs.selectorTable.toggleRowSelection(e,!1),t=!1)}),t&&this.$refs.selectorTable.toggleRowSelection(e),this.syncSelection2selects()}this.$emit("row-click",e,t,i)},handleTableSelect(e,t){this.syncSelection2selects(),this.$emit("select",e,t)},handleSizeChange(e){this.paging.pageSize=e,this.load()},handleCurrentChange(e){this.paging.page=e,this.load(!0)},move(e){let t=this.$refs.selectTree.getCheckedNodes();this.selects=y["a"].arrayMove(this.selects,t,e),Object(ji["setTimeout"])(()=>{this.$refs.selectTree.setCheckedNodes(t)})},removeSelected(){let e=this.$refs.selectTree.getCheckedNodes();e.forEach(e=>{this.selects.remove(e)}),this.syncCheckedStatus()},clearAllSelects(){this.selects=[],this.syncCheckedStatus()}}},Qi=Wi,Ji=(i("b391"),W(Qi,Ui,Ki,!1,null,"758fd0ba",null)),Gi=Ji.exports;Gi.install=function(e){e.component(Gi.name,Gi)};var Yi=Gi,Zi={name:"HtDemension",components:{HtFieldTail:ue,HtSelector:Yi},props:{searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.nameCode")}},validate:[String,Object],value:String,name:String,selectLabel:String,placeholder:{type:String,default(){return Object(Me["c"])("ht.common.enter")}},permission:{type:String,default:"w",validator:function(e){return-1!==["b","w","r","n"].indexOf(e)}},single:{type:Boolean,default:!1},config:Object,data:{type:Array,default:()=>[]},tableColumns:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},quickSearchProps:{type:String,required:!0},appendToBody:{type:Boolean,default:!1}},data(){return{inputName:null,writeable:!0,inputSuffixHeight:30,demensions:[],dialogVisible:!1}},computed:{inputWriteable:function(){return this.writeable?y["a"].getWriteable(this.permission):this.writeable},inputValidate:function(){return y["a"].addRequiredOrNot(this.permission,this.validate,this)},primaryField:function(){return this.config&&this.config.hasOwnProperty("id")?"id":this.config&&this.config.hasOwnProperty("code")?"code":this.selectLabel}},watch:{demensions:function(e){let t=[],i=[],a=[],s=[];e&&e.constructor===Array&&e.length>0&&e.forEach(e=>{t.push(e.name),e.hasOwnProperty("id")&&i.push(e.id),e.hasOwnProperty("code")&&s.push(e.code),e.hasOwnProperty("demName")&&a.push(e.demName)}),this.config&&(this.config.hasOwnProperty("id")&&y["a"].setValueByConfigKey(this,this.config,"id",i.join(",")),this.config.hasOwnProperty("code")&&y["a"].setValueByConfigKey(this,this.config,"code",s.join(",")),this.config.hasOwnProperty("demName")&&y["a"].setValueByConfigKey(this,this.config,"demName",a.join(","))),this.$emit("valueChange",t.join(","),e),Object(ji["setTimeout"])(()=>{this.calacInputSuffixHeight(),this.$refs.inputEl&&(this.$refs.inputEl.focus(),this.$refs.inputEl.blur())},10)},value:function(){this.valueInit()}},mounted(){this.valueInit()},created(){this.inputName=this.name?this.name:y["a"].getName(),this.$validator=this.$root.$validator},methods:{valueInit(){let e=[];if(this.value){let t=[],i=[],a=[];if(this.config){if(this.config.hasOwnProperty("id")){let e=y["a"].getValueByConfigKey(this,this.config,"id");e&&(t=e.split(",").trim())}if(this.config.hasOwnProperty("code")){let e=y["a"].getValueByConfigKey(this,this.config,"code");e&&(a=e.split(",").trim())}if(this.config.hasOwnProperty("demName")){let e=y["a"].getValueByConfigKey(this,this.config,"demName");e&&(i=e.split(",").trim())}}let s=this.value.split(",").trim();s.forEach((s,l)=>{let n={name:s};t.length>l&&(n["id"]=t[l]),a.length>l&&(n["code"]=a[l]),i.length>l&&(n["demName"]=i[l]),e.push(n)})}y["a"].arrayEquals(e,this.demensions)||(this.demensions=e)},showDialog(){this.inputWriteable&&(this.dialogVisible=!0,Object(ji["setTimeout"])(()=>{this.$refs.selector.onShow()}))},handleClose(e){this.$refs.selector.onHide(),e&&e()},handleDialogSure(){this.$emit("select-data",this.$refs.selector.getSelectedData()),this.dialogVisible=!1,this.$refs.selector.onHide(!0)},handleDialogCancel(){this.dialogVisible=!1,this.$refs.selector.onHide()},handleRemove(e){this.demensions.remove(e)},calacInputSuffixHeight(){this.$refs.tagSpans&&(this.$refs.tagSpans.offsetHeight?this.inputSuffixHeight=this.$refs.tagSpans.offsetHeight+5:this.inputSuffixHeight=30)},load(e,t){this.$emit("load",e,t)},select(e,t){this.$emit("select",e,t)},rowClick(e,t,i){this.$emit("row-click",e,t,i)}}},Xi=Zi,ea=(i("2ee6"),W(Xi,zi,Hi,!1,null,"9e19fd4e",null)),ta=ea.exports;ta.install=function(e){e.component(ta.name,ta)};var ia=ta,aa=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{style:e.containerStyle},[e.supportFilter?i("div",{staticClass:"tree-header flex"},[e._t("custom-prefix"),i("el-input",{attrs:{placeholder:e.t("ht.tree.filterText"),clearable:""},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),i("div",{class:e.isIeExplorer?"tree-button-group is-ie-explorer flex":"tree-button-group flex"},[e._t("custom-button"),i("ht-icon",{staticClass:"tree-icon",attrs:{name:e.isExpand?"simple-collapse":"simple-expand",title:e.isExpand?e.$t("ht.tree.collapse"):e.$t("ht.tree.expand"),scale:"1.2"},on:{click:e.handleExpandCollapse}}),i("ht-icon",{staticClass:"tree-icon refresh",attrs:{name:"refresh",pulse:e.loading,scale:"1.1",title:e.$t("ht.tree.refresh")},on:{click:e.refresh}})],2)],2):e._e(),e.isShowEmpty?i("el-empty",{attrs:{image:e.treeNoDataImg,"image-size":e.imageSize}}):i("el-tree",{ref:"elTree",staticClass:"el-tree__wrapper",style:e.elTreeStyle,attrs:{data:e.data?e.data:e.treeData,props:e.props,"empty-text":e.emptyText,"default-expand-all":e.defaultExpandAll,"filter-node-method":e.filterNode,load:e.load,lazy:e.lazy,"show-checkbox":e.showCheckbox,accordion:e.accordion,"node-key":e.nodeKey,"default-expanded-keys":e.defaultExpandedKeys,"highlight-current":e.highlightCurrent,"render-after-expand":e.renderAfterExpand,"render-content":e.renderContent,"check-on-click-node":e.checkOnClickNode,"auto-expand-parent":e.autoExpandParent,"check-strictly":e.checkStrictly,"current-node-key":e.currentNodeKey,indent:e.indent,"icon-class":e.iconClass,draggable:e.draggable,"allow-drag":e.allowDrag,"allow-drop":e.allowDrop,"expand-on-click-node":e.expandOnClickNode,"default-checked-keys":e.defaultCheckedKeys},on:{"node-click":e.handleNodeClick,"node-contextmenu":e.nodeContextmenu,"check-change":e.checkChange,check:e.check,"current-change":e.currentChange,"node-expand":e.nodeExpand,"node-collapse":e.nodeCollapse,"node-drag-start":e.nodeDragStart,"node-drag-enter":e.nodeDragEnter,"node-drag-leave":e.nodeDragLeave,"node-drag-over":e.nodeDragOver,"node-drag-end":e.nodeDragEnd,"node-drop":e.nodeDrop},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,s=t.data;return e.$scopedSlots["default"]?e._t("default",null,{node:a,data:s}):[i("span",{staticClass:"el-tree-node__label show-ellipsis",class:{"full-width":!e.showMoreButton},attrs:{title:a.label}},[e._v("\n        "+e._s(a.label)+"\n      ")])]}}],null,!0)})],1)},sa=[],la={name:"HtTree",mixins:[Le],props:{data:Array,treeData:Array,load:{type:Function},lazy:{type:Boolean,default:!1},accordion:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultExpandAll:{type:Boolean,default:!1},props:{type:Object,default:function(){return{children:"children",label:"label"}}},supportFilter:{type:Boolean,default:!1},showMoreButton:{type:Boolean,default:!1},iconClass:{type:String},nodeKey:{type:String},defaultExpandedKeys:{type:Array},highlightCurrent:{type:Boolean,default:!1},renderAfterExpand:{type:Boolean,default:!0},renderContent:{type:Function},filterNodeMethod:Function,checkOnClickNode:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},checkStrictly:{type:Boolean,default:!1},currentNodeKey:{type:[String,Number]},indent:{type:Number,default:8},draggable:{type:Boolean,default:!1},allowDrag:{type:Function},allowDrop:{type:Function},expandOnClickNode:{type:Boolean,default:!0},defaultCheckedKeys:{type:Array,default(){return[]}},emptyText:String,height:{type:[String,Number],default:0,validator:e=>{if("number"==typeof e)return e>-1;if("string"==typeof e){const t=Number(e);return!isNaN(t)&&t>-1}return!1}},treeNoDataImg:{type:String,default:i("9f33")},imageSize:{type:Number,default:122}},data(){return{filterText:"",isExpand:this.defaultExpandAll,isIeExplorer:!1,loading:!1,defaultProps:{children:"children",label:"label"}}},computed:{heightNum(){return"number"==typeof this.height?this.height:Number(this.height)},containerStyle(){return this.heightNum>0?{height:this.heightNum+"px"}:{}},elTreeStyle(){let e={background:this.supportFilter?"#fafafa":""};return this.heightNum>0&&Object.assign(e,{height:this.supportFilter?"calc(100% - 40px)":"100%",overflow:"auto"}),e},isShowEmpty(){return this.data&&this.data.length<1&&this.treeData&&this.treeData.length<1}},watch:{filterText(e){this.lazy?this.$emit("loadALL",e):this.$refs.elTree.filter(e)},defaultCheckedKeys(e){this.$refs.elTree.setCheckedKeys(e)}},mounted(){(window.ActiveXObject||"ActiveXObject"in window)&&(this.isIeExplorer=!0)},methods:{setCurrentKey(e){this.$refs.elTree.setCurrentKey(e)},filterNode(e,t,i){return this.filterNodeMethod&&this.filterNodeMethod.constructor==Function?this.filterNodeMethod(e,t,i):!e||-1!==t[this.props.label].indexOf(e)},handleNodeClick(e,t,i){this.$emit("node-click",e,t,i)},nodeContextmenu(e,t,i,a){this.$emit("node-contextmenu",e,t,i,a)},checkChange(e,t,i){this.$emit("check-change",e,t,i)},check(e,t){this.$emit("check",e,t)},currentChange(e,t){this.$emit("current-change",e,t)},nodeExpand(e,t,i){this.$emit("node-expand",e,t,i)},nodeCollapse(e,t,i){this.$emit("node-collapse",e,t,i)},nodeDragStart(e,t){this.$emit("node-drag-start",e,t)},nodeDragEnter(e,t,i){this.$emit("node-drag-enter",e,t,i)},nodeDragLeave(e,t,i){this.$emit("node-drag-leave",e,t,i)},nodeDragOver(e,t,i){this.$emit("node-drag-over",e,t,i)},nodeDragEnd(e,t,i,a){this.$emit("node-drag-end",e,t,i,a)},nodeDrop(e,t,i,a){this.$emit("node-drop",e,t,i,a)},handleExpandCollapse(){this.isExpand=!this.isExpand;let e=this.$refs.elTree;this.setNodesExpand(e.root.childNodes)},setNodesExpand(e){e&&e.length>0&&e.map(e=>{e.expanded=this.isExpand,e.childNodes&&e.childNodes.length>0&&this.setNodesExpand(e.childNodes)})},refresh(){this.loading=!0,this.$emit("refresh",()=>{this.loading=!1,this.isExpand=this.defaultExpandAll}),Object(ji["setTimeout"])(()=>{this.loading=!1,this.isExpand=this.defaultExpandAll},5e3)}}},na=la,oa=(i("afdf"),W(na,aa,sa,!1,null,"ae0439a0",null)),ra=oa.exports;ra.install=function(e){e.component(ra.name,ra)};var ca=ra,ha=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.t("ht.addQueryStrategy.title"),visible:e.dialogVisible,width:"60%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:e.t("ht.addQueryStrategy.strategyName")}},[i("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{size:"mini"},model:{value:e.form.strategyName,callback:function(t){e.$set(e.form,"strategyName",t)},expression:"form.strategyName"}})],1),i("el-form-item",{attrs:{label:e.t("ht.addQueryStrategy.searchQuery")}},[e._l(e.form.querys,(function(t,a){return i("el-row",{key:a},[i("el-col",{attrs:{span:6}},[i("el-select",{attrs:{size:"mini",clearable:"",placeholder:e.t("ht.common.select")},on:{change:function(i){return e.changeField(t)}},model:{value:t.field,callback:function(i){e.$set(t,"field",i)},expression:"item.field"}},e._l(e.fieldOptions,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e}})})),1)],1),i("el-col",{attrs:{span:6}},[i("el-select",{attrs:{size:"mini",clearable:"",placeholder:e.t("ht.common.select"),disabled:t.field&&t.field.options&&t.field.options.length>0},model:{value:t.operation,callback:function(i){e.$set(t,"operation",i)},expression:"item.operation"}},e._l(e.queryOPs,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-col",{attrs:{span:9}},[t.field&&t.field.options&&t.field.options.length>0?i("el-select",{attrs:{size:"mini",clearable:"",placeholder:e.t("ht.common.select")},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}},e._l(t.field.options,(function(e,t){return i("el-option",{key:t,attrs:{label:e,value:e}})})),1):i("el-input",{attrs:{size:"mini",placeholder:"2019-10-21 - 2019-11-19"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}})],1),i("el-col",{attrs:{span:3}},[i("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(i){return e.removeQuerys(t)}}})],1)],1)})),i("el-link",{attrs:{type:"primary",underline:!1},on:{click:e.addQuerys}},[i("i",{staticClass:"el-icon-plus"}),e._v("\n        "+e._s(e.t("ht.addQueryStrategy.addSearchQuery"))+"\n      ")])],2),i("el-form-item",{attrs:{label:e.t("ht.addQueryStrategy.isDefault")}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.form.isDefault,callback:function(t){e.$set(e.form,"isDefault",t)},expression:"form.isDefault"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:e.handleCancle}},[e._v("\n      "+e._s(e.t("ht.common.cancle"))+"\n    ")]),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.save}},[e._v("\n      "+e._s(e.t("ht.common.confirm"))+"\n    ")])],1)],1)},ua=[],da={name:"HtAddQueryStrategy",mixins:[Le],props:{fieldOptions:Array,dialogVisible:{type:Boolean,default:!1},tableCode:String},data(){return{form:{querys:[{}],tableCode:this.tableCode},queryOPs:[{label:this.t("ht.common.equal"),value:"EQ"},{label:this.t("ht.addQueryStrategy.equalIgnoreCase"),value:"EIC"},{label:this.t("ht.common.lessThan"),value:"LT"},{label:this.t("ht.common.greaterThan"),value:"GT"},{label:`${this.t("ht.common.lessThan")}${this.t("ht.common.equal")}`,value:"LE"},{label:`${this.t("ht.common.greaterThan")}${this.t("ht.common.equal")}`,value:"GE"},{label:this.t("ht.common.notEqual"),value:"NE"},{label:this.t("ht.common.like"),value:"LK"},{label:`${this.t("ht.common.left")}${this.t("ht.common.like")}`,value:"LFK"},{label:`${this.t("ht.common.right")}${this.t("ht.common.like")}`,value:"RHK"},{label:this.t("ht.common.isNull"),value:"ISNULL"},{label:this.t("ht.common.notNull"),value:"NOTNULL"},{label:this.t("ht.common.between"),value:"BETWEEN"},{label:this.t("ht.common.in"),value:"IN"}]}},methods:{onSubmit:function(){},handleClose(e){this.$confirm(`${this.t("ht.common.confirm")}${this.t("ht.common.close")}？`).then(()=>{e(),this.$emit("queryStrategyCancle")}).catch(()=>{})},handleCancle(){this.$emit("queryStrategyCancle")},save(){this.$validator.validateAll().then(e=>{e?this.$emit("queryStrategySave",this.form):this.$message.error(this.t("ht.addQueryStrategy.errorMsg"))})},addQuerys(){this.form.querys.push({})},removeQuerys(e){this.form.querys.remove(e)},changeField(e){e.field.options&&e.field.options.length>0&&(e.operation="EQ"),e.property=e.field.value}}},pa=da,ma=(i("cd59"),W(pa,ha,ua,!1,null,"4999ba4f",null)),ga=ma.exports;ga.install=function(e){e.component(ga.name,ga)};var fa=ga,ya=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"right-dialog",attrs:{width:e.width,height:"100%",title:e.title,visible:e.dialogVisible,"before-close":e.beforeClose,"append-to-body":e.appendToBody,"custom-class":e.customClass,"close-on-click-modal":e.closeOnClickModal,"close-on-press-escape":e.closeOnPressEscape,"show-close":e.showClose,"destroy-on-close":e.destroyOnClose,center:e.center,fullscreen:e.fullscreen,top:e.top},on:{"update:visible":function(t){e.dialogVisible=t},open:e.open,opened:e.opened,close:e.close,closed:e.closed}},[e._t("title",null,{slot:"title"}),e._t("default"),e._t("footer",null,{slot:"footer"})],2)},ba=[],_a={name:"HtSidebarDialog",props:{width:{type:String,default:()=>"80%"},title:{type:String,default:""},visible:{type:Boolean,default:!1},beforeClose:{type:Function},appendToBody:{type:Boolean,default:!1},customClass:{type:String},closeOnClickModal:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},destroyOnClose:{type:Boolean,default:!1},center:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},top:{type:String,default:"0vh"},open:{type:Function,default(){return()=>{}}},opened:{type:Function,default(){return()=>{}}},close:{type:Function,default(){return()=>{}}},closed:{type:Function,default(){return()=>{}}}},data(){return{}},computed:{dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},watch:{},created(){},methods:{}},va=_a,wa=(i("d222"),W(va,ya,ba,!1,null,"5e644546",null)),Sa=wa.exports;Sa.install=function(e){e.component(Sa.name,Sa)};var Ca=Sa,Da=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!==e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[i("div",{staticClass:"el-select",class:{"has-value":e.selectors.length>0},staticStyle:{width:"100%","min-width":"180px"},on:{click:e.showDialog}},[i("div",{ref:"tagSpans",class:{"el-select__tags_readonly":!e.inputWriteable,"el-select__tags":e.inputWriteable},staticStyle:{width:"calc(100% - 25px)"}},[i("span",{staticClass:"tag-wrap"},e._l(e.selectors,(function(t,a){return i("span",{key:a,staticClass:"el-tag el-tag--info el-tag--small",on:{click:function(e){e.stopPropagation()}}},[i("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.name))]),e.inputWriteable?i("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(i){return e.handleRemove(t)}}}):e._e()])})),0)]),e.inputWriteable?i("div",{staticClass:"el-input el-input--suffix"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"},{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],ref:"inputEl",staticClass:"el-input__inner",style:{height:e.inputSuffixHeight+"px",lineHeight:e.inputSuffixHeight+"px"},attrs:{type:"text",readonly:"readonly",name:e.inputName,autocomplete:"off",placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),i("span",{staticClass:"el-input__suffix"},[i("span",{staticClass:"el-input__suffix-inner"},[i("i",{staticClass:"el-icon-circle-close clear-icon",on:{click:function(t){return t.stopPropagation(),e.clear(t)}}}),i("ht-icon",{staticClass:"user-icon",attrs:{name:"users"}})],1)])]):e._e()]),i("ht-field-tail",{attrs:{"field-name":e.inputName,"input-value":e.value}}),e.isMobile?i("role-selector-mobile-dialog",{ref:"roleSelectorMobileDialog",attrs:{"search-placeholder":e.searchPlaceholder,single:e.single,data:e.data,"table-columns":e.tableColumns,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,"append-to-body":e.appendToBody,title:e.title,"primary-field":e.primaryField},on:{search:function(t){return e.$emit("search",t)},reset:function(){return e.$emit("reset")},"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("select-data",t)},"page-change":function(t){return e.$emit("page-change",t)}},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}}):i("role-selector-dialog",{ref:"roleSelectorDialog",attrs:{title:e.title,"append-to-body":e.appendToBody,data:e.data,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField,mode:e.mode},on:{"filter-type-change":function(t){return e.$emit("filter-type-change",t)},search:function(t){return e.$emit("search",t)},reset:function(){return e.$emit("reset")},"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("select-data",t)},"page-change":function(t){return e.$emit("page-change",t)},"size-change":function(t){return e.$emit("size-change",t)}},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}})],1):e._e()},xa=[],Ta=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"roledialog-selector__wrapper",attrs:{title:e.title,width:"900px",visible:e.dialogVisible,"before-close":e.handleClose,"close-on-click-modal":!1,"append-to-body":e.appendToBody},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"dialog-selector__body"},[i("el-input",{attrs:{size:"small",clearable:"",placeholder:e.searchPlaceholder},on:{clear:e.reset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix",title:e.t("ht.common.search")},on:{click:e.search},slot:"prefix"})]),i("ht-list-selector",{ref:"selector",staticClass:"post-selector",attrs:{title:e.$t("ht.selector.roleList"),data:e.data,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField,mode:e.mode},on:{reset:e.reset,"row-click":function(t){return e.$emit("row-click",t)},"page-change":function(t){return e.$emit("page-change",t)},"size-change":function(t){return e.$emit("size-change",t)}},scopedSlots:e._u([{key:"detail",fn:function(t){var a=t.item;return[i("ht-icon",{staticClass:"follow-theme-color",staticStyle:{"margin-left":"15px",width:"36px",height:"36px"},attrs:{name:"role"}}),i("div",{staticClass:"selector-item__detail"},[i("div",{staticClass:"selector-detail__name"},[i("label",[e._v(e._s(a[e.selectLabel]))]),i("span",[e._v("("+e._s(a["code"])+")")])])])]}},{key:"selected",fn:function(t){var a=t.select;return[i("ht-icon",{staticClass:"follow-theme-color",staticStyle:{"margin-left":"15px",width:"36px",height:"36px"},attrs:{name:"role"}}),i("p",{staticClass:"selector-selected__label",attrs:{title:a[e.selectLabel]+(a["code"]?"("+a["code"]+")":"")}},[e._v("\n          "+e._s(a[e.selectLabel]+(a["code"]?"("+a["code"]+")":""))+"\n        ")])]}}]),model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}})],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleDialogSure}},[e._v("\n      "+e._s(e.$t("ht.common.confirm"))+"\n    ")]),i("el-button",{attrs:{size:"small"},on:{click:e.handleDialogCancel}},[e._v("\n      "+e._s(e.$t("ht.common.cancle"))+"\n    ")])],1)])},Pa=[],Ea=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",{staticClass:"list-selector__container",attrs:{gutter:20}},[i("el-col",{directives:[{name:"show",rawName:"v-show",value:!e.isSearchMode,expression:"!isSearchMode"}],staticClass:"list-selector__range",attrs:{span:e.rangeSpan}},[e._t("range")],2),i("el-col",{staticClass:"list-selector__main",attrs:{span:e.mainSpan}},[i("el-card",{attrs:{shadow:"hover"}},[i("div",{staticClass:"selector-main__header",attrs:{slot:"header"},slot:"header"},[i("span",[e._v(e._s(""+e.title+e.userListCount))])]),i("div",{staticClass:"selector-main__body"},[e.data.length>0?i("el-scrollbar",{staticClass:"selector-list__scroll"},[e.single?e._e():i("el-checkbox",{staticClass:"check-all",attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("\n            全选\n          ")]),i("ul",{staticClass:"selector-main__list",class:{"two-columns":e.isSearchMode}},e._l(e.data,(function(t,a){return i("li",{key:t[e.primaryFieldProp]+a+t.code},[i("div",{staticClass:"selector-main__item",on:{click:function(i){return e.handleRowClick(t)}}},[e.single?i("el-radio",{attrs:{label:t[e.primaryFieldProp]},model:{value:e.singleSelectedPrimary,callback:function(t){e.singleSelectedPrimary=t},expression:"singleSelectedPrimary"}}):i("el-checkbox",{attrs:{label:t[e.primaryFieldProp]},model:{value:e.multipleSelectedPrimary,callback:function(t){e.multipleSelectedPrimary=t},expression:"multipleSelectedPrimary"}}),e._t("detail",null,{item:t})],2)])})),0)],1):i("div",{staticClass:"list-selector__nodata"},[i("el-image",{attrs:{src:e.noDataImg}}),i("span",[e._v(e._s(e.t("el.table.emptyText")))])],1),e.data.length>0?i("div",{staticClass:"selector-main__pager"},[i("el-pagination",{attrs:{layout:"sizes,prev, pager, next",disabled:e.loading,"page-sizes":e.pageSizeArr,"page-size":e.pagination.pageSize,"pager-count":5,total:e.pagination.total,"current-page":e.pagination.page},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1):e._e()],1)])],1),i("el-col",{staticClass:"list-selector__selected",attrs:{span:7}},[i("el-card",{attrs:{shadow:"hover"}},[i("div",{staticClass:"selector-selected__header",attrs:{slot:"header"},slot:"header"},[i("span",[e._v(e._s(e.$t("ht.common.selected"))+"("+e._s(e.selectsCount)+")")]),i("el-button",{attrs:{type:"text"},on:{click:e.clearAllSelects}},[e._v("\n          "+e._s(e.$t("ht.common.clear"))+"\n        ")])],1),e.selectsCount>0?i("el-scrollbar",{staticClass:"selector-selected__scroll"},[i("draggable",e._b({staticClass:"selector-selected__wrap",attrs:{tag:"ul",handle:".list-selector__handle"},on:{start:function(t){e.isDragging=!0},end:function(t){e.isDragging=!1}},model:{value:e.selects,callback:function(t){e.selects=t},expression:"selects"}},"draggable",e.dragOptions,!1),[i("transition-group",{attrs:{type:"transition",name:"flip-list"}},e._l(e.selects,(function(t,a){return i("li",{key:t[e.primaryFieldProp]+a,staticClass:"selector-selected__item"},[i("div",{staticClass:"selector-selected__item-left",on:{dblclick:function(i){return e.removeSelected(t)}}},[e.single?e._e():i("ht-icon",{staticClass:"list-selector__handle",attrs:{name:"sort"}}),e._t("selected",null,{select:t})],2),i("ht-icon",{staticClass:"selector-selected__remove",attrs:{name:"close",title:e.t("ht.common.remove")},on:{click:function(i){return e.removeSelected(t)}}})],1)})),0)],1)],1):i("div",{staticClass:"el-tree__empty-block"},[i("span",{staticClass:"el-tree__empty-text"},[e._v(e._s(e.t("el.table.emptyText")))])])],1)],1)],1)},Oa=[];const ka=i("289a");var Ia={name:"HtListSelector",components:{draggable:ka},mixins:[Le,kt["a"]],props:{selectLabel:{type:String,default:"name"},tableColumns:{type:Array,default:()=>[]},title:{type:String},value:{type:Array,default:()=>[]},data:Array,single:{type:Boolean,default:!1},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},primaryField:{type:String,default:""},mode:{type:String}},data(){return{isDragging:!1,loading:!1,selects:[],currentSelectData:[],noDataImg:i("5c25"),pageSizeArr:[10,20,50,100,200,300],checkAll:!1,isIndeterminate:!1}},computed:{isSearchMode:function(){return this.mode&&"search"==this.mode},singleSelectedPrimary:{get(){return this.selects&&1==this.selects.length?this.selects[0][this.primaryFieldProp]:null},set(){}},multipleSelectedPrimary:{get(){return this.selects.map(e=>e[this.primaryFieldProp])},set(){}},primaryFieldProp:function(){return this.primaryField?this.primaryField:"id"},dragOptions(){return{animation:0,group:"description",disabled:!1,ghostClass:"ghost"}},rangeSpan(){return this.isSearchMode?0:6},mainSpan(){return this.isSearchMode?17:11},currentPageSelectedCount(){return this.single?this.singleSelectedPrimary?1:0:this.multipleSelectedPrimary.length>0&&this.data.length>0?this.data.filter(e=>this.multipleSelectedPrimary.indexOf(e[this.primaryFieldProp])>-1).length:0},selectsCount(){return this.selects&&this.selects.length>0?this.selects.length:0},userListCount(){return this.pagination.total>0?`(${this.currentPageSelectedCount}/${this.pagination.total})`:""}},watch:{selects:{handler(e){this.currentSelectData=e,this.$emit("current-selected",e)},deep:!0},currentPageSelectedCount(e){this.checkAll=e===this.data.length,this.isIndeterminate=e>0&&e<this.data.length},data:{handler(e){this.checkAll=this.currentPageSelectedCount===e.length,this.isIndeterminate=this.currentPageSelectedCount>0&&this.currentPageSelectedCount<e.length},deep:!0}},methods:{getSelectedData(){return this.currentSelectData},syncSelection2selects(e){const t=this.selects.findIndex(t=>t[this.primaryFieldProp]==e[this.primaryFieldProp]);if(t>-1)this.selects.splice(t,1);else{let t=[...this.selects];t=[...t,e],this.selects=t.unique(this.primaryFieldProp)}},onShow(e){this.selects=e||[...this.value]},onHide(e){e&&this.$emit("input",this.selects)},handleRowClick:Object(ge["debounce"])((function(e){this.single?this.selects=[e]:this.syncSelection2selects(e),this.$emit("row-click",e)}),10),handleCurrentChange(e){this.$emit("page-change",e)},handleSizeChange(e){this.$emit("size-change",e)},removeSelected(e){this.selects.remove(e)},clearAllSelects(){this.selects=[]},handleCheckAllChange(e){if(e){const e=Object(ge["cloneDeep"])(this.data);this.selects=this.selects.length?y["a"].uniqueArrayObject([...this.selects,...e],this.primaryFieldProp):e}else if(this.selects.length>this.data.length){const e=this.data.map(e=>e.id);this.selects=this.selects.filter(t=>!e.includes(t.id))}else this.selects=[]}}},$a=Ia,Aa=(i("91b7"),W($a,Ea,Oa,!1,null,"ea9c0d06",null)),Ba=Aa.exports;Ba.install=function(e){e.component(Ba.name,Ba)};var Ma=Ba,La={name:"RoleSelectorDialog",components:{HtListSelector:Ma},mixins:[Le],props:{searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.roleTitle")}},value:{type:Array,default:()=>[]},single:{type:Boolean,default:!1},data:{type:Array,default:()=>[]},tableColumns:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},selectLabel:{type:String,default:"name"},quickSearchProps:{type:String,required:!0},appendToBody:{type:Boolean,default:!1},title:{type:String,default(){return Object(Me["c"])("ht.selector.roleTitle")}},primaryField:{type:String,default:""},mode:{type:String}},data(){return{dialogVisible:!1,searchWord:null,loading:!1}},computed:{selectors:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{search(){this.loading||this.$emit("search",this.searchWord)},reset(){this.$emit("reset"),this.searchWord=null},showDialog(){this.dialogVisible=!0,setTimeout(()=>{this.$refs.selector.onShow()})},handleClose(e){this.$refs.selector.onHide(),e&&e()},handleDialogSure(){this.$emit("select-data",this.$refs.selector.getSelectedData()),this.dialogVisible=!1,this.$refs.selector.onHide(!0)},handleDialogCancel(){this.dialogVisible=!1,this.$refs.selector.onHide()}}},Fa=La,Na=(i("4538"),W(Fa,Ta,Pa,!1,null,"35f02c57",null)),qa=Na.exports,Va=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.dialogVisible?i("van-action-sheet",{staticClass:"role-mobile__selector",attrs:{"cancel-text":e.sureButtonText,closeable:!1,"get-container":"body"},on:{cancel:e.handleDialogSure,close:e.handleDialogClose,"click-overlay":e.handleDialogClose},scopedSlots:e._u([{key:"description",fn:function(){return[i("span",{staticClass:"role-mobile__title"},[e._v(e._s(e.title))]),i("ht-icon",{staticClass:"role-mobile__close",attrs:{name:"close"},on:{click:e.handleDialogClose}})]},proxy:!0}],null,!1,3266133914),model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[i("van-search",{attrs:{placeholder:e.searchPlaceholder},on:{search:e.onRefresh,clear:e.reset},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}}),i("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[i("van-list",{staticClass:"role-data__list",attrs:{finished:e.finished,"finished-text":e.$t("ht.common.noMore")},on:{load:e.loadMore},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[i("van-checkbox-group",{model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}},e._l(e.data,(function(t){return i("van-cell",{key:t[e.primaryFieldProp],attrs:{clickable:""},on:{click:function(i){return e.rowClick(t,null,i)}},scopedSlots:e._u([{key:"icon",fn:function(){return[i("van-checkbox",{attrs:{name:t[e.primaryFieldProp],shape:e.single?"round":"square"}})]},proxy:!0}],null,!0)},[i("div",{staticClass:"role-list__container"},[i("ht-icon",{staticClass:"follow-theme-color",staticStyle:{"margin-left":"15px",width:"36px",height:"36px"},attrs:{name:"role"}}),i("div",{staticClass:"selector-item__detail"},[i("div",{staticClass:"selector-detail__name"},[i("label",[e._v(e._s(t[e.selectLabel]))]),i("span",[e._v("("+e._s(t["code"])+")")])])])],1)])})),1)],1)],1)],1):e._e()},Ra=[],za=i("b20f"),Ha=i.n(za),Ua={name:"RoleSelectorMobileDialog",mixins:[Le],props:{searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.rolePlaceholder")}},value:{type:Array,default:()=>[]},single:{type:Boolean,default:!1},data:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},selectLabel:{type:String,default:"name"},appendToBody:{type:Boolean,default:!1},title:{type:String,default(){return Object(Me["c"])("ht.selector.roleTitle")}},primaryField:{type:String,default:""}},data(){return{dialogVisible:!1,isLoading:!1,finished:!1,searchWord:null,selectIds:[],selectedData:[]}},computed:{primaryColor(){return Ha.a.primary_color},sureButtonText(){const e=this.selectIds.length>0?`(${this.selectIds.length})`:"";return`${this.$t("ht.common.confirm")}${e}`},primaryFieldProp:function(){return this.primaryField?this.primaryField:"id"}},watch:{pagination:function(e,t){if(this.isLoading=!1,e!==t){const{page:t,pageSize:i,total:a}=e;this.finished=!(t>0&&i>0&&a>0)||t*i>=a}}},methods:{onRefresh(){this.isloading=!0,this.$emit("search",this.searchWord)},reset(){this.$emit("reset")},loadMore(){this.data&&this.data.length>0?this.$emit("page-change",++this.pagination.page):this.isLoading=!1},showDialog(){this.value&&this.value.length>0&&(this.selectIds=this.value.map(e=>e[this.primaryFieldProp]),this.selectedData=this.value),this.dialogVisible=!0},handleDialogSure(){this.$emit("input",this.selectedData),this.$emit("select-data",this.selectedData),this.selectIds=[],this.selectedData=[],this.dialogVisible=!1},handleDialogClose(){this.dialogVisible=!1,this.selectIds=[],this.selectedData=[]},select(e,t){this.$emit("select",e,t)},rowClick(e,t,i){this.single?(this.selectIds=[e[this.primaryFieldProp]],this.selectedData=[e]):this.selectIds.some(t=>t==e[this.primaryFieldProp])?(this.selectIds.remove(e[this.primaryFieldProp]),this.selectedData=this.selectedData.filter(t=>t[this.primaryFieldProp]!==e[this.primaryFieldProp])):(this.selectIds.push(e[this.primaryFieldProp]),this.selectedData.push(e)),this.$emit("row-click",e,t,i)}}},Ka=Ua,ja=(i("cfcd"),W(Ka,Va,Ra,!1,null,"0858f998",null)),Wa=ja.exports,Qa={name:"HtRoleSelector",components:{HtFieldTail:ue,RoleSelectorDialog:qa,RoleSelectorMobileDialog:Wa},mixins:[pe["a"],de["a"],kt["a"]],props:{searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.rolePlaceholder")}},value:String,selectLabel:String,single:{type:Boolean,default:!1},config:Object,data:{type:Array,default:()=>[]},tableColumns:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},quickSearchProps:{type:String,required:!0},appendToBody:{type:Boolean,default:!1},formInputsDisplay:{type:String,default:"inline"},title:{type:String,default(){return Object(Me["c"])("ht.selector.roleTitle")}},mode:{type:String}},data(){return{inputSuffixHeight:30,selectors:[]}},computed:{primaryField:function(){return this.config&&this.config.hasOwnProperty("id")?"id":this.config&&this.config.hasOwnProperty("code")?"code":this.selectLabel}},watch:{selectors:function(e){let t=[],i=[],a=[],s=[];e&&e.constructor===Array&&e.length>0&&e.forEach(e=>{t.push(e.name),e.hasOwnProperty("id")&&i.push(e.id),e.hasOwnProperty("code")&&s.push(e.code),e.hasOwnProperty("name")&&a.push(e.name)}),this.config?(this.config.hasOwnProperty("id")&&y["a"].setValueByConfigKey(this,this.config,"id",i.join(",")),this.config.hasOwnProperty("code")&&y["a"].setValueByConfigKey(this,this.config,"code",s.join(",")),this.config.hasOwnProperty("name")&&y["a"].setValueByConfigKey(this,this.config,"name",a.join(","))):this.$emit("change",e),this.$emit("valueChange",t.join(","),e),Object(ji["setTimeout"])(()=>{e.length>0?this.calacInputSuffixHeight():this.inputSuffixHeight=30,this.$refs.inputEl&&(this.$refs.inputEl.focus(),this.$refs.inputEl.blur())},10)},value:function(){this.valueInit()}},mounted(){this.valueInit()},methods:{valueInit(){let e=[];if(this.value){let t=[],i=[],a=[];if(this.config){if(this.config.hasOwnProperty("id")){let e=y["a"].getValueByConfigKey(this,this.config,"id");e&&(t=e.split(",").trim())}if(this.config.hasOwnProperty("code")){let e=y["a"].getValueByConfigKey(this,this.config,"code");e&&(a=e.split(",").trim())}if(this.config.hasOwnProperty("name")){let e=y["a"].getValueByConfigKey(this,this.config,"name");e&&(i=e.split(",").trim())}}let s=this.value.split(",").trim();s.forEach((s,l)=>{let n={name:s};t.length>l&&(n["id"]=t[l]),a.length>l&&(n["code"]=a[l]),i.length>l&&(n["name"]=i[l]),e.push(n)})}y["a"].arrayEquals(e,this.selectors)||(this.selectors=e)},showDialog(){this.inputWriteable&&(this.isMobile?this.$refs.roleSelectorMobileDialog.showDialog():this.$refs.roleSelectorDialog.showDialog())},handleRemove(e){this.selectors.remove(e)},clear(){this.selectors=[],this.inputSuffixHeight=30},calacInputSuffixHeight(){this.$refs.tagSpans&&(this.$refs.tagSpans.offsetHeight?this.inputSuffixHeight=this.$refs.tagSpans.offsetHeight+5:this.inputSuffixHeight=30)}}},Ja=Qa,Ga=(i("da2c"),W(Ja,Da,xa,!1,null,"54e0cb71",null)),Ya=Ga.exports;Ya.install=function(e){e.component(Ya.name,Ya)};var Za=Ya,Xa=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!==e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[i("div",{staticClass:"el-select",class:{"has-value":e.value},staticStyle:{width:"100%","min-width":"180px"},on:{click:e.showDialog}},[i("div",{ref:"tagSpans",staticClass:"user-selector_block",class:{"el-select__tags_readonly":!e.inputWriteable,"el-select__tags":e.inputWriteable}},[i("span",{staticClass:"tag-wrap"},[e._l(e.selectors,(function(t,a){return i("span",{key:a,staticClass:"el-tag el-tag--info el-tag--small",on:{click:function(e){e.stopPropagation()}}},[i("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.fullname))]),e.inputWriteable?i("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(i){return e.handleRemove(t)}}}):e._e()])})),!e.selectors.length&&e.value?e._l(e.value.split(","),(function(t,a){return i("span",{key:a,staticClass:"el-tag el-tag--info el-tag--small",on:{click:function(e){e.stopPropagation()}}},[i("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t))]),e.inputWriteable?i("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(t){return e.handleRemoveText(a)}}}):e._e()])})):e._e()],2)]),e.inputWriteable?i("div",{staticClass:"el-input el-input--suffix"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"},{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],ref:"inputEl",staticClass:"el-input__inner",style:{height:e.inputSuffixHeight+"px",lineHeight:e.inputSuffixHeight+"px"},attrs:{type:"text",readonly:"readonly",name:e.inputName,autocomplete:"off",placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),i("span",{staticClass:"el-input__suffix"},[i("span",{staticClass:"el-input__suffix-inner"},[i("i",{staticClass:"el-icon-circle-close clear-icon",on:{click:function(t){return t.stopPropagation(),e.clear(t)}}}),i("ht-icon",{staticClass:"user-icon",attrs:{name:"user"}})],1)])]):e._e()]),i("ht-field-tail",{attrs:{"field-name":e.inputName,"input-value":e.value}}),e.isMobile?i("user-selector-mobile-dialog",{ref:"userSelectorMobileDialog",attrs:{title:e.title,"append-to-body":e.appendToBody,data:e.data,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField},on:{search:function(t){return e.$emit("search",t)},reset:function(){return e.$emit("reset")},"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("select-data",t)},"page-change":function(t){return e.$emit("page-change",t)}},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}}):i("user-selector-dialog",{ref:"userSelectorDialog",attrs:{title:e.title,"append-to-body":e.appendToBody,data:e.data,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField,mode:e.mode},on:{"filter-type-change":function(t){return e.$emit("filter-type-change",t)},search:function(t){return e.$emit("search",t)},reset:function(){return e.$emit("reset")},"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("select-data",t)},"page-change":function(t){return e.$emit("page-change",t)},"size-change":function(t){return e.$emit("size-change",t)},"contact-group-change":function(t){return e.$emit("contact-group-change",t)},"load-org-user":function(t){return e.$emit("load-org-user",t)},"load-policy-user":function(t){return e.$emit("load-policy-user",t)},"load-role-user":function(t){return e.$emit("load-role-user",t)}},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}})],1):e._e()},es=[],ts=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"userdialog-selector__wrapper",attrs:{width:"1060px",title:e.title,visible:e.dialogVisible,"before-close":e.handleClose,"close-on-click-modal":!1,"append-to-body":e.appendToBody},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"dialog-selector__body"},[i("el-input",{attrs:{size:"small",clearable:"",placeholder:e.searchPlaceholder},on:{clear:e.reset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix",title:e.t("ht.common.search")},on:{click:e.search},slot:"prefix"})]),i("ht-list-selector",{ref:"selector",staticClass:"user-selector",attrs:{title:e.$t("ht.selector.userList"),data:e.data,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField,mode:e.mode},on:{reset:e.reset,"row-click":function(t){return e.$emit("row-click",t)},"page-change":function(t){return e.$emit("page-change",t)},"size-change":function(t){return e.$emit("size-change",t)}},scopedSlots:e._u([{key:"detail",fn:function(t){var a=t.item;return[i("ht-avatar-image",{staticClass:"follow-theme-background-color",staticStyle:{"margin-left":"15px"},attrs:{username:a[e.selectLabel],"background-color":"#409EFF",color:"#fff",size:36}}),i("div",{staticClass:"selector-item__detail"},[i("div",{staticClass:"selector-detail__name"},[i("label",[e._v(e._s(a[e.selectLabel]))]),i("span",[e._v("("+e._s(a["account"])+")")])]),i("div",{staticClass:"selector-detail__desc"},[i("span",{attrs:{title:a.pathname}},[i("ht-icon",{attrs:{name:"org-tree"}}),e._v("\n              "+e._s(a.orgname||e.$t("ht.selector.not"))+"\n            ")],1),i("span",{attrs:{title:a.postname}},[i("ht-icon",{attrs:{name:"users"}}),e._v("\n              "+e._s(a.postname||e.$t("ht.selector.not"))+"\n            ")],1)])])]}},{key:"selected",fn:function(t){var a=t.select;return[i("ht-avatar-image",{staticClass:"follow-theme-background-color",staticStyle:{"margin-left":"15px"},attrs:{username:a[e.selectLabel],"background-color":"#409EFF",color:"#fff",size:30}}),i("p",{staticClass:"selector-selected__label",attrs:{title:a[e.selectLabel]+(a["account"]?"("+a["account"]+")":"")}},[e._v("\n          "+e._s(a[e.selectLabel]+(a["account"]?"("+a["account"]+")":""))+"\n        ")])]}}]),model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}},[i("el-card",{staticClass:"selector-range__card",attrs:{slot:"range",shadow:"hover"},slot:"range"},[i("el-tabs",{model:{value:e.activeRange,callback:function(t){e.activeRange=t},expression:"activeRange"}},[i("el-tab-pane",{attrs:{label:e.$t("ht.selector.topContacts"),name:"contact"}},[i("top-contact-user",{attrs:{mode:e.mode},on:{"contact-group-change":function(t){return e.$emit("contact-group-change",t)}}})],1),i("el-tab-pane",{attrs:{label:e.$t("ht.selector.org"),name:"org"}},[i("organization",{attrs:{mode:e.mode},on:{"load-org-user":function(t){return e.$emit("load-org-user",t)}}})],1),i("el-tab-pane",{attrs:{label:e.$t("ht.selector.tactics"),name:"policy"}},[i("policy-user",{attrs:{mode:e.mode},on:{"load-policy-user":function(t){return e.$emit("load-policy-user",t)}}})],1),i("el-tab-pane",{attrs:{label:e.$t("ht.selector.role"),name:"role"}},[i("role-user",{attrs:{mode:e.mode},on:{"load-role-user":function(t){return e.$emit("load-role-user",t)}}})],1)],1)],1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleDialogSure}},[e._v("\n      "+e._s(e.$t("ht.common.confirm"))+"\n    ")]),i("el-button",{attrs:{size:"small"},on:{click:e.handleDialogCancel}},[e._v("\n      "+e._s(e.$t("ht.common.cancle"))+"\n    ")])],1)])},is=[],as=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"contact-user__container"},[e.contactGroups.length>0?i("el-scrollbar",{staticClass:"selector-list__scroll"},[i("ht-radio",{attrs:{"display-style":"block","option-layout":"vertical",props:{key:"id",value:"name"},options:e.contactGroups},model:{value:e.currentContactGroup,callback:function(t){e.currentContactGroup=t},expression:"currentContactGroup"}})],1):i("div",{staticClass:"el-tree__empty-block"},[i("span",{staticClass:"el-tree__empty-text"},[e._v(e._s(e.t("el.table.emptyText")))])])],1)},ss=[],ls={name:"TopContactUser",mixins:[Le],props:{mode:{type:String}},data(){return{contactGroups:[],currentContactGroup:""}},watch:{mode:function(e,t){e!==t&&"search"==e&&(this.currentContactGroup="")},currentContactGroup:function(e,t){e!==t&&this.$emit("contact-group-change",e)}},mounted(){this.loadContactGroup()},methods:{loadContactGroup(){0==this.contactGroups.length&&(this.$requestConfig.getContactGroup?this.$requestConfig.getContactGroup({pageBean:{page:1,pageSize:100,total:0}}).then(e=>{e&&e.rows.length>0?(this.contactGroups=[{id:"all",name:this.$t("ht.selector.all")}].concat(e.rows),this.defaultContactGroup="all"):(this.data=[],this.defaultContactGroup=null)}).catch(()=>{this.defaultContactGroup=null}):this.defaultContactGroup=null)}}},ns=ls,os=(i("702f"),W(ns,as,ss,!1,null,"89cfe2a2",null)),rs=os.exports,cs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"organization-container"},[i("div",{staticClass:"demension__container"},[i("ht-select",{attrs:{size:"small",clearable:!1,options:e.demensions,"display-style":"block",props:{key:"id",value:"demName"}},model:{value:e.currentDemension,callback:function(t){e.currentDemension=t},expression:"currentDemension"}})],1),i("el-scrollbar",{staticClass:"organization-list__scroll"},[i("ht-tree",{ref:"tree",staticClass:"org-tree",attrs:{lazy:"","display-style":"block",load:e.loadOrgTree,data:e.orgs,"default-expand-all":!1,"highlight-current":!0,props:{children:"children",label:"name",isLeaf:"leaf"},"node-key":"id",accordion:""},on:{"node-click":function(t){return e.$emit("load-org-user",t)}}})],1)],1)},hs=[],us={name:"Organization",props:{mode:{type:String}},data(){return{demensions:[],currentDemension:"",orgs:[]}},watch:{mode:function(e,t){e!==t&&"search"==e&&this.$refs.tree.setCurrentKey(null)},currentDemension:function(e,t){e&&e!==t&&this.changeDemension(e)}},mounted(){this.loadDemensions()},methods:{loadDemensions(){this.demensions&&0!=this.demensions.length||this.$requestConfig.getAllDemensions().then(e=>{this.demensions=e,e.forEach(e=>{1==e.isDefault&&(this.currentDemension=e.id)}),this.currentDemension||(this.currentDemension=e[0].id)})},changeDemension(e){this.$requestConfig.getOrgTree({demId:e||this.currentDemension}).then(e=>{this.orgs=y["a"].tile2nest(e)})},loadOrgTree(e,t){e&&e.data&&e.data.isParent?e.data.children?t(e.data.children):this.$requestConfig.getOrgTree({demId:e.data.demId,parentId:e.data.id}).then(e=>{t(e)}):t([])}}},ds=us,ps=(i("535b"),W(ds,cs,hs,!1,null,"47f30d0f",null)),ms=ps.exports,gs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"policy-user__container"},[e.policies.length>0?i("el-scrollbar",{staticClass:"selector-list__scroll"},[i("ht-radio",{attrs:{"display-style":"block","option-layout":"vertical",props:{key:"id",value:"name"},options:e.policies},model:{value:e.currentPolicy,callback:function(t){e.currentPolicy=t},expression:"currentPolicy"}})],1):i("div",{staticClass:"el-tree__empty-block"},[i("span",{staticClass:"el-tree__empty-text"},[e._v(e._s(e.t("el.table.emptyText")))])])],1)},fs=[],ys={name:"PolicyUser",mixins:[Le],props:{mode:{type:String}},data(){return{policies:[{id:"1",name:this.$t("ht.selector.MyDepartment")},{id:"2",name:this.$t("ht.selector.MyDepartmentAndSub")},{id:"3",name:this.$t("ht.selector.myAllDepartment")},{id:"4",name:this.$t("ht.selector.myAllDepartmentAndSub")}],currentPolicy:"",currentUserOrgs:[]}},watch:{mode:function(e,t){e!==t&&"search"==e&&(this.currentPolicy="")},currentPolicy:function(e,t){e&&e!==t&&this.loadUserWithPolicy(e)}},methods:{loadUserWithPolicy(e){this.loadCurrentUserOrgs().then(()=>{const t=this.getOrgIdWithPolicy(e);this.$emit("load-policy-user",t)}).catch(()=>{this.$message.error(this.$t("ht.selector.notGetDepartmentData")),this.currentPolicy=""})},getOrgIdWithPolicy(e){let t={type:e};const i=this.currentUserOrgs.find(e=>1==e.isMaster);switch(e){case"1":t.id=i?i.id:null;break;case"2":t.path=i?i.path:null;break;case"3":t.ids=this.currentUserOrgs.map(e=>e.id);break;case"4":t.paths=this.currentUserOrgs.map(e=>e.path);break}return t},loadCurrentUserOrgs(){return new Promise((e,t)=>{this.currentUserOrgs&&this.currentUserOrgs.length>0?e():this.$requestConfig.getUserId()&&this.$requestConfig.getOrgListByUserId?this.$requestConfig.getOrgListByUserId(this.$requestConfig.getUserId()).then(i=>{i&&i.constructor==Array&&i.length>0?(this.currentUserOrgs=i,e()):t()}).catch(()=>t()):t()})}}},bs=ys,_s=(i("a548"),W(bs,gs,fs,!1,null,"cc4d2050",null)),vs=_s.exports,ws=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"role-user__container"},[i("div",{staticClass:"role-user__search"},[i("el-input",{attrs:{size:"small",clearable:"",placeholder:e.$t("ht.selector.roleName")},on:{clear:e.reset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loadRoleWithParam(t)}},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix",title:e.t("ht.common.search")},on:{click:e.loadRoleWithParam},slot:"prefix"})])],1),e.roles.length>0?i("el-scrollbar",{staticClass:"selector-list__scroll"},[i("ht-radio",{attrs:{"display-style":"block","option-layout":"vertical",props:{key:"id",value:"name"},options:e.roles},model:{value:e.currentRole,callback:function(t){e.currentRole=t},expression:"currentRole"}})],1):i("div",{staticClass:"el-tree__empty-block"},[i("span",{staticClass:"el-tree__empty-text"},[e._v(e._s(e.t("el.table.emptyText")))])])],1)},Ss=[],Cs={name:"RoleUser",mixins:[Le],props:{mode:{type:String}},data(){return{currentRole:"",roles:[],searchWord:null}},watch:{mode:function(e,t){e!==t&&"search"==e&&(this.currentRole="")},currentRole:function(e,t){e&&e!==t&&this.$emit("load-role-user",e)}},mounted(){this.roles&&0!=this.roles.length||this.loadRoleWithParam()},methods:{reset(){this.searchWord=null,this.$nextTick(()=>this.loadRoleWithParam())},loadRoleWithParam(){this.$requestConfig.getRoleList(this.getParam()).then(e=>{const{rows:t}=e;this.roles=t})},getParam(){const e={querys:[],pageBean:{page:1,pageSize:50,showTotal:!0}};if(this.searchWord){let t={property:"name",value:this.searchWord,group:"main",operation:"LIKE",relation:"OR"};e.querys.push(t)}return e}}},Ds=Cs,xs=(i("6bde"),W(Ds,ws,Ss,!1,null,"c5d361e6",null)),Ts=xs.exports,Ps={name:"UserSelectorDialog",components:{HtListSelector:Ma,TopContactUser:rs,Organization:ms,PolicyUser:vs,RoleUser:Ts},mixins:[Le],props:{value:{type:Array,default:()=>[]},title:{type:String,default(){return Object(Me["c"])("ht.selector.userTitle")}},appendToBody:{type:Boolean,default:!1},data:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},selectLabel:{type:String,default:"fullname"},quickSearchProps:{type:String,required:!0},single:{type:Boolean,default:!1},searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.userAndAccount")}},primaryField:{type:String,default:""},mode:{type:String}},data(){return{dialogVisible:!1,activeRange:"contact",searchWord:null,loading:!1}},computed:{selectors:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},watch:{activeRange:function(e,t){e!==t&&this.$emit("filter-type-change",e)}},methods:{search(){this.loading||this.$emit("search",this.searchWord)},reset(){this.$emit("reset"),this.searchWord=null},showDialog(){this.dialogVisible=!0,setTimeout(()=>{this.$refs.selector.onShow()},10)},handleClose(e){this.$refs.selector.onHide(),e&&e()},handleDialogSure(){this.$emit("select-data",this.$refs.selector.getSelectedData()),this.dialogVisible=!1,this.$refs.selector.onHide(!0)},handleDialogCancel(){this.dialogVisible=!1,this.$refs.selector.onHide()}}},Es=Ps,Os=(i("5422"),W(Es,ts,is,!1,null,"4acd9d43",null)),ks=Os.exports,Is=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.dialogVisible?i("van-action-sheet",{staticClass:"user-mobile__selector",attrs:{"cancel-text":e.sureButtonText,closeable:!1,"get-container":"body"},on:{cancel:e.handleDialogSure,close:e.handleDialogClose,"click-overlay":e.handleDialogClose},scopedSlots:e._u([{key:"description",fn:function(){return[i("span",{staticClass:"user-mobile__title"},[e._v(e._s(e.title))]),i("ht-icon",{staticClass:"user-mobile__close",attrs:{name:"close"},on:{click:e.handleDialogClose}})]},proxy:!0}],null,!1,2060288890),model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[i("van-search",{attrs:{placeholder:e.searchPlaceholder},on:{input:e.onSearchInput,clear:e.reset},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}}),i("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[i("van-list",{staticClass:"user-data__list",attrs:{finished:e.finished,"finished-text":e.$t("ht.common.noMore")},on:{load:e.loadMore},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[i("van-checkbox-group",{model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}},e._l(e.data,(function(t){return i("van-cell",{key:t[e.primaryFieldProp],attrs:{clickable:""},on:{click:function(i){return e.rowClick(t,null,i)}},scopedSlots:e._u([{key:"icon",fn:function(){return[i("van-checkbox",{attrs:{name:t[e.primaryFieldProp],shape:e.single?"round":"square"}})]},proxy:!0}],null,!0)},[i("div",{staticClass:"user-list__container"},[i("ht-avatar-image",{staticClass:"follow-theme-background-color",attrs:{username:t[e.selectLabel],"background-color":"#409EFF",color:"#fff",size:36}}),i("div",{staticClass:"selector-item__detail"},[i("div",{staticClass:"selector-detail__name"},[i("label",[e._v(e._s(t[e.selectLabel]))]),i("span",[e._v("("+e._s(t["account"])+")")])]),i("div",{staticClass:"selector-detail__desc"},[i("span",{attrs:{title:t.orgname}},[i("ht-icon",{attrs:{name:"org-tree"}}),e._v("\n                  "+e._s(t.orgname||e.$t("ht.selector.not"))+"\n                ")],1),i("span",{attrs:{title:t.postname}},[i("ht-icon",{attrs:{name:"users"}}),e._v("\n                  "+e._s(t.postname||e.$t("ht.selector.not"))+"\n                ")],1)])])],1)])})),1)],1)],1)],1):e._e()},$s=[],As={name:"UserSelectorMobileDialog",mixins:[Le],props:{value:{type:Array,default:()=>[]},title:{type:String,default(){return Object(Me["c"])("ht.selector.userTitle")}},appendToBody:{type:Boolean,default:!1},data:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},selectLabel:{type:String,default:"fullname"},single:{type:Boolean,default:!1},searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.userAndAccount")}},primaryField:{type:String,default:""}},data(){return{dialogVisible:!1,isLoading:!1,searchWord:null,selectIds:[],selectedData:[],finished:!1}},computed:{primaryColor(){return Ha.a.primary_color},sureButtonText(){const e=this.selectIds.length>0?`(${this.selectIds.length})`:"";return`${this.$t("ht.common.confirm")}${e}`},primaryFieldProp:function(){return this.primaryField?this.primaryField:"id"}},watch:{pagination:function(e,t){if(this.isLoading=!1,e!==t){const{page:t,pageSize:i,total:a}=e;this.finished=!(t>0&&i>0&&a>0)||t*i>=a}}},methods:{onSearchInput:Object(ge["debounce"])((function(){this.onRefresh()}),800),onRefresh(){this.isloading=!0,this.$emit("search",this.searchWord)},reset(){this.$emit("reset")},loadMore(){this.data&&this.data.length>0?this.$emit("page-change",++this.pagination.page):this.isLoading=!1},showDialog(){this.$nextTick(()=>{this.value&&this.value.length>0&&(this.selectIds=this.value.map(e=>e[this.primaryFieldProp]),this.selectedData=this.value),this.dialogVisible=!0})},handleDialogSure(){this.$emit("input",this.selectedData),this.$emit("select-data",this.selectedData),this.selectIds=[],this.selectedData=[],this.dialogVisible=!1},handleDialogClose(){this.dialogVisible=!1,this.selectIds=[],this.selectedData=[]},select(e,t){this.$emit("select",e,t)},rowClick(e,t,i){this.single?(this.selectIds=[e[this.primaryFieldProp]],this.selectedData=[e]):this.selectIds.some(t=>t==e[this.primaryFieldProp])?(this.selectIds.remove(e[this.primaryFieldProp]),this.selectedData=this.selectedData.filter(t=>t[this.primaryFieldProp]!==e[this.primaryFieldProp])):(this.selectIds.push(e[this.primaryFieldProp]),this.selectedData.push(e)),this.$emit("row-click",e,t,i)}}},Bs=As,Ms=(i("b820"),W(Bs,Is,$s,!1,null,"2e94f7ce",null)),Ls=Ms.exports,Fs={name:"HtUserSelector",components:{HtFieldTail:ue,UserSelectorDialog:ks,UserSelectorMobileDialog:Ls},mixins:[pe["a"],de["a"],kt["a"]],props:{searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.userAndAccount")}},value:String,single:{type:Boolean,default:!1},config:Object,data:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},selectLabel:{type:String,default:"fullname"},quickSearchProps:{type:String,required:!0},appendToBody:{type:Boolean,default:!1},formInputsDisplay:{type:String,default:"inline"},title:{type:String,default(){return Object(Me["c"])("ht.selector.userTitle")}},mode:{type:String}},data(){return{inputSuffixHeight:30,selectors:[]}},computed:{primaryField:function(){return this.config&&this.config.hasOwnProperty("id")?"id":this.config&&this.config.hasOwnProperty("account")?"account":this.selectLabel}},watch:{selectors:function(e){let t=[],i=[],a=[],s=[],l=[],n=[],o=[],r=[];e&&e.constructor===Array&&e.length>0&&e.forEach(e=>{t.push(e.fullname),e.hasOwnProperty("id")&&i.push(e.id),e.hasOwnProperty("fullname")&&a.push(e.fullname),e.hasOwnProperty("account")&&r.push(e.account),e.hasOwnProperty("mobile")&&s.push(e.mobile),e.hasOwnProperty("email")&&l.push(e.email),e.hasOwnProperty("postName")&&n.push(e.postName),e.hasOwnProperty("orgName")&&o.push(e.orgName)}),this.config?(this.config.hasOwnProperty("id")&&y["a"].setValueByConfigKey(this,this.config,"id",i.join(",")),this.config.hasOwnProperty("fullname")&&y["a"].setValueByConfigKey(this,this.config,"fullname",a.join(",")),this.config.hasOwnProperty("account")&&y["a"].setValueByConfigKey(this,this.config,"account",r.join(",")),this.config.hasOwnProperty("mobile")&&y["a"].setValueByConfigKey(this,this.config,"mobile",s.join(",")),this.config.hasOwnProperty("email")&&y["a"].setValueByConfigKey(this,this.config,"email",l.join(",")),this.config.hasOwnProperty("postName")&&y["a"].setValueByConfigKey(this,this.config,"postName",n.join(",")),this.config.hasOwnProperty("orgName")&&y["a"].setValueByConfigKey(this,this.config,"orgName",o.join(","))):this.$emit("change",e),Object(ji["setTimeout"])(()=>{this.$emit("valueChange",t.join(","),e),e.length>0?this.calacInputSuffixHeight():this.inputSuffixHeight=30,this.$refs.inputEl&&(this.$refs.inputEl.focus(),this.$refs.inputEl.blur())},10)},value:function(){this.valueInit()}},mounted(){this.valueInit()},methods:{valueInit(){let e=[];if(this.value){let t=[],i=[],a=[],s=[],l=[],n=[],o=[];if(this.config){if(this.config.hasOwnProperty("id")){let e=y["a"].getValueByConfigKey(this,this.config,"id");e&&(t=e.split(",").trim())}if(this.config.hasOwnProperty("fullname")){let e=y["a"].getValueByConfigKey(this,this.config,"fullname");e&&(a=e.split(",").trim())}if(this.config.hasOwnProperty("account")){let e=y["a"].getValueByConfigKey(this,this.config,"account");e&&(i=e.split(",").trim())}if(this.config.hasOwnProperty("mobile")){let e=y["a"].getValueByConfigKey(this,this.config,"mobile");e&&(s=e.split(",").trim())}if(this.config.hasOwnProperty("postName")){let e=y["a"].getValueByConfigKey(this,this.config,"postName");e&&(l=e.split(",").trim())}if(this.config.hasOwnProperty("orgName")){let e=y["a"].getValueByConfigKey(this,this.config,"orgName");e&&(n=e.split(",").trim())}if(this.config.hasOwnProperty("email")){let e=y["a"].getValueByConfigKey(this,this.config,"email");e&&(o=e.split(",").trim())}}let r=this.value.split(",").trim();r.forEach((r,c)=>{let h={fullname:r};t.length>c&&(h["id"]=t[c]),i.length>c&&(h["account"]=i[c]),a.length>c&&(h["fullname"]=a[c]),s.length>c&&(h["mobile"]=s[c]),o.length>c&&(h["email"]=o[c]),l.length>c&&(h["postName"]=l[c]),n.length>c&&(h["orgName"]=n[c]),e.push(h)})}y["a"].arrayEquals(e,this.selectors)||(this.selectors=e)},showDialog(){this.inputWriteable&&(this.isMobile?this.$refs.userSelectorMobileDialog.showDialog():this.$refs.userSelectorDialog.showDialog())},handleRemove(e){this.selectors.remove(e)},clear(){this.selectors=[],this.inputSuffixHeight=30},calacInputSuffixHeight(){this.$refs.tagSpans&&(this.$refs.tagSpans.offsetHeight?this.inputSuffixHeight=this.$refs.tagSpans.offsetHeight+5:this.inputSuffixHeight=30)},handleRemoveText(e){if(!this.value)return;let t=this.value.split(",");t.splice(e,1),this.$emit("input",t.join(","))}}},Ns=Fs,qs=(i("5421"),W(Ns,Xa,es,!1,null,"d448fc40",null)),Vs=qs.exports;Vs.install=function(e){e.component(Vs.name,Vs)};var Rs=Vs,zs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!==e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[i("div",{staticClass:"el-select",class:{"has-value":e.selectors.length>0},staticStyle:{width:"100%","min-width":"180px"},on:{click:e.showDialog}},[i("div",{ref:"tagSpans",class:{"el-select__tags_readonly":!e.inputWriteable,"el-select__tags":e.inputWriteable},staticStyle:{width:"calc(100% - 25px)"}},[i("span",{staticClass:"tag-wrap"},e._l(e.selectors,(function(t,a){return i("span",{key:a,staticClass:"el-tag el-tag--info el-tag--small",on:{click:function(e){e.stopPropagation()}}},[i("span",{staticClass:"el-select__tags-text"},[e._v("\n            "+e._s(e.showPath?t.pathName:t.name)+"\n          ")]),e.inputWriteable?i("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(i){return e.handleRemove(t)}}}):e._e()])})),0)]),e.inputWriteable?i("div",{staticClass:"el-input el-input--suffix"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"},{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],ref:"inputEl",staticClass:"el-input__inner",style:{height:e.inputSuffixHeight+"px",lineHeight:e.inputSuffixHeight+"px"},attrs:{type:"text",readonly:"readonly",name:e.inputName,autocomplete:"off",placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),i("span",{staticClass:"el-input__suffix"},[i("span",{staticClass:"el-input__suffix-inner"},[i("i",{staticClass:"el-icon-circle-close clear-icon",on:{click:function(t){return t.stopPropagation(),e.clear(t)}}}),i("ht-icon",{staticClass:"org-icon",attrs:{name:"org",scale:"0.9"}})],1)])]):e._e()]),i("ht-field-tail",{attrs:{"field-name":e.inputName,"input-value":e.value}}),e.isMobile?i("org-selector-mobile-dialog",{ref:"orgSelectorMobileDialog",attrs:{title:e.title,"append-to-body":e.appendToBody,data:e.data,pagination:e.pagination,"select-label":e.selectLabel,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField},on:{search:function(t){return e.$emit("search",t)},reset:function(){return e.$emit("reset")},"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("select-data",t)},"page-change":function(t){return e.$emit("page-change",t)}},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}}):i("org-selector-dialog",{ref:"orgSelectorDialog",attrs:{title:e.title,"append-to-body":e.appendToBody,data:e.data,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField,mode:e.mode},on:{"filter-type-change":function(t){return e.$emit("filter-type-change",t)},search:function(t){return e.$emit("search",t)},reset:function(){return e.$emit("reset")},"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("select-data",t)},"page-change":function(t){return e.$emit("page-change",t)},"size-change":function(t){return e.$emit("size-change",t)},"contact-group-change":function(t){return e.$emit("contact-group-change",t)},"load-org":function(t){return e.$emit("load-org",t)},"load-policy-org":function(t){return e.$emit("load-policy-org",t)}},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}})],1):e._e()},Hs=[],Us=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"orgdialog-selector__wrapper",attrs:{width:"1060px",title:e.title,visible:e.dialogVisible,"before-close":e.handleClose,"close-on-click-modal":!1,"append-to-body":e.appendToBody},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"dialog-selector__body"},[i("el-input",{attrs:{size:"small",clearable:"",placeholder:e.searchPlaceholder},on:{clear:e.reset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix",title:e.t("ht.common.search")},on:{click:e.search},slot:"prefix"})]),i("ht-list-selector",{ref:"selector",staticClass:"user-selector",attrs:{title:e.$t("ht.selector.orgList"),data:e.data,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField,mode:e.mode},on:{reset:e.reset,"row-click":function(t){return e.$emit("row-click",t)},"page-change":function(t){return e.$emit("page-change",t)},"size-change":function(t){return e.$emit("size-change",t)}},scopedSlots:e._u([{key:"detail",fn:function(t){var a=t.item;return[i("ht-icon",{staticClass:"follow-theme-color",staticStyle:{"margin-left":"15px",width:"36px",height:"36px"},attrs:{name:"org-tree2"}}),i("div",{staticClass:"selector-item__detail"},[i("div",{staticClass:"selector-detail__name"},[i("label",[e._v(e._s(a[e.selectLabel]))]),i("span",[e._v("("+e._s(a["code"])+")")])]),a.pathName?i("div",{staticClass:"selector-detail__desc"},[i("span",{attrs:{title:a.pathName}},[e._v("\n              "+e._s(a.pathName)+"\n            ")])]):e._e()])]}},{key:"selected",fn:function(t){var a=t.select;return[i("ht-icon",{staticClass:"follow-theme-color",staticStyle:{"margin-left":"15px",width:"36px",height:"36px"},attrs:{name:"org-tree2"}}),i("p",{staticClass:"selector-selected__label",attrs:{title:a[e.selectLabel]+(a["code"]?"("+a["code"]+")":"")}},[e._v("\n          "+e._s(a[e.selectLabel]+(a["code"]?"("+a["code"]+")":""))+"\n        ")])]}}]),model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}},[i("el-card",{staticClass:"selector-range__card",attrs:{slot:"range",shadow:"hover"},slot:"range"},[i("el-tabs",{model:{value:e.activeRange,callback:function(t){e.activeRange=t},expression:"activeRange"}},[i("el-tab-pane",{attrs:{label:e.$t("ht.selector.org"),name:"org"}},[i("organization",{attrs:{mode:e.mode},on:{loadOrg:function(t){return e.$emit("load-org",t)}}})],1),i("el-tab-pane",{attrs:{label:e.$t("ht.selector.tactics"),name:"policy"}},[i("policy-user",{attrs:{mode:e.mode},on:{"load-policy-org":function(t){return e.$emit("load-policy-org",t)}}})],1)],1)],1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleDialogSure}},[e._v("\n      "+e._s(e.$t("ht.common.confirm"))+"\n    ")]),i("el-button",{attrs:{size:"small"},on:{click:e.handleDialogCancel}},[e._v("\n      "+e._s(e.$t("ht.common.cancle"))+"\n    ")])],1)])},Ks=[],js=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"organization-container"},[i("div",{staticClass:"demension__container"},[i("ht-select",{attrs:{size:"small",clearable:!1,options:e.demensions,"display-style":"block",props:{key:"id",value:"demName"}},model:{value:e.currentDemension,callback:function(t){e.currentDemension=t},expression:"currentDemension"}})],1),i("el-scrollbar",{staticClass:"organization-list__scroll"},[i("ht-tree",{ref:"tree",staticClass:"org-tree",attrs:{lazy:"","display-style":"block",load:e.loadOrgTree,data:e.orgs,"default-expand-all":!1,"highlight-current":!0,props:{children:"children",label:"name",isLeaf:"leaf"},"node-key":"id",accordion:""},on:{"node-click":function(t){return e.$emit("loadOrg",t)}}})],1)],1)},Ws=[],Qs={name:"Organization",props:{mode:{type:String}},data(){return{demensions:[],currentDemension:"",orgs:[]}},watch:{mode:function(e,t){e!==t&&"search"==e&&this.$refs.tree.setCurrentKey(null)},currentDemension:function(e,t){e&&e!==t&&this.changeDemension(e)}},mounted(){this.loadDemensions()},methods:{loadDemensions(){this.demensions&&0!=this.demensions.length||this.$requestConfig.getAllDemensions().then(e=>{this.demensions=e,e.forEach(e=>{1==e.isDefault&&(this.currentDemension=e.id)}),this.currentDemension||(this.currentDemension=e[0].id)})},changeDemension(e){this.$requestConfig.getOrgTree({demId:e||this.currentDemension}).then(e=>{this.orgs=y["a"].tile2nest(e)})},loadOrgTree(e,t){e&&e.data&&e.data.isParent?e.data.children?t(e.data.children):this.$requestConfig.getOrgTree({demId:e.data.demId,parentId:e.data.id}).then(e=>{t(e)}):t([])}}},Js=Qs,Gs=(i("6d96"),W(Js,js,Ws,!1,null,"4738080b",null)),Ys=Gs.exports,Zs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"policy-user__container"},[e.policies.length>0?i("el-scrollbar",{staticClass:"selector-list__scroll"},[i("ht-radio",{attrs:{"display-style":"block","option-layout":"vertical",props:{key:"id",value:"name"},options:e.policies},model:{value:e.currentPolicy,callback:function(t){e.currentPolicy=t},expression:"currentPolicy"}})],1):i("div",{staticClass:"el-tree__empty-block"},[i("span",{staticClass:"el-tree__empty-text"},[e._v(e._s(e.t("el.table.emptyText")))])])],1)},Xs=[],el={name:"PolicyUser",mixins:[Le],props:{mode:{type:String}},data(){return{policies:[{id:"1",name:this.$t("ht.selector.MyDepartment")},{id:"2",name:this.$t("ht.selector.MyDepartmentAndSub")},{id:"3",name:this.$t("ht.selector.myAllDepartment")},{id:"4",name:this.$t("ht.selector.myAllDepartmentAndSub")}],currentPolicy:"",currentUserOrgs:[]}},watch:{mode:function(e,t){e!==t&&"search"==e&&(this.currentPolicy="")},currentPolicy:function(e,t){e&&e!==t&&this.loadUserWithPolicy(e)}},methods:{loadUserWithPolicy(e){this.loadCurrentUserOrgs().then(()=>{const t=this.getOrgIdWithPolicy(e);this.$emit("load-policy-org",t)}).catch(()=>{this.$message.error(this.$t("ht.selector.notGetDepartmentData")),this.currentPolicy=""})},getOrgIdWithPolicy(e){let t={type:e};const i=this.currentUserOrgs.find(e=>1==e.isMaster);switch(e){case"1":t.id=i?i.id:null;break;case"2":t.path=i?i.path:null;break;case"3":t.ids=this.currentUserOrgs.map(e=>e.id);break;case"4":t.paths=this.currentUserOrgs.map(e=>e.path);break}return t},loadCurrentUserOrgs(){return new Promise((e,t)=>{this.currentUserOrgs&&this.currentUserOrgs.length>0?e():this.$requestConfig.getUserId()&&this.$requestConfig.getOrgListByUserId?this.$requestConfig.getOrgListByUserId(this.$requestConfig.getUserId()).then(i=>{i&&i.constructor==Array&&i.length>0?(this.currentUserOrgs=i,e()):t()}).catch(()=>t()):t()})}}},tl=el,il=(i("d0ab"),W(tl,Zs,Xs,!1,null,"8a53b5e8",null)),al=il.exports,sl={name:"UserSelectorDialog",components:{HtListSelector:Ma,Organization:Ys,PolicyUser:al},mixins:[Le],props:{searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.orgDefaultPlaceholder")}},value:{type:Array,default:()=>[]},title:{type:String,default(){return Object(Me["c"])("ht.selector.orgTitle")}},appendToBody:{type:Boolean,default:!1},data:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},selectLabel:{type:String,default:"name"},quickSearchProps:{type:String,required:!0},single:{type:Boolean,default:!1},primaryField:{type:String,default:""},mode:{type:String}},data(){return{dialogVisible:!1,activeRange:"org",searchWord:null,loading:!1}},computed:{selectors:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},watch:{activeRange:function(e,t){e!==t&&this.$emit("filter-type-change",e)}},methods:{search(){this.loading||this.$emit("search",this.searchWord)},reset(){this.$emit("reset"),this.searchWord=null},showDialog(){this.dialogVisible=!0,setTimeout(()=>{this.$refs.selector.onShow()},10)},handleClose(e){this.$refs.selector.onHide(),e&&e()},handleDialogSure(){this.$emit("select-data",this.$refs.selector.getSelectedData()),this.dialogVisible=!1,this.$refs.selector.onHide(!0)},handleDialogCancel(){this.dialogVisible=!1,this.$refs.selector.onHide()}}},ll=sl,nl=(i("fa5c"),W(ll,Us,Ks,!1,null,"85094ef4",null)),ol=nl.exports,rl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.dialogVisible?i("van-action-sheet",{staticClass:"org-mobile__selector",attrs:{"cancel-text":e.sureButtonText,closeable:!1,"get-container":"body"},on:{cancel:e.handleDialogSure,close:e.handleDialogClose,"click-overlay":e.handleDialogClose},scopedSlots:e._u([{key:"description",fn:function(){return[i("span",{staticClass:"org-mobile__title"},[e._v(e._s(e.title))]),i("ht-icon",{staticClass:"org-mobile__close",attrs:{name:"close"},on:{click:e.handleDialogClose}})]},proxy:!0}],null,!1,2462900794),model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[i("van-search",{attrs:{placeholder:e.searchPlaceholder},on:{search:e.onRefresh,clear:e.reset},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}}),i("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[i("van-list",{staticClass:"org-data__list",attrs:{finished:e.finished,"finished-text":e.$t("ht.common.noMore")},on:{load:e.loadMore},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[i("van-checkbox-group",{model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}},e._l(e.data,(function(t){return i("van-cell",{key:t[e.primaryFieldProp],attrs:{clickable:""},on:{click:function(i){return e.rowClick(t,null,i)}},scopedSlots:e._u([{key:"icon",fn:function(){return[i("van-checkbox",{attrs:{name:t[e.primaryFieldProp],shape:e.single?"round":"square"}})]},proxy:!0}],null,!0)},[i("div",{staticClass:"org-list__container"},[i("ht-icon",{staticClass:"follow-theme-color",staticStyle:{"margin-left":"15px",width:"36px",height:"36px"},attrs:{name:"org-tree2"}}),i("div",{staticClass:"selector-item__detail"},[i("div",{staticClass:"selector-detail__name"},[i("label",[e._v(e._s(t[e.selectLabel]))]),i("span",[e._v("("+e._s(t["code"])+")")])]),i("div",{staticClass:"selector-detail__desc"},[i("span",{attrs:{title:t.pathName}},[e._v("\n                  "+e._s(t.pathName||e.$t("ht.selector.not"))+"\n                ")])])])],1)])})),1)],1)],1)],1):e._e()},cl=[],hl={name:"OrgSelectorMobileDialog",mixins:[Le],props:{searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.orgDefaultPlaceholder")}},value:{type:Array,default:()=>[]},single:{type:Boolean,default:!1},data:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},selectLabel:{type:String,default:"fullname"},appendToBody:{type:Boolean,default:!1},title:{type:String,default(){return Object(Me["c"])("ht.selector.orgTitle")}},primaryField:{type:String,default:""}},data(){return{dialogVisible:!1,isLoading:!1,finished:!1,searchWord:null,selectIds:[],selectedData:[]}},computed:{primaryColor(){return Ha.a.primary_color},sureButtonText(){const e=this.selectIds.length>0?`(${this.selectIds.length})`:"";return`${this.$t("ht.common.confirm")}${e}`},primaryFieldProp:function(){return this.primaryField?this.primaryField:"id"}},watch:{pagination:function(e,t){if(this.isLoading=!1,e!==t){const{page:t,pageSize:i,total:a}=e;this.finished=!(t>0&&i>0&&a>0)||t*i>=a}}},methods:{onRefresh(){this.isloading=!0,this.$emit("search",this.searchWord)},reset(){this.$emit("reset")},loadMore(){this.data&&this.data.length>0?this.$emit("page-change",++this.pagination.page):this.isLoading=!1},showDialog(){this.value&&this.value.length>0&&(this.selectIds=this.value.map(e=>e[this.primaryFieldProp]),this.selectedData=this.value),this.dialogVisible=!0},handleDialogSure(){this.$emit("input",this.selectedData),this.$emit("select-data",this.selectedData),this.selectIds=[],this.selectedData=[],this.dialogVisible=!1},handleDialogClose(){this.dialogVisible=!1,this.selectIds=[],this.selectedData=[]},select(e,t){this.$emit("select",e,t)},rowClick(e,t,i){this.single?(this.selectIds=[e[this.primaryFieldProp]],this.selectedData=[e]):this.selectIds.some(t=>t==e[this.primaryFieldProp])?(this.selectIds.remove(e[this.primaryFieldProp]),this.selectedData=this.selectedData.filter(t=>t[this.primaryFieldProp]!==e[this.primaryFieldProp])):(this.selectIds.push(e[this.primaryFieldProp]),this.selectedData.push(e)),this.$emit("row-click",e,t,i)}}},ul=hl,dl=(i("9232"),W(ul,rl,cl,!1,null,"01f4cbdb",null)),pl=dl.exports,ml={name:"HtOrgSelector",components:{HtFieldTail:ue,OrgSelectorDialog:ol,OrgSelectorMobileDialog:pl},mixins:[pe["a"],de["a"],kt["a"]],props:{showPath:{type:Boolean,default:!1},searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.orgDefaultPlaceholder")}},value:String,single:{type:Boolean,default:!1},config:Object,data:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},selectLabel:{type:String,default:"name"},quickSearchProps:{type:String,required:!0},appendToBody:{type:Boolean,default:!1},formInputsDisplay:{type:String,default:"inline"},title:{type:String,default(){return Object(Me["c"])("ht.selector.orgTitle")}},mode:{type:String}},data(){return{inputSuffixHeight:30,selectors:[]}},computed:{primaryField:function(){return this.config&&this.config.hasOwnProperty("id")?"id":this.config&&this.config.hasOwnProperty("code")?"code":this.selectLabel}},watch:{selectors:function(e){let t=[],i=[],a=[],s=[],l=[];e&&e.constructor===Array&&e.length>0&&e.forEach(e=>{t.push(this.showPath?e.pathName:e.name),e.hasOwnProperty("id")&&i.push(e.id),e.hasOwnProperty("code")&&a.push(e.code),e.hasOwnProperty("name")&&s.push(e.name),e.hasOwnProperty("pathName")&&l.push(e.pathName)}),this.config?(this.config.hasOwnProperty("id")&&y["a"].setValueByConfigKey(this,this.config,"id",i.join(",")),this.config.hasOwnProperty("code")&&y["a"].setValueByConfigKey(this,this.config,"code",a.join(",")),this.config.hasOwnProperty("name")&&y["a"].setValueByConfigKey(this,this.config,"name",s.join(",")),this.config.hasOwnProperty("pathName")&&y["a"].setValueByConfigKey(this,this.config,"pathName",l.join(","))):this.$emit("change",e),this.$emit("valueChange",t.join(","),e),Object(ji["setTimeout"])(()=>{e.length>0?this.calacInputSuffixHeight():this.inputSuffixHeight=30,this.$refs.inputEl&&(this.$refs.inputEl.focus(),this.$refs.inputEl.blur())},10)},value:function(){this.valueInit()}},mounted(){this.valueInit()},methods:{valueInit(){let e=[];if(this.value){let t=[],i=[],a=[],s=[];if(this.config){if(this.config.hasOwnProperty("id")){let e=y["a"].getValueByConfigKey(this,this.config,"id");e&&(t=e.split(",").trim())}if(this.config.hasOwnProperty("name")){let e=y["a"].getValueByConfigKey(this,this.config,"name");e&&(a=e.split(",").trim())}if(this.config.hasOwnProperty("code")){let e=y["a"].getValueByConfigKey(this,this.config,"code");e&&(i=e.split(",").trim())}if(this.config.hasOwnProperty("pathName")){let e=y["a"].getValueByConfigKey(this,this.config,"pathName");e&&(s=e.split(",").trim())}}let l=this.value.split(",").trim();l.forEach((l,n)=>{let o=this.showPath?{pathName:l}:{name:l};t.length>n&&(o["id"]=t[n]),a.length>n&&(o["name"]=a[n]),i.length>n&&(o["code"]=i[n]),s.length>n&&(o["pathName"]=s[n]),e.push(o)})}y["a"].arrayEquals(e,this.selectors)||(this.selectors=e)},showDialog(){this.inputWriteable&&(this.isMobile?this.$refs.orgSelectorMobileDialog.showDialog():this.$refs.orgSelectorDialog.showDialog())},handleRemove(e){this.selectors.remove(e)},clear(){this.selectors=[],this.inputSuffixHeight=30},calacInputSuffixHeight(){this.$refs.tagSpans&&(this.$refs.tagSpans.offsetHeight?this.inputSuffixHeight=this.$refs.tagSpans.offsetHeight+5:this.inputSuffixHeight=30)}}},gl=ml,fl=(i("83ee"),W(gl,zs,Hs,!1,null,"27f4d8e1",null)),yl=fl.exports;yl.install=function(e){e.component(yl.name,yl)};var bl=yl,_l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!==e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[i("div",{staticClass:"el-select",class:{"has-value":e.value},staticStyle:{width:"100%","min-width":"180px"},on:{click:e.showDialog}},[i("div",{ref:"tagSpans",class:{"el-select__tags_readonly":!e.inputWriteable,"el-select__tags":e.inputWriteable},staticStyle:{width:"calc(100% - 25px)"}},[i("span",{staticClass:"tag-wrap"},e._l(e.selectors,(function(t,a){return i("span",{key:a,staticClass:"el-tag el-tag--info el-tag--small",on:{click:function(e){e.stopPropagation()}}},[i("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.name))]),e.inputWriteable?i("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(i){return e.handleRemove(t)}}}):e._e()])})),0)]),e.inputWriteable?i("div",{staticClass:"el-input el-input--suffix"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"},{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],ref:"inputEl",staticClass:"el-input__inner",style:{height:e.inputSuffixHeight+"px",lineHeight:e.inputSuffixHeight+"px"},attrs:{type:"text",readonly:"readonly",name:e.inputName,autocomplete:"off",placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),i("span",{staticClass:"el-input__suffix"},[i("span",{staticClass:"el-input__suffix-inner"},[i("i",{staticClass:"el-icon-circle-close clear-icon",on:{click:function(t){return t.stopPropagation(),e.clear(t)}}}),i("ht-icon",{staticClass:"user-icon",attrs:{name:"users"}})],1)])]):e._e()]),i("ht-field-tail",{attrs:{"field-name":e.inputName,"input-value":e.value}}),e.isMobile?i("job-selector-mobile-dialog",{ref:"jobSelectorMobileDialog",attrs:{"search-placeholder":e.searchPlaceholder,single:e.single,data:e.data,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,"append-to-body":e.appendToBody,title:e.title,"primary-field":e.primaryField},on:{search:function(t){return e.$emit("search",t)},reset:function(){return e.$emit("reset")},"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("select-data",t)},"page-change":function(t){return e.$emit("page-change",t)}},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}}):i("job-selector-dialog",{ref:"jobSelectorDialog",attrs:{"search-placeholder":e.searchPlaceholder,single:e.single,data:e.data,"table-columns":e.tableColumns,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,"append-to-body":e.appendToBody,title:e.title,"primary-field":e.primaryField,mode:e.mode},on:{search:function(t){return e.$emit("search",t)},reset:function(){return e.$emit("reset")},"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("select-data",t)},"page-change":function(t){return e.$emit("page-change",t)},"size-change":function(t){return e.$emit("size-change",t)}},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}})],1):e._e()},vl=[],wl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"jobdialog-selector__wrapper",attrs:{title:e.title,width:"900px",visible:e.dialogVisible,"before-close":e.handleClose,"close-on-click-modal":!1,"append-to-body":e.appendToBody},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"dialog-selector__body"},[i("el-input",{attrs:{size:"small",clearable:"",placeholder:e.searchPlaceholder},on:{clear:e.reset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix",title:e.t("ht.common.search")},on:{click:e.search},slot:"prefix"})]),i("ht-list-selector",{ref:"selector",staticClass:"post-selector",attrs:{title:e.$t("ht.selector.jobList"),data:e.data,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField,mode:e.mode},on:{reset:e.reset,"row-click":function(t){return e.$emit("row-click",t)},"page-change":function(t){return e.$emit("page-change",t)},"size-change":function(t){return e.$emit("size-change",t)}},scopedSlots:e._u([{key:"detail",fn:function(t){var a=t.item;return[i("ht-icon",{staticClass:"follow-theme-color",staticStyle:{"margin-left":"15px",width:"36px",height:"36px"},attrs:{name:"job"}}),i("div",{staticClass:"selector-item__detail"},[i("div",{staticClass:"selector-detail__name"},[i("label",[e._v(e._s(a[e.selectLabel]))]),i("span",[e._v("("+e._s(a["code"])+")")])])])]}},{key:"selected",fn:function(t){var a=t.select;return[i("ht-icon",{staticClass:"follow-theme-color",staticStyle:{"margin-left":"15px",width:"36px",height:"36px"},attrs:{name:"job"}}),i("p",{staticClass:"selector-selected__label",attrs:{title:a[e.selectLabel]+(a["code"]?"("+a["code"]+")":"")}},[e._v("\n          "+e._s(a[e.selectLabel]+(a["code"]?"("+a["code"]+")":""))+"\n        ")])]}}]),model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}})],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleDialogSure}},[e._v("\n      "+e._s(e.$t("ht.common.confirm"))+"\n    ")]),i("el-button",{attrs:{size:"small"},on:{click:e.handleDialogCancel}},[e._v("\n      "+e._s(e.$t("ht.common.cancle"))+"\n    ")])],1)])},Sl=[],Cl={name:"JobSelectorDialog",components:{HtListSelector:Ma},mixins:[Le],props:{searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.nameCode")}},value:{type:Array,default:()=>[]},single:{type:Boolean,default:!1},data:{type:Array,default:()=>[]},tableColumns:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},selectLabel:{type:String,default:"name"},quickSearchProps:{type:String,required:!0},appendToBody:{type:Boolean,default:!1},title:{type:String,default(){return Object(Me["c"])("ht.selector.jobTitle")}},primaryField:{type:String,default:""},mode:{type:String}},data(){return{dialogVisible:!1,searchWord:null,loading:!1}},computed:{selectors:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{search(){this.loading||this.$emit("search",this.searchWord)},reset(){this.$emit("reset"),this.searchWord=null},showDialog(){this.dialogVisible=!0,setTimeout(()=>{this.$refs.selector.onShow()})},handleClose(e){this.$refs.selector.onHide(),e&&e()},handleDialogSure(){this.$emit("select-data",this.$refs.selector.getSelectedData()),this.dialogVisible=!1,this.$refs.selector.onHide(!0)},handleDialogCancel(){this.dialogVisible=!1,this.$refs.selector.onHide()}}},Dl=Cl,xl=(i("565f"),W(Dl,wl,Sl,!1,null,"68d2dfdc",null)),Tl=xl.exports,Pl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.dialogVisible?i("van-action-sheet",{staticClass:"job-mobile__selector",attrs:{"cancel-text":e.sureButtonText,closeable:!1,"get-container":"body"},on:{cancel:e.handleDialogSure,close:e.handleDialogClose,"click-overlay":e.handleDialogClose},scopedSlots:e._u([{key:"description",fn:function(){return[i("span",{staticClass:"job-mobile__title"},[e._v(e._s(e.title))]),i("ht-icon",{staticClass:"job-mobile__close",attrs:{name:"close"},on:{click:e.handleDialogClose}})]},proxy:!0}],null,!1,3177687802),model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[i("van-search",{attrs:{placeholder:e.searchPlaceholder},on:{search:e.onRefresh,clear:e.reset},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}}),i("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[i("van-list",{staticClass:"job-data__list",attrs:{finished:e.finished,"finished-text":e.t("ht.common.noMore")},on:{load:e.loadMore},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[i("van-checkbox-group",{model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}},e._l(e.data,(function(t){return i("van-cell",{key:t[e.primaryFieldProp],attrs:{clickable:""},on:{click:function(i){return e.rowClick(t,null,i)}},scopedSlots:e._u([{key:"icon",fn:function(){return[i("van-checkbox",{attrs:{name:t[e.primaryFieldProp],shape:e.single?"round":"square"}})]},proxy:!0}],null,!0)},[i("div",{staticClass:"job-list__container"},[i("ht-icon",{staticClass:"follow-theme-color",staticStyle:{"margin-left":"15px",width:"36px",height:"36px"},attrs:{name:"job"}}),i("div",{staticClass:"selector-item__detail"},[i("div",{staticClass:"selector-detail__name"},[i("label",[e._v(e._s(t[e.selectLabel]))]),i("span",[e._v("("+e._s(t["code"])+")")])])])],1)])})),1)],1)],1)],1):e._e()},El=[],Ol={name:"JobSelectorMobileDialog",mixins:[Le],props:{searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.nameCode")}},value:{type:Array,default:()=>[]},single:{type:Boolean,default:!1},data:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},selectLabel:{type:String,default:"name"},appendToBody:{type:Boolean,default:!1},title:{type:String,default(){return Object(Me["c"])("ht.selector.roleTitle")}},primaryField:{type:String,default:""}},data(){return{dialogVisible:!1,isLoading:!1,finished:!1,searchWord:null,selectIds:[],selectedData:[]}},computed:{primaryColor(){return Ha.a.primary_color},sureButtonText(){const e=this.selectIds.length>0?`(${this.selectIds.length})`:"";return`${this.$t("ht.common.confirm")}${e}`},primaryFieldProp:function(){return this.primaryField?this.primaryField:"id"}},watch:{pagination:function(e,t){if(this.isLoading=!1,e!==t){const{page:t,pageSize:i,total:a}=e;this.finished=!(t>0&&i>0&&a>0)||t*i>=a}}},methods:{onRefresh(){this.isloading=!0,this.$emit("search",this.searchWord)},reset(){this.$emit("reset")},loadMore(){this.data&&this.data.length>0?this.$emit("page-change",++this.pagination.page):this.isLoading=!1},showDialog(){this.value&&this.value.length>0&&(this.selectIds=this.value.map(e=>e[this.primaryFieldProp]),this.selectedData=this.value),this.dialogVisible=!0},handleDialogSure(){this.$emit("input",this.selectedData),this.$emit("select-data",this.selectedData),this.selectIds=[],this.selectedData=[],this.dialogVisible=!1},handleDialogClose(){this.dialogVisible=!1,this.selectIds=[],this.selectedData=[]},select(e,t){this.$emit("select",e,t)},rowClick(e,t,i){this.single?(this.selectIds=[e[this.primaryFieldProp]],this.selectedData=[e]):this.selectIds.some(t=>t==e[this.primaryFieldProp])?(this.selectIds.remove(e[this.primaryFieldProp]),this.selectedData=this.selectedData.filter(t=>t[this.primaryFieldProp]!==e[this.primaryFieldProp])):(this.selectIds.push(e[this.primaryFieldProp]),this.selectedData.push(e)),this.$emit("row-click",e,t,i)}}},kl=Ol,Il=(i("863b"),W(kl,Pl,El,!1,null,"6362ca66",null)),$l=Il.exports,Al={name:"HtJobSelector",components:{HtFieldTail:ue,JobSelectorDialog:Tl,JobSelectorMobileDialog:$l},mixins:[pe["a"],de["a"],kt["a"]],props:{searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.nameCode")}},value:String,selectLabel:String,single:{type:Boolean,default:!1},config:Object,data:{type:Array,default:()=>[]},tableColumns:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},quickSearchProps:{type:String,required:!0},appendToBody:{type:Boolean,default:!1},formInputsDisplay:{type:String,default:"inline"},title:{type:String,default(){return Object(Me["c"])("ht.selector.jobTitle")}},mode:{type:String}},data(){return{inputSuffixHeight:30,selectors:[]}},computed:{primaryField:function(){return this.config&&this.config.hasOwnProperty("id")?"id":this.config&&this.config.hasOwnProperty("code")?"code":this.selectLabel}},watch:{selectors:function(e){let t=[],i=[],a=[];e&&e.constructor===Array&&e.length>0&&e.forEach(e=>{t.push(e.name),e.hasOwnProperty("id")&&i.push(e.id),e.hasOwnProperty("code")&&a.push(e.code)}),this.config?(this.config.hasOwnProperty("id")&&y["a"].setValueByConfigKey(this,this.config,"id",i.join(",")),this.config.hasOwnProperty("name")&&y["a"].setValueByConfigKey(this,this.config,"name",t.join(",")),this.config.hasOwnProperty("code")&&y["a"].setValueByConfigKey(this,this.config,"code",a.join(","))):this.$emit("change",e),this.$emit("valueChange",t.join(","),e),Object(ji["setTimeout"])(()=>{e.length>0?this.calacInputSuffixHeight():this.inputSuffixHeight=30,this.$refs.inputEl&&(this.$refs.inputEl.focus(),this.$refs.inputEl.blur())},10)},value:function(){this.valueInit()}},mounted(){this.valueInit()},methods:{valueInit(){let e=[];if(this.value){let t=[],i=[];if(this.config){if(this.config.hasOwnProperty("id")){let e=y["a"].getValueByConfigKey(this,this.config,"id");e&&(t=e.split(",").trim())}if(this.config.hasOwnProperty("code")){let e=y["a"].getValueByConfigKey(this,this.config,"code");e&&(i=e.split(",").trim())}}let a=this.value.split(",").trim();a.forEach((a,s)=>{let l={name:a};t.length>s&&(l["id"]=t[s]),i.length>s&&(l["code"]=i[s]),e.push(l)})}y["a"].arrayEquals(e,this.selectors)||(this.selectors=e)},showDialog(){this.inputWriteable&&(this.isMobile?this.$refs.jobSelectorMobileDialog.showDialog():this.$refs.jobSelectorDialog.showDialog())},handleRemove(e){this.selectors.remove(e)},clear(){this.selectors=[],this.inputSuffixHeight=30},calacInputSuffixHeight(){this.$refs.tagSpans&&(this.$refs.tagSpans.offsetHeight?this.inputSuffixHeight=this.$refs.tagSpans.offsetHeight+5:this.inputSuffixHeight=30)}}},Bl=Al,Ml=(i("c4f7"),W(Bl,_l,vl,!1,null,"56aac0ee",null)),Ll=Ml.exports;Ll.install=function(e){e.component(Ll.name,Ll)};var Fl=Ll,Nl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!==e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[i("div",{staticClass:"el-select",class:{"has-value":e.selectors.length>0},staticStyle:{width:"100%","min-width":"180px"},on:{click:e.showDialog}},[i("div",{ref:"tagSpans",class:{"el-select__tags_readonly":!e.inputWriteable,"el-select__tags":e.inputWriteable},staticStyle:{width:"calc(100% - 25px)"}},[i("span",{staticClass:"tag-wrap"},e._l(e.selectors,(function(t,a){return i("span",{key:a,staticClass:"el-tag el-tag--info el-tag--small",on:{click:function(e){e.stopPropagation()}}},[i("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.name))]),e.inputWriteable?i("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(i){return e.handleRemove(t)}}}):e._e()])})),0)]),e.inputWriteable?i("div",{staticClass:"el-input el-input--suffix"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"},{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],ref:"inputEl",staticClass:"el-input__inner",style:{height:e.inputSuffixHeight+"px",lineHeight:e.inputSuffixHeight+"px"},attrs:{type:"text",readonly:"readonly",name:e.inputName,autocomplete:"off",placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),i("span",{staticClass:"el-input__suffix"},[i("span",{staticClass:"el-input__suffix-inner"},[i("i",{staticClass:"el-icon-circle-close clear-icon",on:{click:function(t){return t.stopPropagation(),e.clear(t)}}}),i("ht-icon",{staticClass:"user-icon",attrs:{name:"users"}})],1)])]):e._e()]),i("ht-field-tail",{attrs:{"field-name":e.inputName,"input-value":e.value}}),e.isMobile?i("post-selector-mobile-dialog",{ref:"postSelectorMobileDialog",attrs:{title:e.title,"append-to-body":e.appendToBody,data:e.data,pagination:e.pagination,"select-label":e.selectLabel,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField},on:{search:function(t){return e.$emit("search",t)},reset:function(){return e.$emit("reset")},"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("select-data",t)},"page-change":function(t){return e.$emit("page-change",t)}},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}}):i("post-selector-dialog",{ref:"postSelectorDialog",attrs:{title:e.title,"append-to-body":e.appendToBody,data:e.data,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField,mode:e.mode},on:{"filter-type-change":function(t){return e.$emit("filter-type-change",t)},search:function(t){return e.$emit("search",t)},reset:function(){return e.$emit("reset")},"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("select-data",t)},"page-change":function(t){return e.$emit("page-change",t)},"size-change":function(t){return e.$emit("size-change",t)},"load-org-post":function(t){return e.$emit("load-org-post",t)},"load-policy-post":function(t){return e.$emit("load-policy-post",t)}},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}})],1):e._e()},ql=[],Vl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"postdialog-selector__wrapper",attrs:{width:"900px",title:e.title,visible:e.dialogVisible,"before-close":e.handleClose,"close-on-click-modal":!1,"append-to-body":e.appendToBody},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"dialog-selector__body"},[i("el-input",{attrs:{size:"small",clearable:"",placeholder:e.searchPlaceholder},on:{clear:e.reset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix",title:e.t("ht.common.search")},on:{click:e.search},slot:"prefix"})]),i("ht-list-selector",{ref:"selector",staticClass:"post-selector",attrs:{title:e.$t("ht.selector.postList"),data:e.data,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField,mode:e.mode},on:{reset:e.reset,"row-click":function(t){return e.$emit("row-click",t)},"page-change":function(t){return e.$emit("page-change",t)},"size-change":function(t){return e.$emit("size-change",t)}},scopedSlots:e._u([{key:"detail",fn:function(t){var a=t.item;return[i("ht-icon",{staticClass:"follow-theme-color",staticStyle:{"margin-left":"15px",width:"36px",height:"36px"},attrs:{name:"post"}}),i("div",{staticClass:"selector-item__detail"},[i("div",{staticClass:"selector-detail__name"},[i("label",[e._v(e._s(a[e.selectLabel]))]),i("span",[e._v("("+e._s(a["code"])+")")])]),a.orgName?i("div",{staticClass:"selector-detail__desc"},[i("span",{attrs:{title:a.orgName}},[i("ht-icon",{attrs:{name:"org-tree"}}),e._v("\n              "+e._s(a.orgName)+"\n            ")],1)]):e._e()])]}},{key:"selected",fn:function(t){var a=t.select;return[i("ht-icon",{staticClass:"follow-theme-color",staticStyle:{"margin-left":"15px",width:"36px",height:"36px"},attrs:{name:"post"}}),i("p",{staticClass:"selector-selected__label",attrs:{title:a[e.selectLabel]+(a["code"]?"("+a["code"]+")":"")}},[e._v("\n          "+e._s(a[e.selectLabel]+(a["code"]?"("+a["code"]+")":""))+"\n        ")])]}}]),model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}},[i("el-card",{staticClass:"selector-range__card",attrs:{slot:"range",shadow:"hover"},slot:"range"},[i("el-tabs",{model:{value:e.activeRange,callback:function(t){e.activeRange=t},expression:"activeRange"}},[i("el-tab-pane",{attrs:{label:e.$t("ht.selector.org"),name:"org"}},[i("organization",{attrs:{mode:e.mode},on:{"load-org-post":function(t){return e.$emit("load-org-post",t)}}})],1),i("el-tab-pane",{attrs:{label:e.$t("ht.selector.tactics"),name:"policy"}},[i("policy-user",{attrs:{mode:e.mode},on:{"load-policy-post":function(t){return e.$emit("load-policy-post",t)}}})],1)],1)],1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleDialogSure}},[e._v("\n      "+e._s(e.$t("ht.common.confirm"))+"\n    ")]),i("el-button",{attrs:{size:"small"},on:{click:e.handleDialogCancel}},[e._v("\n      "+e._s(e.$t("ht.common.cancle"))+"\n    ")])],1)])},Rl=[],zl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"organization-container"},[i("div",{staticClass:"demension__container"},[i("ht-select",{attrs:{size:"small",clearable:!1,options:e.demensions,"display-style":"block",props:{key:"id",value:"demName"}},model:{value:e.currentDemension,callback:function(t){e.currentDemension=t},expression:"currentDemension"}})],1),i("el-scrollbar",{staticClass:"organization-list__scroll"},[i("ht-tree",{ref:"tree",staticClass:"org-tree",attrs:{lazy:"","display-style":"block",load:e.loadOrgTree,data:e.orgs,"default-expand-all":!1,"highlight-current":!0,props:{children:"children",label:"name",isLeaf:"leaf"},"node-key":"id",accordion:""},on:{"node-click":function(t){return e.$emit("load-org-post",t)}}})],1)],1)},Hl=[],Ul={name:"Organization",props:{mode:{type:String}},data(){return{demensions:[],currentDemension:"",orgs:[]}},watch:{mode:function(e,t){e!==t&&"search"==e&&this.$refs.tree.setCurrentKey(null)},currentDemension:function(e,t){e&&e!==t&&this.changeDemension(e)}},mounted(){this.loadDemensions()},methods:{loadDemensions(){this.demensions&&0!=this.demensions.length||this.$requestConfig.getAllDemensions().then(e=>{this.demensions=e,e.forEach(e=>{1==e.isDefault&&(this.currentDemension=e.id)}),this.currentDemension||(this.currentDemension=e[0].id)})},changeDemension(e){this.$requestConfig.getOrgTree({demId:e||this.currentDemension}).then(e=>{this.orgs=y["a"].tile2nest(e)})},loadOrgTree(e,t){e&&e.data&&e.data.isParent?e.data.children?t(e.data.children):this.$requestConfig.getOrgTree({demId:e.data.demId,parentId:e.data.id}).then(e=>{t(e)}):t([])}}},Kl=Ul,jl=(i("3e58"),W(Kl,zl,Hl,!1,null,"9a5df3b6",null)),Wl=jl.exports,Ql=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"policy-user__container"},[e.policies.length>0?i("el-scrollbar",{staticClass:"selector-list__scroll"},[i("ht-radio",{attrs:{"display-style":"block","option-layout":"vertical",props:{key:"id",value:"name"},options:e.policies},model:{value:e.currentPolicy,callback:function(t){e.currentPolicy=t},expression:"currentPolicy"}})],1):i("div",{staticClass:"el-tree__empty-block"},[i("span",{staticClass:"el-tree__empty-text"},[e._v(e._s(e.t("el.table.emptyText")))])])],1)},Jl=[],Gl={name:"PolicyUser",mixins:[Le],props:{mode:{type:String}},data(){return{policies:[{id:"1",name:this.$t("ht.selector.MyDepartment")},{id:"2",name:this.$t("ht.selector.MyDepartmentAndSub")},{id:"3",name:this.$t("ht.selector.myAllDepartment")},{id:"4",name:this.$t("ht.selector.myAllDepartmentAndSub")}],currentPolicy:"",currentUserOrgs:[]}},watch:{mode:function(e,t){e!==t&&"search"==e&&(this.currentPolicy="")},currentPolicy:function(e,t){e&&e!==t&&this.loadUserWithPolicy(e)}},methods:{loadUserWithPolicy(e){this.loadCurrentUserOrgs().then(()=>{const t=this.getOrgIdWithPolicy(e);this.$emit("load-policy-post",t)}).catch(()=>{this.$message.error(this.$t("ht.selector.notGetDepartmentData")),this.currentPolicy=""})},getOrgIdWithPolicy(e){let t={type:e};const i=this.currentUserOrgs.find(e=>1==e.isMaster);switch(e){case"1":t.id=i?i.id:null;break;case"2":t.path=i?i.path:null;break;case"3":t.ids=this.currentUserOrgs.map(e=>e.id);break;case"4":t.paths=this.currentUserOrgs.map(e=>e.path);break}return t},loadCurrentUserOrgs(){return new Promise((e,t)=>{this.currentUserOrgs&&this.currentUserOrgs.length>0?e():this.$requestConfig.getUserId()&&this.$requestConfig.getOrgListByUserId?this.$requestConfig.getOrgListByUserId(this.$requestConfig.getUserId()).then(i=>{i&&i.constructor==Array&&i.length>0?(this.currentUserOrgs=i,e()):t()}).catch(()=>t()):t()})}}},Yl=Gl,Zl=(i("64bf"),W(Yl,Ql,Jl,!1,null,"cf1e117c",null)),Xl=Zl.exports,en={name:"PostSelectorDialog",components:{HtListSelector:Ma,Organization:Wl,PolicyUser:Xl},mixins:[Le],props:{searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.orgDefaultPlaceholder")}},value:{type:Array,default:()=>[]},single:{type:Boolean,default:!1},data:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},selectLabel:{type:String,default:"jobName"},quickSearchProps:{type:String,required:!0},appendToBody:{type:Boolean,default:!1},title:{type:String,default(){return Object(Me["c"])("ht.selector.postTitle")}},primaryField:{type:String,default:""},mode:{type:String}},data(){return{dialogVisible:!1,activeRange:"org",searchWord:null,loading:!1}},computed:{selectors:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},watch:{activeRange:function(e,t){e!==t&&this.$emit("filter-type-change",e)}},methods:{search(){this.loading||this.$emit("search",this.searchWord)},reset(){this.$emit("reset"),this.searchWord=null},showDialog(){this.dialogVisible=!0,setTimeout(()=>{this.$refs.selector.onShow()})},handleClose(e){this.$refs.selector.onHide(),e&&e()},handleDialogSure(){this.$emit("select-data",this.$refs.selector.getSelectedData()),this.dialogVisible=!1,this.$refs.selector.onHide(!0)},handleDialogCancel(){this.dialogVisible=!1,this.$refs.selector.onHide()}}},tn=en,an=(i("a7fc"),W(tn,Vl,Rl,!1,null,"e005ae2e",null)),sn=an.exports,ln=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.dialogVisible?i("van-action-sheet",{staticClass:"post-mobile__selector",attrs:{"cancel-text":e.sureButtonText,closeable:!1,"get-container":"body"},on:{cancel:e.handleDialogSure,close:e.handleDialogClose,"click-overlay":e.handleDialogClose},scopedSlots:e._u([{key:"description",fn:function(){return[i("span",{staticClass:"post-mobile__title"},[e._v(e._s(e.title))]),i("ht-icon",{staticClass:"post-mobile__close",attrs:{name:"close"},on:{click:e.handleDialogClose}})]},proxy:!0}],null,!1,2271583450),model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[i("van-search",{attrs:{placeholder:e.searchPlaceholder},on:{search:e.onRefresh,clear:e.reset},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}}),i("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[i("van-list",{staticClass:"post-data__list",attrs:{finished:e.finished,"finished-text":e.$t("ht.common.noMore")},on:{load:e.loadMore},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[i("van-checkbox-group",{model:{value:e.selectIds,callback:function(t){e.selectIds=t},expression:"selectIds"}},e._l(e.data,(function(t){return i("van-cell",{key:t[e.primaryFieldProp],attrs:{clickable:""},on:{click:function(i){return e.rowClick(t,null,i)}},scopedSlots:e._u([{key:"icon",fn:function(){return[i("van-checkbox",{attrs:{name:t[e.primaryFieldProp],shape:e.single?"round":"square"}})]},proxy:!0}],null,!0)},[i("div",{staticClass:"post-list__container"},[i("ht-icon",{staticClass:"follow-theme-color",staticStyle:{"margin-left":"15px",width:"36px",height:"36px"},attrs:{name:"post"}}),i("div",{staticClass:"selector-item__detail"},[i("div",{staticClass:"selector-detail__name"},[i("label",[e._v(e._s(t[e.selectLabel]))]),i("span",[e._v("("+e._s(t["code"])+")")])]),i("div",{staticClass:"selector-detail__desc"},[i("span",{attrs:{title:t.pathName}},[e._v("\n                  "+e._s(t.pathName||e.$t("ht.selector.not"))+"\n                ")])])])],1)])})),1)],1)],1)],1):e._e()},nn=[],on={name:"PostSelectorMobileDialog",mixins:[Le],props:{searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.orgDefaultPlaceholder")}},value:{type:Array,default:()=>[]},single:{type:Boolean,default:!1},data:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},selectLabel:{type:String,default:"fullname"},appendToBody:{type:Boolean,default:!1},title:{type:String,default(){return Object(Me["c"])("ht.selector.postTitle")}},primaryField:{type:String,default:""}},data(){return{dialogVisible:!1,isLoading:!1,finished:!1,searchWord:null,selectIds:[],selectedData:[]}},computed:{primaryColor(){return Ha.a.primary_color},sureButtonText(){const e=this.selectIds.length>0?`(${this.selectIds.length})`:"";return`${this.$t("ht.common.confirm")}${e}`},primaryFieldProp:function(){return this.primaryField?this.primaryField:"id"}},watch:{pagination:function(e,t){if(this.isLoading=!1,e!==t){const{page:t,pageSize:i,total:a}=e;this.finished=!(t>0&&i>0&&a>0)||t*i>=a}}},methods:{onRefresh(){this.isloading=!0,this.$emit("search",this.searchWord)},reset(){this.$emit("reset")},loadMore(){this.data&&this.data.length>0?this.$emit("page-change",++this.pagination.page):this.isLoading=!1},showDialog(){this.value&&this.value.length>0&&(this.selectIds=this.value.map(e=>e[this.primaryFieldProp]),this.selectedData=this.value),this.dialogVisible=!0},handleDialogSure(){this.$emit("input",this.selectedData),this.$emit("select-data",this.selectedData),this.selectIds=[],this.selectedData=[],this.dialogVisible=!1},handleDialogClose(){this.dialogVisible=!1,this.selectIds=[],this.selectedData=[]},select(e,t){this.$emit("select",e,t)},rowClick(e,t,i){this.single?(this.selectIds=[e[this.primaryFieldProp]],this.selectedData=[e]):this.selectIds.some(t=>t==e[this.primaryFieldProp])?(this.selectIds.remove(e[this.primaryFieldProp]),this.selectedData=this.selectedData.filter(t=>t[this.primaryFieldProp]!==e[this.primaryFieldProp])):(this.selectIds.push(e[this.primaryFieldProp]),this.selectedData.push(e)),this.$emit("row-click",e,t,i)}}},rn=on,cn=(i("4154"),W(rn,ln,nn,!1,null,"657e096e",null)),hn=cn.exports,un={name:"HtPostSelector",components:{HtFieldTail:ue,PostSelectorDialog:sn,PostSelectorMobileDialog:hn},mixins:[pe["a"],de["a"],kt["a"]],props:{searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.orgDefaultPlaceholder")}},value:{type:String,default:""},single:{type:Boolean,default:!1},config:{type:Object,default:null},data:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},selectLabel:{type:String,default:"jobName"},quickSearchProps:{type:String,required:!0},appendToBody:{type:Boolean,default:!1},formInputsDisplay:{type:String,default:"inline"},title:{type:String,default(){return Object(Me["c"])("ht.selector.postTitle")}},mode:{type:String}},data(){return{inputSuffixHeight:30,selectors:[]}},computed:{primaryField:function(){return this.config&&this.config.hasOwnProperty("id")?"id":this.config&&this.config.hasOwnProperty("code")?"code":this.selectLabel}},watch:{selectors:function(e){let t=[],i=[],a=[],s=[];e&&e.constructor===Array&&e.length>0&&e.forEach(e=>{t.push(e.name),e.hasOwnProperty("id")&&i.push(e.id),e.hasOwnProperty("code")&&a.push(e.code),e.hasOwnProperty("name")&&s.push(e.name)}),this.config?(this.config.hasOwnProperty("id")&&y["a"].setValueByConfigKey(this,this.config,"id",i.join(",")),this.config.hasOwnProperty("code")&&y["a"].setValueByConfigKey(this,this.config,"code",a.join(",")),this.config.hasOwnProperty("name")&&y["a"].setValueByConfigKey(this,this.config,"name",s.join(","))):this.$emit("change",e),this.$emit("valueChange",t.join(","),e),Object(ji["setTimeout"])(()=>{e.length>0?this.calacInputSuffixHeight():this.inputSuffixHeight=30,this.$refs.inputEl&&(this.$refs.inputEl.focus(),this.$refs.inputEl.blur())},10)},value:function(){this.valueInit()}},mounted(){this.valueInit()},methods:{valueInit(){let e=[];if(this.value){let t=[],i=[],a=[];if(this.config){if(this.config.hasOwnProperty("id")){let e=y["a"].getValueByConfigKey(this,this.config,"id");e&&(t=e.split(",").trim())}if(this.config.hasOwnProperty("name")){let e=y["a"].getValueByConfigKey(this,this.config,"name");e&&(a=e.split(",").trim())}if(this.config.hasOwnProperty("code")){let e=y["a"].getValueByConfigKey(this,this.config,"code");e&&(i=e.split(",").trim())}}let s=this.value.split(",").trim();s.forEach((s,l)=>{let n={name:s};t.length>l&&(n["id"]=t[l]),a.length>l&&(n["name"]=a[l]),i.length>l&&(n["code"]=i[l]),e.push(n)})}y["a"].arrayEquals(e,this.selectors)||(this.selectors=e)},showDialog(){this.inputWriteable&&(this.isMobile?this.$refs.postSelectorMobileDialog.showDialog():this.$refs.postSelectorDialog.showDialog())},handleRemove(e){this.selectors.remove(e)},clear(){this.selectors=[],this.inputSuffixHeight=30},calacInputSuffixHeight(){this.$refs.tagSpans&&(this.$refs.tagSpans.offsetHeight?this.inputSuffixHeight=this.$refs.tagSpans.offsetHeight+5:this.inputSuffixHeight=30)}}},dn=un,pn=(i("de31"),W(dn,Nl,ql,!1,null,"522f3dfe",null)),mn=pn.exports;mn.install=function(e){e.component(mn.name,mn)};var gn=mn,fn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!==e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[i("div",{staticClass:"el-select",class:{"has-value":e.demensions.length>0},staticStyle:{width:"100%","min-width":"180px"},on:{click:e.showDialog}},[i("div",{ref:"tagSpans",class:{"el-select__tags_readonly":!e.inputWriteable,"el-select__tags":e.inputWriteable},staticStyle:{width:"calc(100% - 25px)"}},[i("span",{staticClass:"tag-wrap"},e._l(e.demensions,(function(t,a){return i("span",{key:a,staticClass:"el-tag el-tag--info el-tag--small",on:{click:function(e){e.stopPropagation()}}},[i("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.name))]),e.inputWriteable?i("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(i){return e.handleRemove(t)}}}):e._e()])})),0)]),e.inputWriteable?i("div",{staticClass:"el-input el-input--suffix"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"},{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],ref:"inputEl",staticClass:"el-input__inner",style:{height:e.inputSuffixHeight+"px",lineHeight:e.inputSuffixHeight+"px"},attrs:{type:"text",readonly:"readonly",name:e.inputName,autocomplete:"off",placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),i("span",{staticClass:"el-input__suffix"},[i("span",{staticClass:"el-input__suffix-inner"},[i("i",{staticClass:"el-icon-circle-close clear-icon",on:{click:function(t){return t.stopPropagation(),e.clear(t)}}}),i("ht-icon",{staticClass:"user-icon",attrs:{name:"users"}})],1)])]):e._e()]),i("ht-field-tail",{attrs:{"field-name":e.inputName,"input-value":e.value}}),i("el-dialog",{staticClass:"dialog-selector__wrapper",class:{"mobile-dialog":e.isMobile},attrs:{title:e.t("ht.selector.dimensionTitle"),visible:e.dialogVisible,top:"6vh","before-close":e.handleClose,"close-on-click-modal":!1,"append-to-body":e.appendToBody},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"dialog-selector__body"},[i("el-input",{attrs:{size:"small",clearable:"",placeholder:e.searchPlaceholder},on:{clear:e.reset},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.searchWord,callback:function(t){e.searchWord=t},expression:"searchWord"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix",title:e.t("ht.common.search")},on:{click:e.search},slot:"prefix"})]),i("ht-list-selector",{ref:"selector",staticClass:"post-selector",attrs:{title:e.t("ht.selector.dimensionList"),data:e.data,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField,mode:e.mode},on:{reset:e.reset,"row-click":function(t){return e.$emit("row-click",t)},"page-change":function(t){return e.$emit("page-change",t)},"size-change":function(t){return e.$emit("size-change",t)}},scopedSlots:e._u([{key:"detail",fn:function(t){var a=t.item;return[i("ht-icon",{staticClass:"follow-theme-color",staticStyle:{"margin-left":"15px",width:"36px",height:"36px"},attrs:{name:"demension"}}),i("div",{staticClass:"selector-item__detail"},[i("div",{staticClass:"selector-detail__name"},[i("label",[e._v(e._s(a[e.selectLabel]))]),i("span",[e._v("("+e._s(a["code"])+")")])])])]}},{key:"selected",fn:function(t){var a=t.select;return[i("ht-icon",{staticClass:"follow-theme-color",staticStyle:{"margin-left":"15px",width:"36px",height:"36px"},attrs:{name:"demension"}}),i("p",{staticClass:"selector-selected__label",attrs:{title:a[e.selectLabel]+(a["code"]?"("+a["code"]+")":"")}},[e._v("\n            "+e._s(a[e.selectLabel]+(a["code"]?"("+a["code"]+")":""))+"\n          ")])]}}],null,!1,3953077603),model:{value:e.demensions,callback:function(t){e.demensions=t},expression:"demensions"}})],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleDialogSure}},[e._v("\n        "+e._s(e.t("ht.common.confirm"))+"\n      ")]),i("el-button",{attrs:{size:"small"},on:{click:e.handleDialogCancel}},[e._v("\n        "+e._s(e.t("ht.common.cancle"))+"\n      ")])],1)])],1):e._e()},yn=[],bn={name:"HtDimensionSelector",components:{HtFieldTail:ue,HtListSelector:Ma},mixins:[pe["a"],de["a"],me["a"],kt["a"],Le],props:{searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.nameCode")}},value:String,selectLabel:String,single:{type:Boolean,default:!1},config:Object,data:{type:Array,default:()=>[]},tableColumns:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},quickSearchProps:{type:String,required:!0},appendToBody:{type:Boolean,default:!1},mode:{type:String}},data(){return{inputSuffixHeight:30,demensions:[],dialogVisible:!1,searchWord:null,loading:!1}},computed:{primaryField:function(){return this.config&&this.config.hasOwnProperty("id")?"id":this.config&&this.config.hasOwnProperty("code")?"code":this.selectLabel}},watch:{demensions:function(e){let t=[],i=[],a=[],s=[];e&&e.constructor===Array&&e.length>0&&e.forEach(e=>{t.push(e.name),e.hasOwnProperty("id")&&i.push(e.id),e.hasOwnProperty("code")&&s.push(e.code),e.hasOwnProperty("demName")&&a.push(e.demName)}),this.config&&(this.config.hasOwnProperty("id")&&y["a"].setValueByConfigKey(this,this.config,"id",i.join(",")),this.config.hasOwnProperty("code")&&y["a"].setValueByConfigKey(this,this.config,"code",s.join(",")),this.config.hasOwnProperty("demName")&&y["a"].setValueByConfigKey(this,this.config,"demName",a.join(","))),this.$emit("valueChange",t.join(","),e),Object(ji["setTimeout"])(()=>{e.length>0?this.calacInputSuffixHeight():this.inputSuffixHeight=30,this.$refs.inputEl&&(this.$refs.inputEl.focus(),this.$refs.inputEl.blur())},10)},value:function(){this.valueInit()}},mounted(){this.valueInit()},methods:{search(){this.loading||this.$emit("search",this.searchWord)},reset(){this.$emit("reset"),this.searchWord=null},valueInit(){let e=[];if(this.value){let t=[],i=[],a=[];if(this.config){if(this.config.hasOwnProperty("id")){let e=y["a"].getValueByConfigKey(this,this.config,"id");e&&(t=e.split(",").trim())}if(this.config.hasOwnProperty("code")){let e=y["a"].getValueByConfigKey(this,this.config,"code");e&&(a=e.split(",").trim())}if(this.config.hasOwnProperty("demName")){let e=y["a"].getValueByConfigKey(this,this.config,"demName");e&&(i=e.split(",").trim())}}let s=this.value.split(",").trim();s.forEach((s,l)=>{let n={name:s};t.length>l&&(n["id"]=t[l]),a.length>l&&(n["code"]=a[l]),i.length>l&&(n["demName"]=i[l]),e.push(n)})}y["a"].arrayEquals(e,this.demensions)||(this.demensions=e)},showDialog(){this.inputWriteable&&(this.dialogVisible=!0,Object(ji["setTimeout"])(()=>{this.$refs.selector.onShow()}))},handleClose(e){this.$refs.selector.onHide(),e&&e()},handleDialogSure(){this.$emit("select-data",this.$refs.selector.getSelectedData()),this.dialogVisible=!1,this.$refs.selector.onHide(!0)},handleDialogCancel(){this.dialogVisible=!1,this.$refs.selector.onHide()},handleRemove(e){this.demensions.remove(e)},clear(){this.demensions=[]},calacInputSuffixHeight(){this.$refs.tagSpans&&(this.$refs.tagSpans.offsetHeight?this.inputSuffixHeight=this.$refs.tagSpans.offsetHeight+5:this.inputSuffixHeight=30)}}},_n=bn,vn=(i("ffdb"),W(_n,fn,yn,!1,null,"09089b10",null)),wn=vn.exports;wn.install=function(e){e.component(wn.name,wn)};var Sn=wn,Cn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"inputs"},[e.isMobile?i("user-selector-mobile-dialog",{ref:"userSelectorMobileDialog",attrs:{title:e.title,"append-to-body":e.appendToBody,data:e.data,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField},on:{search:e.handleSearch,reset:e.handleReset,"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("on-confirm",t)},"page-change":e.handlePageChange},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}}):i("user-selector-dialog",{ref:"userSelectorDialog",attrs:{title:e.title,"append-to-body":e.appendToBody,data:e.data,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField,mode:e.mode},on:{"filter-type-change":e.handleFilterTypeChange,search:e.handleSearch,reset:e.handleReset,"page-change":e.handlePageChange,"size-change":e.handleSizeChange,"contact-group-change":e.loadContactUser,"load-org-user":e.loadOrgUser,"load-policy-user":e.loadPolicyUser,"load-role-user":e.loadRoleUser,"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("on-confirm",t)}},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}})],1)},Dn=[],xn={name:"HtUserDialog",components:{UserSelectorDialog:ks,UserSelectorMobileDialog:Ls},mixins:[kt["a"]],props:{searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.userAndAccount")}},value:String,single:Boolean,config:Object,appendToBody:{type:Boolean,default:!1},selectCurrent:{type:Boolean,default:!1},title:{type:String,default(){return Object(Me["c"])("ht.selector.userTitle")}},quickSearchProps:{type:String,default:"fullname,account"},pageSize:{type:Number,default:20},selectLabel:{type:String,default:"fullname"},currentSelectUsers:Array},data(){return{mode:null,filterType:"contact",currentGroup:null,currentOrg:null,currentPolicy:null,currentRole:null,searchWord:null,data:[],pagination:{page:1,pageSize:this.pageSize,total:0,showTotal:!0},selectors:[]}},computed:{primaryField:function(){return this.config&&this.config.hasOwnProperty("id")?"id":this.config&&this.config.hasOwnProperty("account")?"account":this.selectLabel}},mounted(){this.data&&0!=this.data.length||this.handleLoad()},methods:{handleSearch(e){e&&e.trim()?(this.searchWord=e,this.mode="search",this.handleLoad()):this.handleReset()},handleReset(){this.searchWord=null,this.mode=null,this.handleLoad()},handleSizeChange(e){this.pagination.pageSize=e,this.handlePageChange(this.pagination.page)},handlePageChange(e){if("filter"!=this.mode)this.handleLoad(e);else switch(this.filterType){case"contact":this.loadContactUser(this.currentGroup,e);break;case"org":this.loadOrgUser(this.currentOrg,e);break;case"policy":this.loadPolicyUser(this.currentPolicy,e);break;case"role":this.loadRoleUser(this.currentRole,e);break}},handleFilterTypeChange(e){this.filterType=e},showDialog(){this.selectors=this.currentSelectUsers?this.currentSelectUsers:[],this.isMobile?this.$refs.userSelectorMobileDialog.showDialog():this.$refs.userSelectorDialog.showDialog()},getPageBean(e){const t={...this.pagination};return delete t["total"],t.page=e||1,t},handleLoad(e){const t=this.getQueryFilter(e);this.data=this.data||[],this.loadAllUser(t)},getQueryFilter(e){const t={querys:[],pageBean:this.getPageBean(e)};if(this.quickSearchProps&&this.quickSearchProps.constructor==String&&this.searchWord){const e=this.quickSearchProps.split(",");e.forEach(e=>{let i={property:e,value:this.searchWord,group:"main",operation:"LIKE",relation:"OR"};t.querys.push(i)})}return t},loadAllUser(e){this.$requestConfig.getUserList(e).then(e=>{const{rows:t,page:i,pageSize:a,total:s}=e;this.isMobile&&i>1?this.data=this.data.concat(t):this.data=t;const l={page:i,pageSize:a,total:s};this.$set(this,"pagination",l)})},loadContactUser(e,t){this.mode="filter",this.currentGroup=e;const i={pageBean:this.getPageBean(t)};"all"!=e&&(i.contactGroupId=e),this.$requestConfig.getContactUser&&this.$requestConfig.getContactUser(i).then(e=>{if(e.state&&e.value){const{rows:t,page:i,pageSize:a,total:s}=e.value;this.isMobile&&i>1?this.data=this.data.concat(t):this.data=t;const l={page:i,pageSize:a,total:s};this.$set(this,"pagination",l)}})},loadOrgUser(e,t){this.mode="filter",this.currentOrg=e;let i={pageBean:this.getPageBean(t),querys:[]},a={property:"uo.path_",value:e.path,group:"main",operation:"RIGHT_LIKE",relation:"AND"};e.path&&i.querys.push(a),this.loadAllUser(i)},loadRoleUser(e,t){this.mode="filter",this.currentRole=e;let i={pageBean:this.getPageBean(t),querys:[]};e&&(i.params={role_id_:e}),this.loadAllUser(i)},loadPolicyUser(e,t){this.mode="filter",this.currentOrg=e;let i={pageBean:this.getPageBean(t),querys:[]},a=null;const{type:s,ids:l,paths:n}=e;switch(s){case"1":a={property:"uo.id_",value:e.id,group:"main",operation:"EQUAL",relation:"AND"},i.querys.push(a),this.loadAllUser(i);break;case"2":a={property:"uo.path_",value:e.path,group:"main",operation:"RIGHT_LIKE",relation:"AND"},i.querys.push(a),this.loadAllUser(i);break;case"3":l.forEach(e=>{a={property:"uo.id_",value:e,group:"main",operation:"EQUAL",relation:"OR"},i.querys.push(a)}),this.loadAllUser(i);break;case"4":n.forEach(e=>{a={property:"uo.path_",value:e,group:"main",operation:"RIGHT_LIKE",relation:"OR"},i.querys.push(a)}),this.loadAllUser(i);break}}}},Tn=xn,Pn=(i("0355"),W(Tn,Cn,Dn,!1,null,"0b89fd9d",null)),En=Pn.exports;En.install=function(e){e.component(En.name,En)};var On=En,kn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"inputs"},[i("el-dialog",{staticClass:"dialog-selector__wrapper",attrs:{title:e.dialogTitle,visible:e.dialogVisible,top:"6vh","before-close":e.handleClose,"close-on-click-modal":!1,"append-to-body":e.appendToBody,"destroy-on-close":e.destroyOnClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-container",[i("el-main",[i("ht-selector",{ref:"selector",attrs:{data:e.data,pagination:e.pagination,"table-columns":e.tableColumns,"select-label":e.selectLabel,single:e.single,"quick-search-props":e.quickSearchProps,"search-placeholder":e.searchPlaceholder},on:{load:e.load,"current-selected":e.handleCurrentSelect},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small",disabled:e.isDisabled},on:{click:e.handleDialogSure}},[e._v("\n        "+e._s(e.$t("ht.common.confirm"))+"\n      ")]),i("el-button",{attrs:{size:"small"},on:{click:e.handleDialogCancel}},[e._v("\n        "+e._s(e.$t("ht.common.cancle"))+"\n      ")])],1)],1)],1)},In=[],$n={data(){return{isDisabled:!0}},methods:{handleCurrentSelect(e){e.length>0?this.isDisabled=!1:this.isDisabled=!0}}},An={name:"HtDialog",components:{HtSelector:Yi},mixins:[$n],props:{value:String,single:{type:Boolean,default:!1},data:{type:Array,default:()=>[]},tableColumns:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},selectLabel:{type:String,default:"name"},searchPlaceholder:{type:String,default(){return`${Object(Me["c"])("ht.common.enter")}${Object(Me["c"])("ht.common.search")}${Object(Me["c"])("ht.common.content")}`}},dialogTitle:{type:String,default(){return Object(Me["c"])("ht.selector.dialog")}},appendToBody:{type:Boolean,default:!1},quickSearchProps:{type:String,required:!0},destroyOnClose:{type:Boolean,default:!1}},data(){return{inputName:null,selectors:[],dialogVisible:!1}},methods:{showDialog(e){this.dialogVisible=!0,e||(e=[]),Object(ji["setTimeout"])(()=>{this.$refs.selector.onShow(e)})},handleClose(e){this.$refs.selector.onHide(),e&&e()},handleDialogSure(){this.dialogVisible=!1,this.$refs.selector.onHide(!0),this.$emit("onConfirm",this.selectors)},handleDialogCancel(){this.dialogVisible=!1,this.$refs.selector.onHide()},handleRemove(e){this.selectors.remove(e)},load(e,t){this.$emit("load",e,t)}}},Bn=An,Mn=(i("8a57"),W(Bn,kn,In,!1,null,"9db0561c",null)),Ln=Mn.exports;Ln.install=function(e){e.component(Ln.name,Ln)};var Fn=Ln,Nn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"inputs"},[i("el-tooltip",{attrs:{placement:e.tooltipplacement||e.defualtTooltipplacement,disabled:e.inputWriteable&&e.errors&&!e.errors.has("custom-form."+e.inputName)}},[e.errors&&e.errors.first?i("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n      "+e._s(e.errors.first("custom-form."+e.inputName))+"\n    ")]):e._e(),e.inputWriteable?i("div",{staticClass:"el-select",class:{"has-value":e.value},staticStyle:{width:"100%"}},[i("div",{ref:"tagSpans",staticClass:"el-select__tags",style:{width:"calc(100% - 10px - "+e.inputSuffixWidth+"px)"},on:{click:e.showEditInput}},[i("span",{staticClass:"tag-wrap"},e._l(e.inputVal,(function(t,a){return i("span",{key:t.value,staticClass:"el-tag el-tag--info el-tag--small",on:{click:e.showEditInput}},[i("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.value))]),i("i",{staticClass:"el-tag__close el-icon-close",on:{click:function(t){return t.stopPropagation(),e.removeSelectOrg(a)}}})])})),0)]),i("div",{staticClass:"el-input el-input--suffix"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.inputVal,expression:"inputVal"},{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],staticClass:"el-input__inner",style:{height:e.inputSuffixHeight+"px"},attrs:{type:"text",readonly:"readonly",name:e.inputName,autocomplete:"off",placeholder:e.placeholder},domProps:{value:e.inputVal},on:{click:e.showEditInput,input:function(t){t.target.composing||(e.inputVal=t.target.value)}}}),e.isAllowCustom&&e.isEditInputShow?i("el-input",{ref:"editInputRef",staticClass:"edit-input",style:{right:e.inputSuffixWidth-1+"px",width:"auto!important",height:e.inputSuffixHeight-4+"px"},attrs:{clearable:"",size:"mini"},on:{blur:e.editInputBlur},model:{value:e.customValue,callback:function(t){e.customValue=t},expression:"customValue"}}):e._e(),i("span",{ref:"inputSuffix",staticClass:"el-input__suffix",on:{click:e.showDialog}},[i("span",{staticClass:"el-input__suffix-inner",class:{"has-clear-all":e.value}},[i("i",{staticClass:"el-icon-circle-close clear-icon",on:{click:function(t){return t.stopPropagation(),e.clear(t)}}}),i("el-button",{staticStyle:{margin:"0 !important"},attrs:{slot:"append",type:"info",size:"mini"},slot:"append"},[i("i",{class:e.custdialog.icon?"el-input__icon "+e.custdialog.icon:"el-input__icon icon-duihuakuang",style:{fontSize:"17px",lineHeight:e.inputSuffixHeight+"px"}}),e._v("\n              "+e._s(e.custdialog.name)+"\n            ")])],1)])],1)]):e._e()]),e.inputWriteable?e._e():i("span",e._l(e.inputVal,(function(t){return i("span",{key:t.value,staticClass:"el-tag el-tag--info el-tag--small",staticStyle:{"margin-right":"8px"},on:{click:function(e){e.stopPropagation()}}},[i("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.value))])])})),0),e.isMobile?i("custom-mobile-dialog",{ref:"customMobileDialogRef",attrs:{"model-name":e.modelName,custdialog:e.custdialog,"sub-index":e.subIndex,"sun-index":e.sunIndex,"sub-path":e.subPath,"current-sub-data":e.currentSubData},on:{calacInputSuffixHeight:e.calacInputSuffixHeight,updateInput:e.updateInput}}):i("custom-dialog",{ref:"customDialogRef",attrs:{"model-name":e.modelName,custdialog:e.custdialog,"sub-index":e.subIndex,"sun-index":e.sunIndex,"sub-path":e.subPath,"current-sub-data":e.currentSubData,"is-read-only":!e.inputWriteable},on:{calacInputSuffixHeight:e.calacInputSuffixHeight,updateInput:e.updateInput},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),i("span",{staticStyle:{display:"none"}},[e._t("labeldesc",[e._v(e._s(e.inputName))])],2),i("ht-field-tail",{attrs:{"field-name":e.inputName,"input-value":e.value}})],1)},qn=[],Vn={mixins:[kt["a"]],data(){return{pagination:{},dialogData:[],total:0,form:{},itemSavestate:{}}},methods:{setDialogData(e){e.forEach(e=>{delete e.row_id}),this.isMobile&&this.pagination&&this.pagination.page>1?this.dialogData=this.dialogData.concat(e):this.dialogData=e.map((e,t)=>{const i=(this.pagination.page-1)*this.pagination.pageSize;return{...e,custom_dialog_rowId:"current_row_"+(t+i)}})},getDialoglistJson(e){let t;return this.isMobile?this.$showLoading():t=d["Loading"].service({fullscreen:!0,text:this.$t("ht.customDialog.searching")}),this.$requestConfig.request({url:e.queryUrl,method:e.requestType||"post",data:e.pageBean}).then(i=>{this.isMobile?this.$cancelLoading():t.close();const a=e.listKey?e.listKey:e.dsType&&"dataSource"==e.dsType?"rows":"";a||console.warn(this.$t("ht.customDialog.customDialogWarnMsg"));let s=[];s=i&&i.constructor===Array?i:y["a"].getValueByPath(i,a);const l=y["a"].getValueByPath(i,e.pageKey),n=y["a"].getValueByPath(i,e.pageSizeKey),o=y["a"].getValueByPath(i,e.totalKey);l&&(this.pageResult={page:l,pageSize:n,total:o}),this.setTotal(o);let r={page:l,pageSize:n,showTotal:!0,total:o};this.setPagination(r),this.setTodoRows(s)}).catch(e=>{this.isMobile?this.$cancelLoading():t.close()})},setPaginationSize(e){this.pagination.pageSize=e},setPaginationPageNum(e){this.pagination.page=e},getTreeData(e){return new Promise(t=>{"GET"==e.requestType&&this.$requestConfig.request({url:e.url}).then(e=>{t(e.data)})})},setPagination(e){this.pagination=e},setTodoRows(e){let t=[];for(let i=0;i<e.length;i++){let a=e[i],s=Object.keys(a),l={};s.forEach(e=>{l[e.toLowerCase()]=a[e]}),t.push(l)}this.setDialogData(t)},setTotal(e){this.total=e}}},Rn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{visible:e.customDialogShowList,title:e.customDialog.name,"close-on-click-modal":!1,"before-close":e.dialogCancel,"append-to-body":"",top:"6vh",width:"60%"},on:{"update:visible":function(t){e.customDialogShowList=t},opened:e.afterOpen}},[i("el-container",{staticStyle:{overflow:"auto"},style:e.style},[2==e.customDialog.style?i("el-aside",{directives:[{name:"show",rawName:"v-show",value:e.treeShow,expression:"treeShow"}],staticStyle:{width:"23%"}},[i("el-card",[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(e.leftTreeTitle))])]),i("el-tree",{ref:"combinationTree",attrs:{data:e.combinationTreeData,props:e.defaultProps,"node-key":e.nodeKey,"highlight-current":"","check-on-click-node":!0,lazy:"",load:e.loadTree},on:{"node-click":e.combiTreeClick}})],1)],1):e._e(),2==e.customDialog.style?i("el-divider",{attrs:{direction:"vertical"}}):e._e(),i("el-container",[e.querysShow?i("el-header",{staticClass:"middle-header"},[e._l(e.conditionBind,(function(t,a){return i("div",{key:a,staticClass:"search-item"},[i("p",{staticStyle:{"font-size":"14px"}},[e._v(e._s(t.comment)+":")]),"1"==t.controllerType?i("div",[i("el-input",{staticStyle:{width:"180px",padding:"10px 0",margin:"0 5px 0 5px"},attrs:{size:"small",clearable:"",placeholder:e.placeholders[a],"prefix-icon":"el-icon-search"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEnterFun(t)}},model:{value:e.queryParams[a][t.field],callback:function(i){e.$set(e.queryParams[a],t.field,i)},expression:"queryParams[index][condition.field]"}})],1):e._e(),"2"==t.controllerType?i("div",{staticStyle:{"margin-right":"10px"}},e._l(t.config.options,(function(s,l){return i("el-radio",{key:l,attrs:{label:s.key},model:{value:e.queryParams[a][t.field],callback:function(i){e.$set(e.queryParams[a],t.field,i)},expression:"queryParams[index][condition.field]"}},[e._v("\n                "+e._s(s.value)+"\n              ")])})),1):e._e(),"3"==t.controllerType?i("div",{staticStyle:{"margin-right":"10px"}},["static"==t.config.choiceType?i("ht-select",{attrs:{placeholder:e.quickSearch,options:t.config.options},model:{value:e.queryParams[a][t.field],callback:function(i){e.$set(e.queryParams[a],t.field,i)},expression:"queryParams[index][condition.field]"}}):i("eip-select-dia",{attrs:{placeholder:e.quickSearch,ganged:{alias:t.config.customQuery.alias,valueBind:t.config.customQuery.valueBind,noInit:"",labelBind:t.config.customQuery.labelBind,gangedBind:"{}",bind:t.config.bind},multiple:!1,filterable:!1,"allow-create":!1,selectlist:[],"query-params":e.queryParams},model:{value:e.queryParams[t.field],callback:function(i){e.$set(e.queryParams,t.field,i)},expression:"queryParams[condition.field]"}})],1):e._e(),"4"==t.controllerType?i("div",{staticStyle:{"margin-right":"10px"}},[i("eip-tag",{attrs:{"tag-key":t.config.tag,placeholder:e.quickSearch,filterable:t.config.filterable,expand:t.config.expand},model:{value:e.queryParams[a][t.field],callback:function(i){e.$set(e.queryParams[a],t.field,i)},expression:"queryParams[index][condition.field]"}})],1):e._e()])})),e.conditionBind&&e.conditionBind.length>0?i("div",{staticClass:"btn-wrap"},[i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search(!0)}}},[e._v("\n              "+e._s(e.t("ht.common.search"))+"\n            ")]),i("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("\n              "+e._s(e.t("ht.common.reset"))+"\n            ")])],1):e._e()],2):e._e(),i("el-main",{staticClass:"custom-dialog_main"},[i("el-table",{ref:"orgTable",staticClass:"org-table",staticStyle:{width:"100%"},attrs:{data:e.dialogData,stripe:"",border:"",size:"medium","row-key":"custom_dialog_rowId"},on:{"row-click":e.orgRowClick,"selection-change":e.orgTableSelection,select:e.onTableSelect,"select-all":e.selectAll}},[1!=e.customDialog.selectNum?i("el-table-column",{attrs:{type:"selection",align:"center","reserve-selection":"",width:"55"}}):e._e(),1===e.customDialog.selectNum?i("el-table-column",{attrs:{align:"center",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-radio",{staticClass:"textRadio",attrs:{label:t.$index},on:{"selection-change":e.orgTableSelection},model:{value:e.tableRadioVal,callback:function(t){e.tableRadioVal=t},expression:"tableRadioVal"}},[e._v("\n                   \n                ")])]}}],null,!1,918943478)}):e._e(),i("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:e.t("ht.common.index")}}),e._l(e.displayfield,(function(e){return i("el-table-column",{key:e.field,staticStyle:{width:"100%"},attrs:{"show-overflow-tooltip":!0,prop:e.field,label:e.comment}})}))],2)],1),i("el-footer",[e.customDialog.needPage?i("el-row",{staticStyle:{"padding-top":"15px","justify-content":"space-between"},attrs:{type:"flex",justify:"end"}},[2==e.customDialog.style?i("el-button",{attrs:{icon:e.toggleBtn,size:"mini",type:"default"},on:{click:e.toggleTree}}):e._e(),i("el-pagination",{attrs:{small:"","current-page":e.pagination.page,"page-sizes":[10,20,50,100],"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)],1)],1),i("span",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",type:"primary",disabled:e.isDisabledConfirmBtn},on:{click:e.dialogConfirm}},[e._v("\n        "+e._s(e.t("ht.common.confirm"))+"\n      ")]),i("el-button",{attrs:{size:"small"},on:{click:e.dialogCancel}},[e._v("\n        "+e._s(e.t("ht.common.cancle"))+"\n      ")])],1)],1),i("el-dialog",{attrs:{title:e.t("ht.customDialog.title"),width:"500px",visible:e.dialogVisible,"before-close":e.handleClose,"close-on-click-modal":!1,top:"6vh"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("table",{staticClass:"form-table",staticStyle:{"margin-left":"20px",width:"90%"},attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},e._l(e.conditionfieldTree,(function(t,a){return i("tbody",{key:a},["4"==t.defaultType?i("tr",[i("th",{attrs:{width:"130px"}},[e._v(e._s(t.comment)+":")]),i("td",["date"!=t.type?i("ht-input",{staticStyle:{width:"100%"},attrs:{type:"text",placeholder:e.t("ht.common.enter")+t.comment,autocomplete:"off"},model:{value:t.paramVal,callback:function(i){e.$set(t,"paramVal",i)},expression:"item.paramVal"}}):e._e(),"date"==t.type?i("ht-date",{staticStyle:{width:"100%"},attrs:{placeholder:e.t("ht.common.enter")+t.comment,format:"yyyy-MM-dd"},model:{value:t.paramVal,callback:function(i){e.$set(t,"paramVal",i)},expression:"item.paramVal"}}):e._e()],1)]):e._e()])})),0),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("\n        "+e._s(e.t("ht.common.confirm"))+"\n      ")]),i("el-button",{on:{click:e.handleClose}},[e._v(e._s(e.t("ht.common.cancle")))])],1)]),i("el-dialog",{attrs:{visible:e.customDialogShowTree,title:e.customDialog.name,"close-on-click-modal":!1,"before-close":e.dialogCancelTree,"append-to-body":"",top:"6vh",width:"500px"},on:{"update:visible":function(t){e.customDialogShowTree=t}}},[i("el-container",{staticStyle:{overflow:"auto"},style:e.style},[i("el-tree",{ref:"tree",staticStyle:{width:"100%"},attrs:{data:e.props1,props:e.defaultProps,"node-key":e.nodeKey,"highlight-current":"","show-checkbox":-1===e.customDialog.selectNum,"check-on-click-node":!0,"check-strictly":!1,lazy:"",load:e.loadTree,"default-expanded-keys":e.defaultExpandedKeys},on:{"node-click":e.treeClick,"check-change":e.getChecked}})],1),i("span",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.dialogTreeConfirm}},[e._v("\n        "+e._s(e.t("ht.common.confirm"))+"\n      ")]),i("el-button",{attrs:{size:"small"},on:{click:e.dialogCancelTree}},[e._v("\n        "+e._s(e.t("ht.common.cancle"))+"\n      ")])],1)],1)],1)},zn=[],Hn=i("c5e1"),Un=i.n(Hn),Kn={name:"CustomDialog",mixins:[Vn,Le,pe["a"],de["a"],me["a"]],props:{custdialog:{type:Object,default:()=>({})},value:String,subIndex:Number,sunIndex:Number,subPath:String,currentSubData:Array,isReadOnly:{type:Boolean,default:!1}},data(){return{isEditInputShow:!1,customValue:"",defualtTooltipplacement:"bottom",dialogVisible:!1,pageParam:{},conditionfieldTree:[],data:{qxdd:{}},inputSuffixWidth:0,placeholderBo:"",quickSearch:"",conditionBind:[],nodeKey:"ID_",customDialogShowList:!1,customDialogShowTree:!1,selectOrgProps:{label:"name"},style:"",selectOrgs:[],inputSuffixHeight:33,config:null,updating:!1,displayfield:[],customDialog:{},queryParam:"",props1:[],showData:[],checkBoxDataAll:[],defaultProps:{children:"children",label:"label",isLeaf:"isLeaf"},propsData:[],querysShow:!1,tableRadioVal:"",isCurrentChange:!1,param:[],treeList:[],displayField:{},queryParams:[],placeholders:[],oldselectOrgs:[],combinationTreeData:[],combiTreeDisplayField:[],combinationTreeQuerys:[],combinationRule:{},toggleBtn:"el-icon-arrow-left",treeShow:!0,transtionWidth:"25%",leftTreeTitle:"",writeable:!0,fixedParams:{},executeScriptResult:null,isDisabledConfirmBtn:!0}},computed:{defaultExpandedKeys:function(){return this.props1&&this.props1.length>0&&this.props1[0][this.nodeKey]?[this.props1[0][this.nodeKey]]:[]}},watch:{dialogData:{handler(e){if(this.value&&e.length>0){const e=this.custdialog.custDialog.mappingConf.find(e=>this.modelName==="data."+e["target"][0]),t=e&&e.from.toLowerCase();let i=JSON.parse(this.customDialog.resultfield),a=i.find(e=>e.comment.toLowerCase()===t);a&&a.field}},immediate:!0,deep:!0},selectOrgs(e){e&&e.length?this.isDisabledConfirmBtn=!1:this.isDisabledConfirmBtn=!0}},mounted(){this.$nextTick(()=>{this.value&&!this.isReadOnly&&this.showDialog(!0)})},methods:{showDialog(e=!1){this.selectOrgs=[];const t=this;this.fixedParams={};var i=this.custdialog.custDialog.alias;this.$requestConfig.getCustomDialogByAlias(i).then(a=>{if(!a||!a.alias)return void this.$message.error(this.t("ht.customDialog.errorMsg",{alias:i}));if(1==a.style){var s=JSON.parse(a.displayfield);t.nodeKey=s.id}if(a.needPage&&"POST"===a.requestType){let e={};this.getLastKeyByPath(e,a.pageKey,1),this.getLastKeyByPath(e,a.pageSizeKey,10),this.getLastKeyByPath(e,a.totalKey,!0);const t=y["a"].parseExp(a.dataParam,e,!0);if(t){const e=JSON.parse(t);e.pageBean&&(this.pagination={...e.pageBean})}}let l=t.custdialog.custDialog.conditions;t.param=[],l.length>0&&l.forEach(e=>{if(e.bind&&("3"==e.defaultType||e.bind.startsWith("data.searchForm"))){let i={};i.field=e.field,i.bind=e.bind,i.bindType=e.bindType,t.param.push(i)}3===e.bindType&&t.$requestConfig.executeScript(e.bind).then(e=>{t.executeScriptResult=e&&e.value})});let n=JSON.parse(a.conditionfield);t.quickSearch="",t.conditionBind=[];let o=[],r=[];if(n.length>0&&(n.forEach(e=>{var i={};"1"==e.defaultType&&(i[e.field]="",o.push(i),t.conditionBind.push(e),r.push(this.t("ht.common.enter")+e.comment)),"2"==e.defaultType&&e.defaultValue&&(t.fixedParams[e.field]=e.defaultValue)}),this.$set(this,"queryParams",o),this.$set(this,"placeholders",r)),t.quickSearch,t.querysShow=!0,t.quickSearch=this.t("ht.common.enter")+this.quickSearch+this.t("ht.common.search"),t.style="height:"+a.height+"px",window.screen.height&&window.screen.height<=900&&(this.style="height:440px"),0==a.style||2==a.style)setTimeout(()=>{t.customDialogShow({alias:i,customDialog:a},e)},100);else if(1==a.style){t.pageParam={alias:i,customDialog:a},t.customDialog=a;let s={};if(t.conditionfieldTree=[],a.conditionfield&&(t.conditionfieldTree=JSON.parse(a.conditionfield),t.conditionfieldTree.length>0))for(let e=t.conditionfieldTree.length-1;e>=0;e--)"4"==t.conditionfieldTree[e].defaultType&&(s[t.conditionfieldTree[e].field]=t.conditionfieldTree[e].comment);e||("{}"!=JSON.stringify(s)?t.dialogVisible=!0:t.customDialogTreeShow(t.pageParam))}})},treeClick(e){1===this.customDialog.selectNum&&(this.propsData=[],this.propsData.push(e))},getChecked(){-1===this.customDialog.selectNum&&(this.propsData=this.$refs.tree.getCheckedNodes())},customDialogShow(e,t=!1){if(t||(this.customDialogShowList=!0),this.customDialog=e.customDialog,this.customDialog.queryUrl="dataSource"==this.customDialog.dsType?"${form}/form/customDialog/v1/getListData?alias="+this.customDialog.alias+"&mapParam="+(this.customDialog.mapParam?this.customDialog.mapParam:""):this.customDialog.url,this.dialogData.length<1){if(this.search(),this.displayfield=JSON.parse(e.customDialog.displayfield),"dataSource"==this.customDialog.dsType)for(var i=0;i<this.displayfield.length;i++)this.displayfield[i].field=this.displayfield[i].field.toLowerCase()}else this.dialogData.length>=1&&this.search();if(this.dialogData.length>0&&0==this.displayfield.length&&(this.search(),this.displayfield=JSON.parse(e.customDialog.displayfield),"dataSource"==this.customDialog.dsType))for(var a=0;i<this.displayfield.length;a++)this.displayfield[a].field=this.displayfield[a].field.toLowerCase()},customDialogTreeShow(e){var t=this.customDialog;let i={},a="",s="";if(this.conditionfieldTree.length>0){for(let e=0;e<this.conditionfieldTree.length;e++)if("4"==this.conditionfieldTree[e].defaultType){let t=this.conditionfieldTree[e].paramVal;if(!t)continue;let a=this.conditionfieldTree[e].field;i[a]=t}else if("2"==this.conditionfieldTree[e].defaultType){let t=this.conditionfieldTree[e].defaultValue;if(!t)continue;let a=this.conditionfieldTree[e].field;i[a]=t}if(this.param){const e=y["a"].getOnlineFormInstance(this);this.param.forEach(t=>{let a=y["a"].getValueByPath(e,t.bind);a&&(i[t.field]=a)})}if("{}"!=JSON.stringify(i)){let e=JSON.parse(this.customDialog.displayfield).pid;for(let t in i)if(e==t){s=i[t];break}a=JSON.stringify(i),a=a.substring(1,a.length-1)}}var l="dataSource"==t.dsType?"GET":t.requestType?t.requestType:"POST",n="${form}/form/customDialog/v1/getTreeData?alias="+e.alias+"&mapParam="+a,o={};if("dataSource"!=t.dsType){n=t.url;var r=t.dataParam;let e={};if(t.conditionfield)for(var c=JSON.parse(t.conditionfield),h=0;h<c.length;h++){var u=c[h];if("POST"==l)r?e[u.field]=u.defaultValue:o[u.field]=u.defaultValue;else{var d=-1==n.indexOf("?")?"?":"&";n=n+d+u.field+"="+u.defaultValue}}try{this.$requestConfig.getUserId()&&(e.userId=this.$requestConfig.getUserId()),this.$requestConfig.getOrgId()&&(e.orgId=this.$requestConfig.getOrgId()),this.$requestConfig.getPostId()&&(e.postId=this.$requestConfig.getPostId())}catch(m){console.log(this.t("ht.customDialog.getIdError"),m)}r&&(r=y["a"].parseExp(r,e),o=JSON.parse(r))}var p={};p.requestType=l,p.url=n,p.paramsObj=o,this.searchTree(p,s),this.customDialogShowTree=!0},searchTree(e,t){const i=this;let a=this.$requestConfig.request({url:e.url,method:"POST"==e.requestType?"post":"get",data:e.paramsObj});a.then((function(e){let a=JSON.parse(i.customDialog.displayfield);i.displayField=a,i.defaultProps.label=a.displayName,i.treeList=e,t&&(a.pvalue=t),i.props1=i.toTreeData(e,a.id,a.pid,a.displayName,a.pvalue?a.pvalue:0)}))},dialogTreeConfirm(){this.calacInputSuffixHeight();let e=null,t=null;this.$parent.$el&&(e=y["a"].getSomeAttributeFromParentElement(this.$el,"data-index"),e||(e=y["a"].getSubScopeElAndIndex(this.$parent.$el).index),t=y["a"].getSomeAttributeFromParentElement(this.$parent.$parent.$el,"data-index")),this.setDialogData([]);for(var i=JSON.parse(this.customDialog.resultfield),a=new Array([i.length]),s=new Array([i.length]),l=[],n=0;n<i.length;n++)a[n]=i[n].field,s[n]=i[n].comment;var o=this.propsData;if(1===this.customDialog.selectNum){o=this.propsData[0];for(var r="",c=0;c<s.length;c++)r+='"'+s[c]+'":"'+o[a[c]]+'",';""!=r&&(r="{"+r.substring(0,r.length-1)+"}"),l.push(y["a"].parseToJson(r))}else o.forEach((e,t)=>{for(var i="",n=0;n<s.length;n++)i+='"'+s[n]+'":"'+o[a[n]]+'",',i+='"'+s[n]+'":"'+o[t][a[n]]+'",';""!=i&&(i="{"+i.substring(0,i.length-1)+"}"),l.push(y["a"].parseToJson(i))});const h=y["a"].getOnlineFormInstance(this);this.selectOrgs=this.convertComment2Field(l,a),this.custdialog.custDialog.mappingConf.forEach(i=>{var a="";if(l.forEach(e=>{a+=e[i.from]+","}),this.modelName=="data."+i["target"][0])y["a"].setValueByPath(h,"data."+i["target"][0],a.substring(0,a.length-1),e);else if(this.modelName=="searchForm."+i["target"][0])y["a"].setValueByPath(h,"searchForm."+i["target"][0],a.substring(0,a.length-1),e);else{let s=i["target"][0].split("."),l=i["target"][0];4==s.length&&t>=0&&(l=s[0]+"."+s[1]+"["+t+"]."+s[2]+"."+s[3]);const n=a.substring(0,a.length-1);l&&(this.modelName&&this.modelName.endsWith(l)&&this.$emit("updateInput",n),y["a"].setValueByPath(h,`${h.data?"data.":"model."}${l}`,n,e))}}),this.showData=this.propsData?[...this.propsData]:"",this.customDialogShowTree=!1},convertComment2Field(e,t){const i=[];return e&&0!=e.length?(e.forEach(e=>{const a={};Object.entries(e).forEach((e,i)=>{const s=t[i];s&&(a[s]=e[1])}),i.push(a)}),i):i},dialogCancelTree(){this.setDialogData([]),this.customDialogShowTree=!1},search(e){let t=[],i={};"{}"==JSON.stringify(this.pagination)&&(this.pagination={page:1,pageSize:10,showTotal:!0});let a={pageBean:this.pagination};if(e&&(a.pageBean={page:1,pageSize:10,showTotal:!0}),0!=this.queryParams.length&&""!=this.queryParams[0]&&this.conditionBind.forEach((e,i)=>{this.queryParams[i][e.field]&&t.push({property:e.field,value:this.queryParams[i][e.field],group:"main",operation:"LIKE",relation:"AND"})}),this.param&&this.param.forEach(e=>{t.push({property:e.field,value:2===e.bindType?e.bind:3===e.bindType?this.executeScriptResult:this.getCurrentValue(e.bind),group:"main",operation:"LIKE",relation:"AND"})}),this.combinationTreeQuerys&&0!=this.combinationTreeQuerys.length)for(let l=0;l<this.combinationTreeQuerys.length;l++)t.push(this.combinationTreeQuerys[l]);if("dataSource"!=this.customDialog.dsType&&"POST"==this.customDialog.requestType&&this.customDialog.dataParam&&this.customDialog.dataParam.constructor==String){let e=this.param,i={},l={};this.getLastKeyByPath(l,this.customDialog.pageKey,a.pageBean.page),this.getLastKeyByPath(l,this.customDialog.pageSizeKey,a.pageBean.pageSize),this.getLastKeyByPath(l,this.customDialog.totalKey,a.pageBean.total),t&&t.length&&t.forEach(e=>{i[e.property]=e.value});const n=this.getSearchValueByKey();n.pageSize=a.pageBean.pageSize,n.page=a.pageBean.page,n.total=a.pageBean.total;try{this.$requestConfig.getUserId&&(i.userId=this.$requestConfig.getUserId()),this.$requestConfig.getOrgId&&(i.orgId=this.$requestConfig.getOrgId()),this.$requestConfig.getPostId&&(i.postId=this.$requestConfig.getPostId())}catch(s){console.log(this.t("ht.customDialog.getIdError"),s)}const o=y["a"].parseExp(this.customDialog.dataParam,{...i,...n,...this.fixedParams});try{e=JSON.parse(o);const t=JSON.parse(this.customDialog.dataParam),a=t&&t.querys&&t.querys.map(e=>{const t=e.value&&e.value.replace("${","").replace("}","");return{...e,value:n[t]||i[t]||""}});e.querys=a,this.customDialog.needPage?e.pageBean=l:e.pageBean&&(e.pageBean.pageSize=-1);let s={pageBean:e,queryUrl:this.customDialog.queryUrl,requestType:this.customDialog.requestType,dsType:this.customDialog.dsType,listKey:this.customDialog.listKey,pageKey:this.customDialog.pageKey,pageSizeKey:this.customDialog.pageSizeKey,totalKey:this.customDialog.totalKey};this.getDialoglistJson(s).then(()=>{this.checkList()})}catch(s){this.$message.error(`${this.t("ht.customDialog.postRequestParamError")}${e}`)}}else t.length>0?(i=this.handlePostData({pageBean:a.pageBean,querys:t}),this.customDialog.pageBean=i,this.getDialoglistJson(this.customDialog).then(()=>{this.checkList()})):(this.customDialog.pageBean=a,this.getDialoglistJson(this.customDialog).then(()=>{this.checkList()}));this.tableRadioVal=""},getSearchValueByKey(){let e={};return this.queryParams.length>0&&(e=this.conditionBind.reduce((e,t,i)=>(e[t.field]=this.queryParams[i][t.field],e),{})),e},getLastKeyByPath(e,t,i){if(!e||!t||t.constructor!=String)return;if(!/^\w?.*[\w|\]]$/.test(t))return;let a=t.split(".");if(1==a.length)e[t]=i;else{let t=a.length;e[a[t-1]]=i}},reset(){this.queryParams.forEach((e,t)=>{for(let i in e)this.queryParams[t][i]=""});let e={};this.$refs.combinationTree&&(e=this.$refs.combinationTree.store.nodesMap);for(let t in e)e[t].expanded=!1;this.combinationTreeQuerys.splice(0),this.search(!0)},getCurrentValue(e){let t=null;const i=y["a"].getOnlineFormInstance(this),a=e.replace(this.subPath+".","");return t=this.sunIndex||0===this.sunIndex?y["a"].getValueByPath(this.currentSubData[this.subIndex],a,this.sunIndex||0===this.sunIndex?this.sunIndex:null):y["a"].getValueByPath(i,e,this.subIndex||0===this.subIndex?this.subIndex:null),t},checkList(){const e=this;setTimeout(()=>{void 0!=e.checkBoxDataAll&&e.checkBoxDataAll.length>0&&e.checkBoxDataAll.forEach(t=>{let i=e.indexArray(e.dialogData,t);-1!=i&&(e.isCurrentChange=!0)})},300)},toggleRowSelection(e,t){},orgRowClick(e,t,i){if(1===this.customDialog.selectNum)Un()(i.currentTarget.children[0].children[0].children[0]).trigger("click"),this.selectOrgs=[],this.selectOrgs.push(e);else if(1!=this.customDialog.selectNum){this.isCurrentChange=!1;let t=this.selectOrgs&&this.selectOrgs.length>0&&-1!==this.indexArray(this.selectOrgs,e);if(t){this.isCurrentChange=!0;let t=this.indexArray(this.selectOrgs,e);this.selectOrgs.splice(t,1)}this.$refs.orgTable.toggleRowSelection(e)}},orgTableSelection(e){if(this.oldselectOrgs=_.cloneDeep(this.selectOrgs),1!=this.customDialog.selectNum&&!this.isCurrentChange&&e&&e.length>0)if(1!=e.length||this.selectOrgs&&0!=this.selectOrgs.length)if((!this.selectOrgs||0==this.selectOrgs.length)&&e.length>1){this.selectOrgs||(this.selectOrgs=[]);for(let t=e.length-1;t>=0;t--)this.selectOrgs.push(e[t])}else if(this.isCurrentChange&&e.length>=10){if(this.selectOrgs)for(let t=this.selectOrgs.length-1;t>=0;t--){let i=this.indexArray(e,this.selectOrgs[t]);-1!=i&&this.selectOrgs.splice(i,1)}else this.selectOrgs=[];for(let t=0;t<e.length;t++)this.selectOrgs.push(e[t])}else for(let t=e.length-1;t>=0;t--){this.selectOrgs.push(e[t]);break}else this.selectOrgs=e},onTableSelect(e,t){this.isCurrentChange=!1;let i=this.selectOrgs&&this.selectOrgs.length>0&&-1!==this.indexArray(this.selectOrgs,t);if(i){this.isCurrentChange=!0;let e=this.indexArray(this.selectOrgs,t);this.selectOrgs.splice(e,1)}},selectAll(e){if(null!=this.oldselectOrgs&&e.length>0){for(let t=0;t<e.length;t++)-1===this.indexArray(this.oldselectOrgs,e[t])&&this.oldselectOrgs.push(e[t]);this.selectOrgs=_.cloneDeep(this.oldselectOrgs)}else this.selectOrgs=_.cloneDeep(e)},checkNode(e,t,i){if(e.Pid||(e.Pid=e.pid),e.Pid){let i=t.$refs.tree.getNode(e.Pid);i.indeterminate=!0,i.data.Pid&&(t.$refs.tree.getNode(i.data.Pid).indeterminate=!0,this.checkNode(t.$refs.tree.getNode(i.data.Pid).data,t,t.$refs.tree.getNode(i.data.Pid))),i.indeterminate||(i.indeterminate=!0)}else i&&!i.indeterminate&&(i.indeterminate=!0)},searchEnterFun:function(e){var t=window.event?e.keyCode:e.which;13==t&&(this.pagination.page=1,this.search())},handleSizeChange:function(e){this.isCurrentChange=!0,this.pagination.pageSize=e,this.search()},handleCurrentChange:function(e){const t=this;void 0!=this.selectOrgs&&this.selectOrgs.length>0&&this.selectOrgs.forEach(e=>{let i=t.indexArray(t.checkBoxDataAll,e);-1==i&&t.checkBoxDataAll.push(e)}),this.isCurrentChange=!0,this.pagination.page=e,this.search()},dialogCancel(){const e=this;e.queryParam="",this.setDialogData([]),e.customDialogShowList=!1,e.inputVal?(e.selectOrgs=e.showData?[...e.showData]:"",this.checkBoxDataAll=[...e.selectOrgs]):e.selectOrgs=[]},afterOpen(){this.loadCombinationTree()},dialogConfirm(){this.queryParam="",this.$refs.orgTable.clearSelection(),this.customDialogShowList=!1,this.calacInputSuffixHeight(),this.syncInputValue()},syncInputValue(){let e=null,t=null;if(this.$parent.$el){e=y["a"].getSubScopeElAndIndex(this.$parent.$el).index;let i=y["a"].getParentElementByClassNamePrefix(this.$parent.$parent.$el,"data-index");if(i){const e=Array.prototype.find.call(i.classList,e=>e.startsWith("data-index__"));e&&(t=e.split("__")[1])}null==t&&(i=y["a"].getParentElementByAttribute(this.$parent.$parent.$el,"data-index"),i&&i.attributes["data-index"]&&(t=i.attributes["data-index"].value))}for(var i=JSON.parse(this.customDialog.resultfield),a=new Array([i.length]),s=new Array([i.length]),l=[],n=0;n<i.length;n++)a[n]=i[n].field.toLowerCase(),s[n]=i[n].comment.toLowerCase();var o=this.selectOrgs;if(this.selectOrgs?(this.showData=[...this.selectOrgs],this.checkBoxDataAll=[...this.selectOrgs]):(this.showData=[],this.checkBoxDataAll=[]),1===this.customDialog.selectNum&&(o=this.selectOrgs),1===this.customDialog.selectNum){var r="";if(o&&o.length)for(var c=0;c<s.length;c++){let e=y["a"].isEmpty(o[0][a[c]])?"":o[0][a[c]],t=encodeURIComponent(e);r+='"'+s[c]+'":"'+t+'",'}""!=r&&(r="{"+r.substring(0,r.length-1)+"}"),l.push(y["a"].parseToJson(r))}else if(o&&o.length>0)for(var h=0;h<o.length;h++){for(var u="",d=0;d<s.length;d++){const e=o[h],t=a[d],i=e[t],l=e[t.toUpperCase()],n=e[t.toLowerCase()],r=null==i||void 0==i?null==l||void 0==l?n:l:i,c=encodeURIComponent(r);u+='"'+s[d]+'":"'+c+'",'}""!=u&&(u="{"+u.substring(0,u.length-1)+"}"),l.push(y["a"].parseToJson(u))}const p=y["a"].getOnlineFormInstance(this);this.custdialog.custDialog.mappingConf.forEach(i=>{var a="",s=i.from.toLowerCase();if(l.forEach(e=>{e&&(a+="undefined"==decodeURIComponent(e[s])?"":decodeURIComponent(e[s])+",")}),this.modelName=="data."+i["target"][0])a=a.substring(0,a.length-1),y["a"].setValueByPath(p,"data."+i["target"][0],a,e);else if(this.modelName&&this.modelName.startsWith("searchForm.")){let t=p["searchForm"]?"":"data.";y["a"].setValueByPath(p,t+"searchForm."+i["target"][0],a.substring(0,a.length-1),e)}else{let s=i["target"][0].split("."),l=i["target"][0];4==s.length&&t>=0&&(l=s[0]+"."+s[1]+"["+t+"]."+s[2]+"."+s[3]);const n=a.substring(0,a.length-1);l&&(this.modelName&&this.modelName.endsWith(l)&&this.$emit("updateInput",n),y["a"].setValueByPath(p,`${p.data?"data.":"model."}${l}`,n,e))}});let m=this.custdialog.custDialog.custQueryJson;if(m.length>0)for(let g=0;g<m.length;g++)m[g].conditionfield.length>0?this.doQuery(m[g]):console.error("["+m[g].comment+"]"+this.t("ht.customDialog.relationSearchNotBindField"))},calacInputSuffixHeight(){this.$emit("calacInputSuffixHeight")},removeSelectOrg(e){1===this.customDialog.selectNum?(this.selectOrgs.splice(e,1),this.showData.splice(e,1)):(this.propsData.length>0&&this.propsData.splice(e,1),this.showData.length>0&&this.showData.splice(e,1),null!=this.selectOrgs&&(this.selectOrgs.splice(e,1),this.checkBoxDataAll.splice(e,1))),this.syncInputValue()},clearAll(){this.checkBoxDataAll=[],this.selectOrgs=[],this.showData=[],this.propsData=[],this.syncInputValue(),this.setDialogData([]),this.$refs.orgTable.clearSelection()},indexArray(e,t){if(0==e.length)return-1;for(let i=0;i<e.length;i++)if(JSON.stringify(e[i])==JSON.stringify(t))return i;return-1},handlePostData(e){if(!this.customDialog.dataParam||this.customDialog.dataParam.constructor!=String)return e;let t={};e&&e.querys.forEach(e=>{t[e.property]=e.value});const i=y["a"].parseExp(this.customDialog.dataParam,t);try{return JSON.parse(i)}catch(a){N._throwException(this.t("ht.customDialog.postRequestParamError")+":"+this.customDialog.dataParam)}},loadTree(e,t){if(e){let i=this,a=2==i.customDialog.style?i.combiTreeDisplayField:i.displayField;t(this.treeList.filter(t=>t[a.pid]===e.data[a.id])),this.showData&&this.showData.length>0&&setTimeout(()=>{this.showData.forEach(t=>{t.Pid||(t.Pid=t.pid),t.Pid==e.key?i.$refs.tree.setChecked(t,!0):i.checkNode(t,i)})},400)}},toTreeData(e,t,i,a,s){return this.translateDataToTree(e,i,t,a,s)},translateDataToTree(e,t,i){let a=y["a"].tile2nest(e,i,t);return a||[]},combiTreeClick(e){this.combinationTreeQuerys.splice(0);let t=JSON.parse(this.customDialog.combinationRule);if(!t.rules||0==t.rules.length)return;let i=t.rules;for(let a=0;a<i.length;a++){let t=e[i[a].treeField],s=i[a].listField;this.combinationTreeQuerys.push({property:s,value:t,group:"treeGroup",operation:this.getOperation(i[a].condition),relation:"AND"})}this.search(!0)},getOperation(e){return e?"EQ"==e?"EQUAL":"LK"==e||"LFK"==e?"LIKE":"IN"==e?"IN":void 0:""},toggleTree(){this.treeShow?(this.treeShow=!1,this.transtionWidth="0%",this.toggleBtn="el-icon-arrow-right"):(this.treeShow=!0,this.transtionWidth="25%",this.toggleBtn="el-icon-arrow-left")},loadCombinationTree(){if(2!=this.customDialog.style)return;let e=JSON.parse(this.customDialog.combinationRule);this.combinationRule=e;let t=e.leftTree;this.$requestConfig.getCustomDialogByAlias(t).then(e=>{let i=e;this.leftTreeTitle=i.name;let a="dataSource"==i.dsType?"get":i.requestType?i.requestType:"post",s="${form}/form/customDialog/v1/getTreeData?alias="+t+"&mapParam=",l={};if("dataSource"!=i.dsType){s=i.url;let e=i.dataParam;if(i.conditionfield){let t=JSON.parse(i.conditionfield);for(let i=0;i<t.length;i++){let n=t[i];if("POST"==a)e?e=e.replace(new RegExp("\\{"+n.field+"\\}","g"),n.defaultValue):l[n.field]=n.defaultValue;else{let e=-1==s.indexOf("?")?"?":"&";s=s+e+n.field+"="+n.defaultValue}}e&&(l=JSON.parse(e))}}let n={};n.requestType=a,n.url=s,n.paramsObj=l,this.$requestConfig.request({url:n.url,method:"get"}).then(e=>{if(i.displayfield&&i.resultfield){let t=JSON.parse(i.displayfield),a=JSON.parse(i.resultfield);this.defaultProps.label=t.displayName,this.treeList=e,this.combiTreeDisplayField=t,this.combinationTreeData=this.toTreeData(e,t.id,t.pid,t.displayName,t.pvalue?t.pvalue:"0",a)}})})},handleSave(){this.customDialogTreeShow(this.pageParam),this.dialogVisible=!1},handleClose(){this.dialogVisible=!1}}},jn=Kn,Wn=(i("cb64"),W(jn,Rn,zn,!1,null,"8ce74706",null)),Qn=Wn.exports,Jn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("van-action-sheet",{staticClass:"mobile-van-action min-height-action",class:{"disabled-btn":e.isDisabledConfirmBtn},attrs:{"cancel-text":e.sureButtonText,"get-container":"body"},on:{cancel:e.handleDialogSure,"click-overlay":e.dialogCancel,opened:e.afterOpen},scopedSlots:e._u([{key:"description",fn:function(){return[i("span",{staticClass:"dialog-mobile__title"},[e._v(e._s(e.customDialog.name))]),i("ht-icon",{staticClass:"dialog-mobile__close",attrs:{name:"close"},on:{click:e.dialogCancel}})]},proxy:!0}]),model:{value:e.customDialogShowList,callback:function(t){e.customDialogShowList=t},expression:"customDialogShowList"}},[[i("div",{staticClass:"search-box"},[i("ht-icon",{staticClass:"unfold-icon",attrs:{scale:"1.2",name:e.isShowMoreSearch?"upFold":"downUnfold"},on:{click:function(t){e.isShowMoreSearch=!e.isShowMoreSearch}}}),e._l(e.conditionBind,(function(t,a){return i("div",{directives:[{name:"show",rawName:"v-show",value:0===a||a>0&&e.isShowMoreSearch,expression:"index === 0 || (index > 0 && isShowMoreSearch)"}],key:a,staticClass:"search-item"},[i("p",[e._v(e._s(t.comment)+":")]),"1"==t.controllerType?i("div",[i("el-input",{attrs:{size:"small",clearable:"",placeholder:e.placeholders[a]},on:{change:e.searchInputChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.hideSearch(t)}},model:{value:e.queryParams[a][t.field],callback:function(i){e.$set(e.queryParams[a],t.field,i)},expression:"queryParams[index][condition.field]"}})],1):e._e(),"2"==t.controllerType?i("div",{staticStyle:{"margin-right":"10px"}},e._l(t.config.options,(function(s,l){return i("el-radio",{key:l,attrs:{label:s.key},model:{value:e.queryParams[a][t.field],callback:function(i){e.$set(e.queryParams[a],t.field,i)},expression:"queryParams[index][condition.field]"}},[e._v("\n              "+e._s(s.value)+"\n            ")])})),1):e._e(),"3"==t.controllerType?i("div",{staticStyle:{"margin-right":"10px"}},["static"==t.config.choiceType?i("ht-select",{attrs:{options:t.config.options},model:{value:e.queryParams[a][t.field],callback:function(i){e.$set(e.queryParams[a],t.field,i)},expression:"queryParams[index][condition.field]"}}):i("eip-select-dia",{attrs:{ganged:{alias:t.config.customQuery.alias,valueBind:t.config.customQuery.valueBind,noInit:"",labelBind:t.config.customQuery.labelBind,gangedBind:"{}",bind:t.config.bind},multiple:!1,filterable:!1,"allow-create":!1,selectlist:[],"query-params":e.queryParams},model:{value:e.queryParams[t.field],callback:function(i){e.$set(e.queryParams,t.field,i)},expression:"queryParams[condition.field]"}})],1):e._e(),"4"==t.controllerType?i("div",{staticStyle:{"margin-right":"10px"}},[i("eip-tag",{attrs:{"tag-key":t.config.tag,placeholder:e.quickSearch,filterable:t.config.filterable,expand:t.config.expand},model:{value:e.queryParams[a][t.field],callback:function(i){e.$set(e.queryParams[a],t.field,i)},expression:"queryParams[index][condition.field]"}})],1):e._e()])})),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowMoreSearch,expression:"isShowMoreSearch"}],staticClass:"search-btns"},[i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:"primary"},on:{click:e.hideSearch}},[e._v("\n            "+e._s(e.t("ht.common.search"))+"\n          ")]),i("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("\n            "+e._s(e.t("ht.common.reset"))+"\n          ")])],1)],2)],2==e.customDialog.style?i("van-popover",{staticClass:"custom-dialog-popover",attrs:{trigger:"click"},scopedSlots:e._u([{key:"reference",fn:function(){return[i("div",{staticClass:"mobile-tree-select"},[e.treeSelectText?i("span",{staticClass:"active-text"},[e._v("\n            "+e._s(e.treeSelectText)+"\n          ")]):i("span",[e._v(e._s(e.t("ht.common.select"))+e._s(e.leftTreeTitle))]),e.treeSelectText?i("ht-icon",{staticClass:"dialog-mobile__close",attrs:{name:"close"},on:{click:function(t){return t.stopPropagation(),e.clearTreeSelect(t)}}}):e._e()],1)]},proxy:!0}],null,!1,151680377),model:{value:e.isSelectTreeShow,callback:function(t){e.isSelectTreeShow=t},expression:"isSelectTreeShow"}},[i("div",{staticClass:"custom-dialog-popover_content"},[i("el-tree",{ref:"combinationTree",attrs:{data:e.combinationTreeData,props:e.defaultProps,"node-key":e.nodeKey,"highlight-current":"","check-on-click-node":!0},on:{"node-click":e.combiTreeClick}})],1)]):e._e(),i("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isDownLoading,callback:function(t){e.isDownLoading=t},expression:"isDownLoading"}},[i("van-list",{attrs:{finished:e.finished,"finished-text":e.t("ht.common.noMore"),offset:20,"immediate-check":!1},on:{load:e.loadMore},model:{value:e.isPullLoading,callback:function(t){e.isPullLoading=t},expression:"isPullLoading"}},e._l(e.dialogData,(function(t,a){return i("van-cell",{key:a,attrs:{clickable:""},scopedSlots:e._u([{key:"icon",fn:function(){return[i("van-checkbox",{attrs:{value:e.indexArray(e.selectIds,t)>-1,shape:1===e.customDialog.selectNum?"round":"square"},on:{click:function(i){return e.checkboxChange(t)}}})]},proxy:!0}],null,!0)},[i("div",{staticClass:"custom-mobile_box"},e._l(e.displayfield,(function(a){return i("div",{key:a.field,staticClass:"custom-mobile_box_item"},[i("label",[e._v(e._s(a.comment)+"：")]),i("div",[e._v(e._s(t[a.field]))])])})),0)])})),1)],1)],2),i("van-action-sheet",{staticClass:"mobile-van-action",attrs:{"cancel-text":e.sureButtonText,"get-container":"body"},on:{cancel:e.handleSave},scopedSlots:e._u([{key:"description",fn:function(){return[i("span",{staticClass:"dialog-mobile__title"},[e._v("\n        "+e._s(e.t("ht.customDialog.dynamicIncomingParameterQuery"))+"\n      ")]),i("ht-icon",{staticClass:"dialog-mobile__close",attrs:{name:"close"},on:{click:function(t){e.dialogVisible=!1}}})]},proxy:!0}]),model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[i("van-cell-group",e._l(e.conditionfieldTree.filter((function(e){return"4"==e.defaultType})),(function(t,a){return i("div",{key:a},["date"!=t.type?i("van-field",{attrs:{label:t.comment,placeholder:e.t("ht.common.enter")+t.comment},model:{value:t.paramVal,callback:function(i){e.$set(t,"paramVal",i)},expression:"item.paramVal"}}):e._e(),"date"==t.type?i("ht-date",{staticStyle:{width:"100%"},attrs:{placeholder:e.t("ht.common.select")+t.comment,format:"yyyy-MM-dd"},model:{value:t.paramVal,callback:function(i){e.$set(t,"paramVal",i)},expression:"item.paramVal"}}):e._e()],1)})),0)],1),i("van-action-sheet",{staticClass:"mobile-van-action",attrs:{"cancel-text":e.sureButtonText,"get-container":"body"},on:{cancel:e.dialogTreeConfirm},scopedSlots:e._u([{key:"description",fn:function(){return[i("span",{staticClass:"dialog-mobile__title"},[e._v(e._s(e.customDialog.name))]),i("ht-icon",{staticClass:"dialog-mobile__close",attrs:{name:"close"},on:{click:e.dialogCancelTree}})]},proxy:!0}]),model:{value:e.customDialogShowTree,callback:function(t){e.customDialogShowTree=t},expression:"customDialogShowTree"}},[i("el-tree",{ref:"tree",staticStyle:{width:"100%"},attrs:{data:e.props1,props:e.defaultProps,"node-key":e.nodeKey,"highlight-current":"","show-checkbox":-1===e.customDialog.selectNum,"check-on-click-node":!0,"check-strictly":!1,lazy:"",load:e.loadTree,"default-expanded-keys":e.defaultExpandedKeys},on:{"node-click":e.treeClick,"check-change":e.getChecked}})],1)],1)},Gn=[],Yn={name:"CustomMobileDialog",mixins:[Vn,Le,pe["a"],de["a"],me["a"]],props:{custdialog:{type:Object,default:()=>({})},subIndex:Number,sunIndex:Number,subPath:String,currentSubData:Array},data(){return{isShowMoreSearch:!1,treeSelectText:"",isSelectTreeShow:!1,searchWord:"",isPullLoading:!1,isDownLoading:!1,selectIds:[],finished:!1,dialogVisible:!1,pageParam:{},conditionfieldTree:[],conditionBind:[],nodeKey:"ID_",customDialogShowList:!1,customDialogShowTree:!1,selectOrgs:[],displayfield:[],customDialog:{},queryParam:"",props1:[],showData:[],checkBoxDataAll:[],defaultProps:{children:"children",label:"label",isLeaf:"isLeaf"},propsData:[],querysShow:!1,isCurrentChange:!1,param:[],treeList:[],displayField:{},queryParams:[],placeholders:[],combinationTreeData:[],combiTreeDisplayField:[],combinationTreeQuerys:[],combinationRule:{},leftTreeTitle:"",fixedParams:{},isDisabledConfirmBtn:!0}},computed:{defaultExpandedKeys:function(){return this.props1&&this.props1.length>0&&this.props1[0][this.nodeKey]?[this.props1[0][this.nodeKey]]:[]},searchPlaceholder(){let e=[];return this.conditionBind.forEach(t=>{e.push(t.comment)}),e.length?e.join(","):`${this.t("ht.common.enter")}${this.t("ht.common.keyword")}`},sureButtonText(){const e=this.selectIds.length>0?`(${this.selectIds.length})`:"";return`${this.$t("ht.common.confirm")}${e}`}},watch:{selectIds(e){e&&e.length?this.isDisabledConfirmBtn=!1:this.isDisabledConfirmBtn=!0}},methods:{searchInputChange(){this.isShowMoreSearch||this.search(!0)},hideSearch(){this.isShowMoreSearch=!1,this.search(!0)},clearTreeSelect(){this.treeSelectText="",this.$refs.combinationTree.setCurrentKey(null),this.combinationTreeQuerys.splice(0),this.isSelectTreeShow=!1,this.search(!0)},checkboxChange(e){let t=this.indexArray(this.selectIds,e);t>-1?this.selectIds.splice(t,1):1===this.customDialog.selectNum?this.selectIds=[e]:this.selectIds.push(e)},handleDialogSure(){this.dialogConfirm()},loadMore(){this.dialogData&&this.dialogData.length>0&&this.pagination.page++,this.search()},onRefresh(){this.search(!0)},showDialog(){this.selectIds=[];const e=this;this.fixedParams={};var t=this.custdialog.custDialog.alias;this.$requestConfig.getCustomDialogByAlias(t).then(i=>{if(!i||!i.alias)return void this.$message.error(this.t("ht.customDialog.errorMsg",{alias:t}));if(1==i.style){var a=JSON.parse(i.displayfield);e.nodeKey=a.id}if(i.needPage&&"POST"===i.requestType){let e={};this.getLastKeyByPath(e,i.pageKey,1),this.getLastKeyByPath(e,i.pageSizeKey,10),this.getLastKeyByPath(e,i.totalKey,!0);const t=y["a"].parseExp(i.dataParam,e,!0);if(t){const e=JSON.parse(t);e.pageBean&&(this.pagination={...e.pageBean})}}let s=e.custdialog.custDialog.conditions;e.param=[],s.length>0&&s.forEach(t=>{if(t.bind&&("3"==t.defaultType||t.bind.startsWith("data.searchForm"))){let i={};i.field=t.field,i.bind=t.bind,i.bindType=t.bindType,e.param.push(i)}"3"==t.defaultType&&2===t.bindType&&(e.fixedParams[t.field]=t.bind||"")});let l=JSON.parse(i.conditionfield);e.conditionBind=[];let n=[],o=[];if(l.length>0&&(l.forEach(t=>{var i={};"1"==t.defaultType&&(i[t.field]="",n.push(i),e.conditionBind.push(t),o.push(this.t("ht.common.enter")+t.comment)),"2"==t.defaultType&&t.defaultValue&&(e.fixedParams[t.field]=t.defaultValue)}),this.$set(this,"queryParams",n),this.$set(this,"placeholders",o)),0==i.style||2==i.style)e.customDialogShow({alias:t,customDialog:i});else if(1==i.style){e.pageParam={alias:t,customDialog:i},e.customDialog=i;let a={};if(e.conditionfieldTree=[],i.conditionfield&&(e.conditionfieldTree=JSON.parse(i.conditionfield),e.conditionfieldTree.length>0))for(let t=e.conditionfieldTree.length-1;t>=0;t--)"4"==e.conditionfieldTree[t].defaultType&&(a[e.conditionfieldTree[t].field]=e.conditionfieldTree[t].comment);"{}"!=JSON.stringify(a)?e.dialogVisible=!0:e.customDialogTreeShow(e.pageParam)}})},treeClick(e){1===this.customDialog.selectNum&&(this.propsData=[],this.propsData.push(e))},getChecked(){-1===this.customDialog.selectNum&&(this.propsData=this.$refs.tree.getCheckedNodes())},customDialogShow(e){if(this.customDialogShowList=!0,this.customDialog=e.customDialog,this.customDialog.queryUrl="dataSource"==this.customDialog.dsType?"${form}/form/customDialog/v1/getListData?alias="+this.customDialog.alias+"&mapParam="+(this.customDialog.mapParam?this.customDialog.mapParam:""):this.customDialog.url,this.dialogData.length<1){if(this.search(!0),this.displayfield=JSON.parse(e.customDialog.displayfield),"dataSource"==this.customDialog.dsType)for(var t=0;t<this.displayfield.length;t++)this.displayfield[t].field=this.displayfield[t].field.toLowerCase()}else this.dialogData.length>1&&this.search(!0);if(this.dialogData.length>0&&0==this.displayfield.length&&(this.search(!0),this.displayfield=JSON.parse(e.customDialog.displayfield),"dataSource"==this.customDialog.dsType))for(var i=0;t<this.displayfield.length;i++)this.displayfield[i].field=this.displayfield[i].field.toLowerCase()},customDialogTreeShow(e){var t=this.customDialog;let i={},a="",s="";if(this.conditionfieldTree.length>0){for(let e=0;e<this.conditionfieldTree.length;e++)if("4"==this.conditionfieldTree[e].defaultType){let t=this.conditionfieldTree[e].paramVal;if(!t)continue;let a=this.conditionfieldTree[e].field;i[a]=t}else if("2"==this.conditionfieldTree[e].defaultType){let t=this.conditionfieldTree[e].defaultValue;if(!t)continue;let a=this.conditionfieldTree[e].field;i[a]=t}if(this.param){const e=y["a"].getOnlineFormInstance(this);this.param.forEach(t=>{let a=y["a"].getValueByPath(e,t.bind);a&&(i[t.field]=a)})}if("{}"!=JSON.stringify(i)){let e=JSON.parse(this.customDialog.displayfield).pid;for(let t in i)if(e==t){s=i[t];break}a=JSON.stringify(i),a=a.substring(1,a.length-1)}}var l="dataSource"==t.dsType?"GET":t.requestType?t.requestType:"POST",n="${form}/form/customDialog/v1/getTreeData?alias="+e.alias+"&mapParam="+a,o={};if("dataSource"!=t.dsType){n=t.url;var r=t.dataParam;let e={};if(t.conditionfield)for(var c=JSON.parse(t.conditionfield),h=0;h<c.length;h++){var u=c[h];if("POST"==l)r?e[u.field]=u.defaultValue:o[u.field]=u.defaultValue;else{var d=-1==n.indexOf("?")?"?":"&";n=n+d+u.field+"="+u.defaultValue}}try{this.$requestConfig.getUserId()&&(e.userId=this.$requestConfig.getUserId()),this.$requestConfig.getOrgId()&&(e.orgId=this.$requestConfig.getOrgId()),this.$requestConfig.getPostId()&&(e.postId=this.$requestConfig.getPostId())}catch(m){console.log(this.t("ht.customDialog.getIdError"),m)}r&&(r=y["a"].parseExp(r,e),o=JSON.parse(r))}var p={};p.requestType=l,p.url=n,p.paramsObj=o,this.searchTree(p,s),this.customDialogShowTree=!0},searchTree(e,t){const i=this;let a=this.$requestConfig.request({url:e.url,method:"POST"==e.requestType?"post":"get",data:e.paramsObj});a.then((function(e){let a=JSON.parse(i.customDialog.displayfield);i.displayField=a,i.defaultProps.label=a.displayName,i.treeList=e,t&&(a.pvalue=t),i.props1=i.toTreeData(e,a.id,a.pid,a.displayName,a.pvalue?a.pvalue:0)}))},dialogTreeConfirm(){this.calacInputSuffixHeight();let e=null,t=null;this.$parent.$el&&(e=y["a"].getSomeAttributeFromParentElement(this.$el,"data-index"),t=y["a"].getSomeAttributeFromParentElement(this.$parent.$parent.$el,"data-index")),this.setDialogData([]);for(var i=JSON.parse(this.customDialog.resultfield),a=new Array([i.length]),s=new Array([i.length]),l=[],n=0;n<i.length;n++)a[n]=i[n].field,s[n]=i[n].comment;var o=this.propsData;if(1===this.customDialog.selectNum){o=this.propsData[0];for(var r="",c=0;c<s.length;c++)r+='"'+s[c]+'":"'+o[a[c]]+'",';""!=r&&(r="{"+r.substring(0,r.length-1)+"}"),l.push(y["a"].parseToJson(r))}else o.forEach((e,t)=>{for(var i="",n=0;n<s.length;n++)i+='"'+s[n]+'":"'+o[a[n]]+'",',i+='"'+s[n]+'":"'+o[t][a[n]]+'",';""!=i&&(i="{"+i.substring(0,i.length-1)+"}"),l.push(y["a"].parseToJson(i))});const h=y["a"].getOnlineFormInstance(this);this.selectOrgs=this.convertComment2Field(l,a),this.custdialog.custDialog.mappingConf.forEach(i=>{var a="";if(l.forEach(e=>{a+=e[i.from]+","}),this.modelName=="data."+i["target"][0])y["a"].setValueByPath(h,"data."+i["target"][0],a.substring(0,a.length-1),e);else if(this.modelName=="searchForm."+i["target"][0])y["a"].setValueByPath(h,"searchForm."+i["target"][0],a.substring(0,a.length-1),e);else{let s=i["target"][0].split("."),l=i["target"][0];4==s.length&&t>=0&&(l=s[0]+"."+s[1]+"["+t+"]."+s[2]+"."+s[3]);const n=a.substring(0,a.length-1);l&&(this.modelName&&this.modelName.endsWith(l)&&this.$emit("updateInput",n),y["a"].setValueByPath(h,`${h.data?"data.":"model."}${l}`,n,e))}}),this.showData=this.propsData?[...this.propsData]:"",this.customDialogShowTree=!1},convertComment2Field(e,t){const i=[];return e&&0!=e.length?(e.forEach(e=>{const a={};Object.entries(e).forEach((e,i)=>{const s=t[i];s&&(a[s]=e[1])}),i.push(a)}),i):i},dialogCancelTree(){this.setDialogData([]),this.customDialogShowTree=!1},search(e){let t=[],i={};"{}"==JSON.stringify(this.pagination)&&(this.pagination={page:1,pageSize:10,showTotal:!0});let a={pageBean:this.pagination};if(e&&(a.pageBean={page:1,pageSize:10,showTotal:!0}),0!=this.queryParams.length&&""!=this.queryParams[0]&&this.conditionBind.forEach((e,i)=>{this.queryParams[i][e.field]&&t.push({property:e.field,value:this.queryParams[i][e.field],group:"main",operation:"LIKE",relation:"AND"})}),this.param&&this.param.forEach(e=>{t.push({property:e.field,value:2===e.bindType?e.bind:this.getCurrentValue(e.bind),group:"main",operation:"LIKE",relation:"AND"})}),this.combinationTreeQuerys&&0!=this.combinationTreeQuerys.length)for(let l=0;l<this.combinationTreeQuerys.length;l++)t.push(this.combinationTreeQuerys[l]);if("dataSource"!=this.customDialog.dsType&&"POST"==this.customDialog.requestType&&this.customDialog.dataParam&&this.customDialog.dataParam.constructor==String){let e=this.param,i={},l={};this.getLastKeyByPath(l,this.customDialog.pageKey,a.pageBean.page),this.getLastKeyByPath(l,this.customDialog.pageSizeKey,a.pageBean.pageSize),this.getLastKeyByPath(l,this.customDialog.totalKey,a.pageBean.total),t&&t.length&&t.forEach(e=>{i[e.property]=e.value}),i.pageSize=a.pageBean.pageSize,i.page=a.pageBean.page,i.total=a.pageBean.total;try{this.$requestConfig.getUserId()&&(i.userId=this.$requestConfig.getUserId()),this.$requestConfig.getOrgId()&&(i.orgId=this.$requestConfig.getOrgId()),this.$requestConfig.getPostId()&&(i.postId=this.$requestConfig.getPostId())}catch(s){console.log(this.t("ht.customDialog.getIdError"),s)}const n=this.getSearchValueByKey(),o=y["a"].parseExp(this.customDialog.dataParam,{...i,...n,...this.fixedParams});try{e=JSON.parse(o);const t=JSON.parse(this.customDialog.dataParam),a=t&&t.querys&&t.querys.map(e=>{const t=e.value&&e.value.replace("${","").replace("}","");return{...e,value:n[t]||i[t]||""}});e.querys=a,this.customDialog.needPage?e.pageBean=l:e.pageBean.pageSize=-1;let s={pageBean:e,queryUrl:this.customDialog.queryUrl,requestType:this.customDialog.requestType,dsType:this.customDialog.dsType,listKey:this.customDialog.listKey,pageKey:this.customDialog.pageKey,pageSizeKey:this.customDialog.pageSizeKey,totalKey:this.customDialog.totalKey};this.getDialoglistJson(s).then(()=>{this.checkList()})}catch(s){this.$message.error(`${this.t("ht.customDialog.postRequestParamError")}${e}`)}}else t.length>0?(i=this.handlePostData({pageBean:a.pageBean,querys:t}),this.customDialog.pageBean=i,this.getDialoglistJson(this.customDialog).then(()=>{this.checkList()})):(this.customDialog.pageBean=a,this.getDialoglistJson(this.customDialog).then(()=>{this.checkList()}))},getSearchValueByKey(){let e={};return this.queryParams.length>0&&(e=this.conditionBind.reduce((e,t,i)=>(e[t.field]=this.queryParams[i][t.field],e),{})),e},getLastKeyByPath(e,t,i){if(!e||!t||t.constructor!=String)return;if(!/^\w?.*[\w|\]]$/.test(t))return;let a=t.split(".");if(1==a.length)e[t]=i;else{let t=a.length;e[a[t-1]]=i}},getCurrentValue(e){let t=null;const i=y["a"].getOnlineFormInstance(this),a=e.replace(this.subPath+".","");return t=this.sunIndex||0===this.sunIndex?y["a"].getValueByPath(this.currentSubData[this.subIndex],a,this.sunIndex||0===this.sunIndex?this.sunIndex:null):y["a"].getValueByPath(i,e,this.subIndex||0===this.subIndex?this.subIndex:null),t},reset(){this.queryParams.forEach((e,t)=>{for(let i in e)this.queryParams[t][i]=""});let e={};this.$refs.combinationTree&&(e=this.$refs.combinationTree.store.nodesMap);for(let t in e)e[t].expanded=!1;this.combinationTreeQuerys.splice(0),this.search(!0)},checkList(){const{page:e,pageSize:t,total:i}=this.pagination;this.finished=!(e>0&&t>0&&i>0)||e*t>=i,this.isDownLoading=!1,this.isPullLoading=!1},checkNode(e,t,i){if(e.Pid||(e.Pid=e.pid),e.Pid){let i=t.$refs.tree.getNode(e.Pid);i.indeterminate=!0,i.data.Pid&&(t.$refs.tree.getNode(i.data.Pid).indeterminate=!0,this.checkNode(t.$refs.tree.getNode(i.data.Pid).data,t,t.$refs.tree.getNode(i.data.Pid))),i.indeterminate||(i.indeterminate=!0)}else i&&!i.indeterminate&&(i.indeterminate=!0)},dialogCancel(){const e=this;e.queryParam="",this.setDialogData([]),e.customDialogShowList=!1},afterOpen(){this.loadCombinationTree()},dialogConfirm(){this.queryParam="",this.customDialogShowList=!1,this.calacInputSuffixHeight(),this.syncInputValue()},syncInputValue(){let e=null,t=null;if(this.$parent.$el){e=y["a"].getSubScopeElAndIndex(this.$parent.$el).index;let i=y["a"].getParentElementByClassNamePrefix(this.$parent.$parent.$el,"data-index");if(i){const e=Array.prototype.find.call(i.classList,e=>e.startsWith("data-index__"));e&&(t=e.split("__")[1])}null==t&&(i=y["a"].getParentElementByAttribute(this.$parent.$parent.$el,"data-index"),i&&i.attributes["data-index"]&&(t=i.attributes["data-index"].value))}for(var i=JSON.parse(this.customDialog.resultfield),a=new Array([i.length]),s=new Array([i.length]),l=[],n=0;n<i.length;n++)a[n]=i[n].field.toLowerCase(),s[n]=i[n].comment.toLowerCase();this.selectOrgs=[...this.selectIds];var o=this.selectOrgs;if(this.selectOrgs?(this.showData=[...this.selectOrgs],this.checkBoxDataAll=[...this.selectOrgs]):(this.showData=[],this.checkBoxDataAll=[]),1===this.customDialog.selectNum&&(o=this.selectOrgs),1===this.customDialog.selectNum){var r="";if(o&&o.length)for(var c=0;c<s.length;c++){let e=void 0===o[0][a[c]]?"":o[0][a[c]],t=encodeURIComponent(e);r+='"'+s[c]+'":"'+t+'",'}""!=r&&(r="{"+r.substring(0,r.length-1)+"}"),l.push(y["a"].parseToJson(r))}else if(o&&o.length>0)for(var h=0;h<o.length;h++){for(var u="",d=0;d<s.length;d++){const e=o[h],t=a[d],i=e[t],l=e[t.toUpperCase()],n=e[t.toLowerCase()],r=null==i||void 0==i?null==l||void 0==l?n:l:i,c=encodeURIComponent(r);u+='"'+s[d]+'":"'+c+'",'}""!=u&&(u="{"+u.substring(0,u.length-1)+"}"),l.push(y["a"].parseToJson(u))}const p=y["a"].getOnlineFormInstance(this);this.custdialog.custDialog.mappingConf.forEach(i=>{var a="",s=i.from.toLowerCase();if(l.forEach(e=>{e&&(a+=decodeURIComponent(e[s])+",")}),this.modelName=="data."+i["target"][0])a=a.substring(0,a.length-1),y["a"].setValueByPath(p,"data."+i["target"][0],a,e);else if(this.modelName&&this.modelName.startsWith("searchForm.")){let t=p["searchForm"]?"":"data.";y["a"].setValueByPath(p,t+"searchForm."+i["target"][0],a.substring(0,a.length-1),e)}else{let s=i["target"][0].split("."),l=i["target"][0];4==s.length&&t>=0&&(l=s[0]+"."+s[1]+"["+t+"]."+s[2]+"."+s[3]);const n=a.substring(0,a.length-1);l&&(this.modelName&&this.modelName.endsWith(l)&&this.$emit("updateInput",n),y["a"].setValueByPath(p,`${p.data?"data.":"model."}${l}`,n,e))}});let m=this.custdialog.custDialog.custQueryJson;if(m.length>0)for(let g=0;g<m.length;g++)m[g].conditionfield.length>0?this.doQuery(m[g]):console.error("["+m[g].comment+"]"+this.t("ht.customDialog.relationSearchNotBindField"))},calacInputSuffixHeight(){this.$emit("calacInputSuffixHeight")},removeSelectOrg(e){1===this.customDialog.selectNum?(this.selectIds.splice(e,1),this.showData.splice(e,1)):(this.propsData.length>0&&this.propsData.splice(e,1),this.showData.length>0&&this.showData.splice(e,1),this.selectIds&&this.selectIds.splice(e,1)),this.syncInputValue()},indexArray(e,t){if(0==e.length)return-1;for(let i=0;i<e.length;i++)if(y["a"].objectEquals(e[i],t))return i;return-1},handlePostData(e){if(!this.customDialog.dataParam||this.customDialog.dataParam.constructor!=String)return e;let t={};e&&e.querys.forEach(e=>{t[e.property]=e.value});const i=y["a"].parseExp(this.customDialog.dataParam,t);try{return JSON.parse(i)}catch(a){N._throwException(this.t("ht.customDialog.postRequestParamError")+this.customDialog.dataParam)}},dialogCancelTree(){this.setDialogData([]),this.customDialogShowTree=!1},loadTree(e,t){if(e){let i=this,a=2==i.customDialog.style?i.combiTreeDisplayField:i.displayField;t(this.treeList.filter(t=>t[a.pid]===e.data[a.id])),this.showData&&this.showData.length>0&&setTimeout(()=>{this.showData.forEach(t=>{t.Pid||(t.Pid=t.pid),t.Pid==e.key?i.$refs.tree.setChecked(t,!0):i.checkNode(t,i)})},400)}},toTreeData(e,t,i,a,s){return this.translateDataToTree(e,i,t,a,s)},translateDataToTree(e,t,i){let a=y["a"].tile2nest(e,i,t);return a||[]},combiTreeClick(e){this.treeSelectText=e[this.defaultProps.label],this.isSelectTreeShow=!1,this.combinationTreeQuerys.splice(0);let t=JSON.parse(this.customDialog.combinationRule);if(!t.rules||0==t.rules.length)return;let i=t.rules;for(let a=0;a<i.length;a++){let t=e[i[a].treeField],s=i[a].listField;this.combinationTreeQuerys.push({property:s,value:t,group:"treeGroup",operation:this.getOperation(i[a].condition),relation:"AND"})}this.search(!0)},getOperation(e){return e?"EQ"==e?"EQUAL":"LK"==e||"LFK"==e?"LIKE":"IN"==e?"IN":void 0:""},loadCombinationTree(){if(2!=this.customDialog.style)return;let e=JSON.parse(this.customDialog.combinationRule);this.combinationRule=e;let t=e.leftTree;this.$requestConfig.getCustomDialogByAlias(t).then(e=>{let i=e;this.leftTreeTitle=i.name;let a="dataSource"==i.dsType?"get":i.requestType?i.requestType:"post",s="${form}/form/customDialog/v1/getTreeData?alias="+t+"&mapParam=",l={};if("dataSource"!=i.dsType){s=i.url;let e=i.dataParam;if(i.conditionfield){let t=JSON.parse(i.conditionfield);for(let i=0;i<t.length;i++){let n=t[i];if("POST"==a)e?e=e.replace(new RegExp("\\{"+n.field+"\\}","g"),n.defaultValue):l[n.field]=n.defaultValue;else{let e=-1==s.indexOf("?")?"?":"&";s=s+e+n.field+"="+n.defaultValue}}e&&(l=JSON.parse(e))}}let n={};n.requestType=a,n.url=s,n.paramsObj=l,this.$requestConfig.request({url:n.url,method:"get"}).then(e=>{if(i.displayfield&&i.resultfield){let t=JSON.parse(i.displayfield),a=JSON.parse(i.resultfield);this.defaultProps.label=t.displayName,this.treeList=e,this.combiTreeDisplayField=t,this.combinationTreeData=this.toTreeData(e,t.id,t.pid,t.displayName,t.pvalue?t.pvalue:"0",a)}})})},handleSave(){this.customDialogTreeShow(this.pageParam),this.dialogVisible=!1},handleClose(){this.dialogVisible=!1}}},Zn=Yn,Xn=(i("4afe"),i("a3a8"),W(Zn,Jn,Gn,!1,null,"38b1b8ca",null)),eo=Xn.exports,to={name:"HtCustomDialog",components:{CustomDialog:Qn,CustomMobileDialog:eo,HtFieldTail:ue},mixins:[Vn,Le,pe["a"],de["a"],me["a"],kt["a"]],props:{value:String,single:{type:Boolean,default:!1},custdialog:Object,tooltipplacement:Object,subIndex:Number,sunIndex:Number,subPath:String,currentSubData:Array},data(){return{isEditInputShow:!1,customValue:"",defualtTooltipplacement:"bottom",dialogVisible:!1,pageParam:{},conditionfieldTree:[],data:{qxdd:{}},inputSuffixWidth:60,quickSearch:"",conditionBind:[],nodeKey:"ID_",customDialogShowList:!1,customDialogShowTree:!1,selectOrgProps:{label:"name"},style:"",selectOrgs:[],inputSuffixHeight:33,customDialog:{},isCurrentChange:!1,param:[],treeList:[],writeable:!0}},computed:{inputVal:function(){if(this.value&&"||[]"!=this.value){let e=this.value.split(",");this.value.indexOf("||")>0&&(e=this.value.split("||")[0].split(","));let t=[];return e.forEach(e=>{let i={value:e};t.push(i)}),t}return null},isAllowCustom(){return this.custdialog&&this.custdialog.allowInput}},mounted(){setTimeout(()=>{const{subScopeEl:e}=y["a"].getSubScopeElAndIndex(this.$el);if(e)if("true"==e.getAttribute("row_readonly")||!0===e.getAttribute("row_readonly"))this.writeable=!1;else{const t=Array.prototype.find.call(e.classList,e=>e.startsWith("row_readonly__"));t&&"row_readonly__true"==t&&(this.writeable=!1)}this.calacInputSuffixWidth()},50)},methods:{editInputBlur(){this.$emit("input",this.customValue),this.isEditInputShow=!1},showEditInput(){this.isAllowCustom?(this.customValue=this.value,this.isEditInputShow=!0,this.$nextTick(()=>{this.$refs.editInputRef.focus()})):this.showDialog()},showDialog(){this.inputWriteable&&(this.isMobile?this.$refs.customMobileDialogRef.showDialog():this.$refs.customDialogRef.showDialog())},removeSelectOrg(e){this.inputVal.splice(e,1);let t="";this.inputVal.forEach(e=>{t+=e.value+","}),t.length>0?t=t.substring(0,t.length-1):this.clear(),this.$emit("input",t),this.calacInputSuffixHeight(),this.isMobile?this.$refs.customMobileDialogRef.removeSelectOrg(e):this.$refs.customDialogRef.removeSelectOrg(e)},clear(){this.$emit("input",""),this.$refs.customDialogRef.clearAll(),this.calacInputSuffixHeight()},calacInputSuffixHeight(){setTimeout(()=>{this.$refs.tagSpans&&(this.$refs.tagSpans.offsetHeight?this.inputSuffixHeight=this.$refs.tagSpans.offsetHeight+5:this.inputSuffixHeight=30,this.$validator.validate())},0),this.calacInputSuffixWidth()},calacInputSuffixWidth(){this.$refs.inputSuffix&&(this.inputSuffixWidth=this.$refs.inputSuffix.offsetWidth+1)},updateInput(e){this.$emit("input",e)}}},io=to,ao=(i("307d"),W(io,Nn,qn,!1,null,"7ac2d73f",null)),so=ao.exports;so.install=function(e){e.component(so.name,so)};var lo=so,no=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"inputs org-dialog"},[e.isMobile?i("org-selector-mobile-dialog",{ref:"orgSelectorMobileDialog",attrs:{title:e.title,"append-to-body":e.appendToBody,data:e.data,pagination:e.pagination,"select-label":e.selectLabel,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField},on:{search:e.handleSearch,reset:e.handleReset,"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("on-confirm",t)},"page-change":e.handlePageChange},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}}):i("org-selector-dialog",{ref:"orgSelectorDialog",attrs:{title:e.title,"append-to-body":e.appendToBody,data:e.data,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField,mode:e.mode},on:{"filter-type-change":e.handleFilterTypeChange,search:e.handleSearch,reset:e.handleReset,"page-change":e.handlePageChange,"load-org":e.loadOrg,"load-policy-org":e.loadPolicyOrg,"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("on-confirm",t)}},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}})],1)},oo=[],ro={name:"HtOrgPostDialog",components:{OrgSelectorDialog:ol,OrgSelectorMobileDialog:pl},mixins:[kt["a"]],props:{value:String,single:Boolean,config:Object,appendToBody:{type:Boolean,default:!1},title:{type:String,default(){return Object(Me["c"])("ht.selector.orgTitle")}},quickSearchProps:{type:String,default:"name,code,pathName"},pageSize:{type:Number,default:20},showPath:{type:Boolean,default:!1},searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.orgDefaultPlaceholder")}},currentSelectOrgs:Array},data(){return{selectors:[],mode:null,filterType:"org",currentGroup:null,currentOrg:null,currentPolicy:null,searchWord:null,data:[],pagination:{page:1,pageSize:this.pageSize,total:0,showTotal:!0}}},computed:{selectLabel(){return this.showPath?"pathName":"name"},primaryField:function(){return this.config&&this.config.hasOwnProperty("id")?"id":this.config&&this.config.hasOwnProperty("code")?"code":this.selectLabel}},mounted(){this.data&&0!=this.data.length||this.handleLoad()},methods:{showDialog(){this.selectors=this.currentSelectOrgs?this.currentSelectOrgs:[],this.isMobile?this.$refs.orgSelectorMobileDialog.showDialog():this.$refs.orgSelectorDialog.showDialog()},handleSearch(e){e&&e.trim()?(this.searchWord=e,this.mode="search",this.handleLoad()):this.handleReset()},handleReset(){this.searchWord=null,this.mode=null,this.handleLoad()},handlePageChange(e){if("filter"!=this.mode)this.handleLoad(e);else switch(this.filterType){case"org":this.loadOrg(this.currentOrg,e);break;case"policy":this.loadPolicyOrg(this.currentPolicy,e);break}},handleFilterTypeChange(e){this.filterType=e},getQueryFilter(e){const t={querys:[],pageBean:this.getPageBean(e)};if(this.quickSearchProps&&this.quickSearchProps.constructor==String&&this.searchWord){const e=this.quickSearchProps.split(",");e.forEach(e=>{let i={property:e,value:this.searchWord,group:"main",operation:"LIKE",relation:"OR"};t.querys.push(i)})}return t},getPageBean(e){const t={...this.pagination};return delete t["total"],t.page=e||1,t},handleLoad(e){const t=this.getQueryFilter(e);this.data=this.data||[],this.loadAllOrg(t)},loadOrg(e,t){this.mode="filter",this.currentOrg=e;let i={pageBean:this.getPageBean(t),querys:[]},a={property:"path",value:e.path,group:"main",operation:"RIGHT_LIKE",relation:"AND"};e.path&&i.querys.push(a),this.loadAllOrg(i)},loadPolicyOrg(e,t){this.mode="filter",this.currentOrg=e;let i={pageBean:this.getPageBean(t),querys:[]},a=null;const{type:s,ids:l,paths:n}=e;switch(s){case"1":a={property:"id_",value:e.id,group:"main",operation:"EQUAL",relation:"AND"},i.querys.push(a),this.loadAllOrg(i);break;case"2":a={property:"path_",value:e.path,group:"main",operation:"RIGHT_LIKE",relation:"AND"},i.querys.push(a),this.loadAllOrg(i);break;case"3":l.forEach(e=>{a={property:"id_",value:e,group:"main",operation:"EQUAL",relation:"OR"},i.querys.push(a)}),this.loadAllOrg(i);break;case"4":n.forEach(e=>{a={property:"path_",value:e,group:"main",operation:"RIGHT_LIKE",relation:"OR"},i.querys.push(a)}),this.loadAllOrg(i);break}},loadAllOrg(e){this.$requestConfig.getOrgList(e).then(e=>{const{rows:t,page:i,pageSize:a,total:s}=e;this.isMobile&&i>1?this.data=this.data.concat(t):this.data=t;const l={page:i,pageSize:a,total:s};this.$set(this,"pagination",l)})}}},co=ro,ho=(i("5ee2"),W(co,no,oo,!1,null,"5b5e8923",null)),uo=ho.exports;uo.install=function(e){e.component(uo.name,uo)};var po=uo,mo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.dialogTitle,"append-to-body":e.appendToBody,"close-on-click-modal":!1,visible:e.dialogVisible,"before-close":e.handleClose,"destroy-on-close":e.destroyOnClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-scrollbar",{staticStyle:{height:"100%"}},[i("ht-tree",{ref:"htTree",attrs:{"tree-data":e.data,props:e.props,"empty-text":e.emptyText,"filter-node-method":e.filterNodeMethod,"support-filter":e.supportFilter,"show-more-button":e.showMoreButton,"default-expand-all":e.defaultExpandAll,load:e.load,lazy:e.lazy,"show-checkbox":e.showCheckbox,accordion:e.accordion,"node-key":e.nodeKey,"default-expanded-keys":e.defaultExpandedKeys,"highlight-current":e.highlightCurrent,"render-after-expand":e.renderAfterExpand,"render-content":e.renderContent,"check-on-click-node":e.checkOnClickNode,"auto-expand-parent":e.autoExpandParent,"check-strictly":e.checkStrictly,"current-node-key":e.currentNodeKey,indent:e.indent,"icon-class":e.iconClass,draggable:e.draggable,"allow-drag":e.allowDrag,"allow-drop":e.allowDrop,"expand-on-click-node":e.expandOnClickNode,"default-checked-keys":e.defaultCheckedKeys},on:{"node-click":e.handleNodeClick,"node-contextmenu":e.nodeContextmenu,"check-change":e.checkChange,check:e.check,"current-change":e.currentChange,"node-expand":e.nodeExpand,"node-collapse":e.nodeCollapse,"node-drag-start":e.nodeDragStart,"node-drag-enter":e.nodeDragEnter,"node-drag-leave":e.nodeDragLeave,"node-drag-over":e.nodeDragOver,"node-drag-end":e.nodeDragEnd,"node-drop":e.nodeDrop},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,s=t.data;return e.$scopedSlots["default"]?e._t("default",null,{node:a,data:s}):[i("span",{staticClass:"el-tree-node__label show-ellipsis",class:{"full-width":!e.showMoreButton},attrs:{title:a.label}},[e._v("\n          "+e._s(a.label)+"\n        ")])]}}],null,!0)})],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.onConfirm}},[e._v("\n      "+e._s(e.$t("ht.common.confirm"))+"\n    ")]),i("el-button",{on:{click:e.handleClose}},[e._v(e._s(e.$t("ht.common.cancle")))])],1)],1)},go=[],fo={name:"HtTreeDialog",components:{HtTree:ca},props:{dialogTitle:{type:String,default(){return Object(Me["c"])("ht.common.select")}},appendToBody:{type:Boolean,default:!1},showMoreButton:{type:Boolean,default:!1},emptyText:String,filterNodeMethod:Function,data:Array,load:{type:Function},lazy:{type:Boolean,default:!1},accordion:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultExpandAll:{type:Boolean,default:!1},props:{type:Object,default:function(){return{children:"children",label:"label"}}},supportFilter:{type:Boolean,default:!1},iconClass:{type:String},nodeKey:{type:String},defaultExpandedKeys:{type:Array},highlightCurrent:{type:Boolean,default:!1},renderAfterExpand:{type:Boolean,default:!0},renderContent:{type:Function},checkOnClickNode:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},checkStrictly:{type:Boolean,default:!1},currentNodeKey:{type:[String,Number]},indent:{type:Number,default:16},draggable:{type:Boolean,default:!1},allowDrag:{type:Function},allowDrop:{type:Function},expandOnClickNode:{type:Boolean,default:!1},defaultCheckedKeys:{type:Array,default(){return[]}},leafOnly:{type:Boolean,default:!1},includeHalfChecked:{type:Boolean,default:!1},destroyOnClose:{type:Boolean,default:!1}},data(){return{dialogVisible:!1,selectedNode:null}},methods:{showDialog(){this.dialogVisible=!0},handleClose(){this.dialogVisible=!1},onConfirm(){let e=null;if(this.$refs.htTree.showCheckbox){if(e=this.$refs.htTree.$refs.elTree.getCheckedNodes(this.leafOnly,this.includeHalfChecked),!e||e.length<=0)return void this.$message.error(this.$t("ht.common.select"))}else e=this.$refs.htTree.$refs.elTree.getCurrentNode();e?(this.dialogVisible=!1,this.$emit("onConfirm",e)):this.$message.error(this.$t("ht.common.select"))},handleNodeClick(e,t,i){this.$emit("node-click",e,t,i)},nodeContextmenu(e,t,i,a){this.$emit("node-contextmenu",e,t,i,a)},checkChange(e,t,i){this.$emit("check-change",e,t,i)},check(e,t){this.$emit("check",e,t)},currentChange(e,t){this.$emit("current-change",e,t)},nodeExpand(e,t,i){this.$emit("node-expand",e,t,i)},nodeCollapse(e,t,i){this.$emit("node-collapse",e,t,i)},nodeDragStart(e,t){this.$emit("node-drag-start",e,t)},nodeDragEnter(e,t,i){this.$emit("node-drag-enter",e,t,i)},nodeDragLeave(e,t,i){this.$emit("node-drag-leave",e,t,i)},nodeDragOver(e,t,i){this.$emit("node-drag-over",e,t,i)},nodeDragEnd(e,t,i,a){this.$emit("node-drag-end",e,t,i,a)},nodeDrop(e,t,i,a){this.$emit("node-drop",e,t,i,a)}}},yo=fo,bo=(i("8212"),W(yo,mo,go,!1,null,"39e0d488",null)),_o=bo.exports;_o.install=function(e){e.component(_o.name,_o)};var vo=_o,wo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"inputs"},[i("el-dialog",{staticClass:"dialog-selector__wrapper",attrs:{title:e.dialogTitle,visible:e.dialogVisible,top:"6vh","before-close":e.handleClose,"close-on-click-modal":!1,"append-to-body":e.appendToBody,"destroy-on-close":e.destroyOnClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-container",{staticClass:"container"},[i("el-aside",{staticClass:"left-aside",attrs:{width:"210px"}},[i("el-card",{staticClass:"box-card org-find-card",attrs:{shadow:"never"}},[i("ht-tree",{ref:"tree",attrs:{lazy:e.lazy,load:e.loadOrgTree,data:e.treeData,"default-expand-all":!1,"highlight-current":!0,props:e.props,"node-key":e.nodeKey,"default-expanded-keys":e.defaultExpandedKeys,accordion:""},on:{"node-click":e.handleNodeClick}})],1)],1),i("el-container",[i("el-main",[i("ht-selector",{ref:"selector",attrs:{data:e.data,pagination:e.pagination,"table-columns":e.tableColumns,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,single:e.single,"search-placeholder":e.searchPlaceholder},on:{load:e.load,reset:e.reset},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}})],1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleDialogSure}},[e._v("\n        "+e._s(e.$t("ht.common.confirm"))+"\n      ")]),i("el-button",{attrs:{size:"small"},on:{click:e.handleDialogCancel}},[e._v("\n        "+e._s(e.$t("ht.common.cancle"))+"\n      ")])],1)],1)],1)},So=[],Co={name:"HtTreeListDialog",components:{HtSelector:Yi},props:{dialogTitle:{type:String,default(){return Object(Me["c"])("ht.selector.dialog")}},props:{type:Object,default(){return{children:"children",label:"name",isLeaf:"leaf"}}},treeData:{type:Array,default:()=>[]},loadOrgTree:{type:Function},value:String,single:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},data:{type:Array,default:()=>[]},tableColumns:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({page:1,pageSize:50,total:0})},selectLabel:{type:String,default:"name"},appendToBody:{type:Boolean,default:!1},defaultDemension:{type:[String,Number],default:""},quickSearchProps:{type:[String,Array],required:!0},nodeKey:{type:String,default:"id"},defaultExpandedKeys:{type:Array,default(){return[]}},searchPlaceholder:{type:String,default:""},destroyOnClose:{type:Boolean,default:!1}},data(){return{inputName:null,selectors:[],dialogVisible:!1}},methods:{showDialog(e){this.dialogVisible=!0,e||(e=[]),Object(ji["setTimeout"])(()=>{this.$refs.selector.onShow(e)})},handleClose(e){this.$refs.selector.onHide(),e&&e()},handleDialogSure(){this.dialogVisible=!1,this.$refs.selector.onHide(!0),this.$emit("onConfirm",this.selectors)},handleDialogCancel(){this.dialogVisible=!1,this.$refs.selector.onHide()},handleRemove(e){this.selectors.remove(e)},load(e,t){this.$emit("load",e,t)},handleNodeClick(e){this.$emit("loadListData",e)},reset(){this.$emit("reset")}}},Do=Co,xo=(i("b909"),W(Do,wo,So,!1,null,"4a335e6b",null)),To=xo.exports;To.install=function(e){e.component(To.name,To)};var Po=To,Eo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-form-item",{key:e.fieldPath,staticClass:"ht-form-item",class:e.formItemClass,attrs:{label:e.label,"label-width":e.finalLabelWidth}},[e._t("default"),e._t("label",null,{slot:"label"})],2)},Oo=[],ko={name:"HtFormItem",componentName:"HtFormItem",inject:{elForm:{default:""}},props:{label:{type:String,default:""},align:{type:String,validator:function(e){return-1!==["left","center","right","justify"].indexOf(e)}},labelColor:{type:String},labelWidth:{type:String},customColon:{type:Boolean,default:!1},required:{type:Boolean,default:!1},fieldPath:{type:String}},data(){return{formItemAlign:null,isRequired:!1}},computed:{finalLabelWidth(){return this.labelWidth?this.labelWidth:this.elForm&&this.elForm.labelWidth?this.elForm.labelWidth:"100px"},formItemClass:function(){let e=[];const t=this.align?this.align:this.formItemAlign?this.formItemAlign:"";switch(this.customColon||e.push("ht-form-item-colon"),t){case"left":e.push("ht-form-item-left");break;case"center":e.push("ht-form-item-center");break;case"right":e.push("ht-form-item-right");break;case"justify":e.push("ht-form-item-justify")}if(this.$slots.default)for(let i=0;i<this.$slots.default.length;i++){let t=this.$slots.default[i];if(t.componentOptions&&t.componentOptions.propsData){let i=t.componentOptions.propsData,a=i.validate;if(!a&&t.data.directives){let e=t.data.directives.filter(e=>"validate"==e.name);e&&e.length>0&&(a=e[0].value)}(this.required||a&&a.constructor==Object&&a.required||a&&a.constructor==String&&-1!=a.indexOf("required")||"b"==i.permission)&&e.push("is-required"),"r"===i.permission&&-1!=e.indexOf("is-required")&&(e=e.filter(e=>"is-required"!=e)),this.isRequired&&!e.includes("is-required")&&e.push("is-required");break}}return e.join(" ")}},created(){this.$on("formExtend:update",e=>{this.formItemAlign=e.formItemAlign}),this.$root.$on("current-required-item",e=>{"b"===e["data."+this.fieldPath]?this.isRequired=!0:["w","n","r"].includes(e["data."+this.fieldPath])&&(this.isRequired=!1)})},mounted(){this.labelColor&&this.$el.firstElementChild&&(this.$el.firstElementChild.style.color=this.labelColor)}},Io=ko,$o=(i("e561"),W(Io,Eo,Oo,!1,null,"652fdf35",null)),Ao=$o.exports;Ao.install=function(e){e.component(Ao.name,Ao)};var Bo=Ao,Mo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-button",{attrs:{type:e.type,loading:e.loading,disabled:e.disabled,icon:e.icon},on:{click:e.preSubmitData}},[e._t("default")],2)},Lo=[],Fo={name:"HtSaveButton",props:{isSubmit:{type:Boolean,default:!0},type:{type:String,default:"primary"},scopeName:{type:String,required:!0},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:String},data(){return{}},mounted(){this.$validator=this.$root.$validator},methods:{preSubmitData(){this.$validator.validateAll(this.scopeName).then(e=>{if(e)this.submitData();else{let e=this.$validator.errors.items.filter(e=>e.scope==this.scopeName),t=e.length;this.$message({showClose:!0,message:this.$t("ht.savaButton.errorMsg",{errorLength:t}),type:"warning"})}})},async submitData(){await this.$emit("before-save-data"),this.isSubmit&&this.$emit("request-save-data")}}},No=Fo,qo=W(No,Mo,Lo,!1,null,null,null),Vo=qo.exports;Vo.install=function(e){e.component(Vo.name,Vo)};var Ro=Vo,zo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"inputs",class:["inputs","ht-duration","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[i("ht-input",{staticStyle:{width:"90px"},attrs:{type:"number",min:0,size:e.size,validate:e.validate,disabled:e.disabled},on:{change:e.change},model:{value:e.data.day,callback:function(t){e.$set(e.data,"day",t)},expression:"data.day"}}),e._v("\n  "+e._s(e.$t("ht.common.day"))+"\n  "),i("ht-select",{staticStyle:{width:"65px"},attrs:{size:e.size,validate:e.validate,options:e.hours,disabled:e.disabled},on:{change:e.change},model:{value:e.data.hour,callback:function(t){e.$set(e.data,"hour",t)},expression:"data.hour"}}),e._v("\n  "+e._s(e.$t("ht.common.hour"))+"\n  "),i("ht-select",{staticStyle:{width:"65px"},attrs:{size:e.size,validate:e.validate,options:e.minutes,disabled:e.disabled},on:{change:e.change},model:{value:e.data.minute,callback:function(t){e.$set(e.data,"minute",t)},expression:"data.minute"}}),e._v("\n  "+e._s(e.$t("ht.common.minute"))+"\n  "),"second"==e.type?i("ht-select",{staticStyle:{width:"65px"},attrs:{size:e.size,validate:e.validate,options:e.minutes,disabled:e.disabled},on:{change:e.change},model:{value:e.data.second,callback:function(t){e.$set(e.data,"second",t)},expression:"data.second"}}):e._e(),e._v("\n  "+e._s("second"==e.type?e.$t("ht.common.second"):"")+"\n")],1)},Ho=[],Uo={name:"HtDuration",mixins:[me["a"]],props:{value:{type:[String,Number]},name:{type:String},size:{type:String,default:"small"},validate:{type:[String,Object]},disabled:{type:Boolean,default:!1},type:{type:String,default:"minute",validator:function(e){return-1!==["minute","second"].indexOf(e)}}},data(){return{hours:[],minutes:[],data:{day:0,hour:0,minute:0,second:0}}},watch:{value:function(e,t){e&&e!=t&&this.initData(),e||(this.data={day:0,hour:0,minute:0,second:0})}},mounted(){for(let e=0;e<=23;e++)this.hours.push({key:e,value:e+""});for(let e=0;e<=59;e++)this.minutes.push({key:e,value:e+""});this.initData()},methods:{initData(){this.value&&"second"==this.type&&(this.data.day=parseInt(this.value/86400),this.data.hour=parseInt(this.value%86400/3600),this.data.minute=parseInt(this.value%3600/60),this.data.second=this.value%60),this.value&&"minute"==this.type&&(this.data.day=parseInt(this.value/60/24),this.data.hour=parseInt(this.value/60%24),this.data.minute=parseInt(this.value%60))},change(){let e=0;this.data.second&&(e+=this.data.second),this.data.minute&&(e+=60*this.data.minute),this.data.hour&&(e+=60*this.data.hour*60),this.data.day&&(e+=24*this.data.day*60*60),"minute"==this.type&&(e/=60),this.$emit("input",e)}}},Ko=Uo,jo=(i("3a16"),W(Ko,zo,Ho,!1,null,"767cf4d8",null)),Wo=jo.exports;Wo.install=function(e){e.component(Wo.name,Wo)};var Qo=Wo;let Jo={};function Go(e,t){t?t.constructor.super.util.warn(e,t):console.error(e)}var Yo={name:"HtIcon",props:{name:{type:String,default:"",validator(e){return!e||e in Jo||(Go(`Invalid prop: prop "name" is referring to an unregistered icon "${e}".\nPlease make sure you have imported this icon before using it.`,this),!1)}},title:{type:String,default:""},scale:{type:[Number,String],default:1},spin:{type:Boolean,default:!1},inverse:{type:Boolean,default:!1},pulse:{type:Boolean,default:!1},flip:{validator(e){return"horizontal"===e||"vertical"===e||"both"===e||""===e},default:""},rotate:{type:[Number,String],default:0},label:{type:String,default:""},tabindex:{type:[Number,String],default:""}},data(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale(){let e=this.scale;return e="undefined"===typeof e?1:Number(e),isNaN(e)||e<=0?(Go('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):e*this.outerScale},rotateDegree(){let e=this.rotate;return e="undefined"===typeof e?0:Number(e),isNaN(e)?(Go('Invalid prop: prop "rotate" should be a number.',this),0):e},klass(){let e={"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-flip-both":"both"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse};return this.classes&&Object.keys(this.classes).forEach(t=>{this.classes[t]&&(e[t]=!0)}),e},icon(){return this.name?Jo[this.name]:null},box(){return this.icon?`0 0 ${this.icon.width} ${this.icon.height}`:`0 0 ${this.width} ${this.height}`},ratio(){if(!this.icon)return 1;let{width:e,height:t}=this.icon;return Math.max(e,t)/16},aspectRatio(){if(!this.icon)return 1;let{width:e,height:t}=this.icon;return e/t},amendWidth(){return this.aspectRatio<1},amendHeight(){return this.aspectRatio>1},width(){return this.childrenWidth||this.icon&&this.icon.width/(this.amendWidth?this.aspectRatio:1)/this.ratio*this.normalizedScale||0},height(){return this.childrenHeight||this.icon&&this.icon.height*(this.amendHeight?this.aspectRatio:1)/this.ratio*this.normalizedScale||0},style(){if(1===this.normalizedScale&&0===this.rotateDegree)return!1;const e={};return 1!==this.normalizedScale&&(e.fontSize=this.normalizedScale+"em"),0!==this.rotateDegree&&(e.transform=`rotate(${this.rotateDegree}deg)`),e},raw(){if(!this.icon||!this.icon.raw)return null;let e=this.icon.raw,t={};return e=e.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,(e,i,a)=>{let s=tr("vat-");return t[a]=s,` id="${s}"`}),e=e.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(e,i,a,s)=>{let l=i||s;return l&&t[l]?"#"+t[l]:e}),e},focusable(){let{tabindex:e}=this;if(null==e)return"false";let t="string"===typeof e?parseInt(e,10):e;return t>=0?null:"false"}},mounted(){this.updateStack()},updated(){this.updateStack()},methods:{updateStack(){if(!this.name&&null!==this.name&&0===this.$children.length)return void Go('Invalid prop: prop "name" is required.',this);if(this.icon)return;let e=0,t=0;this.$children.forEach(i=>{i.outerScale=this.normalizedScale,e=Math.max(e,i.width),t=Math.max(t,i.height)}),this.childrenWidth=e,this.childrenHeight=t,this.$children.forEach(i=>{i.x=(e-i.width)/2,i.y=(t-i.height)/2})}},render(e){if(null===this.name)return e();let t={class:this.klass,style:this.style,attrs:{role:this.$attrs.role||(this.label||this.title?"img":null),"aria-label":this.label||null,"aria-hidden":!(this.label||this.title),tabindex:this.tabindex,x:this.x,y:this.y,width:this.width,height:this.height,viewBox:this.box,focusable:this.focusable},on:this.$listeners};if(this.raw){let e=`<g>${this.raw}</g>`;this.title&&(e=`<title>${ar(this.title)}</title>${e}`),t.domProps={innerHTML:e}}let i=this.title?[e("title",this.title)]:[];return e("svg",t,this.raw?null:i.concat([e("g",this.$slots.default||(this.icon?[...this.icon.paths.map((t,i)=>e("path",{attrs:t,key:"path-"+i})),...this.icon.polygons.map((t,i)=>e("polygon",{attrs:t,key:"polygon-"+i}))]:[]))]))},register(e){for(let t in e){let i=e[t],{paths:a=[],d:s,polygons:l=[],points:n}=i;s&&a.push({d:s}),n&&l.push({points:n}),Jo[t]=Xo({},i,{paths:a,polygons:l})}},icons:Jo};function Zo(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Xo(e,...t){return t.forEach(t=>{for(let i in t)Zo(t,i)&&(e[i]=t[i])}),e}let er=0;function tr(e=""){return e+er++}const ir={"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"};function ar(e){return e.replace(/[<>"&]/g,e=>ir[e]||e)}var sr,lr,nr=Yo,or=(i("eeb9"),W(nr,sr,lr,!1,null,null,null)),rr=or.exports;rr.install=function(e){e.component(rr.name,rr)};var cr=rr,hr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:"n"!=e.permission_sub,expression:"permission_sub != 'n'"}],class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline",e.disabled?"is-disabled":""],style:e.styleEditor},[e.inputWriteable&&!e.hasTextValue?i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"},{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],attrs:{name:e.inputName,type:"hidden"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}):e._e(),e.inputWriteable&&!e.hasTextValue&&"property-text"!==e.type?i("div",{attrs:{id:e.editorId}}):i("div",{staticClass:"w-e-text",class:{"empty-div":"property-text"===e.type&&!e.hasTextValue},style:e.showBorder?e.textDivStyle:{},domProps:{innerHTML:e._s(e.inputVal)}}),i("ht-field-tail",{attrs:{"field-name":e.inputName,readonly:!1}})],1)},ur=[],dr=i("69da"),pr=dr["a"],mr=(i("9813"),W(pr,hr,ur,!1,null,"34d343a4",null)),gr=mr.exports;gr.install=function(e){e.component(gr.name,gr)};var fr=gr,yr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"inputs ht-picture",class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[i("div",{directives:[{name:"show",rawName:"v-show",value:!!e.imgList.length,expression:"!!imgList.length"}],staticClass:"ht-picture__images"},e._l(e.imgList,(function(t,a){return i("el-card",{key:t.uid,staticClass:"ht-picture__card",attrs:{alt:e.t("ht.picture.viewOriginalImage"),"body-style":e.bodyStyle}},[i("el-image",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:a,staticClass:"ht-picture__item-img",style:e.style,attrs:{src:t.url||e.getCurrentImgSrc(t),"preview-src-list":e.srcList}}),i("div",{staticClass:"ht-picture__footer"},[i("div",{staticClass:"ht-picture__name"},[e.openUrl?[i("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.hrefClick()}}},[e._v("\n              "+e._s(t.name||t.fileName)+"\n            ")])]:[e._v("\n            "+e._s(t.name||t.fileName)+"\n          ")]],2),i("div",{staticClass:"ht-picture__footer-btn"},["local"===e.uploadType&&e.downloadable?i("el-button",{staticClass:"ht-picture__download",attrs:{icon:"el-icon-download",circle:""},on:{click:function(i){return e.downloadPicture(t)}}}):e._e(),e.inputWriteable?i("el-popconfirm",{attrs:{title:e.t("ht.picture.deleteTip",{clear:e.t("ht.common.clear")})},on:{confirm:function(i){return e.handleDelete(t)}}},[i("el-button",{attrs:{slot:"reference",icon:"el-icon-delete",circle:""},slot:"reference"})],1):e._e()],1)])],1)})),1),i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"},{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],attrs:{type:"hidden",name:e.inputName},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),"local"===e.uploadType&&e.inputWriteable&&!e.userAgentMobile?i("file-upload",{ref:"fileUpload",staticClass:"ht-picture-upload",attrs:{"action-url":e.actionUrlVal,header:e.headerVal,"on-success":e.handleSuccess,"on-progress":e.onProgress,"before-upload":e.beforeImgUpload,multiple:e.multiple,limit:e.limit,size:e.fileSize,accept:e.accept,"show-file-list":!1,"with-credentials":e.withCredentials,"on-exceed":e.handleExceed},on:{clear:e.handleClear},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}}):e._e(),i("ht-field-tail",{attrs:{writeable:e.inputWriteable,"field-name":e.inputName,"input-value":e.value},on:{"update:writeable":function(t){e.inputWriteable=t}}}),"web"==e.uploadType&&e.inputWriteable?i("el-button",{attrs:{size:"mini",round:"",icon:"el-icon-plus"},on:{click:e.openDialog}},[e._v("\n    "+e._s(e.t("ht.picture.uploadButtonText"))+"\n  ")]):e._e(),"web"==e.uploadType&&e.inputWriteable&&e.imgList.length?i("el-popconfirm",{staticClass:"pop-confirm-btn",attrs:{title:e.t("ht.picture.deleteTip",{clear:e.t("ht.common.clear")})},on:{confirm:e.handleClear}},[i("el-button",{attrs:{slot:"reference",icon:"el-icon-delete",round:"",size:"mini"},slot:"reference"},[e._v("\n      "+e._s(e.t("ht.common.clear"))+"\n    ")])],1):e._e(),e.inputWriteable&&"local"===e.uploadType&&e.userAgentMobile?i("div",{staticClass:"ht-picture__mobile"},[i("input",{ref:"mobilePicRef",staticClass:"ht-picture__hide-input",attrs:{id:"upload",type:"file",accept:"image/*",multiple:e.multiple},on:{change:function(t){return e.handlePicChange(t)}}}),i("div",{staticClass:"camera"},[e.userAgentMobile&&"local"==e.uploadType?i("el-button",{attrs:{size:"mini",round:"",icon:"el-icon-plus"},on:{click:e.clickPicture}},[e._v("\n        "+e._s(e.t("ht.picture.uploadButtonText"))+"\n      ")]):e._e(),e.imgList.length?i("el-popconfirm",{staticClass:"pop-confirm-btn",attrs:{title:e.t("ht.picture.deleteTip",{clear:e.t("ht.common.clear")})},on:{confirm:e.handleClear}},[i("el-button",{attrs:{slot:"reference",icon:"el-icon-delete",round:"",size:"mini"},slot:"reference"},[e._v("\n          "+e._s(e.t("ht.common.clear"))+"\n        ")])],1):e._e()],1)]):e._e(),i("el-dialog",{attrs:{visible:e.dialogFormVisible,title:e.t("ht.picture.uploadWebImg"),"close-on-click-modal":!1,width:e.userAgentMobile?"85%":"50%","custom-class":e.isMobileClass,"append-to-body":e.appendToBody},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"webImgFormRef",attrs:{model:e.webImages,"data-vv-scope":"webImgFrom"}},[i("ht-form-item",{attrs:{label:e.t("ht.picture.imgName"),"label-width":"100px"}},[i("ht-input",{staticStyle:{width:"100%"},attrs:{placeholder:e.t("ht.picture.imgNamePlaceHolder"),validate:"required"},model:{value:e.webImages.fileName,callback:function(t){e.$set(e.webImages,"fileName",t)},expression:"webImages.fileName"}})],1),i("ht-form-item",{attrs:{label:e.t("ht.picture.imgUrl"),"label-width":"100px"}},[i("ht-input",{staticStyle:{width:"100%"},attrs:{placeholder:e.t("ht.picture.imgUrlPlaceHolder"),validate:"required"},model:{value:e.webImages.url,callback:function(t){e.$set(e.webImages,"url",t)},expression:"webImages.url"}})],1),i("div",{staticClass:"ht-dialog-footer"},[i("el-button",{staticClass:"submit-button",attrs:{type:"primary",size:"small",loading:e.btnLoading},on:{click:e.handleSubmit}},[e._v("\n          "+e._s(e.t("ht.common.confirm"))+"\n        ")]),i("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("\n          "+e._s(e.t("ht.common.close"))+"\n        ")])],1)],1)],1)],1)},br=[],_r=i("45fd"),vr=i("d705");const{saveAs:wr}=i("9588");var Sr={name:"HtPicture",components:{fileUpload:pi},mixins:[de["a"],kt["a"],Le,pe["a"],me["a"]],props:{compress:{type:Boolean,default:!1},value:{type:String},withCredentials:{type:Boolean,default:!1},uploadType:{type:String,default:"",validator:e=>["web","local"].includes(e)},actionUrl:{type:String,default:""},headers:Object,imgHeight:[String,Number],imgWidth:[String,Number],limit:Number,multiple:{type:Boolean,default:!0},allowPreview:{type:Boolean,default:!1},allowDownload:{type:Boolean,default:!1},fileSize:{type:Number,default:6},bodyStyle:{type:Object,default:()=>({padding:"10px",cursor:"pointer"})},onProgress:Function,openUrl:{type:String,default:""},flowData:{type:Object,default:()=>({})},appendToBody:{type:Boolean,default:!0}},data(){return{imgList:[],dialogFormVisible:!1,srcList:[],webImages:{fileName:"",url:""},accept:"jpg,png,gif,ico,jpeg,GPG,PNG,GIF,JPEG",refreshFileUploadDebounce:fe.a.debounce(this.refreshFileUpload,200),loading:!1,btnLoading:!1,compressConfig:.3}},computed:{inputVal:{get(){let e=[];return y["a"].isEmpty(this.value)?e=[]:this.value.constructor==String&&(e=[...JSON.parse(this.value)]),e},set(){}},downloadable(){return this.inputWriteable||this.allowDownload},preview(){return this.inputWriteable||this.allowPreview},style(){return{width:(this.imgWidth||"")+"px",height:(this.imgHeight||"")+"px"}},isUpload(){return!["r","n"].includes(this.permission)},isMobileClass(){return this.userAgentMobile?"is-mobile":"form-dialog"},actionUrlVal:function(){return this.actionUrl?this.actionUrl:this.$requestConfig.uploadUrl?this.handlerUploadUrl:"https://jsonplaceholder.typicode.com/posts/"},handlerUploadUrl(){const e=this.$requestConfig.uploadUrl;if(!this.flowData.defId)return e;const t=e.indexOf("?");return-1==t?`${e}?defId=${this.flowData.defId}`:t>-1&&t==e.length-1?`${e}defId=${this.flowData.defId}`:t>-1&&t<e.length-1?`${e}&defId=${this.flowData.defId}`:e},headerVal:function(){return this.headers?this.headers:this.$requestConfig.header?this.$requestConfig.header():null}},watch:{imgList:{handler(){this.syncSrcList()},deep:!0,immediate:!0},value(e){e?this.initData():this.imgList=[]}},mounted(){this.value&&this.initData()},methods:{initData(){const e=this.value.constructor==String?JSON.parse(this.value):this.value;e.constructor==Array&&e.length>-1&&this.updateImgListWithCurrentImgList(e)},updateImgListWithCurrentImgList(e){this.imgList&&0!=this.imgList.length&&e&&0!=e.length?(e.forEach(e=>{const t=this.imgList.find(t=>e.uid===t.uid||e.response&&t.response&&e.response.fileId==t.response.fileId);t&&t.url&&(e.url=t.url)}),this.imgList=e):this.imgList=e},getCurrentImgSrc(e){const t=this;e&&e.response&&e.response.fileId&&!e.urlLoading&&(e.urlLoading=!0,this.loading=!0,this.$requestConfig.getImgSrc(e.response.fileId).then(i=>{if(i.size>0){const a=new FileReader;a.readAsDataURL(i),a.onload=function(i){if(e.url=i.target.result,delete e["urlLoading"],t.imgList&&t.imgList.length>0){const e=t.imgList[0];t.$set(t.imgList,0,e),t.imgList.forEach(e=>{}),t.syncSrcList()}}}}).finally(()=>{this.loading=!1}))},syncSrcList(){const e=this.imgList.map(e=>e.url);this.srcList=this.preview?e:[]},downloadPicture(e){this.$options._parentListeners.download?this.$emit("download",e):this.$requestConfig.download&&this.$requestConfig.download(e.fileId||e.response?e.response.fileId:"").then(({data:e,headers:t})=>{const i=decodeURIComponent(t["content-disposition"].split(";")[1].split("filename=")[1]),a=new Blob([e]);wr(a,i)}).catch(e=>{this.$message.error(`${this.$t("ht.file.fileDownloadError")}：${e}`)})},handleDelete(e){let t=y["a"].isEmpty(this.value)?[]:this.value.constructor==String?JSON.parse(this.value):this.value;const i=t.findIndex(t=>t.uid==e.uid);t.splice(i,1);const a=this.imgList.findIndex(t=>t.uid==e.uid);this.imgList.splice(a,1),this.$emit("input",t.length>0?JSON.stringify(t):""),"local"===this.uploadType&&this.refreshFileUploadDebounce(),this.userAgentMobile&&(this.$refs.mobilePicRef.value="")},handlePicChange(e){const t=[...e.target.files];if(this.limit){let e=t.length+this.imgList.length;if(this.limit<e)return void this.$message({type:"warning",message:this.t("ht.picture.limitCountTip",{limit:this.limit})})}let i=!1;t.forEach(e=>{this.isPictureType(e.name)&&(i=!0)}),i?this.toast():t.forEach(e=>{this.mobileUploadFile(e)})},clickPicture(){this.$refs.mobilePicRef.click()},async handleSubmit(){let e=await this.$validator.validateAll("webImgFrom");if(e){if(this.btnLoading=!0,this.inputVal.length+1>this.limit||this.srcList.length+1>this.limit)return this.btnLoading=!1,this.$message({type:"warning",message:this.t("ht.picture.limitCountTip",{limit:this.limit})});this.setImgList(this.webImages),this.$emit("input",JSON.stringify(this.imgList)),this.dialogFormVisible=!1}},openDialog(){this.dialogFormVisible=!0,this.btnLoading=!1,this.$nextTick(()=>{this.$refs.webImgFormRef.resetFields(),this.webImages={fileName:"",url:""}})},setImgList(e){this.imgList.push({...e,uid:`${(new Date).getTime()}_${Math.ceil(10*Math.random())}`})},handleSuccess(e,t,i){let a="";(t.raw&&t.raw.type&&t.raw.type.indexOf("image/")>-1||!t.raw&&t.type&&t.type.indexOf("image/")>-1)&&(a=Object(_r["a"])(t.raw?t.raw:t)),this.imgList.push({...t,url:a,fileName:t.name}),this.$emit("input",JSON.stringify(i)),this.$emit("on-success",e,t,i),this.refreshFileUploadDebounce()},beforeImgUpload(e){return this.isPictureType(e.name)?(this.toast(),!1):this.compress?new Promise(t=>{Object(vr["compress"])(e,this.$imageCompressConfig?this.$imageCompressConfig:this.compressConfig).then(e=>{t(e)})}):void 0},clearForm(){this.webImages.fileName="",this.webImages.url=""},isPictureType(e){const t=e.replace(/.+\./,""),i=this.accept.split(",");return-1===i.indexOf(t.toLowerCase())},toast(){this.$message({type:"warning",message:this.t("ht.picture.limitTypeTip")})},handleClear(){this.imgList=[],this.srcList=[],this.$emit("input","")},refreshFileUpload(){this.$nextTick(()=>{this.$refs.fileUpload&&this.$refs.fileUpload.reload(this.inputVal)})},hrefClick(){let e=this.openUrl.replaceAll("${mvue}",this.$requestConfig.manageUrl).replaceAll("${fvue}",this.$requestConfig.frontUrl).replaceAll("${front}",this.$requestConfig.frontUrl);window.open(e,"_blank")},mobileUploadFile(e){let t=new FormData;t.append("file",e,e.name),this.$requestConfig.request({url:this.actionUrlVal,method:"post",data:t,headers:{...this.headerVal,"Content-Type":"multipart/form-data"}}).then(t=>{if(t.success){let i=`${(new Date).getTime()}_${Math.ceil(10*Math.random())}`;t.uid=i;let a={uid:i,name:e.name,response:t,url:Object(_r["a"])(e)};this.imgList.push(a);let s=JSON.parse(JSON.stringify(this.imgList));s.forEach(e=>{delete e.url}),this.$emit("input",JSON.stringify(s))}})},handleExceed(){this.$message({message:this.t("ht.picture.limitCountTip",{limit:this.limit}),type:"warning"})}}},Cr=Sr,Dr=(i("f076"),W(Cr,yr,br,!1,null,"7defa75c",null)),xr=Dr.exports;xr.install=function(e){e.component(xr.name,xr)};var Tr=xr,Pr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{staticClass:"ht-explain",style:e.textStyle},[e.isLabelShow?i("div",{staticClass:"ht-explain_label",style:{width:e.labelWidth}},[e._t("tip"),i("span",{staticClass:"label"},[e._v(e._s(e.$t("ht.explain.label"))+":")])],2):e._e(),i("div",{staticClass:"ht-explain_content",domProps:{innerHTML:e._s(e.compiledTextValue)}})]):e._e()},Er=[],Or={name:"HtExplain",mixins:[de["a"]],props:{textValue:String,marginTop:String,marginBottom:String,isLabelShow:{type:Boolean,default:!1},labelWidth:{type:String,default:"120px"},fontColor:{type:String,default:"#333333"}},data(){return{formInstance:null,compiledTextValue:null}},computed:{textStyle(){return{marginTop:this.marginTop,marginBottom:this.marginBottom,color:this.fontColor}}},watch:{textValue:{handler:function(e){this.loadCompiledTextValue(e)},immediate:!0},formInstance:function(e,t){!t&&e&&e.$on&&(e.$off("updateData",this.loadCompiledTextValue),e.$on("updateData",this.loadCompiledTextValue))}},beforeDestroy(){this.formInstance&&this.formInstance.$off&&this.formInstance.$off("updateData",this.loadCompiledTextValue)},methods:{loadCompiledTextValue(){this.textValue&&this.$nextTick(()=>{this.getTextValue(Object(Re["a"])(this.textValue)).then(e=>{this.compiledTextValue=e})})},getTextValue(e){null==this.formInstance&&(this.formInstance=y["a"].getOnlineFormInstance(this));const t=this.formInstance||this;return new Promise(i=>{const a=l.a.extend({data(){return{data:t.data}},template:`<div>${e}</div>`}),s=(new a).$mount();s.$nextTick(()=>{i(s.$el.innerHTML)})})}}},kr=Or,Ir=(i("1693"),W(kr,Pr,Er,!1,null,"64d5ffcb",null)),$r=Ir.exports;$r.install=function(e){e.component($r.name,$r)};var Ar=$r,Br=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vue-avatar--wrapper",style:[e.style,e.customStyle],attrs:{"aria-hidden":"true"}},[e.isImage?i("img",{staticStyle:{display:"none"},attrs:{src:e.src},on:{error:e.onImgError}}):e._e(),i("span",{directives:[{name:"show",rawName:"v-show",value:!e.isImage,expression:"!isImage"}]},[e._v(e._s(e.userInitial))])])},Mr=[];const Lr=e=>{let t=e.split(/[ -]/),i="";for(var a=0;a<t.length;a++)i+=t[a].charAt(0);return i.length>3&&-1!==i.search(/[A-Z]/)&&(i=i.replace(/[a-z]+/g,"")),i=1==t.length&&/^[\u4e00-\u9fa5]+.*$/.test(e)?e.length>1?e.substr(0,2):e.substr(0,1):i.substr(0,3).toUpperCase(),i};var Fr={name:"HtAvatarImage",props:{username:{type:String},initials:{type:String},backgroundColor:{type:String},color:{type:String},customStyle:{type:Object},inline:{type:Boolean},size:{type:Number,default:50},src:{type:String},rounded:{type:Boolean,default:!0},lighten:{type:Number,default:80},parser:{type:Function,default:Lr,validator:e=>"string"===typeof e("John",Lr)}},data(){return{backgroundColors:["#F44336","#FF4081","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFC107","#FF9800","#FF5722","#795548","#9E9E9E","#607D8B"],imgError:!1}},computed:{background(){return this.isImage?null:this.backgroundColor||this.randomBackgroundColor(this.username.length,this.backgroundColors)},fontColor(){return this.isImage?null:this.color||this.lightenColor(this.background,this.lighten)},isImage(){return!this.imgError&&Boolean(this.src)},style(){const e={display:this.inline?"inline-flex":"flex",width:this.size+"px",height:this.size+"px",borderRadius:this.rounded?"50%":0,lineHeight:this.size+Math.floor(this.size/20)+"px",fontWeight:"bold",alignItems:"center",justifyContent:"center",textAlign:"center",userSelect:"none"},t={background:`transparent url('${this.src}') no-repeat scroll 0% 0% / ${this.size}px ${this.size}px content-box border-box`},i={backgroundColor:this.background,font:`${Math.floor(this.size/2.5)}px/${this.size}px Helvetica, Arial, sans-serif`,color:this.fontColor},a=this.isImage?t:i;return Object.assign(e,a),e},userInitial(){if(!this.isImage){const e=this.initials||this.parser(this.username,Lr);return e}return""}},mounted(){this.isImage||this.$emit("avatar-initials",this.username,this.userInitial)},methods:{initial:Lr,onImgError(){this.imgError=!0},randomBackgroundColor(e,t){return t[e%t.length]},lightenColor(e,t){var i=!1;"#"===e[0]&&(e=e.slice(1),i=!0);var a=parseInt(e,16),s=(a>>16)+t;s>255?s=255:s<0&&(s=0);var l=(a>>8&255)+t;l>255?l=255:l<0&&(l=0);var n=(255&a)+t;return n>255?n=255:n<0&&(n=0),(i?"#":"")+(n|l<<8|s<<16).toString(16)}}},Nr=Fr,qr=W(Nr,Br,Mr,!1,null,null,null),Vr=qr.exports;Vr.install=function(e){e.component(Vr.name,Vr)};var Rr=Vr,zr=e=>{const t={name:"HtH"+e,props:{type:{type:String,default:"primary",validator(e){return"info"===e||"success"===e||"warning"===e||"danger"===e||"primary"===e}},textGap:{type:String,default:"16px"},scene:{type:Boolean,default:!1},barWidth:{type:String,default:"4px"},inline:{type:Boolean,default:!1}},computed:{typeColor(){return"info"==this.type?Ha.a.info_color:"success"==this.type?Ha.a.success_color:"warning"==this.type?Ha.a.warning_color:"danger"==this.type?Ha.a.danger_color:Ha.a.primary_color}},render(t){let i={"--header-padding-left":this.textGap,"--bar-color":this.typeColor,"--bezier":"cubic-bezier(0.4, 0, 0.2, 1)","--bar-width":this.barWidth,display:this.inline?"inline":"block",color:this.scene?this.typeColor:"trsparent"};return this.inline&&(i.display="inline"),this.scene&&(i.color=this.typeColor),t("h"+e,{class:["ht-typography__header"],style:i},this.$slots.default)}};return t};const Hr=zr("1"),Ur=zr("2"),Kr=zr("3"),jr=zr("4"),Wr=zr("5"),Qr=zr("6");rr.register({ad:{width:512,height:512,paths:[{d:"M157.52 272h36.96L176 218.78 157.52 272zM352 256c-13.23 0-24 10.77-24 24s10.77 24 24 24 24-10.77 24-24-10.77-24-24-24zM464 64H48C21.5 64 0 85.5 0 112v288c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM250.58 352h-16.94c-6.81 0-12.88-4.32-15.12-10.75L211.15 320h-70.29l-7.38 21.25A16 16 0 0 1 118.36 352h-16.94c-11.01 0-18.73-10.85-15.12-21.25L140 176.12A23.995 23.995 0 0 1 162.67 160h26.66A23.99 23.99 0 0 1 212 176.13l53.69 154.62c3.61 10.4-4.11 21.25-15.11 21.25zM424 336c0 8.84-7.16 16-16 16h-16c-4.85 0-9.04-2.27-11.98-5.68-8.62 3.66-18.09 5.68-28.02 5.68-39.7 0-72-32.3-72-72s32.3-72 72-72c8.46 0 16.46 1.73 24 4.42V176c0-8.84 7.16-16 16-16h16c8.84 0 16 7.16 16 16v160z"}]}}),rr.register({"address-book":{width:448,height:512,paths:[{d:"M436 160c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h320c26.5 0 48-21.5 48-48v-48h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20zm-68 304H48V48h320v416zM208 256c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm-89.6 128h179.2c12.4 0 22.4-8.6 22.4-19.2v-19.2c0-31.8-30.1-57.6-67.2-57.6-10.8 0-18.7 8-44.8 8-26.9 0-33.4-8-44.8-8-37.1 0-67.2 25.8-67.2 57.6v19.2c0 10.6 10 19.2 22.4 19.2z"}]}}),rr.register({arrow:{width:1024,height:1024,paths:[{d:"M689.9712 512h215.7568a34.133333 34.133333 0 0 1 24.1664 58.2656L559.342933 940.782933a68.266667 68.266667 0 0 1-96.529066 0L92.296533 570.2656A34.133333 34.133333 0 0 1 116.394667 512h215.722666V103.185067a68.266667 68.266667 0 0 1 68.266667-68.266667h221.2864a68.266667 68.266667 0 0 1 68.266667 68.266667V512z"}]}}),rr.register({attachment:{width:24,height:24,paths:[{fill:"none",d:"M0 0h24v24H0V0z"},{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"}]}}),rr.register({ban:{width:512,height:512,paths:[{d:"M256 8c137 0 248 111 248 248s-111 248-248 248-248-111-248-248 111-248 248-248zM386.1 125.9c-65.4-65.4-165.4-70-235.6-20.7l256.3 256.3c49.3-70.2 44.8-170.2-20.7-235.6zM125.9 386.1c65.4 65.4 165.4 70 235.6 20.7l-256.3-256.3c-49.3 70.2-44.8 170.2 20.7 235.6z"}]}}),rr.register({balance:{width:640,height:512,paths:[{d:"M256 336h-.02c0-16.18 1.34-8.73-85.05-181.51-17.65-35.29-68.19-35.36-85.87 0C-2.06 328.75.02 320.33.02 336H0c0 44.18 57.31 80 128 80s128-35.82 128-80zM128 176l72 144H56l72-144zm511.98 160c0-16.18 1.34-8.73-85.05-181.51-17.65-35.29-68.19-35.36-85.87 0-87.12 174.26-85.04 165.84-85.04 181.51H384c0 44.18 57.31 80 128 80s128-35.82 128-80h-.02zM440 320l72-144 72 144H440zm88 128H352V153.25c23.51-10.29 41.16-31.48 46.39-57.25H528c8.84 0 16-7.16 16-16V48c0-8.84-7.16-16-16-16H383.64C369.04 12.68 346.09 0 320 0s-49.04 12.68-63.64 32H112c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h129.61c5.23 25.76 22.87 46.96 46.39 57.25V448H112c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h416c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"}]}}),rr.register({bell:{width:1024,height:1024,paths:[{d:"M512 960c-212.032 0-384-85.952-384-192 0-39.168 23.744-75.52 64-105.856L192 512c0-132.16 80.192-245.568 194.624-294.4C384.896 209.344 384 200.768 384 192c0-70.656 57.344-128 128-128s128 57.344 128 128c0 8.768-0.896 17.344-2.624 25.6C751.744 266.432 832 379.84 832 512l0 150.144c40.256 30.4 64 66.688 64 105.856C896 874.048 724.032 960 512 960zM512 640c-141.376 0-256 57.344-256 128s114.624 128 256 128 256-57.344 256-128S653.376 640 512 640zM512 832c-62.528 0-114.368-44.864-125.568-104.064C420.16 713.216 463.744 704 512 704s91.904 9.216 125.632 23.936C626.368 787.136 574.528 832 512 832z"}]}}),rr.register({block:{width:1024,height:1024,paths:[{d:"M387.893367 0H51.804428A51.740428 51.740428 0 0 0 0.064 51.676472v335.833115a51.740428 51.740428 0 0 0 51.740428 51.676473h336.088939a51.740428 51.740428 0 0 0 51.740429-51.676473V51.676472A51.740428 51.740428 0 0 0 387.893367 0z m-34.4723 342.804322a10.232965 10.232965 0 0 1-10.232965 10.232965H96.509694a10.232965 10.232965 0 0 1-10.232965-10.232965V96.381738a10.232965 10.232965 0 0 1 10.232965-10.232965h246.742364a10.232965 10.232965 0 0 1 10.232965 10.232965z"},{d:"M971.428187 0H635.46716a51.740428 51.740428 0 0 0-51.740428 51.676472v335.833115a51.740428 51.740428 0 0 0 51.740428 51.676473h335.961027a51.740428 51.740428 0 0 0 51.740429-51.676473V51.676472A51.740428 51.740428 0 0 0 971.428187 0z m-34.4723 342.804322a10.232965 10.232965 0 0 1-10.232965 10.232965h-246.550497a10.232965 10.232965 0 0 1-10.232964-10.232965V96.381738a10.232965 10.232965 0 0 1 10.232964-10.232965h246.486541a10.232965 10.232965 0 0 1 10.232965 10.232965z"},{d:"M387.893367 584.110424H51.804428A51.740428 51.740428 0 0 0 0.064 635.786897v335.833114A51.740428 51.740428 0 0 0 51.804428 1023.296484h336.088939a51.740428 51.740428 0 0 0 51.740429-51.676473V635.786897a51.740428 51.740428 0 0 0-51.740429-51.676473z m-34.4723 342.804322a10.232965 10.232965 0 0 1-10.232965 10.232965H96.509694a10.232965 10.232965 0 0 1-10.232965-10.232965v-246.48654a10.232965 10.232965 0 0 1 10.232965-10.232965h246.742364a10.232965 10.232965 0 0 1 10.232965 10.232965z"},{d:"M971.428187 584.110424H635.46716a51.740428 51.740428 0 0 0-51.740428 51.676473v335.833114a51.740428 51.740428 0 0 0 51.740428 51.676473h335.961027a51.740428 51.740428 0 0 0 51.740429-51.676473V635.786897a51.740428 51.740428 0 0 0-51.740429-51.676473z m-34.4723 342.804322a10.232965 10.232965 0 0 1-10.232965 10.232965h-246.550497a10.232965 10.232965 0 0 1-10.232964-10.232965v-246.48654a10.232965 10.232965 0 0 1 10.232964-10.232965h246.486541a10.232965 10.232965 0 0 1 10.232965 10.232965z"}]}}),rr.register({book:{width:1024,height:1024,paths:[{d:"M973.142857 273.142857q22.857143 32.571429 10.285714 73.714286l-157.142857 517.714286q-10.857143 36.571429-43.714286 61.428571t-70 24.857143l-527.428571 0q-44 0-84.857143-30.571429t-56.857143-75.142857q-13.714286-38.285714-1.142857-72.571429 0-2.285714 1.714286-15.428571t2.285714-21.142857q0.571429-4.571429-1.714286-12.285714t-1.714286-11.142857q1.142857-6.285714 4.571429-12t9.428571-13.428571 9.428571-13.428571q13.142857-21.714286 25.714286-52.285714t17.142857-52.285714q1.714286-5.714286 2.857143-17.142857t2.857143-16q1.714286-6.285714 9.714286-16t9.714286-13.142857q12-20.571429 24-52.571429t14.285714-51.428571q0.571429-5.142857-1.428571-18.285714t2.857143-16q2.285714-7.428571 12.571429-17.428571t12.571429-12.857143q10.857143-14.857143 24.285714-48.285714t15.714286-55.142857q0.571429-4.571429-1.714286-14.571429t-1.142857-15.142857q1.142857-4.571429 5.142857-10.285714t10.285714-13.142857 9.714286-12q4.571429-6.857143 9.428571-17.428571t8.571429-20 9.142857-20.571429 11.142857-18.285714 15.142857-13.428571 20.571429-6.571429 27.142857 3.142857l-0.571429 1.714286q21.714286-5.142857 29.142857-5.142857l434.857143 0q42.285714 0 65.142857 32t10.285714 74.285714l-156.571429 517.714286q-20.571429 68-40.857143 87.714286t-73.428571 19.714286l-496.571429 0q-15.428571 0-21.714286 8.571429-6.285714 9.142857-0.571429 24.571429 13.714286 40 82.285714 40l527.428571 0q16.571429 0 32-8.857143t20-23.714286l171.428571-564q4-12.571429 2.857143-32.571429 21.714286 8.571429 33.714286 24.571429zm-608 1.142857q-2.285714 7.428571 1.142857 12.857143t11.428571 5.428571l347.428571 0q7.428571 0 14.571429-5.428571t9.428571-12.857143l12-36.571429q2.285714-7.428571-1.142857-12.857143t-11.428571-5.428571l-347.428571 0q-7.428571 0-14.571429 5.428571t-9.428571 12.857143zm-47.428571 146.285714q-2.285714 7.428571 1.142857 12.857143t11.428571 5.428571l347.428571 0q7.428571 0 14.571429-5.428571t9.428571-12.857143l12-36.571429q2.285714-7.428571-1.142857-12.857143t-11.428571-5.428571l-347.428571 0q-7.428571 0-14.571429 5.428571t-9.428571 12.857143z"}]}}),rr.register({bookmark:{width:1024,height:1024,paths:[{d:"M853.333333 938.666667H277.333333A149.333333 149.333333 0 0 1 128 789.333333V213.333333a128 128 0 0 1 128-128h597.333333a42.666667 42.666667 0 0 1 42.666667 42.666667v768a42.666667 42.666667 0 0 1-42.666667 42.666667z m-42.666666-85.333334v-128H277.333333a64 64 0 0 0 0 128H810.666667zM426.666667 170.666667v341.333333l149.333333-85.333333 149.333333 85.333333V170.666667h-298.666666z"}]}}),rr.register({bug:{width:1024,height:1024,paths:[{d:"M749.28 254.654C690.73 177.024 606.124 128 512 128s-178.73 49.024-237.28 126.654c12.708 31.28 31.666 60 56.26 84.594 48.352 48.352 112.638 74.98 181.02 74.98s132.668-26.628 181.02-74.98C717.614 314.654 736.572 285.932 749.28 254.654z"},{d:"M253.672 285.648c-3.45 5.654-6.792 11.406-9.984 17.288-5.852-3.68-10.638-7.48-15.49-11.546-2.342-1.962-5.908-7.898-9.092-14.7 10.82-22.628 2.362-50.074-19.828-62.522-23.122-12.968-52.376-4.744-65.348 18.378-12.97 23.12-4.742 52.376 18.374 65.346 2.502 1.404 5.078 2.544 7.694 3.458 5.632 12.538 14.64 28.662 27.096 39.094 8.368 7.014 17.584 14.234 30.408 21.348-14.39 40.518-23.152 84.606-25.09 130.854-22.052 0.414-37.238 4.2-50.948 8.244-8.32 2.454-16.384 6.79-23.646 11.704-1.908-0.23-3.846-0.364-5.816-0.364-26.51 0-48 21.49-48 48s21.49 48 48 48c25.86 0 46.934-20.454 47.952-46.064 10.092-2.964 19.776-5.318 34.19-5.548 6.334 66.03 26.608 126.966 57.226 178.448-28.332 22.012-45.764 46.032-53.21 72.634 0 0-1.5 0.876-3.746 2.732-1.964 1.588-3.864 3.3-5.608 5.238-17.73 19.71-16.124 50.062 3.586 67.79 19.708 17.73 50.056 16.124 67.786-3.586 16.174-17.976 16.19-44.762 1.116-62.79 6.148-11.124 12.472-18.028 27.34-29.922C342.736 850.47 415.446 891.238 496 896L496 445.744C389.528 439.908 298.458 376.276 253.672 285.648z"},{d:"M912 512.228c-1.97 0-3.908 0.132-5.816 0.364-7.262-4.914-15.326-9.25-23.646-11.704-13.708-4.042-28.894-7.83-50.948-8.244-1.938-46.25-10.7-90.336-25.09-130.854 12.824-7.114 22.042-14.334 30.408-21.348 12.456-10.432 21.462-26.556 27.096-39.094 2.616-0.916 5.192-2.056 7.694-3.458 23.116-12.97 31.344-42.228 18.374-65.346-12.97-23.122-42.226-31.346-65.348-18.378-22.19 12.45-30.648 39.894-19.828 62.522-3.184 6.802-6.75 12.738-9.092 14.7-4.852 4.066-9.638 7.866-15.49 11.546-3.192-5.882-6.536-11.634-9.984-17.288-44.786 90.628-135.856 154.26-242.328 160.096L528.002 896c80.554-4.762 153.264-45.53 207.372-108.84 14.868 11.894 21.192 18.798 27.34 29.922-15.074 18.028-15.058 44.812 1.116 62.79 17.728 19.71 48.076 21.316 67.786 3.586 19.708-17.726 21.316-48.078 3.586-67.79-1.744-1.938-3.642-3.65-5.608-5.238-2.246-1.858-3.746-2.732-3.746-2.732-7.448-26.604-24.878-50.624-53.21-72.634 30.62-51.48 50.892-112.418 57.226-178.448 14.414 0.23 24.098 2.584 34.19 5.548 1.018 25.612 22.092 46.064 47.952 46.064 26.51 0 48-21.49 48-48S938.51 512.228 912 512.228z"}]}}),rr.register({bullhorn:{width:1024,height:1024,paths:[{d:"M1024.032 429.248c0-200.928-58.784-363.936-131.488-365.216 0.288 0 0.576-0.032 0.864-0.032l-82.944 0c0 0-194.816 146.336-475.232 203.744-8.576 45.28-14.016 99.264-14.016 161.504s5.472 116.192 14.016 161.504c280.416 57.408 475.232 203.744 475.232 203.744l82.944 0c-0.288 0-0.576-0.032-0.864-0.032 72.704-1.28 131.488-164.288 131.488-365.216zM864.864 739.264c-9.376 0-19.52-9.728-24.736-15.552-12.64-14.048-24.8-35.968-35.2-63.328-23.264-61.216-36.064-143.296-36.064-231.136s12.8-169.888 36.064-231.136c10.4-27.36 22.56-49.28 35.2-63.328 5.216-5.824 15.36-15.552 24.736-15.552s19.52 9.728 24.736 15.552c12.64 14.048 24.8 35.968 35.2 63.328 23.264 61.216 36.064 143.328 36.064 231.136s-12.8 169.888-36.064 231.136c-10.4 27.36-22.56 49.28-35.2 63.328-5.216 5.792-15.36 15.552-24.736 15.552zM251.84 429.248c0-51.936 3.808-102.432 11.04-149.088-47.36 6.56-88.928 10.336-140.352 10.336-67.072 0-67.072 0-67.072 0l-55.456 94.688 0 88.16 55.456 94.688c0 0 0 0 67.072 0 51.392 0 92.96 3.776 140.352 10.336-7.232-46.656-11.04-97.152-11.04-149.088zM368.192 642.176l-128-24.512 81.856 321.536c4.224 16.64 20.736 25.024 36.672 18.656l118.56-47.456c15.936-6.368 22.336-23.968 14.208-39.072l-123.296-229.152zM864.864 548.736c-3.616 0-7.52-3.744-9.536-5.984-4.864-5.408-9.568-13.856-13.568-24.416-8.96-23.616-13.888-55.232-13.888-89.088s4.928-65.472 13.888-89.088c4-10.56 8.704-18.976 13.568-24.416 2.016-2.24 5.92-5.984 9.536-5.984s7.52 3.744 9.536 5.984c4.864 5.408 9.568 13.856 13.568 24.416 8.96 23.584 13.888 55.232 13.888 89.088s-4.928 65.472-13.888 89.088c-4 10.56-8.704 18.976-13.568 24.416-2.016 2.24-5.92 5.984-9.536 5.984z"}]}}),rr.register({calc:{width:1024,height:1024,paths:[{d:"M213.942857 369.142857H292.571429v78.628572c0 2.057143 2.057143 3.657143 4.571428 3.657142h54.857143c2.514286 0 4.571429-1.6 4.571429-3.771428V369.142857h78.628571c2.057143 0 3.657143-2.057143 3.657143-4.571428v-54.857143c0-2.514286-1.6-4.571429-3.771429-4.571429H356.571429v-78.628571c0-2.057143-2.057143-3.657143-4.571429-3.657143h-54.857143c-2.514286 0-4.571429 1.6-4.571428 3.657143V305.142857h-78.628572c-2.057143 0-3.657143 2.057143-3.657143 4.571429v54.857143c0 2.514286 1.6 4.571429 3.657143 4.571428z m374.857143 0h221.257143c2.057143 0 3.657143-2.057143 3.657143-4.571428v-54.857143c0-2.514286-1.6-4.571429-3.771429-4.571429H588.8c-2.057143 0-3.657143 2.057143-3.657143 4.571429v54.857143c0 2.514286 1.6 4.571429 3.657143 4.571428z m0 302.857143h221.257143c2.057143 0 3.657143-2.057143 3.657143-4.571429v-54.857142c0-2.514286-1.6-4.571429-3.771429-4.571429H588.8c-2.057143 0-3.657143 2.057143-3.657143 4.571429v54.857142c0 2.514286 1.6 4.571429 3.657143 4.571429z m0 118.857143h221.257143c2.057143 0 3.657143-2.057143 3.657143-4.571429v-54.857143c0-2.514286-1.6-4.571429-3.771429-4.571428H588.8c-2.057143 0-3.657143 2.057143-3.657143 4.571428v54.857143c0 2.514286 1.6 4.571429 3.657143 4.571429z m-223.657143-92.571429l69.942857-85.6c4.914286-5.942857 0.8-14.971429-6.742857-14.971428H370.285714c-2.628571 0-5.142857 1.142857-6.742857 3.314285l-38.857143 47.542858-38.857143-47.542858a8.971429 8.971429 0 0 0-6.742857-3.314285h-58.171428c-7.542857 0-11.657143 9.028571-6.742857 14.971428l69.942857 85.6-71.657143 87.771429c-5.028571 5.942857-0.914286 14.971429 6.628571 14.971428h58.057143c2.628571 0 5.142857-1.142857 6.742857-3.314285l40.571429-49.714286 40.571428 49.714286c1.714286 2.057143 4.228571 3.314286 6.742858 3.314285h58.057142c7.542857 0 11.657143-9.028571 6.742858-14.971428L365.142857 698.285714zM932.571429 54.857143H91.428571c-20.228571 0-36.571429 16.342857-36.571428 36.571428v841.142858c0 20.228571 16.342857 36.571429 36.571428 36.571428h841.142858c20.228571 0 36.571429-16.342857 36.571428-36.571428V91.428571c0-20.228571-16.342857-36.571429-36.571428-36.571428z m-41.142858 836.571428H132.571429V132.571429h758.857142v758.857142z"}]}}),rr.register({circle:{width:1024,height:1024,paths:[{d:"M511.996587 1020.586667C231.103147 1020.586667 3.413333 792.84224 3.413333 512 3.413333 231.154347 231.103147 3.413333 511.996587 3.413333 792.89344 3.413333 1020.586667 231.10656 1020.586667 512s-227.7376 508.586667-508.59008 508.586667z m0-940.885334C273.24416 79.691093 79.68768 273.24416 79.68768 512c0 238.752427 193.55648 432.295253 432.308907 432.295253 238.75584 0 432.295253-193.55648 432.295253-432.295253 0-238.742187-193.55648-432.308907-432.295253-432.308907v0.01024z"}]}}),rr.register({"cloud-sun":{width:1024,height:1024,paths:[{d:"M658.029714 325.796571c16.274286 0 29.348571-13.44 29.348572-29.348571v-76.379429c0-16.274286-13.074286-29.348571-29.348572-29.348571s-29.348571 13.074286-29.348571 29.348571v76.379429c0 15.908571 13.092571 29.348571 29.348571 29.348571z m-205.074285 68.242286c11.666286 11.666286 30.756571 11.300571 41.728 0 10.953143-11.337143 11.300571-29.714286 0-41.033143l-54.454858-54.436571a29.129143 29.129143 0 0 0-41.380571 0c-11.318857 10.953143-11.318857 29.696 0 41.362286z m368.457142 0c10.953143 11.300571 30.043429 11.666286 41.691429 0l54.125714-54.107428c11.300571-11.666286 10.953143-30.409143 0-41.362286a29.129143 29.129143 0 0 0-41.380571 0l-54.454857 54.436571c-11.318857 11.337143-10.971429 29.714286 0 41.033143z m-72.502857 314.697143c51.968-35.017143 84.150857-89.106286 84.150857-151.350857a174.592 174.592 0 0 0-175.030857-175.36c-64 0-119.515429 34.285714-148.845714 85.558857 14.848 15.195429 27.574857 31.817143 38.180571 52.333714 116.662857 9.545143 192 82.029714 201.545143 188.818286zM146.742857 903.552h382.592c100.059429 0 177.846857-75.666286 177.846857-173.604571 0-97.590857-79.195429-171.154286-184.923428-171.849143-41.380571-78.848-114.925714-124.818286-200.484572-124.818286-114.925714 0-212.516571 89.453714-223.122285 205.44C38.546286 656.749714 0 707.657143 0 769.901714c0 79.195429 59.757714 133.668571 146.742857 133.668572z m771.547429-316.818286h76.361143c15.908571 0 29.001143-13.074286 29.348571-29.348571 0-16.274286-13.44-29.348571-29.348571-29.348572h-76.379429c-15.908571 0-29.348571 13.092571-29.348571 29.348572 0 16.274286 13.44 29.348571 29.348571 29.348571z m-42.422857 230.198857a29.44 29.44 0 0 0 41.344-0.365714c10.971429-11.300571 11.337143-30.043429 0-41.014857l-54.802286-54.454857c-11.300571-10.953143-29.696-11.300571-41.014857 0a29.878857 29.878857 0 0 0 0 41.728z"}]}}),rr.register({close:{width:1024,height:1024,paths:[{d:"M512 421.490332 331.092592 240.582924C306.351217 215.841549 265.464551 215.477441 240.470996 240.470996 215.303191 265.638801 215.527553 306.037221 240.582924 331.092592L421.490332 512 240.582925 692.907407C215.84155 717.648782 215.477441 758.535449 240.470996 783.529004 265.638801 808.696809 306.037222 808.472446 331.092593 783.417075L512 602.509668 692.907407 783.417075C717.648782 808.15845 758.535449 808.522559 783.529004 783.529004 808.696809 758.361199 808.472446 717.962778 783.417075 692.907407L602.509668 512 783.417076 331.092592C808.158451 306.351217 808.522559 265.464551 783.529004 240.470996 758.361199 215.303191 717.962779 215.527553 692.907408 240.582924L512 421.490332Z"}]}}),rr.register({checkbox:{width:1024,height:1024,paths:[{d:"M908.387097 88.086022a27.526882 27.526882 0 0 1 27.526881 27.526881v792.774194a27.526882 27.526882 0 0 1-27.526881 27.526881H115.612903a27.526882 27.526882 0 0 1-27.526881-27.526881V115.612903a27.526882 27.526882 0 0 1 27.526881-27.526881h792.774194z m-38.537635 66.064516H154.150538v715.698924h715.698924V154.150538z m-85.206709 119.648344l14.005677 32.845075a1145.008172 1145.008172 0 0 0-36.269419 35.080258l-8.880172 9.056344A1365.850839 1365.850839 0 0 0 697.861505 411.802151l-8.20301 9.639914-8.10942 9.683957-7.999312 9.716989-7.894709 9.755527c-3.919828 4.877763-7.795613 9.772043-11.63286 14.666322l-7.613936 9.794065-3.765677 4.899785-7.432258 9.79957c-2.460903 3.264688-4.899785 6.529376-7.322151 9.788559l-7.184516 9.777548-7.068903 9.755527-6.936775 9.728-3.413333 4.850237-6.733075 9.66744-6.600946 9.623398-6.457807 9.568344-6.314666 9.50228-6.171527 9.436215-3.027957 4.685075-5.951312 9.315097-2.91785 4.624516-5.720086 9.177462-5.56043 9.083871-5.406279 8.973764-5.241119 8.852645-5.075957 8.737032-4.910795 8.604904-2.389334 4.25015-4.652043 8.395699-4.475871 8.252559-4.305204 8.092903-4.118021 7.927742-3.936344 7.762581-3.749162 7.580903-3.567484 7.393721-1.706666 3.628043-3.275699 7.101935-1.563527 3.479398-2.978409 6.793634-2.780215 6.578925c-0.891871 2.158108-1.756215 4.277677-2.576516 6.35871l-1.211183 3.094021L249.56972 514.477419l59.028646-47.748129 133.422795 105.158194 5.681549-6.72757 8.258064-9.601376 6.705549-7.657979 7.123957-8.021333 4.987871-5.538409 7.828645-8.588387 5.450322-5.890753 8.522323-9.083871 8.924215-9.364645 6.177032-6.386236 9.595871-9.777549 6.622968-6.644989 6.788129-6.733075 10.515269-10.262022 7.223053-6.936774 7.393721-7.013849 7.558882-7.074409 7.729548-7.134968 7.89471-7.190021 8.059871-7.234065 8.219527-7.272602 4.167569-3.65557 8.467269-7.32215 8.62142-7.355183 4.371268-3.683097 8.858151-7.377204 4.486882-3.688602 9.094881-7.393721a1445.16129 1445.16129 0 0 1 9.249033-7.39372l9.397677-7.393721a1407.741247 1407.741247 0 0 1 19.252301-14.737892l9.854624-7.338667c26.458839-19.538581 54.49772-38.76886 83.990021-57.178838l5.543914-3.440861z"}]}}),rr.register({coffee:{width:1024,height:1024,paths:[{d:"M192.8 960.2h503c24.7 0 44.7-21.1 44.7-47.2H148.1c0 26.1 20 47.2 44.7 47.2zM781.6 474c1.3-11.5 1.9-21.2 1.9-29.3 0-41.6-7-41.8-33.9-41.8H589.4c15.5-25.4 24.4-51.7 24.4-78.5 0-80.4-121.5-119.6-121.5-186.6 0-24.8 10.8-45.2 19.7-74-56.2 14.8-100.5 71-100.5 130.6 0 102.4 119.4 103.3 119.4 179.8 0 9.5-3 18-4.5 28.6H407.9c1.7-6.4 2.8-13.1 2.8-19.7 0-48.4-82.9-71.9-82.9-112 0-14.8 2.1-27.1 6.8-44.5-27.4 10.8-60 42.4-60 78 0 56.6 67.7 62.1 78 98.2H138.7c-26.9 0-33.9 0.2-33.9 41.8s16.3 130 60 235.4S259 832 294.6 862.9l0.2-0.4c10.8 9.8 25 15.5 40.7 15.5h217.2c15.7 0 29.9-5.7 40.7-15.5l0.2 0.4c19.1-16.5 42.4-37.8 66.6-69.8 10 4.2 20.8 7.8 32.7 10.6 17.8 4.2 35.6 6.4 52.6 6.4 50.9 0 96.7-19.5 128.9-54.7 28.4-31 44.7-73 44.7-114.9 0.1-82.5-59.3-151.5-137.5-166.5z m-36.1 268.9c-18.2 0-33.1-2.5-46.9-8.9 8.5-17 16.8-33.7 24.8-53.2 21.4-51.7 36.3-99.7 45.8-139.5 46.7 9.1 82.1 50.5 82.1 99.9 0 48-36.5 101.7-105.8 101.7z"}]}}),rr.register({copyright:{width:1024,height:1024,paths:[{d:"M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96z m0 64c194.752 0 352 157.248 352 352s-157.248 352-352 352S160 706.752 160 512 317.248 160 512 160z m-3.008 160c-106.368 0-192 85.632-192 192s85.632 192 192 192c76.768 0 142.4-46.016 172.992-111.008l-57.984-26.976C603.36 609.856 560.256 640 508.992 640c-72.864 0-128-55.136-128-128s55.136-128 128-128c51.264 0 94.4 30.112 115.008 74.016l58.016-27.008C651.36 366.016 585.76 320 508.96 320z"}]}}),rr.register({component:{width:1024,height:1024,paths:[{d:"M917.376 243.456L500.8 4.8a34.144 34.144 0 0 0-34.336 0.096l0.16-0.096L50.112 243.52a33.952 33.952 0 0 0-17.088 29.376v477.44c0 12.16 6.528 23.296 17.088 29.44l416.512 238.72a34.88 34.88 0 0 0 34.336-0.064l-0.16 0.096 416.576-238.72c10.272-5.952 17.088-16.896 17.088-29.44V272.928c0-12.544-6.816-23.488-16.928-29.344l-0.16-0.096z m-51.264 487.36l-382.4 219.136-382.336-219.136V292.48l382.336-219.136 382.4 219.136v438.272zM198.784 360.512a33.76 33.76 0 0 0 12.384 46.304l0.16 0.096 237.824 136.32V812.8c0 18.816 15.232 33.92 34.176 33.92h0.256a33.92 33.92 0 0 0 33.92-33.92v-269.184l238.656-136.832a33.92 33.92 0 0 0 12.48-46.528l0.096 0.16a34.4 34.4 0 0 0-46.88-12.32l0.16-0.096-238.272 136.512-238.208-136.512a34.464 34.464 0 0 0-46.624 12.384l-0.096 0.16z"}]}}),rr.register({compress:{width:1024,height:1024,paths:[{d:"M275.14608 384H192.39408a32 32 0 0 0 0 64h192V256a32 32 0 0 0-64 0v82.752L55.01808 73.376A32 32 0 1 0 9.77008 118.624L275.14608 384zM749.64208 640H832.39408a32 32 0 0 0 0-64H640.39408v192a32 32 0 0 0 64 0v-82.752l265.376 265.376c6.24 6.256 14.432 9.376 22.624 9.376s16.384-3.12 22.624-9.376a32 32 0 0 0 0-45.248L749.64208 640zM32.39408 960a31.84 31.84 0 0 0 22.624-9.376L320.39408 685.248V768a32 32 0 0 0 64 0V576H192.39408a32 32 0 0 0 0 64h82.752L9.77008 905.376A32 32 0 0 0 32.39408 960zM969.77008 73.376L704.39408 338.752V256a32 32 0 0 0-64 0v192h192a32 32 0 0 0 0-64h-82.752L1015.01808 118.624a32 32 0 1 0-45.248-45.248z"}]}}),rr.register({dialog:{width:1024,height:1024,paths:[{d:"M968 16H58.112C24 16 8 16 8 66.112v701.664c0 34.56 13.408 48.224 48 48.224h160V928c0 34.56 41.664 114.816 144 48l192-160h416c34.528 0 48-13.44 48-48V64c0-34.592-13.472-48-48-48z m-48 704h-416l-192 144v-144h-208v-608h816v608z m-672-448h528v96H248v-96z m0 192h528v96H248v-96z"}]}}),rr.register({duration:{width:1024,height:1024,paths:[{d:"M475.776 804.464v155.776H73.264V792.224s3.12-93.904 150.912-111.744c-39.296-18.944-66.688-58.88-66.688-105.472a117.424 117.424 0 0 1 234.832 0c0 47.12-27.904 87.44-67.968 106.176 59.488 8.416 151.424 35.552 151.424 123.28z m251.28-319.792a24 24 0 0 0-24-24h-132.944V252.304a24 24 0 1 0-48 0v232.368a24 24 0 0 0 24 24h156.944a24 24 0 0 0 24-24zM551.024 65.68c-187.008 0-353.2 125.552-404.112 305.296a28 28 0 1 0 53.872 15.264c44.144-155.76 188.176-264.56 350.24-264.56 200.72 0 364 163.28 364 363.968 0 187.504-140.464 343.2-326.752 362.096a28 28 0 1 0 5.664 55.696c215.008-21.824 377.088-201.472 377.088-417.824 0-231.536-188.4-419.936-420-419.936z"}]}}),rr.register({expand:{width:1024,height:1024,paths:[{d:"M566.144 512l217.234286 217.234286v-101.046857a38.034286 38.034286 0 1 1 76.050285 0v190.134857l-0.018285 1.353143c0.365714 10.185143-3.346286 20.48-11.117715 28.233142a37.869714 37.869714 0 0 1-23.771428 11.008c-2.011429 0.347429-4.077714 0.512-6.198857 0.512H628.187429a38.034286 38.034286 0 1 1 0-76.068571h101.796571l-217.6-217.6-217.6 217.6h101.028571a38.034286 38.034286 0 1 1 0 76.068571H205.677714l-1.353143-0.018285a37.924571 37.924571 0 0 1-28.233142-11.117715 37.869714 37.869714 0 0 1-11.008-23.771428A38.290286 38.290286 0 0 1 164.571429 818.322286V628.187429a38.034286 38.034286 0 1 1 76.068571 0v101.796571L458.605714 512 240.64 294.034286v101.778285a38.034286 38.034286 0 1 1-76.068571 0V205.677714c0-2.121143 0.182857-4.187429 0.512-6.217143 0.694857-8.649143 4.370286-17.115429 11.008-23.753142a37.924571 37.924571 0 0 1 28.233142-11.117715L205.677714 164.571429h190.134857a38.034286 38.034286 0 1 1 0 76.068571H294.765714l217.6 217.6 217.6-217.6h-101.796571a38.034286 38.034286 0 1 1 0-76.068571h190.134857c2.121143 0 4.187429 0.182857 6.217143 0.512 8.649143 0.694857 17.115429 4.370286 23.753143 11.008 7.771429 7.753143 11.465143 18.048 11.117714 28.233142l0.018286 1.353143v190.134857a38.034286 38.034286 0 1 1-76.068572 0V294.765714L566.162286 512z"}]}}),rr.register({eye:{width:1024,height:1024,paths:[{d:"M512 832C128 832 0 512 0 512S128 192 512 192s512 320 512 320-128 320-512 320z m0-512c-106.048 0-192 85.952-192 192s85.952 192 192 192 192-85.952 192-192-85.952-192-192-192z m0 320c-70.656 0-128-57.344-128-128h128l-90.496-90.496A127.36 127.36 0 0 1 512 384c70.656 0 128 57.344 128 128s-57.344 128-128 128z"}]}}),rr.register({"eye-slash":{width:1280,height:1024,paths:[{d:"M639.993288 799.996969c-151.698409 0-274.497121-117.418768-285.797003-266.217207L144.398486 371.641462c-27.579711 34.599637-52.959445 71.179253-73.43923 111.178834a64.699321 64.699321 0 0 0 0 58.379388C179.418118 752.817464 394.135866 895.995963 639.993288 895.995963c53.819436 0 105.738891-7.999916 155.778366-20.919781L691.992742 794.777024a288.256977 288.256977 0 0 1-51.999454 5.219945z m627.633417 116.198782l-221.097681-170.878208a662.493052 662.493052 0 0 0 162.498295-204.137859 64.699321 64.699321 0 0 0 0-58.379388C1100.568457 271.182516 885.850709 128.004017 639.993288 128.004017a616.293536 616.293536 0 0 0-294.63691 75.39921L90.919046 6.745289A31.999664 31.999664 0 0 0 45.999518 12.36523L6.739929 62.9047A31.999664 31.999664 0 0 0 12.35987 107.804229l1176.707659 909.450462a31.999664 31.999664 0 0 0 44.919529-5.619941l39.279588-50.53947a31.999664 31.999664 0 0 0-5.639941-44.899529z m-367.436146-283.997022l-78.599176-60.759362A189.498012 189.498012 0 0 0 831.991274 511.99999a189.518012 189.518012 0 0 0-242.617456-184.418066A95.299 95.299 0 0 1 607.993623 384.001332a93.279022 93.279022 0 0 1-3.079968 19.999791l-147.218455-113.778807A284.617015 284.617015 0 0 1 639.993288 224.003011a287.836981 287.836981 0 0 1 287.996979 287.996979c0 43.259546-10.579889 83.579123-27.799708 120.218739z"}]}}),rr.register({form:{width:1024,height:1024,paths:[{d:"M671.891093 190.746449c-8.147967 0-14.993856-2.556225-20.545657-7.668674a68.602683 68.602683 0 0 1-13.883496-17.869609 92.056045 92.056045 0 0 1-8.323707-20.937079c-1.853263-7.149441-2.779894-13.10864-2.779895-17.877597V0.755041h2.220721c6.662161 0 12.956864 0.678997 18.876122 2.04498 5.927246 1.357994 13.140593 4.593216 21.656017 9.697678 8.515424 5.11245 18.876122 12.261891 31.090084 21.456312 12.22195 9.186433 27.583263 21.280571 46.091929 36.266439 19.986483 16.335874 35.898982 30.123512 47.745486 41.362912 11.846504 11.231413 20.913114 20.769326 27.207817 28.597765 6.286715 7.828438 10.17697 14.474623 11.662776 19.922577 1.477817 5.447954 2.212732 10.208923 2.212732 14.298883v16.343862H671.891093zM1017.237062 671.843932c2.22072 5.447954 3.706526 12.261891 4.441441 20.433822 0.742903 8.171931-2.955635 16.00037-11.103602 23.485315-3.698538 3.410962-7.029618 6.646184-9.985253 9.705666-2.971611 3.06747-5.559789 5.623695-7.780509 7.668674a53.441075 53.441075 0 0 1-7.772521 6.126952l-94.3886-85.801283a354.125004 354.125004 0 0 0 14.993856-12.261891 247.857947 247.857947 0 0 1 13.875507-11.231413c8.882881-7.492934 18.508665-10.728156 28.877352-9.705666 10.360699 1.02249 18.876122 3.235222 25.538284 6.630208 7.405064 3.410962 15.361313 9.370162 23.876737 17.885586 8.507436 8.507436 14.985868 17.534104 19.427308 27.06403zM625.255966 766.839636c16.279957 0 29.971736-4.081971 41.083326-12.253903l-215.433833 206.33527H144.422094c-14.067225 0-29.428538-3.754455-46.091928-11.239401a196.102383 196.102383 0 0 1-46.635126-29.628243 170.731852 170.731852 0 0 1-36.090699-42.385402c-9.617796-16.00037-14.434682-32.511984-14.434682-49.542832V132.520441c0-14.298882 3.514809-29.276762 10.544427-44.941627A147.062808 147.062808 0 0 1 40.599427 45.185423a174.126838 174.126838 0 0 1 41.642499-31.665234C97.77898 5.012753 114.066925 0.755041 131.105761 0.755041h425.2919v127.683429c0 12.940888 2.22072 26.896278 6.662161 41.874157a133.434934 133.434934 0 0 0 20.545657 41.370901c9.258327 12.597395 21.28856 23.149811 36.090699 31.665234 14.802139 8.515424 32.57589 12.765148 53.305275 12.765148h162.120569v338.10067L682.994694 739.264361c8.147967-10.895908 12.213962-22.814306 12.213962-35.755195 0-17.701857-6.84589-32.855477-20.545657-45.452872-13.691779-12.597395-30.163453-18.900087-49.415021-18.900087H208.830971c-19.24358 0-35.531525 6.302692-48.855846 18.900087-13.324322 12.597395-19.986483 27.751015-19.986483 45.452872 0 17.709845 6.662161 32.687725 19.986483 44.941628 13.324322 12.261891 29.612267 18.388842 48.863834 18.388842h416.424996zM208.830971 383.797338c-19.251568 0-35.539513 6.302692-48.863835 18.900087-13.324322 12.597395-19.986483 27.743027-19.986482 45.452873 0 17.701857 6.662161 32.687725 19.986482 44.941627 13.324322 12.253903 29.612267 18.388842 48.863835 18.388842h416.424995c19.24358 0 35.707265-6.13494 49.407033-18.388842 13.699767-12.253903 20.545657-27.23977 20.545657-44.941627 0-17.709845-6.84589-32.855477-20.545657-45.452873-13.691779-12.597395-30.163453-18.900087-49.415021-18.900087H208.830971z m418.637728 511.748216l14.434681-13.284381 27.766992-25.530295a3832.340142 3832.340142 0 0 0 36.641885-34.221459 4000.148311 4000.148311 0 0 1 39.972965-37.280941c31.832987-29.28475 67.739957-61.972475 107.720911-98.063174l93.27824 85.801283-107.72091 99.085664-39.972966 36.769696-36.641884 33.710214a1433.562818 1433.562818 0 0 0-26.097458 24.507805c-7.029618 6.813937-10.919873 10.560404-11.662775 11.239401-3.698538 2.723977-7.772521 5.615706-12.213962 8.683176-4.441441 3.059482-8.882881 5.615706-13.324322 7.660686-4.441441 2.04498-11.28733 4.593216-20.545657 7.660687a667.014907 667.014907 0 0 1-28.318177 8.683176 576.748219 576.748219 0 0 1-27.759004 7.149441c-8.882881 2.04498-15.545042 3.402974-19.986483 4.081971-8.882881 1.357994-14.810127 0.343493-17.765762-3.059481-2.963623-3.402974-3.706526-9.194421-2.22072-17.366352 0.734915-4.081971 2.22072-10.216911 4.44144-18.388842 2.22072-8.171931 4.808898-16.511615 7.772521-25.019051l8.323707-24.004548c2.596166-7.492934 4.633157-12.597395 6.110975-15.321372a81.136173 81.136173 0 0 1 17.765763-23.493304z"}]}}),rr.register({file:{width:1024,height:1024,paths:[{d:"M767.54821 127.981836H257.905908c-36.452213 0-66.00325 29.551036-66.00325 66.00325v637.563764c0 36.452213 29.551036 66.00325 66.00325 66.00325h509.642302c36.452213 0 66.00325-29.551036 66.00325-66.00325V193.985086c0-36.453237-29.550013-66.00325-66.00325-66.00325z m0 670.309562c0 18.367323-14.890128 33.257451-33.257451 33.257452H289.12084c-18.367323 0-33.257451-14.890128-33.257451-33.257452V225.200018c0-18.367323 14.890128-33.257451 33.257451-33.257451h445.169919c18.367323 0 33.257451 14.890128 33.257451 33.257451v573.09138z"},{d:"M575.667042 351.84337c0 17.662265-14.3181 31.980365-31.980366 31.980366H351.804485c-17.662265 0-31.980365-14.3181-31.980366-31.980366 0-17.662265 14.3181-31.980365 31.980366-31.980365H543.686676c17.662265 0 31.980365 14.3181 31.980366 31.980365zM703.58748 479.764831c0 17.662265-14.3181 31.980365-31.980366 31.980366h-319.803653c-17.662265 0-31.980365-14.3181-31.980365-31.980366 0-17.662265 14.3181-31.980365 31.980365-31.980365h319.803653c17.662265 0 31.980365 14.3181 31.980366 31.980365zM703.58748 607.686293c0 17.662265-14.3181 31.980365-31.980366 31.980365h-319.803653c-17.662265 0-31.980365-14.3181-31.980365-31.980365 0-17.662265 14.3181-31.980365 31.980365-31.980366h319.803653c17.662265 0 31.980365 14.3181 31.980366 31.980366z"}]}}),rr.register({ganged:{width:1024,height:1024,paths:[{d:"M0 64v832h384v-64H64V384h832v320h64V64H0z m896 256H64V128h832v192z m-384 576h128v64H448v-192h192v64H512v64z m256-128h192v192h-192v-64h128v-64h-128v-64z m0 64v64h-128v-64h128z"}]}}),rr.register({gift:{width:1024,height:1024,paths:[{d:"M542.406557 219.415192c-16.780225 11.007614-44.239661 11.006398-61.01867-0.003649l-143.060058-93.868795c-16.779009-11.010046-37.82727-5.318928-46.773236 12.645985l-34.149145 68.578042c-8.945967 17.964912 0.155688 32.66403 20.224818 32.66403l471.836197 0c20.06913 0 28.888601-14.554376 19.597202-32.34414l-36.148761-69.216605c-9.290183-17.789764-30.621844-23.337358-47.402069-12.329744L542.406557 219.415192zM835.39518 852.000257c0-9.483576 0-416.51716 0-425.61395s-5.906406-15.877723-15.495801-15.877723c-9.589395 0-282.721743 0-282.721743 0l0 474.018259c0 0 256.391044 0 265.689741 0C825.311962 884.528059 835.39518 865.770112 835.39518 852.000257zM223.817021 884.528059c8.444847 0 259.784551 0 259.784551 0L483.601573 410.509801c0 0-268.458065 0-278.600881 0s-15.487287 8.038599-15.487287 15.877723-0.008514 417.103422-0.008514 425.61395C189.50489 874.716079 208.366224 884.528059 223.817021 884.528059zM125.346922 274.402176c0 8.820687 0 94.046377 0 102.767326 0 8.720949 6.740795 15.876506 15.494585 15.876506s342.760066 0 342.760066 0L483.601573 258.52567c0 0-332.924976 0-342.760066 0S125.346922 265.582706 125.346922 274.402176zM882.335051 258.52567c-12.391776 0-345.157415 0-345.157415 0l0 134.520339c0 0 338.532169 0 346.491708 0 7.959539 0 15.488503-7.044873 15.488503-15.876506s0-96.680906 0-102.767326S894.726827 258.52567 882.335051 258.52567z"}]}}),rr.register({home:{width:1024,height:1024,paths:[{d:"M63.3 959.2v-63.1h897v63.1h-897z m112.2-96.1V545.7l336.4-336.4 336.4 336.4v317.4H624V622.8H399.7v240.3H175.5z m336.3-723.9L98.4 552.7l-35-42L511.8 62.1 659 209.3V97.2h154.2v266.3l147.2 147.2-35 42-413.6-413.5z"}]}}),rr.register({hotent:{width:1024,height:1024,paths:[{d:"M825.344 316.928l9.728-3.072c58.368-29.184 118.272-29.696 127.488-29.696-325.632-5.632-615.936 143.872-713.216 199.68V73.216H10.24v865.28h243.712C253.952 363.52 1013.76 302.592 1013.76 302.592c-67.072 3.072-130.048 7.68-188.416 14.336z m-46.08-61.44v-179.2h-249.856v229.888c54.784-18.944 197.12-52.224 249.856-50.688z m-243.712 683.008h243.712V391.68c-76.288 16.896-199.168 81.92-243.712 117.76v429.056zM962.56 283.648h0z"},{d:"M825.344 329.216l9.728-3.072c58.368-29.184 118.272-29.696 127.488-29.696-325.632-5.632-615.936 143.872-713.216 199.68V85.504H10.24v865.28h243.712C253.952 375.296 1013.76 314.88 1013.76 314.88c-67.072 3.072-130.048 7.68-188.416 14.336z m-46.08-61.44v-179.2h-249.856v229.888c54.784-18.944 197.12-52.224 249.856-50.688z m-243.712 683.008h243.712V403.968c-76.288 16.896-199.168 81.92-243.712 117.76v429.056zM962.56 295.936h0z"},{d:"M825.344 329.216l9.728-3.072c58.368-29.184 118.272-29.696 127.488-29.696-325.632-5.632-615.936 143.872-713.216 199.68V85.504H10.24v865.28h243.712C253.952 375.296 1013.76 314.88 1013.76 314.88c-67.072 3.072-130.048 7.68-188.416 14.336z m-46.08-61.44v-179.2h-249.856v229.888c54.784-18.944 197.12-52.224 249.856-50.688z m-243.712 683.008h243.712V403.968c-76.288 16.896-199.168 81.92-243.712 117.76v429.056zM962.56 295.936h0z"},{d:"M746.496 296.96s124.416-17.408 186.88-13.824c0 0-143.872 7.168-256 50.176l69.12-36.352z"}]}}),rr.register({image:{width:1024,height:1024,paths:[{d:"M950.857143 73.142857v877.714286H73.142857V73.142857h877.714286m73.142857-73.142857H0v1024h1024V0zM73.142857 950.857143l292.571429-292.571429 146.285714 146.285715 292.571429-292.571429 146.285714 146.285714v292.571429H73.142857z m512-731.428572c-80.788571 0-146.285714 65.497143-146.285714 146.285715s65.497143 146.285714 146.285714 146.285714 146.285714-65.497143 146.285714-146.285714-65.497143-146.285714-146.285714-146.285715z"}]}}),rr.register({info:{width:1024,height:1024,paths:[{d:"M448 304.00512c0-26.39872 21.6064-48.00512 48.00512-48.00512l32.01024 0c26.39872 0 48.00512 21.6064 48.00512 48.00512l0 32.01024c0 26.39872-21.6064 48.00512-48.00512 48.00512l-32.01024 0c-26.39872 0-48.00512-21.6064-48.00512-48.00512l0-32.01024z"},{d:"M640 768l-256 0 0-64 64 0 0-192-64 0 0-64 192 0 0 256 64 0z"},{d:"M512 0c-282.76736 0-512 229.23264-512 512s229.23264 512 512 512 512-229.23264 512-512-229.23264-512-512-512zM512 928.01024c-229.74464 0-416.01024-186.24512-416.01024-416.01024s186.24512-416.01024 416.01024-416.01024 416.01024 186.24512 416.01024 416.01024-186.24512 416.01024-416.01024 416.01024z"}]}}),rr.register({laptop:{width:640,height:512,paths:[{d:"M255.03 261.65c6.25 6.25 16.38 6.25 22.63 0l11.31-11.31c6.25-6.25 6.25-16.38 0-22.63L253.25 192l35.71-35.72c6.25-6.25 6.25-16.38 0-22.63l-11.31-11.31c-6.25-6.25-16.38-6.25-22.63 0l-58.34 58.34c-6.25 6.25-6.25 16.38 0 22.63l58.35 58.34zm96.01-11.3l11.31 11.31c6.25 6.25 16.38 6.25 22.63 0l58.34-58.34c6.25-6.25 6.25-16.38 0-22.63l-58.34-58.34c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63L386.75 192l-35.71 35.72c-6.25 6.25-6.25 16.38 0 22.63zM624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"}]}}),rr.register({line:{width:1024,height:1024,paths:[{d:"M211.976241 0m37.745057 0l920.375475 0q37.745057 0 37.745058 37.745057l0 11.097047q0 37.745057-37.745058 37.745057l-920.375475 0q-37.745057 0-37.745057-37.745057l0-11.097047q0-37.745057 37.745057-37.745057Z"},{d:"M0 0m37.745057 0l54.428373 0q37.745057 0 37.745057 37.745057l0 11.097047q0 37.745057-37.745057 37.745057l-54.428373 0q-37.745057 0-37.745057-37.745057l0-11.097047q0-37.745057 37.745057-37.745057Z"},{d:"M211.976241 409.609361m37.745057 0l920.375475 0q37.745057 0 37.745058 37.745057l0 11.097047q0 37.745057-37.745058 37.745057l-920.375475 0q-37.745057 0-37.745057-37.745057l0-11.097047q0-37.745057 37.745057-37.745057Z"},{d:"M0 409.609361m37.745057 0l54.428373 0q37.745057 0 37.745057 37.745057l0 11.097047q0 37.745057-37.745057 37.745057l-54.428373 0q-37.745057 0-37.745057-37.745057l0-11.097047q0-37.745057 37.745057-37.745057Z"},{d:"M211.976241 819.294212m37.745057 0l920.375475 0q37.745057 0 37.745058 37.745057l0 11.097047q0 37.745057-37.745058 37.745057l-920.375475 0q-37.745057 0-37.745057-37.745057l0-11.097047q0-37.745057 37.745057-37.745057Z"},{d:"M0 819.294212m37.745057 0l54.428373 0q37.745057 0 37.745057 37.745057l0 11.097047q0 37.745057-37.745057 37.745057l-54.428373 0q-37.745057 0-37.745057-37.745057l0-11.097047q0-37.745057 37.745057-37.745057Z"}]}}),rr.register({lock:{width:1024,height:1024,paths:[{d:"M818.247 412.327h-45.989v-70.992c0-152.308-123.463-275.779-275.778-275.779S220.698 189.027 220.698 341.335v70.992h-45.987c-25.379 0-45.988 20.566-45.988 45.987v455.407c0 25.428 20.56 45.989 45.988 45.989h643.536c25.377 0 45.988-20.56 45.988-45.989V458.314c-0.045-25.42-20.611-45.987-45.988-45.987z m-137.915 0H312.625v-70.992c0-101.554 82.345-183.853 183.855-183.853 101.51 0 183.853 82.343 183.853 183.853v70.992h-0.001z m0 0"}]}}),rr.register({map:{width:1024,height:1024,paths:[{d:"M512 74.667c-194.133 0-352 160-352 354.133 0 264.533 320 484.267 334.933 492.8 6.4 4.267 10.667 6.4 17.067 6.4s12.8-2.133 17.067-6.4C541.867 913.067 864 693.333 864 428.8c0-194.133-157.867-354.133-352-354.133z m0 782.933c-66.133-49.067-288-228.267-288-426.667 0-160 130.133-290.133 288-290.133s288 130.133 288 290.133c0 196.267-221.867 377.6-288 426.667z"},{d:"M512 309.333c-76.8 0-138.667 61.867-138.667 138.667S435.2 586.667 512 586.667 650.667 524.8 650.667 448 588.8 309.333 512 309.333z m0 213.334c-40.533 0-74.667-34.134-74.667-74.667s34.134-74.667 74.667-74.667 74.667 34.134 74.667 74.667-34.134 74.667-74.667 74.667z"}]}}),rr.register({move:{width:1024,height:1024,paths:[{d:"M950.741 534.513l-128.07 128.07c-6.004 6.003-14.008 9.505-22.513 9.505-17.51 0-32.018-14.508-32.018-32.018l0-64.035L576.035 576.035l0 192.105 64.035 0c17.51 0 32.018 14.508 32.018 32.018 0 8.505-3.502 16.509-9.505 22.513l-128.07 128.07c-6.004 6.003-14.008 9.505-22.513 9.505s-16.509-3.502-22.512-9.505l-128.07-128.07c-6.003-6.004-9.505-14.008-9.505-22.513 0-17.51 14.508-32.018 32.018-32.018l64.035 0L447.966 576.035 255.859 576.035l0 64.035c0 17.51-14.508 32.018-32.018 32.018-8.505 0-16.509-3.502-22.512-9.505l-128.07-128.07c-6.003-6.004-9.505-14.008-9.505-22.513s3.502-16.509 9.505-22.512l128.07-128.07c6.003-6.003 14.007-9.505 22.512-9.505 17.51 0 32.018 14.508 32.018 32.018l0 64.035 192.105 0L447.964 255.859 383.93 255.859c-17.51 0-32.018-14.508-32.018-32.018 0-8.505 3.502-16.509 9.505-22.512l128.07-128.07c6.003-6.003 14.007-9.505 22.512-9.505s16.509 3.502 22.513 9.505l128.07 128.07c6.003 6.003 9.505 14.007 9.505 22.512 0 17.51-14.508 32.018-32.018 32.018l-64.035 0 0 192.105 192.105 0L768.139 383.93c0-17.51 14.508-32.018 32.018-32.018 8.505 0 16.509 3.502 22.513 9.505l128.07 128.07c6.003 6.003 9.505 14.007 9.505 22.512S956.744 528.509 950.741 534.513z"}]}}),rr.register({more:{width:1024,height:1024,paths:[{d:"M407.4 169.8a104.6 104.8 0 1 0 209.2 0 104.6 104.8 0 1 0-209.2 0Z"},{d:"M403 849.9a109 109.1 0 1 0 218 0 109 109.1 0 1 0-218 0Z"},{d:"M403 509.8a109 109.1 0 1 0 218 0 109 109.1 0 1 0-218 0Z"}]}}),rr.register({question:{width:1024,height:1024,paths:[{d:"M512 56.888889C261.688889 56.888889 56.888889 261.688889 56.888889 512s204.8 455.111111 455.111111 455.111111 455.111111-204.8 455.111111-455.111111-204.8-455.111111-455.111111-455.111111m0 853.333333c-221.866667 0-398.222222-176.355556-398.222222-398.222222s176.355556-398.222222 398.222222-398.222222 398.222222 176.355556 398.222222 398.222222-176.355556 398.222222-398.222222 398.222222"},{d:"M506.311111 682.666667c-17.066667 0-28.444444 5.688889-39.822222 17.066666-11.377778 11.377778-17.066667 22.755556-17.066667 39.822223 0 17.066667 5.688889 28.444444 17.066667 39.822222 11.377778 11.377778 22.755556 17.066667 39.822222 17.066666 17.066667 0 28.444444-5.688889 39.822222-17.066666 11.377778-11.377778 17.066667-22.755556 17.066667-39.822222 0-17.066667-5.688889-28.444444-17.066667-39.822223-11.377778-11.377778-22.755556-17.066667-39.822222-17.066666z m17.066667-466.488889c-56.888889 0-102.4 17.066667-136.533334 51.2-39.822222 34.133333-56.888889 79.644444-56.888888 136.533333h85.333333c0-34.133333 5.688889-62.577778 22.755555-79.644444 17.066667-22.755556 39.822222-34.133333 79.644445-34.133334 28.444444 0 51.2 5.688889 68.266667 22.755556 17.066667 17.066667 22.755556 39.822222 22.755555 62.577778 0 22.755556-5.688889 39.822222-22.755555 56.888889l-17.066667 17.066666c-45.511111 45.511111-79.644444 79.644444-91.022222 102.4-11.377778 17.066667-11.377778 45.511111-11.377778 73.955556v11.377778h85.333333V625.777778c0-17.066667 5.688889-34.133333 11.377778-51.2 5.688889-17.066667 17.066667-28.444444 34.133333-39.822222 39.822222-34.133333 62.577778-51.2 68.266667-62.577778 22.755556-22.755556 28.444444-56.888889 28.444444-96.711111 0-45.511111-17.066667-85.333333-45.511111-113.777778-34.133333-34.133333-73.955556-45.511111-125.155555-45.511111z"}]}}),rr.register({search:{width:1024,height:1024,paths:[{d:"M994.112 858.368L769.152 633.408C808.32 569.984 832 496 832 416 832 186.24 645.76 0 416 0S0 186.24 0 416 186.24 832 416 832c80 0 153.984-23.68 217.344-62.784l225.024 224.96a96.021333 96.021333 0 0 0 135.744-135.808zM416 704C256.96 704 128 575.04 128 416S256.96 128 416 128 704 256.96 704 416 575.04 704 416 704z"}]}}),rr.register({setting:{width:1024,height:1024,paths:[{d:"M482.88 112l-17.28 90.688-20.64 4.512a309.696 309.696 0 0 0-99.776 41.088l-18.688 11.84-73.28-55.04-44.64 44.64 51.904 76.416-11.392 17.76a310.016 310.016 0 0 0-41.568 99.584l-4.8 21.6-90.72 12.896v63.104l90.688 17.312 4.512 20.64a309.984 309.984 0 0 0 41.088 99.776l11.84 18.688-55.04 73.28 44.64 44.64 76.416-51.904 17.76 11.392a310.016 310.016 0 0 0 99.584 41.568l21.6 4.8 12.896 90.72h63.104l17.312-90.688 20.64-4.512a309.984 309.984 0 0 0 99.776-41.088l18.688-11.84 73.28 55.04 44.64-44.64-51.904-76.416 11.392-17.76a310.016 310.016 0 0 0 41.568-99.584l4.8-21.6 90.72-12.896V482.88l-90.688-17.312-4.512-20.64a309.984 309.984 0 0 0-41.088-99.776l-11.84-18.688 55.04-73.28-44.64-44.64-76.416 51.904-17.76-11.392a310.144 310.144 0 0 0-99.584-41.568l-21.6-4.8-12.896-90.72H482.88zM410.56 149.856l19.424-101.856h171.584l14.624 102.624c28 8.064 54.848 19.328 80.128 33.568l85.792-58.304 121.344 121.344-62.272 82.88c14.08 25.408 25.152 52.352 32.96 80.416l101.888 19.424v171.584l-102.624 14.624a373.92 373.92 0 0 1-33.568 80.128l58.304 85.792-121.344 121.344-82.88-62.272c-25.408 14.08-52.352 25.152-80.416 32.96l-19.424 101.888h-171.584l-14.624-102.624a373.92 373.92 0 0 1-80.128-33.568L241.92 898.112l-121.344-121.344 62.272-82.88a373.824 373.824 0 0 1-32.96-80.416L48 594.048v-171.584l102.624-14.624c8.064-27.968 19.328-54.848 33.568-80.128L125.888 241.92l121.344-121.344 82.88 62.272a373.856 373.856 0 0 1 80.416-32.96z"},{d:"M512 704a192 192 0 1 1 0-384 192 192 0 0 1 0 384z m0-64a128 128 0 1 0 0-256 128 128 0 0 0 0 256z"}]}}),rr.register({select:{width:1024,height:1024,paths:[{d:"M746.057 380.343L512 636.343l-234.057-256c-14.629-14.629-36.572-14.629-51.2 0-7.314 14.628-7.314 36.571 0 51.2l256 285.257c14.628 7.314 21.943 14.629 29.257 14.629s14.629-7.315 21.943-14.629l256-285.257c14.628-14.629 14.628-36.572 0-51.2-7.314-21.943-29.257-21.943-43.886 0z"}]}}),rr.register({"simple-collapse":{width:1024,height:1024,paths:[{d:"M673.27288192 266.985728l120.4912255-120.4912255 79.15346663 79.43152329-120.49122551 120.76928145 130.22320894 131.28909284h-334.13143595V141.21142578z"},{d:"M350.35639903 758.58992646L232.59939744 876.39327083 153.26055971 797.10077587l117.38625936-117.29357309-129.48172448-128.27681224h334.17777871V882.78857422"}]}}),rr.register({"simple-expand":{width:1024,height:1024,paths:[{d:"M725.93176517 390.53363553l-129.11387882 129.11387881L512 434.53167298l129.11387882-129.41183383L501.4225935 164.33605239H859.61428833v360.82363128l-133.68252317-134.62604815zM298.4655084 637.58807665l126.18398667-126.23364595 85.01652347 84.96686353-125.78671309 125.6873952 138.59878248 137.40696246H164.38571167V504.50146349z"}]}}),rr.register({sort:{width:1024,height:1024,paths:[{d:"M375 898c-19.8 0-36-16.2-36-36V162c0-19.8 16.2-36 36-36s36 16.2 36 36v700c0 19.8-16.2 36-36 36z"},{d:"M398.2 889.6c-15.2 12.7-38 10.7-50.7-4.4L136.6 633.9c-12.7-15.2-10.7-38 4.4-50.7 15.2-12.7 38-10.7 50.7 4.4l210.8 251.3c12.8 15.2 10.8 38-4.3 50.7zM649 126c19.8 0 36 16.2 36 36v700c0 19.8-16.2 36-36 36s-36-16.2-36-36V162c0-19.8 16.2-36 36-36z"},{d:"M625.8 134.4c15.2-12.7 38-10.7 50.7 4.4l210.8 251.3c12.7 15.2 10.7 38-4.4 50.7-15.2 12.7-38 10.7-50.7-4.4L621.4 185.1c-12.7-15.2-10.7-38 4.4-50.7z"}]}}),rr.register({radio:{width:1024,height:1024,paths:[{d:"M529.5778503417969 107.70285034179688C306.30050659179693 107.70285034179688 125.28152465820312 288.72265625 125.28152465820312 512s181.01898193359375 404.29714965820307 404.2963256835937 404.29714965820307S933.875 735.2773437499999 933.875 512 752.8560180664062 107.70285034179688 529.5778503417969 107.70285034179688z m0 773.4377746582031c-203.87109375 0-369.140625-165.26953125-369.140625-369.140625s165.26953125-369.140625 369.140625-369.140625 369.140625 165.26953125 369.140625 369.140625-165.26953125 369.140625-369.140625 369.140625z m0-570.1986694335938c-111.02316284179689 0-201.05804443359372 89.75308227539064-201.05804443359372 200.49526977539062 0 110.7421875 89.99945068359375 200.49609375 201.05804443359372 200.49609375s201.05886840820312-89.75390625000001 201.05886840820312-200.49609375c0-110.70675659179688-90.03570556640625-200.49609375-201.05804443359372-200.49609375z"}]}}),rr.register({table:{width:1024,height:1024,paths:[{d:"M329.142857 786.285714v-109.714285q0-8-5.142857-13.142858t-13.142857-5.142857H128q-8 0-13.142857 5.142857t-5.142857 13.142858v109.714285q0 8 5.142857 13.142857t13.142857 5.142858h182.857143q8 0 13.142857-5.142858t5.142857-13.142857z m0-219.428571V457.142857q0-8-5.142857-13.142857t-13.142857-5.142857H128q-8 0-13.142857 5.142857t-5.142857 13.142857v109.714286q0 8 5.142857 13.142857t13.142857 5.142857h182.857143q8 0 13.142857-5.142857t5.142857-13.142857z m292.571429 219.428571v-109.714285q0-8-5.142857-13.142858t-13.142858-5.142857H420.571429q-8 0-13.142858 5.142857t-5.142857 13.142858v109.714285q0 8 5.142857 13.142857t13.142858 5.142858h182.857142q8 0 13.142858-5.142858t5.142857-13.142857zM329.142857 347.428571V237.714286q0-8-5.142857-13.142857t-13.142857-5.142858H128q-8 0-13.142857 5.142858t-5.142857 13.142857v109.714285q0 8 5.142857 13.142858t13.142857 5.142857h182.857143q8 0 13.142857-5.142857t5.142857-13.142858z m292.571429 219.428572V457.142857q0-8-5.142857-13.142857t-13.142858-5.142857H420.571429q-8 0-13.142858 5.142857t-5.142857 13.142857v109.714286q0 8 5.142857 13.142857t13.142858 5.142857h182.857142q8 0 13.142858-5.142857t5.142857-13.142857z m292.571428 219.428571v-109.714285q0-8-5.142857-13.142858t-13.142857-5.142857h-182.857143q-8 0-13.142857 5.142857t-5.142857 13.142858v109.714285q0 8 5.142857 13.142857t13.142857 5.142858h182.857143q8 0 13.142857-5.142858t5.142857-13.142857z m-292.571428-438.857143V237.714286q0-8-5.142857-13.142857t-13.142858-5.142858H420.571429q-8 0-13.142858 5.142858t-5.142857 13.142857v109.714285q0 8 5.142857 13.142858t13.142858 5.142857h182.857142q8 0 13.142858-5.142857t5.142857-13.142858z m292.571428 219.428572V457.142857q0-8-5.142857-13.142857t-13.142857-5.142857h-182.857143q-8 0-13.142857 5.142857t-5.142857 13.142857v109.714286q0 8 5.142857 13.142857t13.142857 5.142857h182.857143q8 0 13.142857-5.142857t5.142857-13.142857z m0-219.428572V237.714286q0-8-5.142857-13.142857t-13.142857-5.142858h-182.857143q-8 0-13.142857 5.142858t-5.142857 13.142857v109.714285q0 8 5.142857 13.142858t13.142857 5.142857h182.857143q8 0 13.142857-5.142857t5.142857-13.142858z m73.142857-182.857142v621.714285q0 37.714286-26.857142 64.571429t-64.571429 26.857143H128q-37.714286 0-64.571429-26.857143T36.571429 786.285714V164.571429q0-37.714286 26.857142-64.571429t64.571429-26.857143h768q37.714286 0 64.571429 26.857143t26.857142 64.571429z"}]}}),rr.register({tree:{width:1122,height:1024,paths:[{d:"M487.619048 438.857143 1121.52381 438.857143 1121.52381 633.904762 487.619048 633.904762 487.619048 828.952381 1121.52381 828.952381 1121.52381 1024 463.238095 1024 390.095238 1024 390.095238 195.047619 487.619048 195.047619 487.619048 438.857143ZM0 0 682.666667 0 682.666667 195.047619 0 195.047619 0 0Z"}]}}),rr.register({user:{width:1024,height:1024,paths:[{d:"M512.220125 910.231571c-75.642778 0-151.2836 0.084137-226.932248-0.04109-26.121501-0.043047-51.258798-4.78992-74.232022-17.962201-34.351241-19.689937-53.882688-49.574108-59.836825-88.429595-4.24988-27.729881-2.003627-50.133714 0.027393-77.861638 2.809773-38.307621 9.378304-61.020608 21.675954-97.510486 10.069007-29.880257 24.219621-57.637531 45.645121-81.160579 25.857351-28.393191 58.793921-40.927598 95.788619-43.355821 11.379974-1.037033 20.725014 1.92536 29.960481 7.991027 16.508397 10.845804 32.854391 22.069244 50.127844 31.584514 36.810771 20.271067 76.900915 30.224631 119.28036 29.745248 45.232264-0.508733 88.079352-12.833777 126.594379-36.120068 12.927697-7.81884 25.765387-15.862697 38.111954-24.562037 11.289967-7.955807 23.018227-10.593394 36.804901-8.92827 33.194851 2.837167 59.030678 13.48926 82.688736 35.419581 18.680297 17.318457 31.696044 38.691128 42.40488 61.593911 14.54586 31.099261 22.196427 49.153424 27.724011 82.792439 5.750643 35.020421 7.8658 64.906548 6.93834 100.333955-0.831583 31.801704-9.83225 60.948211-31.819314 84.913465-19.134244 20.846327-43.042754 33.353341-70.753068 38.215658-11.115824 1.944927-22.509494 3.15219-33.779894 3.189367-75.476462 0.285673-150.94901 0.15262-226.419602 0.15262zM314.13697 315.418587c-1.944927-105.521079 88.539169-197.779871 198.319912-197.707474 108.835672 0.072397 198.760161 91.554392 198.173161 199.302158-0.587 106.628552-89.670122 197.408104-198.464705 197.396364-109.084169-0.01174-200.390065-91.861589-198.028368-198.991048z"}]}}),rr.register({users:{width:1024,height:1024,paths:[{d:"M580.12354 408.726915a126.476553 120.580263 90 1 0 241.160525 0 126.476553 120.580263 90 1 0-241.160525 0Z"},{d:"M704.075597 578.663282c77.254501 0.567935 157.520593 47.685046 202.346521 110.017696a252.537643 252.537643 0 0 1 5.858428 8.508791c15.798824 23.989367 27.607778 50.836829 34.983769 78.938864 3.807722 14.508435 19.249413 71.646783 7.39441 83.620489a6.132674 6.132674 0 0 1-1.028422 0.824785c-8.577353 5.571902-39.129182 0.655939-47.38931 0.655939H504.885975c-8.261151 0-38.812981 4.915963-47.38931-0.655939a6.184863 6.184863 0 0 1-1.028422-0.824785c-11.855002-11.973706 3.586688-69.112054 7.39441-83.620489 7.375991-28.102035 19.183921-54.949496 34.983769-78.938864a251.502058 251.502058 0 0 1 5.858428-8.508791c44.825928-62.333674 125.09202-109.449761 202.346521-110.017696"},{d:"M219.775472 313.689399a152.922878 145.793504 90 1 0 291.587008 0 152.922878 145.793504 90 1 0-291.587008 0Z"},{d:"M369.644805 519.15905c0.598634 0.004093 1.199315 0.037862 1.798972 0.047072 0.598634-0.00921 1.199315-0.041956 1.797949-0.047072h-3.596921z"},{d:"M389.725142 793.054117c9.638521-36.721343 25.068955-71.804373 45.714158-103.151311 2.477424-3.76065 5.030573-7.470135 7.655354-11.119245 26.619264-37.015032 62.819744-69.89693 103.850229-94.857415-51.131541-38.633902-114.031103-63.794955-175.500083-64.721047-92.854804 1.397836-189.007725 58.09207-242.859213 132.976594a303.190277 303.190277 0 0 0-7.083326 10.28832c-19.102057 29.004591-33.380248 61.466933-42.298361 95.444793-4.604878 17.542538-23.274076 86.627986-8.939603 101.105722 0.356111 0.360204 0.771573 0.691755 1.242294 0.997724 10.371208 6.736425 47.311539 0.793062 57.299007 0.793062h246.741637c3.105734-26.312272 11.257391-56.628742 14.177907-67.757197z"}]}}),rr.register({upload:{width:1024,height:1024,paths:[{d:"M892.586667 388.693333A213.333333 213.333333 0 0 0 682.666667 213.333333a202.666667 202.666667 0 0 0-76.373334 14.506667A298.666667 298.666667 0 0 0 85.333333 407.04 170.666667 170.666667 0 0 0 170.666667 725.333333h170.666666a42.666667 42.666667 0 0 0 0-85.333333H170.666667a85.333333 85.333333 0 0 1-28.16-165.546667 42.666667 42.666667 0 0 0 28.16-40.106666A49.066667 49.066667 0 0 0 170.666667 426.666667a213.333333 213.333333 0 0 1 388.693333-121.173334 42.666667 42.666667 0 0 0 57.173333 11.946667A128 128 0 0 1 810.666667 426.666667a42.666667 42.666667 0 0 0 42.666666 42.666666 85.333333 85.333333 0 0 1 0 170.666667h-170.666666a42.666667 42.666667 0 0 0 0 85.333333h170.666666a170.666667 170.666667 0 0 0 39.253334-336.64z"},{d:"M627.626667 524.373333l-85.333334-85.333333a42.666667 42.666667 0 0 0-14.08-8.96 42.666667 42.666667 0 0 0-32.426666 0 42.666667 42.666667 0 0 0-14.08 8.96l-85.333334 85.333333a42.666667 42.666667 0 0 0 60.586667 60.586667l12.373333-12.8V853.333333a42.666667 42.666667 0 0 0 85.333334 0v-281.173333l12.373333 12.8a42.666667 42.666667 0 0 0 60.586667 0 42.666667 42.666667 0 0 0 0-60.586667z"}]}}),rr.register({video:{width:1024,height:1024,paths:[{d:"M896 305.066667a72.533333 72.533333 0 0 0-78.933333 12.8l-91.733334 85.333333V341.333333a128 128 0 0 0-128-128H213.333333a128 128 0 0 0-128 128v341.333334a128 128 0 0 0 128 128h384a128 128 0 0 0 128-128v-61.866667l92.16 85.333333a74.24 74.24 0 0 0 49.493334 19.2 71.68 71.68 0 0 0 29.44-6.4 68.266667 68.266667 0 0 0 42.666666-63.146666V368.213333A68.266667 68.266667 0 0 0 896 305.066667z"}]}}),rr.register({palette:{width:1024,height:1024,paths:[{d:"M512 128c-213.333333 0-384 170.666667-384 384s170.666667 384 384 384c34.133333 0 64-29.866667 64-64 0-17.066667-4.266667-29.866667-17.066667-42.666667-8.533333-12.8-17.066667-25.6-17.066666-42.666666 0-34.133333 29.866667-64 64-64H682.666667c119.466667 0 213.333333-93.866667 213.333333-213.333334 0-187.733333-170.666667-341.333333-384-341.333333z m-234.666667 384c-34.133333 0-64-29.866667-64-64S243.2 384 277.333333 384 341.333333 413.866667 341.333333 448 311.466667 512 277.333333 512z m128-170.666667C371.2 341.333333 341.333333 311.466667 341.333333 277.333333S371.2 213.333333 405.333333 213.333333s64 29.866667 64 64S439.466667 341.333333 405.333333 341.333333z m213.333334 0c-34.133333 0-64-29.866667-64-64S584.533333 213.333333 618.666667 213.333333s64 29.866667 64 64S652.8 341.333333 618.666667 341.333333z m128 170.666667c-34.133333 0-64-29.866667-64-64S712.533333 384 746.666667 384s64 29.866667 64 64-29.866667 64-64 64z"}]}}),rr.register({plan:{width:1024,height:1024,paths:[{d:"M832 128H704V64h-64v64H384V64h-64v64H128v832h768V128h-64z m0 768H192V384h640v512z m0-576H192V192h128v64h64v-64h256v64h64v-64h128v128z"},{d:"M320 640h384v64H320zM320 512h256v64H320z"}]}}),rr.register({refresh:{width:1024,height:1024,paths:[{d:"M314.23311693 512.00024719h98.8704651l-148.30569727 148.30569727-148.30569726-148.30569727h98.8704651a395.48185884 395.48185884 0 0 1 675.13696826-279.65510942l-69.90141889 69.90141812A296.61139452 296.61139452 0 0 0 314.23311693 512.00024719z m593.22278827 0h-98.87046433l148.30569725-148.30569726 148.30569727 148.30569726h-98.8704651a395.48185884 395.48185884 0 0 1-675.13696827 279.65510942l69.90141812-69.90141812A296.61139452 296.61139452 0 0 0 907.4559052 512.00024719z"}]}}),rr.register({time:{width:1024,height:1024,paths:[{d:"M505.984 975.317333c-259.2 0-469.333333-210.133333-469.333333-469.333333s210.133333-469.333333 469.333333-469.333333 469.333333 210.133333 469.333333 469.333333S765.226667 975.317333 505.984 975.317333zM505.984 124.672c-210.602667 0-381.354667 170.709333-381.354667 381.354667 0 210.602667 170.709333 381.354667 381.354667 381.354667 210.602667 0 381.354667-170.752 381.354667-381.354667C887.338667 295.381333 716.586667 124.672 505.984 124.672zM696.661333 550.016l-88.021333 0-58.666667 0-43.989333 0 0 0c-24.32 0-43.989333-19.712-43.989333-43.989333L461.994667 242.005333c0-24.277333 19.669333-43.989333 43.989333-43.989333 24.277333 0 43.989333 19.712 43.989333 43.989333l0 219.989333 58.666667 0 88.021333 0c24.277333 0 43.989333 19.712 43.989333 43.989333S720.938667 550.016 696.661333 550.016z"}]}}),rr.register({typography:{width:1024,height:1024,paths:[{d:"M868.3618 0H248.047256a117.578288 117.578288 0 0 0-117.578288 117.578288V356.297843H67.760547a31.35421 31.35421 0 0 0 0 62.70842h62.708421v229.455811H67.760547a31.35421 31.35421 0 0 0 0 62.70842h62.708421v195.251218a117.578288 117.578288 0 0 0 117.578288 117.578288h620.314544a117.578288 117.578288 0 0 0 117.578288-117.578288V117.578288a117.578288 117.578288 0 0 0-117.578288-117.578288z m35.629784 904.640223a35.629784 35.629784 0 0 1-35.629784 35.629784H248.047256a35.629784 35.629784 0 0 1-35.629784-35.629784v-195.251218h53.800974a31.35421 31.35421 0 1 0 0-62.70842H215.267854v-229.455811h50.950592a31.35421 31.35421 0 1 0 0-62.70842H215.267854V117.578288a35.629784 35.629784 0 0 1 35.629785-35.629784h617.464161a35.629784 35.629784 0 0 1 35.629784 35.629784z"},{d:"M787.838488 114.727905a30.997912 30.997912 0 0 0-31.354211 31.354211v730.054279a31.35421 31.35421 0 1 0 62.352123 0V146.082116a30.997912 30.997912 0 0 0-30.997912-31.354211z"}]}}),rr.register({org:{width:1024,height:1024,paths:[{d:"M1080.348083 935.562935a3.51083 3.51083 0 0 1-2.121126 0.95085L270.663017 934.612085v-160.913021a31.524324 31.524324 0 0 1 16.969009-23.844384 1225.937796 1225.937796 0 0 1 387.654097-93.768406 1229.229199 1229.229199 0 0 1 389.190085 94.353544 30.939185 30.939185 0 0 1 15.652448 23.259246zM541.216319 383.631271V240.564967a157.255907 157.255907 0 0 1 314.511815 0v143.066304a157.255907 157.255907 0 0 1-314.511815 0z m558.441327 285.913183a1559.247177 1559.247177 0 0 0-268.505319-83.382202 238.882694 238.882694 0 0 0 114.248245-202.530981V240.564967a247.147772 247.147772 0 0 0-494.14926 0v143.066304a238.297556 238.297556 0 0 0 104.15461 195.875033A1510.753844 1510.753844 0 0 0 252.377446 669.1056a118.56364 118.56364 0 0 0-71.752579 104.374037v172.688929h0.731423A91.281569 91.281569 0 0 0 272.784143 1023.991954h805.442814a95.084967 95.084967 0 0 0 89.672438-63.853212l2.413696-6.802233v-180.003157a117.027652 117.027652 0 0 0-70.655445-103.788898z"},{d:"M373.062212 583.529129c1.462846 0 2.779407 0.438854 4.16911 0.438854a45.201931 45.201931 0 1 0 0-90.330719 96.986667 96.986667 0 0 1-96.913524-97.059809V277.648104A97.059809 97.059809 0 0 1 377.231322 180.661438a45.201931 45.201931 0 1 0 0-90.330719 187.46367 187.46367 0 0 0-187.244243 187.317385v118.929351a185.708255 185.708255 0 0 0 45.275073 120.757909 974.620914 974.620914 0 0 0-180.0763 78.262242A100.93635 100.93635 0 0 0 0.036571 683.734056v129.681267a45.201931 45.201931 0 1 0 90.330719 0v-129.46184a16.091302 16.091302 0 0 1 3.291403-6.582805 41.252247 41.252247 0 0 0 5.046817-2.55998 671.080442 671.080442 0 0 1 267.847039-89.891865 42.495666 42.495666 0 0 0 6.655948-1.389704"}]}}),rr.register({"org-tree":{width:1024,height:1024,paths:[{d:"M477.866667 337.493333h68.266666v285.866667h-68.266666z"},{d:"M512 230.4m-119.466667 0a119.466667 119.466667 0 1 0 238.933334 0 119.466667 119.466667 0 1 0-238.933334 0Z"},{d:"M221.866667 793.6m-119.466667 0a119.466667 119.466667 0 1 0 238.933333 0 119.466667 119.466667 0 1 0-238.933333 0Z"},{d:"M802.133333 793.6m-119.466666 0a119.466667 119.466667 0 1 0 238.933333 0 119.466667 119.466667 0 1 0-238.933333 0Z"},{d:"M512 793.6m-119.466667 0a119.466667 119.466667 0 1 0 238.933334 0 119.466667 119.466667 0 1 0-238.933334 0Z"},{d:"M256 520.533333h512v102.4h68.266667v-119.466666c0-28.16-23.04-51.2-51.2-51.2H238.933333c-28.16 0-51.2 23.04-51.2 51.2v119.466666h68.266667v-102.4z"}]}}),rr.register({export:{width:1024,height:1024,paths:[{d:"M814.59649356 300.00537441L621.75140175 492.85046533l-89.98312763-89.98312764 192.84509091-192.8450918-83.57182997-83.57182997L576.75983838 62.16871836H962.39378164v385.63394326l-64.28169756-64.11297832z"},{d:"M731.02466357 126.45041592z"},{d:"M876.45989463 490.54464776v364.43166943a22.49578213 22.49578213 0 0 1-22.49578213 22.49578213H168.96754883a22.49578213 22.49578213 0 0 1-22.49578213-22.49578213v-686.12135274a22.49578213 22.49578213 0 0 1 22.49578213-22.49578213h363.81303545l-84.35918321-84.35918232h-318.87770976a67.48734638 67.48734638 0 0 0-67.48734639 67.48734638v764.85658888a67.48734638 67.48734638 0 0 0 67.48734639 67.48734638h763.78803926a67.48734638 67.48734638 0 0 0 67.48734638-67.48734638v-319.4401043z"}]}}),rr.register({import:{width:1024,height:1024,paths:[{d:"M877.57402695 512.02812325v343.10355644a22.49859375 22.49859375 0 0 1-22.49859375 22.49859375H168.86832031a22.49859375 22.49859375 0 0 1-22.49859375-22.49859375v-686.20711289a22.49859375 22.49859375 0 0 1 22.49859375-22.49859375H511.97187675v-84.36972657H129.49578125a67.49578125 67.49578125 0 0 0-67.49578125 67.49578125v764.95219102a67.49578125 67.49578125 0 0 0 67.49578125 67.49578125h764.95219102a67.49578125 67.49578125 0 0 0 67.49578125-67.49578125v-382.4760955z"},{d:"M865.48103281 447.68214511H576.20536192V62l64.28973251 64.28973164 77.33891602 77.3389169L865.70601875 62.22498594l89.994375 89.994375-147.8720083 147.8720083 32.11674258 32.11674258 57.8776333 51.40928672 64.28973164 64.28973252z"}]}}),rr.register({download:{width:1024,height:1024,paths:[{d:"M905.75 379.64375h-225V62H343.25v317.64375H118.25l393.75 370.575 393.75-370.575zM118.25 856.1375V962h787.5v-105.8625z"}]}}),rr.register({gaode:{width:1024,height:1024,paths:[{d:"M365.7216 0c-88.32 1.6896-176.128 3.9424-264.448 5.632A111.0528 111.0528 0 0 0 0 90.0096V737.28h365.7216z",fill:"#CCFF99"},{d:"M546.304 737.0752v286.72c135.0144-1.6896 270.08-3.9424 405.0944-5.632A151.2448 151.2448 0 0 0 1075.2 894.3616v-157.2864z",fill:"#66CCFF"},{d:"M123.2384 479.9488c81.6128 68.096 163.2768 135.5776 244.8896 203.6736 17.2544 57.9584 34.5088 116.48 51.7632 174.4384l97.28-88.32q130.2016 77.6192 261.12 155.2896Q861.0816 475.1872 943.2576 25.3952 533.4016 252.3648 123.2384 479.9488z",fill:"#0099FF"},{d:"M373.9136 683.5712c16.896 57.9584 33.7408 116.48 50.6368 174.4384 32.0512-29.7984 63.5904-60.2112 95.6416-90.0096l337.5616-624.64q-242.176 270.1824-483.84 540.2112z",fill:"0066FF"}]}}),rr.register({word:{width:1024,height:1024,paths:[{d:"M171.677269 1.50935h680.653822a150.424495 150.424495 0 0 1 170.163455 170.163455v680.653822a150.424495 150.424495 0 0 1-170.163455 170.163456H171.677269a150.424495 150.424495 0 0 1-170.163456-170.163456V171.672805a150.424495 150.424495 0 0 1 170.163456-170.163455z"},{d:"M675.417818 728.561074h-76.913882L511.663853 465.828699l-86.840083 262.732375h-77.140767l-125.920957-433.065994h96.425958l72.943401 273.112346 86.15943-273.112346h68.916199l86.216151 273.112346 73.737498-273.112346h96.142352z",fill:"#FFFFFF"}]}}),rr.register({excel:{width:1024,height:1024,paths:[{d:"M1.009209 1.007223h908.431099a100.381636 100.381636 0 0 1 113.553887 113.553887v794.877212a100.381636 100.381636 0 0 1-113.553887 113.553887H114.563096a100.381636 100.381636 0 0 1-113.553887-113.553887V114.56111a100.381636 100.381636 0 0 1 113.553887-113.553887z",fill:"#40A454"},{d:"M283.304173 270.697705h110.090494l118.550258 170.330832 125.363492-170.330832h105.378007l-178.109272 232.78547 188.613007 249.818552h-112.248018l-129.053993-184.354736-135.924003 184.354736H270.586137l188.613007-249.818552z",fill:"#FFFFFF"}]}}),rr.register({ppt:{width:1024,height:1024,paths:[{d:"M1.009209 1.007223h908.431099a100.381636 100.381636 0 0 1 113.553887 113.553887v794.877212a100.381636 100.381636 0 0 1-113.553887 113.553887H114.563096a100.381636 100.381636 0 0 1-113.553887-113.553887V114.56111a100.381636 100.381636 0 0 1 113.553887-113.553887z",fill:"#E55555"},{d:"M442.847385 599.322655v168.230085H341.670871v-482.604022h163.460821Q682.332533 284.948718 682.332533 437.565143a147.165838 147.165838 0 0 1-53.483881 118.89092 194.461032 194.461032 0 0 1-133.823256 42.809816z m0-234.602331V520.516258h43.8318q89.253355 0 89.253356-78.806398 0-76.932759-88.344925-76.989536h-44.740231z",fill:"#FFFFFF"}]}}),rr.register({downUnfold:{width:1024,height:1024,paths:[{d:"M493.504 558.144a31.904 31.904 0 0 0 45.28 0l308.352-308.352a31.968 31.968 0 1 0-45.248-45.248l-285.728 285.728-294.176-294.144a31.968 31.968 0 1 0-45.248 45.248l316.768 316.768z"},{d:"M801.888 460.576l-285.728 285.728-294.144-294.144a31.968 31.968 0 1 0-45.248 45.248l316.768 316.768a31.904 31.904 0 0 0 45.28 0l308.352-308.352a32 32 0 1 0-45.28-45.248z"}]}}),rr.register({upFold:{width:1024,height:1024,paths:[{d:"M199.36 572.768a31.904 31.904 0 0 0 22.624-9.376l294.144-294.144 285.728 285.728a31.968 31.968 0 1 0 45.248-45.248l-308.352-308.352a32 32 0 0 0-45.28 0l-316.768 316.768a31.968 31.968 0 0 0 22.656 54.624z"},{d:"M538.784 457.376a32 32 0 0 0-45.28 0l-316.768 316.768a31.968 31.968 0 1 0 45.248 45.248l294.144-294.144 285.728 285.728a31.968 31.968 0 1 0 45.248-45.248l-308.32-308.352z"}]}}),rr.register({post:{width:1024,height:1024,paths:[{d:"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z"},{d:"M557.397333 227.555556a23.495111 23.495111 0 0 1 25.6 19.911111 17.948444 17.948444 0 0 1-1.137777 7.281777L550.115556 338.488889a24.405333 24.405333 0 0 1-23.495112 14.620444h-174.933333a24.803556 24.803556 0 0 1-24.376889-14.677333l-31.630222-83.683556a20.451556 20.451556 0 0 1 16.099556-26.197333 30.293333 30.293333 0 0 1 7.509333-0.995555z m-33.194666 41.813333h-170.296889l15.843555 41.955555h137.955556l16.526222-41.955555z m1.905777 111.786667a24.405333 24.405333 0 0 1 24.547556 16.099555l71.111111 277.105778a18.858667 18.858667 0 0 1-9.358222 20.366222l-158.151111 97.820445a28.444444 28.444444 0 0 1-14.791111 4.039111h-1.024a28.188444 28.188444 0 0 1-14.563556-4.039111l-158.151111-97.820445a18.830222 18.830222 0 0 1-9.358222-20.337778l71.111111-277.162666a24.177778 24.177778 0 0 1 24.149333-16.014223h174.392889z m-17.066666 41.671111H368.924444l-60.956444 243.683555 130.844444 83.114667 130.844445-83.114667-60.728889-243.825778z",fill:"#FFFFFF"},{d:"M690.488889 680.988444a21.76 21.76 0 0 1-22.755556-20.650666 19.626667 19.626667 0 0 1 4.551111-12.401778l45.511112-55.239111-119.665778-186.908445a19.911111 19.911111 0 0 1 9.443555-27.989333 24.519111 24.519111 0 0 1 10.552889-2.389333 23.409778 23.409778 0 0 1 19.2 9.585778l127.488 198.798222a19.086222 19.086222 0 0 1-1.393778 22.755555l-54.613333 66.247111a23.637333 23.637333 0 0 1-18.176 8.248889z",fill:"#FFFFFF"}]}}),rr.register({"org-tree2":{width:1024,height:1024,paths:[{d:"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z"},{d:"M488.049778 389.091556h47.957333v200.760888h-47.957333z",fill:"#FFFFFF"},{d:"M428.117333 311.466667a83.911111 83.911111 0 1 0 83.911111-83.911111 83.911111 83.911111 0 0 0-83.911111 83.911111z",fill:"#FFFFFF"},{d:"M227.584 712.561778a83.911111 83.911111 0 1 0 83.911111-83.911111 83.911111 83.911111 0 0 0-83.911111 83.911111z",fill:"#FFFFFF"},{d:"M628.650667 712.561778a83.911111 83.911111 0 1 0 83.911111-83.911111 83.911111 83.911111 0 0 0-83.882667 83.911111z",fill:"#FFFFFF"},{d:"M428.117333 712.561778a83.911111 83.911111 0 1 0 83.911111-83.911111 83.911111 83.911111 0 0 0-83.911111 83.911111z",fill:"#FFFFFF"},{d:"M334.791111 518.229333h354.503111v71.907556h47.274667v-83.911111a35.811556 35.811556 0 0 0-35.441778-35.953778H322.958222a35.811556 35.811556 0 0 0-35.441778 35.953778v83.911111h47.274667v-71.907556z",fill:"#FFFFFF"}]}}),rr.register({role:{width:1024,height:1024,paths:[{d:"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z"},{d:"M368.327111 341.077333a5.233778 5.233778 0 0 0-5.290667 5.205334v31.288889a5.205333 5.205333 0 0 0 5.290667 5.205333h253.610667a5.233778 5.233778 0 0 0 5.290666-5.205333v-31.288889a5.262222 5.262222 0 0 0-5.290666-5.205334h-253.553778z",fill:"#FFFFFF"},{d:"M487.395556 441.372444h-121.486223a5.233778 5.233778 0 0 0-5.290666 5.205334v31.288889a5.205333 5.205333 0 0 0 5.290666 5.205333h121.486223a5.233778 5.233778 0 0 0 5.290666-5.205333v-31.288889a5.262222 5.262222 0 0 0-5.233778-5.205334z",fill:"#FFFFFF"},{d:"M462.506667 541.696h-97.905778a4.807111 4.807111 0 0 0-4.266667 5.205333v31.288889a4.778667 4.778667 0 0 0 4.266667 5.205334h97.905778a4.807111 4.807111 0 0 0 4.266666-5.205334v-31.288889a4.835556 4.835556 0 0 0-4.209777-5.205333z",fill:"#FFFFFF"},{d:"M457.927111 748.117333h-152.803555v-472.177777h382.037333v214.670222a5.489778 5.489778 0 0 0 5.461333 5.376h38.229334a5.376 5.376 0 0 0 5.461333-5.376v-241.493334a21.674667 21.674667 0 0 0-21.873778-21.475555H277.987556a21.646222 21.646222 0 0 0-21.959112 21.333333v526.08a21.674667 21.674667 0 0 0 21.873778 21.475556h180.224a5.688889 5.688889 0 0 0 3.896889-1.564445 5.347556 5.347556 0 0 0 1.564445-3.669333v-37.717333a5.262222 5.262222 0 0 0-1.564445-3.669334 5.432889 5.432889 0 0 0-3.896889-1.564444z",fill:"#FFFFFF"},{d:"M701.041778 676.181333a79.644444 79.644444 0 0 0 32.483555-63.431111 89.941333 89.941333 0 0 0-179.2 0 79.644444 79.644444 0 0 0 32.483556 63.402667 113.351111 113.351111 0 0 0-67.015111 101.233778 19.911111 19.911111 0 0 0 20.679111 19.000889h206.876444a19.911111 19.911111 0 0 0 20.679111-19.000889 113.265778 113.265778 0 0 0-66.986666-101.205334z m-57.144889-110.023111a47.872 47.872 0 0 1 48.526222 47.246222 50.090667 50.090667 0 0 1-43.946667 46.336 49.464889 49.464889 0 0 1-53.020444-46.336 47.843556 47.843556 0 0 1 48.412444-47.246222z m-80.128 192.284445l0.426667-1.536a82.005333 82.005333 0 0 1 79.644444-55.466667h2.133333a81.806222 81.806222 0 0 1 77.568 55.438222l0.398223 1.536z",fill:"#FFFFFF"}]}}),rr.register({job:{width:1024,height:1024,paths:[{d:"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z"},{d:"M512 480.711111a105.244444 105.244444 0 1 0-109.596444-105.244444A108.088889 108.088889 0 0 0 512 480.711111z m-13.056 100.864a20.821333 20.821333 0 0 1-8.533333-16.924444 21.987556 21.987556 0 0 1 22.186666-21.304889 21.560889 21.560889 0 0 1 22.186667 21.304889 20.821333 20.821333 0 0 1-8.533333 16.924444l29.354666 100.238222a20.309333 20.309333 0 0 1-5.205333 19.911111l-29.354667 28.188445a10.951111 10.951111 0 0 1-15.644444 0l-29.354667-28.188445a18.972444 18.972444 0 0 1-5.233778-19.911111z m-82.204444-90.851555a145.976889 145.976889 0 0 1-58.055112-115.911112 153.429333 153.429333 0 0 1 306.631112 0.625778 147.911111 147.911111 0 0 1-58.055112 115.911111 253.525333 253.525333 0 0 1 189.184 241.777778 64.853333 64.853333 0 0 1-65.877333 63.288889H293.432889a64.853333 64.853333 0 0 1-65.905778-63.288889 254.264889 254.264889 0 0 1 189.212445-242.432z m314.453333 263.139555a21.987556 21.987556 0 0 0 22.186667-21.304889 215.466667 215.466667 0 0 0-219.192889-210.488889h-43.719111a215.466667 215.466667 0 0 0-219.192889 210.488889 21.987556 21.987556 0 0 0 22.186666 21.304889z",fill:"#FFFFFF"}]}}),rr.register({demension:{width:1024,height:1024,paths:[{d:"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z"},{d:"M417.194667 374.129778a19.712 19.712 0 0 1 0 39.395555h-37.944889a19.712 19.712 0 0 1 0-39.395555h37.944889z m0 78.762666a19.712 19.712 0 0 1 0 39.395556h-37.944889a19.712 19.712 0 0 1 0-39.395556h37.944889z m0 78.762667a19.712 19.712 0 0 1 0 39.395556h-37.944889a19.712 19.712 0 0 1 0-39.395556h37.944889z m0 78.762667a19.712 19.712 0 0 1 0 39.395555h-37.944889a19.712 19.712 0 0 1 0-39.395555h37.944889z m113.777777-236.316445a19.712 19.712 0 0 1 0 39.395556h-37.944888a19.712 19.712 0 0 1 0-39.395556h37.916444z m0 78.762667a19.712 19.712 0 0 1 0 39.395556h-37.944888a19.712 19.712 0 0 1 0-39.395556h37.916444z m0 78.762667a19.712 19.712 0 0 1 0 39.395555h-37.944888a19.712 19.712 0 0 1 0-39.395555h37.916444z m0 78.762666a19.712 19.712 0 0 1 0 39.395556h-37.944888a19.712 19.712 0 0 1 0-39.395556h37.916444z m246.528 118.158223a19.712 19.712 0 0 1 0 39.395555H246.528a19.712 19.712 0 0 1 0-39.395555H284.444444V295.367111a38.684444 38.684444 0 0 1 37.916445-39.395555h265.472A38.684444 38.684444 0 0 1 625.777778 295.367111v39.395556h75.861333A38.684444 38.684444 0 0 1 739.555556 374.129778v354.474666h37.916444z m-455.111111 0h265.472V295.367111h-265.500444z m303.416889 0h75.861334v-354.417778H625.777778z",fill:"#FFFFFF"}]}});var Jr=i("9224"),Gr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-collapse",{ref:"collapse",attrs:{accordion:e.accordion,value:e.openDefaultArr},on:{change:e.handleChange}},[e._t("default")],2)},Yr=[];function Zr(e){const t=[];return e?(this.$el.querySelectorAll(e).forEach(e=>{e.__vue__&&t.push(e.__vue__)}),t):t}var Xr={methods:{validateRegion(e,t){return new Promise((i,a)=>{const s=Zr.call(this,e);0==s.length&&a(this.$t("ht.regionValidator.errorMsg",{querySelector:e}));const l=[];let n=null;n=t?this.$root.$validator.validateAll(t):this.$root.$validator.validate(),n.then(e=>{e||this.$validator.errors.items.forEach(e=>{s.forEach(t=>{const i=t.$el;(i.querySelectorAll(`[name='${e.field}']`).length>0||i.querySelectorAll(`[name='${e.field.substring(0,1)}']`).length>0||i.querySelectorAll(`[name='${e.field.substring(1,2)}']`).length>0)&&l.push(e)})});const t=[];l.forEach(e=>{const i=e.field.indexOf("__"),a=0==i?e.field:e.field.substr(0,i);t.push(`${a} ${e.msg}`)}),t.length>0&&this.$notify.error({title:this.$t("ht.common.warmTips"),dangerouslyUseHTMLString:!0,message:t.join("<br/>")}),i(l)})})}}},ec={name:"HtCollapse",mixins:[Xr],props:{accordion:{type:Boolean,default:!1},openDefault:{type:Array,default:()=>[]},isVerify:{type:Boolean,default:!1}},data(){return{openDefaultArr:this.openDefault,preActiveNames:[]}},watch:{openDefaultArr:{handler(e){this.$root.$emit("collapse-active-names",e)},deep:!0}},created(){this.$root.$on("add-new-collapse-item",e=>{e&&!this.openDefaultArr.includes(e)&&this.openDefaultArr.push(e)})},mounted(){this.preActiveNames=[].concat(this.openDefaultArr)},methods:{handleChange(e){if(e.length<this.preActiveNames.length){if(this.isVerify)return void this.validateRegion(".el-collapse-item.is-active").then(t=>{t.length>0?this.openDefaultArr=[].concat(this.preActiveNames):(this.preActiveNames=[].concat(e),this.openDefaultArr=[].concat(e),this.$emit("change",e))});this.openDefaultArr=[].concat(e)}this.preActiveNames=[].concat(e),this.openDefaultArr=[].concat(e),this.$emit("change",e)}}},tc=ec,ic=W(tc,Gr,Yr,!1,null,null,null),ac=ic.exports;ac.install=function(e){e.component(ac.name,ac)};var sc=ac,lc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-collapse-item",{attrs:{title:e.title,name:e.name,disabled:e.disabled}},[e._t("title",null,{slot:"title"}),e._t("default")],2)},nc=[],oc={name:"HtCollapseItem",props:{title:String,name:{type:[String,Number],default(){return this._uid}},disabled:Boolean}},rc=oc,cc=W(rc,lc,nc,!1,null,null,null),hc=cc.exports;hc.install=function(e){e.component(hc.name,hc)};var uc=hc,dc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",{staticClass:"step-wrap"},[i("div",{attrs:{span:1}},[i("span",{staticStyle:{"font-weight":"bold","font-size":"14px"}},[e._v("\n      "+e._s(e.pageNum+1)+"/"+e._s(e.pageSize)+"\n    ")])]),i("div",{staticClass:"step-item",attrs:{span:3}},[i("el-button",{staticClass:"step_change_btn",class:{hidden:0==e.pageNum},style:"background-color:"+e.backButton.color+";border-color:"+e.backButton.color,attrs:{type:"success",icon:e.backButton.icon},on:{click:e.back}},[e._v("\n      "+e._s(e.backButton.name)+"\n    ")]),i("el-button",{staticClass:"step_change_btn",class:{hidden:e.pageNum>=e.pageSize-1},style:"background-color:"+e.nextButton.color+";border-color:"+e.nextButton.color,attrs:{type:"success",icon:e.nextButton.icon},on:{click:e.next}},[e._v("\n      "+e._s(e.nextButton.name)+"\n    ")])],1)])},pc=[],mc={name:"HtStep",componentName:"HtStep",mixins:[Ne],props:{pageSize:{type:Number,require:!0},backButton:{type:Object,default:()=>({name:Object(Me["c"])("ht.step.pre"),color:"#409eff"})},nextButton:{type:Object,default:()=>({name:Object(Me["c"])("ht.step.next"),color:"#67C23A"})},isVerify:{type:Boolean,default:!1}},data(){return{pageNum:0}},created(){this.$on("validateRegion",(e,t)=>{e&&this.doJump(t)})},methods:{verifyBeforeJump(e){this.dispatch("HtSteps","beforeJump",e)},doJump(e){this.pageNum+=e,this.dispatch("HtSteps","pageAlter",this.pageNum),this.$emit("updatePageIndex",this.pageNum)},back(){this.isVerify?this.verifyBeforeJump(-1):this.doJump(-1),this.$root.$emit("collapse-active-names","success")},next(){this.isVerify?this.verifyBeforeJump(1):this.doJump(1),this.$root.$emit("collapse-active-names","success")}}},gc=mc,fc=(i("9745"),W(gc,dc,pc,!1,null,"bd127e32",null)),yc=fc.exports;yc.install=function(e){e.component(yc.name,yc)};var bc=yc,_c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"steps__container"},[i("el-steps",{class:{"el-steps__hidden":e.hiddenBar},attrs:{active:e.active,"finish-status":"success","align-center":""}},e._l(e.columns,(function(e,t){return i("el-step",{key:t,attrs:{title:e.name}})})),1),e._t("default")],2)},vc=[],wc={name:"HtSteps",componentName:"HtSteps",mixins:[Ne,Xr],props:{columns:Array,hiddenBar:{type:Boolean,default:!1}},data(){return{active:0}},computed:{hasColumns:function(){return this.columns.length>0}},created(){const e=this;this.$on("pageAlter",t=>{e.active=t,this.broadcast("HtStepLayout","pageAlter",t)}),this.$on("beforeJump",e=>{this.validateRegion(".step-layout__container.active").then(t=>{this.broadcast("HtStep","validateRegion",[0==t.length,e])})})}},Sc=wc,Cc=(i("e486"),W(Sc,_c,vc,!1,null,"71cb81e2",null)),Dc=Cc.exports;Dc.install=function(e){e.component(Dc.name,Dc)};var xc=Dc,Tc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"step-layout__container",class:{active:e.pageIndex===e.showIndex}},[e._t("default")],2)},Pc=[],Ec={name:"HtStepLayout",componentName:"HtStepLayout",props:{pageIndex:{type:Number,require:!0}},data(){return{showIndex:0}},created(){const e=this;this.$on("pageAlter",t=>{e.showIndex=t})}},Oc=Ec,kc=(i("4767"),W(Oc,Tc,Pc,!1,null,"b42c85d4",null)),Ic=kc.exports;Ic.install=function(e){e.component(Ic.name,Ic)};var $c=Ic,Ac=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["el-divider","el-divider--"+e.direction],style:"background-color:"+e.color},[e.$slots.default&&"vertical"!==e.direction?i("div",{class:["el-divider__text","is-"+e.contentPosition]},[e._t("default")],2):e._e()])},Bc=[],Mc={name:"HtDivider",props:{direction:{type:String,default:"horizontal",validator:function(e){return-1!==["horizontal","vertical"].indexOf(e)}},contentPosition:{type:String,default:"center",validator:function(e){return-1!==["left","right","center"].indexOf(e)}},color:{type:String,default:"#dcdfe6"}}},Lc=Mc,Fc=W(Lc,Ac,Bc,!1,null,null,null),Nc=Fc.exports;Nc.install=function(e){e.component(Nc.name,Nc)};var qc=Nc,Vc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-tabs",{ref:"tabs",attrs:{"tab-position":e.tabPosition,"before-leave":e.beforeLeaveTab,type:e.type,"active-name":e.activeName,closable:e.closable,addable:e.addable,editable:e.editable,stretch:e.stretch},on:{"tab-click":e.tabClickHandle,"tab-remove":e.tabRemoveHandle,"tab-add":e.tabAddHandle,edit:e.tabEditHandle},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},[e._t("default")],2)],1)},Rc=[],zc={name:"HtTabs",mixins:[Xr],props:{tabsValue:String,type:String,activeName:String,beforeLeave:Function,closable:{type:Boolean,default:!1},addable:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},tabPosition:{type:String,default:"top"},stretch:{type:Boolean,default:!1},isVerify:{type:Boolean,default:!1}},data(){return{val:this.tabsValue}},mounted(){let e=this;this.$refs.tabs.$watch("panes",(function(){e.val=e.getShowPanes(e.val)}))},methods:{beforeLeaveTab(e,t){return this.isVerify?new Promise((i,a)=>{if(this.beforeLeave){const i=this.beforeLeave(e,t);i&&i.constructor==Promise?i.catch(()=>a()):null!=i&&void 0!=i&&!1===i&&a()}this.validateRegion(".el-tab-pane:not([aria-hidden])").then(e=>{e.length>0?a():i()})}):!this.beforeLeave||this.beforeLeave(e,t)},getShowPanes(e){let t=this.$refs.tabs.panes,i="",a=!1;for(let s=0;s<t.length;s++)t[s].name==e&&(a=!0),t[s].$attrs.isShow&&!i&&(i=t[s].name);return a?e:i},tabClickHandle(e){this.$emit("tab-click",e)},tabRemoveHandle(e){this.$emit("tab-remove",e)},tabAddHandle(){this.$emit("tab-add")},tabEditHandle(e,t){this.$emit("edit",e,t)}}},Hc=zc,Uc=W(Hc,Vc,Rc,!1,null,null,null),Kc=Uc.exports;Kc.install=function(e){e.component(Kc.name,Kc)};var jc=Kc,Wc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[e.inputWriteable&&"n"!=e.permission_sub?i("el-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],ref:"refName",style:e.styles,attrs:{size:e.inputSize,name:e.inputName,"fetch-suggestions":e.querySearchAsync,placeholder:e.placeholder,placement:e.placement,"popper-class":e.popperClass,"trigger-on-focus":e.triggerOnFocus,"select-when-unmatched":e.selectWhenUnmatched,"hide-loading":e.hideLoading,clearable:e.clearable,"popper-append-to-body":e.popperAppendToBody,"highlight-first-item":e.highlightFirstItem},on:{select:function(t){return e.$emit("select",t)},change:function(t){return e.$emit("change",t)}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return e._t("default",null,{item:i})}}],null,!0),model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}},[e._t("prefix",null,{slot:"prefix"}),e._t("suffix",null,{slot:"suffix"}),e._t("prepend",null,{slot:"prepend"}),e._t("append",null,{slot:"append"})],2):e._e(),"n"!=e.permission?i("ht-field-tail",{attrs:{"field-name":e.inputName,readonly:!e.inputWriteable,"input-value":e.inputReadonlyVal}}):e._e()],1):e._e()},Qc=[],Jc={name:"HtAutocomplete",mixins:[de["a"],pe["a"],xe,Te,me["a"]],props:{value:String,autoTiplist:String,styles:Object,placement:{type:String,validator(e){return["top","top-start","top-end","bottom","bottom-start","bottom-end","bottom-start"].includes(e)}},popperClass:String,triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},popperAppendToBody:{type:Boolean,default:!0},highlightFirstItem:{type:Boolean,default:!1},props:{type:Object,default:function(){return{key:"value"}}},clearable:{type:Boolean,default:!0}},data(){return{refName:"autocomplete-"+y["a"].getName(),options:[]}},computed:{inputVal:{get:function(){return this.value},set:function(e){"number"==typeof e?this.$emit("input",e.toString()):this.$emit("input",e)}},inputReadonlyVal:function(){if(!this.inputWriteable&&this.inputVal.length>0&&this.options.length>0){var e=[];if(this.inputVal&&this.options.length>0)for(var t=0;t<this.options.length;t++)if(this.options[t][this.props.key]==this.inputVal){e.push(this.options[t].value);break}return e.join(",")}return this.inputVal}},created(){this.options=this.autoTiplist?JSON.parse(this.autoTiplist):[]},methods:{querySearchAsync(e,t){this.doCustomQuery(null,!0).then(i=>{null==i&&void 0==i||(this.options=i);var a=[].concat(e?this.options.filter(this.createStateFilter(e)):this.options);t(a)}).catch(()=>t(this.options))},createStateFilter(e){return t=>{let i=t.value;return"number"==typeof i&&(i=i.toString()),i.toLowerCase().indexOf(e.toLowerCase())>=0}},focus(){this.$refs[this.refName].focus()}}},Gc=Jc,Yc=(i("83a4"),W(Gc,Wc,Qc,!1,null,"180e4564",null)),Zc=Yc.exports;Zc.install=function(e){e.component(Zc.name,Zc)};var Xc=Zc,eh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[e.inputWriteable&&"n"!=e.permission_sub?i("el-cascader",{directives:[{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],ref:e.refName,attrs:{size:e.inputSize,props:e.propsVal,name:e.inputName,validate:e.validate,placeholder:e.placeholder,disabled:e.disabled,clearable:e.clearable,"show-all-levels":e.showAllLevels,"collapse-tags":e.collapseTags,separator:e.separator,"popper-class":e.popperClass},on:{change:function(t){return e.$emit("change",t)},"expand-change":function(t){return e.$emit("expand-change",t)},blur:function(t){return e.$emit("blur",t)},focus:function(t){return e.$emit("focus",t)},"visible-change":function(t){return e.$emit("visible-change",t)},"remove-tag":function(t){return e.$emit("remove-tag",t)}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,a=t.data;return e._t("default",null,{node:i,data:a})}}],null,!0),model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}},[e._t("empty",null,{slot:"empty"})],2):e._e(),"n"!=e.permission?i("ht-field-tail",{attrs:{"field-name":e.inputName,readonly:!e.inputWriteable,"input-value":e.inputVal}}):e._e()],1)},th=[],ih={name:"HtCascader",mixins:[de["a"],pe["a"],me["a"],Te],props:{value:String,disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},showAllLevels:{type:Boolean,default:!0},collapseTags:{type:Boolean,default:!1},separator:{type:String,default:">"},popperClass:{type:String}},data(){let e=this;return{refName:"cascader-"+y["a"].getName(),lazyLoadResolve:null,propsVal:{value:e.ganged.valueBind,label:e.ganged.labelBind,lazy:!0,lazyLoad(t,i){e.dynamicLoadOption(t,i)}}}},computed:{inputVal:{get(){if(this.value){if(this.value.constructor==String){if(!this.value)return"";let e=JSON.parse(this.value);return this.inputWriteable?e.path:e.pathLabels.join(">")}return this.value.path}return this.value},set(){let e=this.$refs[this.refName].getCheckedNodes(!1);if(e.length>0&&null!==e[0]){let t={path:e[0].path,pathLabels:e[0].pathLabels};this.$emit("input",JSON.stringify(t))}else this.$emit("input","")}}},methods:{getCheckedNodes:function(e){return this.$refs[this.refName].getCheckedNodes(e)},dynamicLoadOption:function(e,t){this.lazyLoadResolve=t,setTimeout(()=>{const t=this.prepareLoadParams(this.ganged.bind,e);this.doCustomQuery(t).then(t=>{this.dynamicOptionResponse(t,this.ganged.leafJudge,e)})},0)},prepareLoadParams:function(e,t){let i={};return e&&!y["a"].isEmpty(e)&&Object.keys(e).forEach(a=>{const s=e[a];let l=null;s.constructor==Object?l=0==t.level?y["a"].isEmpty(s["default"])?null:s["default"]:t.data[s["key"]]:s.constructor==String&&t.level>0&&(l=t.data[s]),y["a"].isEmpty(l)||(i[a]=l)}),i},dynamicOptionResponse:function(e,t,i){this.lazyLoadResolve&&(t&&t.constructor==Function&&e.forEach(e=>{e.leaf=e}),this.setLeaf(e),i.level>0&&!i.hasOwnProperty("leaf")?this.lazyLoadResolve([]):this.lazyLoadResolve(e),this.$refs[this.refName].computePresentContent())},setLeaf(e){if(!e||!e.map)return[];let t=e.map(e=>(e.children&&this.setLeaf(e.children),e&&!e.children&&0!==e.leaf&&(e.leaf=!0),e));return t}}},ah=ih,sh=(i("03d5"),W(ah,eh,th,!1,null,"10b24d42",null)),lh=sh.exports;lh.install=function(e){e.component(lh.name,lh)};var nh=lh,oh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[e.inputWriteable?i("el-date-picker",{directives:[{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],attrs:{name:e.inputName,type:e.dateType,"picker-options":e.pickerOptions,"popper-class":e.popperClass,disabled:e.disabled,readonly:e.readonly,editable:e.editable,clearable:e.clearable,size:e.inputSize,"start-placeholder":e.startPlaceholderVal,"end-placeholder":e.endPlaceholderVal,"range-separator":e.rangeSeparator,format:e.format,"value-format":e.valueFormat,"default-value":e.defaultValue,"default-time":e.defaultTime,placeholder:e.placeholder,"unlink-panels":e.unlinkPanels},on:{change:function(t){return e.$emit("change",t)},blur:function(){return e.$emit("blur")},focus:function(){return e.$emit("focus")}},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}}):e._e(),i("ht-field-tail",{attrs:{"field-name":e.inputName,readonly:!e.inputWriteable,"input-value":e.value}})],1):e._e()},rh=[],ch={name:"HtDatePicker",components:{HtFieldTail:ue},mixins:[Le,de["a"],pe["a"],me["a"]],props:{value:String,readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},editable:{type:Boolean,default:!0},defaultValue:{type:[String,Date]},defaultTime:{type:String},format:{type:String,default:"yyyy-MM-dd HH:mm:ss"},valueFormat:{type:String,default:"yyyy-MM-dd HH:mm:ss"},popperClass:String,rangeSeparator:{type:String,default:"-"},pickerOptions:{type:Object,default(){return{}}},startPlaceholder:{type:String},endPlaceholder:{type:String},unlinkPanels:{type:Boolean,default:!1}},computed:{dateType(){return/^\w{4}-\w{1,2}-\w{1,2}$/.test(this.format)?"daterange":"datetimerange"},startPlaceholderVal(){return this.startPlaceholder?this.startPlaceholder:this.t("ht.date.startDate")},endPlaceholderVal(){return this.endPlaceholder?this.endPlaceholder:this.t("ht.date.endDate")},inputVal:{get:function(){return this.value&&this.value.constructor==String?this.value.split(","):this.value},set:function(e){e&&e.constructor==Array?this.$emit("input",e.join(",")):this.$emit("input",e)}}}},hh=ch,uh=(i("78a8"),W(hh,oh,rh,!1,null,"3b1009ec",null)),dh=uh.exports;dh.install=function(e){e.component(dh.name,dh)};var ph=dh,mh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[e.inputWriteable?i("el-select",{directives:[{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],ref:"elSelect",style:e.styles,attrs:{name:e.inputName,size:e.inputSize,"popper-class":e.popperClass,clearable:e.clearable,placeholder:e.placeholder,filterable:e.filterable,"filter-method":e.filterMethod},on:{"visible-change":e.handleVisibleChange,clear:e.clear},model:{value:e.valueDesc,callback:function(t){e.valueDesc=t},expression:"valueDesc"}},[e.selectlist&&e.selectlist.length>0?i("el-option",{attrs:{value:e.inputVal}},[i("el-scrollbar",{staticClass:"tree-scrollbar",staticStyle:{height:"100%"}},[i("el-tree",{ref:"elTree",staticStyle:{maxheight:"245px"},attrs:{"node-key":"key",data:e.selectlist,indent:e.indent,"highlight-current":!0,"default-expand-all":!0,"expand-on-click-node":!1,props:e.defaultProps,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}})],1)],1):e._e()],1):e._e(),"n"!=e.permission?i("ht-field-tail",{attrs:{"field-name":e.inputName,readonly:!e.inputWriteable,"input-value":e.valueDesc}}):e._e()],1)},gh=[],fh={name:"HtDictionary",mixins:[de["a"],pe["a"],me["a"]],props:{value:String,dickey:{type:String,require:!0},popperClass:String,styles:{type:Object,default(){return{}}},clearable:{type:Boolean,default:!0},filterable:{type:Boolean,default:!1},indent:{type:Number,default:8},setValue:{type:Function,default:()=>{}}},data(){return{selectlist:[],defaultProps:{children:"children",label:"name"},valueDesc:""}},computed:{inputVal:{get:function(){return y["a"].isEmpty(this.value)?"":(this.findDesc(this.selectlist),this.value)},set:function(e){this.$emit("input",e)}}},watch:{value(e){e&&this.loadOptions(),this.valueDesc="",this.$emit("input",e)}},created(){this.setValue()},mounted(){this.loadOptions()},methods:{handleVisibleChange(e){e&&!this.valueDesc&&this.loadOptions()},loadOptions(){this.dickey&&this.$requestConfig.getDictionaryByKey(this.dickey).then(e=>{this.selectlist=e,null!==this.value&&void 0!==this.value&&this.findDesc(e)})},clear(){this.filterMethod(""),this.$emit("input","")},handleNodeClick(e){this.inputVal=e.key,this.valueDesc=e.name,this.$refs.elSelect.blur(),setTimeout(()=>{this.$validator.validate()})},filterNode(e,t){return!e||-1!==t.name.indexOf(e)},findDesc(e){e&&e.length>0&&e.forEach(e=>{e.key!=this.value?e.children&&this.findDesc(e.children):this.valueDesc=e.name})},filterMethod(e){this.$refs.elTree.filter(e)}}},yh=fh,bh=(i("2cf4"),W(yh,mh,gh,!1,null,"3ad3cdfc",null)),_h=bh.exports;_h.install=function(e){e.component(_h.name,_h)};var vh=_h,wh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[i("el-input",{directives:[{name:"show",rawName:"v-show",value:"input"==e.roInputDisplayMode,expression:"roInputDisplayMode == 'input'"}],style:e.styles,attrs:{type:e.type,size:e.inputSize,name:e.inputName,autosize:{minRows:1,maxRows:4},readonly:""},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}}),i("el-input",{directives:[{name:"show",rawName:"v-show",value:"text"==e.roInputDisplayMode,expression:"roInputDisplayMode == 'text'"}],style:e.styles,attrs:{type:e.type,size:e.inputSize,name:e.inputName,autosize:{minRows:1,maxRows:4},readonly:""},domProps:{innerHTML:e._s(e.inputVal)},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}})],1):e._e()},Sh=[];const Ch=i("cebe");function Dh(e,t={},i={}){const a={url:e,data:t,method:i.method||"GET",params:i.params||{},onUploadProgress:i.onUploadProgress||null,headers:i.headers||"",responseType:i.responseType||"json"};return Ch(a)}var xh={props:{script:String},methods:{evilJS(){let e=this;if(this.script){let t=Object(Re["a"])(this.script);const a=y["a"].getOnlineFormInstance(e),s=i("c5e1"),l=function(){const i=Function("req","data","i18n","Message","Loading","formVm","_this","$",t);return i(Dh,a.data,Me["b"],d["Message"],d["Loading"],a,e,s)};return l()}}}},Th={name:"HtReadonlyInput",mixins:[pe["a"],de["a"],me["a"],xh],props:{value:[String,Number],type:{type:String,default:"text",validator(e){return["text","textarea"].includes(e)}},styles:{type:Object}},data(){return{roInputDisplayMode:"input"}},computed:{inputVal:{get(){return y["a"].isEmpty(this.value)?"":this.value},set(e){this.$emit("input",e)}}},created(){this.roInputDisplayMode="input",this.$on("formExtend:update",e=>{this.roInputDisplayMode=e.roInputDisplayMode||"input"})},mounted(){null!=this.value&&void 0!=this.value&&(this.inputVal=this.value);const e=this.evilJS();null!=e&&void 0!=e&&(this.inputVal=e)}},Ph=Th,Eh=W(Ph,wh,Sh,!1,null,null,null),Oh=Eh.exports;Oh.install=function(e){e.component(Oh.name,Oh)};var kh=Oh,Ih=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{name:"online-form"}},[0==e.loadStatus?i("el-skeleton",{attrs:{rows:6,animated:""}}):e.loadStatus>0?i("ht-runtime-template",{staticClass:"online-form-wrap form-table__wrap",attrs:{name:e.formName,data:e.data,permission:e.permission,"is-view":e.isView,"is-print":e.isPrint,"mobile-mode":e.mobileMode,"form-key":e.formKey,"init-fill-data":e.initFillData,"extend-prop":e.extendProp,"is-support-mobile":e.isSupportMobile,"inst-id":e.instId,"is-preview":e.isPreview},on:{"load-fail":e.handleLoadFail,"load-success":e.handleLoadSuccess}}):i("div",{staticClass:"loaded-fail__div"},[e._v("\n    "+e._s(e.$t("ht.onlineForm.loadFormError"))+"\n  ")])],1)},$h=[],Ah={watch:{hotTableFillback:function(e){if(e){let t=e.split("_timestamp_"),i=t[0].split("."),a="hottable."+i[0]+"."+i[1],s=this.data[i[0]][i[1]];this.$refs.onlineForm.$refs[a].fillbackHotTableData(s)}}},mounted(){if(this.isFormItemBorder(),this.data){const e=this.formId;let t=this;if(e){const i=this.$loading({lock:!0,text:t.$t("ht.onlineHottable.loadingText"),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.$requestConfig.getFormById(e).then(e=>{if(e.data){const a=e.data.data;for(const e in a)a.hasOwnProperty(e)&&(t.data[e]||(t.data[e]=a[e]));i.close(),t.toInitTemolateData(this.initFillData)}else i.close(),t.toInitTemolateData(this.initFillData)},()=>{i.close(),t.toInitTemolateData(this.initFillData)})}else this.toInitTemolateData(this.initFillData)}},methods:{isFormItemBorder(){const e=document.querySelectorAll(".el-row--flex .el-col-12"),t=Array.from(e);if(t.length)for(let i=0;i<t.length;i++){let e=t[i];e.style.borderStyle&&e.children&&e.children.length>0?(e.parentNode.style.marginBottom="20px",Array.from(e.children).forEach(e=>{e.style.margin="24px 24px 22px 24px"})):e.style.marginRight="24px"}},toInitTemolateData(e){if(!this.data)return;const t=this.data;let i=this.$refs;for(const s in t)if(t.hasOwnProperty(s)){const l=t[s];for(const n in l)if(l.hasOwnProperty(n)&&0==n.indexOf("sub_")){const l="hottable."+s+"."+n;if(i[l])try{i[l].fillbackHotTableData(t[s][n],this.permission),e&&i[l].initTemplateData()}catch(a){}}}},addInitTemplateData(e){const t="hottable."+e;this.$refs[t].toAddInitTemplateData()},mergeCellRefresh(e){const t="hottable."+e;this.$refs[t].mergeCellRefresh()},execCellMathExp(e){const t="hottable."+e;this.$refs[t].execCellMathExp()},execCrossMapping(e){const t="hottable."+e;this.$refs[t].execCrossMapping()},getHotTableData(e){const t="hottable."+e;this.$refs[t].getHotTableData()}}},Bh=i("1639"),Mh={data(){return{fillOrg:{},fillOrgConfMap:{},transitionIndex:-1,left_image:"",right_image:""}},computed:{pagingSubData(){const e=this;return function(t){return Bh["a"].pagingByPath(t,e)}},getPageOffset(){return e=>Bh["a"].getPageOffset(e,this)}},mounted(){if(this.$el&&this.$el.constructor==Comment)this.$emit("load-fail");else{if(this.$validator=this.$root.$validator,this.permission.table)for(let e in this.permission.table)this.permission.table[e].required&&this.addSubTableByName(e);this.$emit("load-success",!0),this.isPrint&&this.printDetail()}},methods:{getExpandArr(e,t){if("expand"===t&&e){let t=[];return e.forEach(e=>{t.push(e.sub_guid)}),t}return e&&e.length?[e[0].sub_guid]:[]},printDetail(){window.print(),this.isPrint&&this.$router.go(-1),setTimeout((function(){location.reload()}),200)},up(e,t){if(0===e)this.$message({message:this.$t("ht.subTable.upWarning"),type:"warning"});else{let i=t[e-1];this.$set(t,e-1,t[e]),this.$set(t,e,i)}},down(e,t){if(e===t.length-1)this.$message({message:this.$t("ht.subTable.downWarning"),type:"warning"});else{this.isTransition=!0;let i=t[e+1];this.$set(t,e+1,t[e]),this.$set(t,e,i)}},copy(e,t,i){let a=JSON.parse(JSON.stringify(t));a.id_&&delete a.id_,a.sub_row_readonly&&delete a.sub_row_readonly;for(let s in a)s.startsWith("sub_")&&Array.isArray(a[s])&&a[s].length&&a[s].forEach(e=>{e.id_&&delete e.id_});if(i){const e=this.watchMap;if(e){const t=e.get("bindIdentityModelNameList");t&&t.length>0&&t.forEach(e=>{e.startsWith(i)&&delete a[e.replace(i+".","")]})}}a.sub_guid=this.guid(),this.$root.$emit("add-new-collapse-item",a.sub_guid),e.push(a),this.$forceUpdate()},addSubTab(e){let t=e.split(".");if(t.length<3)this.$message({message:this.$t("ht.subTable.subTablePathError"),type:"warning"});else{let a=t[2].replace("sub_",""),s=this.data[t[1]].initData[a]||{};this.$parent.subBackfill&&this.$parent.subBackfill.has(e)&&(s=this.$parent.subBackfill.get(e));let l=JSON.stringify(s).replace(/null/g,'""'),n=JSON.parse(l);const o=this.data[t[1]][t[2]],r=o.length;for(var i in n)if(0==i.indexOf("sub_")){n[i].length>0&&(n[i]=[]);const t=i.replace("sub_","");!this.permission.table[t]||1!=this.permission.table[t].required&&"true"!=this.permission.table[t].required||this.$nextTick(()=>{this.addSunTab(`${e}.${i}`,r)})}let c=this.toFillOrg(t[1]+"."+t[2],n);c.sub_guid=this.guid(),this.$root.$emit("add-new-collapse-item",c.sub_guid),o.push(c)}},handleCellStyle({column:e}){let t;return e.className&&(t=e.className.split("__")[1]),t?{background:t}:{}},handleRowStyle(e){return{"--headerBgColor":e||"#f4f4f4"}},guid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,i="x"==e?t:3&t|8;return i.toString(16)}))},addSunTab(e,t){let i=e.split(".");if(i.length<4)this.$message({message:this.$t("ht.subTable.sunTablePathError"),type:"warning"});else{const a=i.filter((e,t)=>3!==t),s=this.getPageOffset(a.join("."))+t;let l=i[2].replace("sub_",""),n=i[3].replace("sub_",""),o=this.data[i[1]][i[2]][s];o.hasOwnProperty(i[3])||this.$set(o,i[3],new Array);let r=this.data[i[1]].initData[l].initData[n]||{};this.$parent.subBackfill&&this.$parent.subBackfill.has(e)&&(r=this.$parent.subBackfill.get(e));let c=JSON.stringify(r).replace(/null/g,'""');if(!this.data[i[1]][i[2]][s][i[3]]){let e=[i[3]],t=new Array;this.data[i[1]][i[2]][s][e]=t}let h=JSON.parse(c);h.sub_guid=this.guid(),this.data[i[1]][i[2]][s][i[3]].push(h),this.$root.$emit("add-new-collapse-item",h.sub_guid),this.$forceUpdate()}},addSubTableByName(e){for(let t in this.data){let i=JSON.parse(JSON.stringify(this.data[t].initData[e]||{}));if(this.data[t]["sub_"+e]&&this.data[t]["sub_"+e].length<1&&(this.data[t]["sub_"+e].push(JSON.parse(JSON.stringify(i))),this.permission.table))for(let a in this.permission.table)this.permission.table[a].required&&(this.data[t]["sub_"+e][0].hasOwnProperty("sub_"+a)&&this.data[t]["sub_"+e][0]["sub_"+a]&&this.data[t]["sub_"+e][0]["sub_"+a].length<1?this.data[t]["sub_"+e][0]["sub_"+a].push(JSON.parse(JSON.stringify(i.initData[a]))):this.data[t]["sub_"+e][0].hasOwnProperty("sub_"+a)&&!this.data[t]["sub_"+e][0]["sub_"+a]&&(this.data[t]["sub_"+e][0]["sub_"+a]=[],this.data[t]["sub_"+e][0]["sub_"+a].push(i.initData[a])))}},deleteRow(e,t){let i=e.split(".");if(i.length<2)this.$message({message:this.$t("ht.subTable.subTablePathError"),type:"warning"});else{let e=i[1].replace("sub_","");if(1==this.data[i[0]][i[1]].length&&(1==this.permission.table[e].required||"true"==this.permission.table[e].required))return void this.$message({message:this.$t("ht.global.subTableRequired"),type:"warning"});this.data[i[0]][i[1]].remove(t)}},deleteSunRow(e,t,i){let a=e.split(".");if(a.length<3)this.$message({message:this.$t("ht.subTable.sunTablePathError"),type:"warning"});else{let e=a[1].replace("sub_",""),s=a[2].replace("sub_","");if(1==this.data[a[0]][a[1]][i][a[2]].length&&(1==this.permission.table[s].required||"true"==this.permission.table[e].required))return void this.$message({message:this.$t("ht.global.sunTableRequired"),type:"warning"});this.data[a[0]][a[1]][i][a[2]].remove(t),this.data=Object.assign({},this.data)}},clearAllMessageBox(e){this.$confirm(this.$t("ht.subTable.clearAllTip"),this.$t("ht.common.tips"),{confirmButtonText:this.$t("ht.common.confirm"),cancelButtonText:this.$t("ht.common.cancle"),type:"warning"}).then(()=>{this.clearAll(e)}).catch(()=>{this.$message({type:"info",message:this.$t("ht.subTable.cancelOperate")})})},clearAll(e){const{subTablePath:t,isHot:i,index:a}=e;let s;if(s=t?t.split("."):e.split("."),s.length<2)this.$message({message:this.$t("ht.subTable.subTablePathError"),type:"warning"});else if(!a&&0!==a||3!=s.length){const e=s[1].replace("sub_","");if(1==this.data[s[0]][s[1]].length&&(1==this.permission.table[e].required||"true"==this.permission.table[e].required))return void this.$message({message:this.$t("ht.subTable.deleteSubTableTip"),type:"warning"});const a=this.data[s[0]][s[1]];if(a instanceof Array&&a.splice(0,a.length),i){const e="hottable."+t;this.$refs[e].fillbackHotTableData(null)}}else{const e=s[2].replace("sub_","");if(1==this.permission.table[e].required||"true"==this.permission.table[e])return void this.$message.warning(this.$t("ht.subTable.deleteSunTableTip"));const t=`data.${s[0]}.${s[1]}`,i=this.getPageOffset(t)+a,l=this.data[s[0]][s[1]][i][s[2]];l instanceof Array&&l.splice(0,l.length)}},toFillOrg(e,t){const i=this.fillOrgConfMap[e];let a={};if(i&&this.fillOrg){if(i.name){const e=i.name.split(".");a[e[e.length-1]]=this.fillOrg.name}if(i.id){const e=i.id.split(".");a[e[e.length-1]]=this.fillOrg.id}if(i.code){const e=i.code.split(".");a[e[e.length-1]]=this.fillOrg.code}if(i.instId){const e=i.instId.split(".");a[e[e.length-1]]=this.$parent.$parent.instId?this.$parent.$parent.instId:""}return{...t,...a}}return t},initFill(e,t){if(e&&t)try{const i=this.fillOrgConfMap[e]?this.fillOrgConfMap[e]:JSON.parse(t);(i.id||i.code||i.name||i.instId)&&(this.fillOrgConfMap[e]=i,this.initFirstFill(e,i))}catch(i){}},initFirstFill(e,t){const i=e.split(".");if(this.data[i[0]][i[1]]&&1==this.data[i[0]][i[1]].length&&this.fillOrg.id){if(t.id){const e=t.id.split(".");if(!this.data[i[0]][i[1]][0][e[2]]){if(this.data[i[0]][i[1]][0][e[2]]=this.fillOrg.id,t.code){const e=t.code.split(".");this.data[i[0]][i[1]][0][e[2]]||(this.data[i[0]][i[1]][0][e[2]]=this.fillOrg.code)}if(t.name){const e=t.name.split(".");this.data[i[0]][i[1]][0][e[2]]||(this.data[i[0]][i[1]][0][e[2]]=this.fillOrg.name)}}}if(t.instId){const e=t.instId.split(".");this.data[i[0]][i[1]][0][e[2]]||(this.data[i[0]][i[1]][0][e[2]]=this.$parent.$parent.instId?this.$parent.$parent.instId:"")}}},isShowAddButton(e,t,i){if(0===t)return!1;let a=e.split(".");if(i>=0){if(!(a.length<4)){let e=this.data[a[1]][a[2]][i][a[3]]||[];return e.length>=t}this.$message({message:this.$t("ht.subTable.subTablePathError"),type:"warning"})}else{if(!(a.length<3)){let e=this.data[a[1]][a[2]]||[];return e.length>=t}this.$message({message:this.$t("ht.subTable.subTablePathError"),type:"warning"})}return!1}}},Lh={name:"HtOnlineForm",componentName:"HtOnlineForm",mixins:[Xr,Ne],props:{html:String,data:Object,permission:Object,initFillData:{type:Boolean,default:!1},isView:{type:Boolean,default:!1},isPrint:{type:Boolean,default:!1},isLook:{type:Boolean,default:!1},mobileMode:{type:Boolean,default:!1},flowKey:String,formId:String,formKey:String,extendProp:{type:Object,default:()=>({})},isSupportMobile:{type:Boolean,default:!1},instId:[String,Number],isPreview:{type:Boolean,default:!1}},data(){return{formName:"onlineForm_"+y["a"].getName(),loadStatus:0,subBackfill:new Map,hotTableFillback:String,scopeName:"form-"+y["a"].getName(),getDataPromiseResolve:null,getDataPromiseReject:null}},watch:{html:{handler:function(e){e&&this.init()},immediate:!0}},created(){this.$on("global-validate-result",e=>{e?this.getDataPromiseResolve(this.data):this.getDataPromiseReject()})},methods:{handleLoadSuccess(e){this.loadStatus=1,this.$emit("load-success",e)},handleLoadFail(){this.loadStatus=-1},getData(e){return new Promise((t,i)=>{this.getDataPromiseResolve=t,this.getDataPromiseReject=i,e?this.validateRegion(`[name='${this.formName}']`).then(e=>{e.length>0?i(e):this.broadcast("HtGlobalValidate","global-validate")}):t(this.data)})},init(){this.loadStatus=1,l.a.component("ht-runtime-template",{componentName:"HtRuntimeTemplate",mixins:[Ah,Mh],props:{html:String,data:Object,permission:Object,initFillData:{type:Boolean,default:!1},isView:{type:Boolean,default:!1},isPrint:{type:Boolean,default:!1},formKey:String,mobileMode:{type:Boolean,default:!1},extendProp:{type:Object,default:()=>({})},isSupportMobile:{type:Boolean,default:!1},instId:[String,Number],isPreview:{type:Boolean,default:!1}},template:this.html})}}},Fh=Lh,Nh=(i("d2a8"),i("59e8"),W(Fh,Ih,$h,!1,null,"056f450a",null)),qh=Nh.exports;qh.install=function(e){e.component(qh.name,qh)};var Vh=qh,Rh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[i("ht-user-selector",{ref:"userSelectorEl",attrs:{title:e.title,"form-inputs-display":e.formInputsDisplay,validate:e.validate,name:e.inputName,placeholder:e.placeholder,permission:e.permission_sub,single:e.single,config:e.config,data:e.data,pagination:e.pagination,"append-to-body":e.appendToBody,"select-label":"fullname","quick-search-props":e.quickSearchProps,mode:e.mode},on:{"filter-type-change":e.handleFilterTypeChange,valueChange:e.valueChange,change:e.handleChange,search:e.handleSearch,reset:e.handleReset,"page-change":e.handlePageChange,"size-change":e.handleSizeChange,"contact-group-change":e.loadContactUser,"load-org-user":e.loadOrgUser,"load-policy-user":e.loadPolicyUser,"load-role-user":e.loadRoleUser,"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("select-data",t)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e()},zh=[],Hh={name:"HtUserSelectorInput",mixins:[de["a"],pe["a"],me["a"],kt["a"]],props:{value:String,single:Boolean,config:Object,appendToBody:{type:Boolean,default:!1},selectCurrent:{type:Boolean,default:!1},title:{type:String,default(){return Object(Me["c"])("ht.selector.userTitle")}},quickSearchProps:{type:String,default:"fullname,account"},pageSize:{type:Number,default:20}},data(){return{mode:null,filterType:"contact",currentGroup:null,currentOrg:null,currentPolicy:null,currentRole:null,searchWord:null,data:[],pagination:{page:1,pageSize:this.pageSize,total:0,showTotal:!0}}},mounted(){!this.value&&this.selectCurrent&&this.$requestConfig.getCurrentUser().then(e=>{this.initCurrentValue(e)}),this.data&&0!=this.data.length||this.handleLoad()},methods:{handleSearch(e){e&&e.trim()?(this.searchWord=e,this.mode="search",this.handleLoad()):this.handleReset()},handleReset(){this.searchWord=null,this.mode=null,this.handleLoad()},handlePageChange(e){if("filter"!=this.mode)this.handleLoad(e);else switch(this.filterType){case"contact":this.loadContactUser(this.currentGroup,e);break;case"org":this.loadOrgUser(this.currentOrg,e);break;case"policy":this.loadPolicyUser(this.currentPolicy,e);break;case"role":this.loadRoleUser(this.currentRole,e);break}},handleSizeChange(e){this.pagination.pageSize=e,this.handlePageChange(this.pagination.page)},handleFilterTypeChange(e){this.filterType=e},getQueryFilter(e){const t={querys:[],pageBean:this.getPageBean(e)};if(this.quickSearchProps&&this.quickSearchProps.constructor==String&&this.searchWord){const e=this.quickSearchProps.split(",");e.forEach(e=>{let i={property:e,value:this.searchWord,group:"main",operation:"LIKE",relation:"OR"};t.querys.push(i)})}return t},getPageBean(e){const t={...this.pagination};return delete t["total"],t.page=e||1,t},handleLoad(e){const t=this.getQueryFilter(e);this.data=this.data||[],this.loadAllUser(t)},initCurrentValue(e){this.$emit("input",e.fullname),this.config&&(this.config.hasOwnProperty("id")&&y["a"].setValueByConfigKey(this,this.config,"id",e.id),this.config.hasOwnProperty("fullname")&&y["a"].setValueByConfigKey(this,this.config,"fullname",e.fullname),this.config.hasOwnProperty("account")&&y["a"].setValueByConfigKey(this,this.config,"account",e.account),this.config.hasOwnProperty("mobile")&&y["a"].setValueByConfigKey(this,this.config,"mobile",e.mobile),this.config.hasOwnProperty("email")&&y["a"].setValueByConfigKey(this,this.config,"email",e.email))},loadAllUser(e){this.$requestConfig.getUserList(e).then(e=>{const{rows:t,page:i,pageSize:a,total:s}=e;this.isMobile&&i>1?this.data=this.data.concat(t):this.data=t;const l={page:i,pageSize:a,total:s};this.$set(this,"pagination",l)})},loadContactUser(e,t){this.mode="filter",this.currentGroup=e;const i={pageBean:this.getPageBean(t)};"all"!=e&&(i.contactGroupId=e),this.$requestConfig.getContactUser&&this.$requestConfig.getContactUser(i).then(e=>{if(e.state&&e.value){const{rows:t,page:i,pageSize:a,total:s}=e.value;this.isMobile&&i>1?this.data=this.data.concat(t):this.data=t;const l={page:i,pageSize:a,total:s};this.$set(this,"pagination",l)}})},valueChange(e){this.$emit("input",e)},loadOrgUser(e,t){this.mode="filter",this.currentOrg=e;let i={pageBean:this.getPageBean(t),querys:[]},a={property:"uo.path_",value:e.path,group:"main",operation:"RIGHT_LIKE",relation:"AND"};e.path&&i.querys.push(a),this.loadAllUser(i)},loadRoleUser(e,t){this.mode="filter",this.currentRole=e;let i={pageBean:this.getPageBean(t),querys:[]};e&&(i.params={role_id_:e}),this.loadAllUser(i)},loadPolicyUser(e,t){this.mode="filter",this.currentOrg=e;let i={pageBean:this.getPageBean(t),querys:[]},a=null;const{type:s,ids:l,paths:n}=e;switch(s){case"1":a={property:"uo.id_",value:e.id,group:"main",operation:"EQUAL",relation:"AND"},i.querys.push(a),this.loadAllUser(i);break;case"2":a={property:"uo.path_",value:e.path,group:"main",operation:"RIGHT_LIKE",relation:"AND"},i.querys.push(a),this.loadAllUser(i);break;case"3":l.forEach(e=>{a={property:"uo.id_",value:e,group:"main",operation:"EQUAL",relation:"OR"},i.querys.push(a)}),this.loadAllUser(i);break;case"4":n.forEach(e=>{a={property:"uo.path_",value:e,group:"main",operation:"RIGHT_LIKE",relation:"OR"},i.querys.push(a)}),this.loadAllUser(i);break}},handleChange(e){this.$emit("change",e)}}},Uh=Hh,Kh=W(Uh,Rh,zh,!1,null,null,null),jh=Kh.exports;jh.install=function(e){e.component(jh.name,jh)};var Wh=jh,Qh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[i("ht-org-selector",{attrs:{title:e.title,"form-inputs-display":e.formInputsDisplay,validate:e.validate,name:e.inputName,placeholder:e.placeholder,permission:e.permission_sub,single:e.single,config:e.config,data:e.data,pagination:e.pagination,"append-to-body":e.appendToBody,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,mode:e.mode,"show-path":e.showPath},on:{"filter-type-change":e.handleFilterTypeChange,valueChange:e.valueChange,change:e.handleChange,search:e.handleSearch,reset:e.handleReset,"page-change":e.handlePageChange,"size-change":e.handleSizeChange,"load-org":e.loadOrg,"load-policy-org":e.loadPolicyOrg,"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("select-data",t)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e()},Jh=[],Gh={name:"HtOrgSelectorInput",mixins:[de["a"],pe["a"],me["a"],kt["a"]],props:{value:String,single:Boolean,config:Object,appendToBody:{type:Boolean,default:!1},selectCurrent:{type:Boolean,default:!1},title:{type:String,default(){return Object(Me["c"])("ht.selector.orgTitle")}},quickSearchProps:{type:String,default:"name,code,pathName"},pageSize:{type:Number,default:20},showPath:{type:Boolean,default:!1}},data(){return{mode:null,filterType:"org",currentGroup:null,currentOrg:null,currentPolicy:null,searchWord:null,data:[],pagination:{page:1,pageSize:this.pageSize,total:0,showTotal:!0}}},computed:{selectLabel(){return this.showPath?"pathName":"name"}},mounted(){!this.value&&this.selectCurrent&&this.$requestConfig.getCurrentUser("org").then(e=>{this.initCurrentOrg(e)}),this.data&&0!=this.data.length||this.handleLoad()},methods:{handleSearch(e){e&&e.trim()?(this.searchWord=e,this.mode="search",this.handleLoad()):this.handleReset()},handleReset(){this.searchWord=null,this.mode=null,this.handleLoad()},handlePageChange(e){if("filter"!=this.mode)this.handleLoad(e);else switch(this.filterType){case"org":this.loadOrg(this.currentOrg,e);break;case"policy":this.loadPolicyOrg(this.currentPolicy,e);break}},handleSizeChange(e){this.pagination.pageSize=e,this.handlePageChange(this.pagination.page)},handleFilterTypeChange(e){this.filterType=e},getQueryFilter(e){const t={querys:[],pageBean:this.getPageBean(e)};if(this.quickSearchProps&&this.quickSearchProps.constructor==String&&this.searchWord){const e=this.quickSearchProps.split(",");e.forEach(e=>{let i={property:e,value:this.searchWord,group:"main",operation:"LIKE",relation:"OR"};t.querys.push(i)})}return t},getPageBean(e){const t={...this.pagination};return delete t["total"],t.page=e||1,t},handleLoad(e){const t=this.getQueryFilter(e);this.data=this.data||[],this.loadAllOrg(t)},initCurrentOrg(e){e&&this.config&&(this.config.hasOwnProperty("id")&&y["a"].setValueByConfigKey(this,this.config,"id",e.orgId),this.config.hasOwnProperty("code")&&y["a"].setValueByConfigKey(this,this.config,"code",e.orgCode),this.config.hasOwnProperty("name")&&y["a"].setValueByConfigKey(this,this.config,"name",e.orgName),this.config.hasOwnProperty("pathName")&&y["a"].setValueByConfigKey(this,this.config,"pathName",e.pathName)),e&&setTimeout(()=>{this.$emit("input",this.showPath?e.pathName:e.orgName)})},loadOrg(e,t){this.mode="filter",this.currentOrg=e;let i={pageBean:this.getPageBean(t),querys:[]},a={property:"path",value:e.path,group:"main",operation:"RIGHT_LIKE",relation:"AND"};e.path&&i.querys.push(a),this.loadAllOrg(i)},loadPolicyOrg(e,t){this.mode="filter",this.currentOrg=e;let i={pageBean:this.getPageBean(t),querys:[]},a=null;const{type:s,ids:l,paths:n}=e;switch(s){case"1":a={property:"id_",value:e.id,group:"main",operation:"EQUAL",relation:"AND"},i.querys.push(a),this.loadAllOrg(i);break;case"2":a={property:"path_",value:e.path,group:"main",operation:"RIGHT_LIKE",relation:"AND"},i.querys.push(a),this.loadAllOrg(i);break;case"3":l.forEach(e=>{a={property:"id_",value:e,group:"main",operation:"EQUAL",relation:"OR"},i.querys.push(a)}),this.loadAllOrg(i);break;case"4":n.forEach(e=>{a={property:"path_",value:e,group:"main",operation:"RIGHT_LIKE",relation:"OR"},i.querys.push(a)}),this.loadAllOrg(i);break}},loadAllOrg(e){this.$requestConfig.getOrgList(e).then(e=>{const{rows:t,page:i,pageSize:a,total:s}=e;this.isMobile&&i>1?this.data=this.data.concat(t):this.data=t;const l={page:i,pageSize:a,total:s};this.$set(this,"pagination",l)})},valueChange(e){this.$emit("input",e)},handleChange(e){this.$emit("change",e)}}},Yh=Gh,Zh=W(Yh,Qh,Jh,!1,null,null,null),Xh=Zh.exports;Xh.install=function(e){e.component(Xh.name,Xh)};var eu=Xh,tu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[i("ht-role-selector",{attrs:{title:e.title,"form-inputs-display":e.formInputsDisplay,validate:e.validate,"select-label":"name",placeholder:e.placeholder,permission:e.permission_sub,single:e.single,config:e.config,name:e.inputName,data:e.data,pagination:e.pagination,"append-to-body":e.appendToBody,"quick-search-props":e.quickSearchProps,mode:e.mode},on:{valueChange:e.valueChange,change:e.handleChange,search:e.handleSearch,reset:e.handleReset,"page-change":e.handlePageChange,"size-change":e.handleSizeChange,"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("select-data",t)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e()},iu=[],au={name:"HtRoleSelectorInput",mixins:[de["a"],pe["a"],me["a"],kt["a"]],props:{value:String,single:Boolean,config:Object,appendToBody:{type:Boolean,default:!1},title:{type:String,default(){return Object(Me["c"])("ht.selector.roleTitle")}},pageSize:{type:Number,default:20},quickSearchProps:{type:String,default:"name,code"}},data(){return{data:[],mode:"search",searchWord:null,pagination:{page:1,pageSize:this.pageSize,total:0,showTotal:!0}}},mounted(){this.data&&0!=this.data.length||this.handleLoad()},methods:{getQueryFilter(e){const t={querys:[],pageBean:this.getPageBean(e)};if(this.quickSearchProps&&this.quickSearchProps.constructor==String&&this.searchWord){const e=this.quickSearchProps.split(",");e.forEach(e=>{let i={property:e,value:this.searchWord,group:"main",operation:"LIKE",relation:"OR"};t.querys.push(i)})}return t},handleLoad(e){const t=this.getQueryFilter(e);this.data=this.data||[],this.loadAllRole(t)},loadAllRole(e){this.$requestConfig.getRoleList(e).then(e=>{const{rows:t,page:i,pageSize:a,total:s}=e;this.isMobile&&i>1?this.data=this.data.concat(t):this.data=t;const l={page:i,pageSize:a,total:s};this.$set(this,"pagination",l)})},valueChange(e){this.$emit("input",e)},handleChange(e){this.$emit("change",e)},handleSearch(e){e&&e.trim()?(this.searchWord=e,this.mode="search",this.handleLoad()):this.handleReset()},handleReset(){this.searchWord=null,this.mode="search",this.handleLoad()},handlePageChange(e){this.handleLoad(e)},handleSizeChange(e){this.pagination.pageSize=e,this.handlePageChange(this.pagination.page)},getPageBean(e){const t={...this.pagination};return delete t["total"],t.page=e||1,t}}},su=au,lu=W(su,tu,iu,!1,null,null,null),nu=lu.exports;nu.install=function(e){e.component(nu.name,nu)};var ou=nu,ru=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[i("ht-post-selector",{attrs:{title:e.title,"form-inputs-display":e.formInputsDisplay,validate:e.validate,name:e.inputName,placeholder:e.placeholder,permission:e.permission_sub,single:e.single,config:e.config,data:e.data,"table-columns":e.tableColumns,pagination:e.pagination,demensions:e.demensions,"default-demension":e.defaultDemension,orgs:e.orgs,"append-to-body":e.appendToBody,"show-switch-dimension":e.showSwitchDimension,"select-label":"name","quick-search-props":e.quickSearchProps,mode:e.mode},on:{"filter-type-change":e.handleFilterTypeChange,valueChange:e.valueChange,search:e.handleSearch,reset:e.handleReset,"page-change":e.handlePageChange,"size-change":e.handleSizeChange,"load-org-post":e.loadOrgPost,"load-policy-post":e.loadPolicyPost,change:e.handleChange,"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("select-data",t)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e()},cu=[],hu={name:"HtPostSelectorInput",mixins:[de["a"],pe["a"],me["a"],kt["a"]],props:{value:String,single:Boolean,config:Object,appendToBody:{type:Boolean,default:!1},selectCurrent:Boolean,title:{type:String,default(){return Object(Me["c"])("ht.selector.postTitle")}},showSwitchDimension:{type:Boolean,default:!0},pageSize:{type:Number,default:20},quickSearchProps:{type:String,default:"p.pos_name_,p.code_,o.path_name_"}},data(){return{data:[],demensions:[],defaultDemension:null,orgs:[],tableColumns:[{prop:"name",label:this.$t("ht.selector.name")},{prop:"code",label:this.$t("ht.selector.code")},{prop:"orgName",label:this.$t("ht.selector.orgName")}],orgLength:0,createQuery:{},mode:null,filterType:"org",currentGroup:null,currentOrg:null,currentPolicy:null,searchWord:null,pagination:{page:1,pageSize:this.pageSize,total:0,showTotal:!0}}},mounted(){!this.value&&this.selectCurrent&&this.$requestConfig.getCurrentUser("post").then(e=>{this.initCurrentPost(e)}),this.data&&0!=this.data.length||this.handleLoad()},methods:{initCurrentPost(e){e&&e.postName&&this.$emit("input",e.postName),e&&this.config&&(this.config.hasOwnProperty("id")&&y["a"].setValueByConfigKey(this,this.config,"id",e.postId),this.config.hasOwnProperty("code")&&y["a"].setValueByConfigKey(this,this.config,"code",e.postCode),this.config.hasOwnProperty("name")&&y["a"].setValueByConfigKey(this,this.config,"name",e.postName))},valueChange(e){this.$emit("input",e)},handleChange(e){this.$emit("change",e)},handleSearch(e){e&&e.trim()?(this.searchWord=e,this.mode="search",this.handleLoad()):this.handleReset()},handleReset(){this.searchWord=null,this.mode=null,this.handleLoad()},handlePageChange(e){if("filter"!=this.mode)this.handleLoad(e);else switch(this.filterType){case"org":this.loadOrgPost(this.currentOrg,e);break;case"policy":this.loadPolicyPost(this.currentPolicy,e);break}},handleSizeChange(e){this.pagination.pageSize=e,this.handlePageChange(this.pagination.page)},handleFilterTypeChange(e){this.filterType=e},getQueryFilter(e){const t={querys:[],pageBean:this.getPageBean(e)};if(this.quickSearchProps&&this.quickSearchProps.constructor==String&&this.searchWord){const e=this.quickSearchProps.split(",");e.forEach(e=>{let i={property:e,value:this.searchWord,group:"main",operation:"LIKE",relation:"OR"};t.querys.push(i)})}return t},getPageBean(e){const t={...this.pagination};return delete t["total"],t.page=e||1,t},handleLoad(e){const t=this.getQueryFilter(e);this.data=this.data||[],this.loadAllPost(t)},loadAllPost(e){this.$requestConfig.getPostList(e).then(e=>{const{rows:t,page:i,pageSize:a,total:s}=e;this.isMobile&&i>1?this.data=this.data.concat(t):this.data=t;const l={page:i,pageSize:a,total:s};this.$set(this,"pagination",l)})},loadOrgPost(e,t){this.mode="filter",this.currentOrg=e;let i={pageBean:this.getPageBean(t),querys:[]},a={property:"path_",value:e.path,group:"main",operation:"RIGHT_LIKE",relation:"AND"};e.path&&i.querys.push(a),this.loadAllPost(i)},loadPolicyPost(e,t){this.mode="filter",this.currentOrg=e;let i={pageBean:this.getPageBean(t),querys:[]},a=null;const{type:s,ids:l,paths:n}=e;switch(s){case"1":a={property:"o.id_",value:e.id,group:"main",operation:"EQUAL",relation:"AND"},i.querys.push(a),this.loadAllPost(i);break;case"2":a={property:"o.path_",value:e.path,group:"main",operation:"RIGHT_LIKE",relation:"AND"},i.querys.push(a),this.loadAllPost(i);break;case"3":l.forEach(e=>{a={property:"o.id_",value:e,group:"main",operation:"EQUAL",relation:"OR"},i.querys.push(a)}),this.loadAllPost(i);break;case"4":n.forEach(e=>{a={property:"o.path_",value:e,group:"main",operation:"RIGHT_LIKE",relation:"OR"},i.querys.push(a)}),this.loadAllPost(i);break}}}},uu=hu,du=W(uu,ru,cu,!1,null,null,null),pu=du.exports;pu.install=function(e){e.component(pu.name,pu)};var mu=pu,gu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[i("ht-job-selector",{attrs:{title:e.title,"form-inputs-display":e.formInputsDisplay,validate:e.validate,"select-label":"name",placeholder:e.placeholder,permission:e.permission_sub,single:e.single,config:e.config,name:e.inputName,data:e.data,pagination:e.pagination,"quick-search-props":e.quickSearchProps,mode:e.mode,"append-to-body":e.appendToBody},on:{valueChange:e.valueChange,change:e.handleChange,search:e.handleSearch,reset:e.handleReset,"page-change":e.handlePageChange,"size-change":e.handleSizeChange,"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("select-data",t)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e()},fu=[],yu={name:"HtJobSelectorInput",mixins:[de["a"],pe["a"],me["a"],kt["a"]],props:{value:String,single:Boolean,config:Object,appendToBody:{type:Boolean,default:!1},title:{type:String,default(){return Object(Me["c"])("ht.selector.jobTitle")}},pageSize:{type:Number,default:20},quickSearchProps:{type:String,default:"name,code"}},data(){return{data:[],mode:"search",searchWord:null,pagination:{page:1,pageSize:this.pageSize,total:0,showTotal:!0}}},mounted(){this.data&&0!=this.data.length||this.handleLoad()},methods:{getQueryFilter(e){const t={querys:[],pageBean:this.getPageBean(e)};if(this.quickSearchProps&&this.quickSearchProps.constructor==String&&this.searchWord){const e=this.quickSearchProps.split(",");e.forEach(e=>{let i={property:e,value:this.searchWord,group:"main",operation:"LIKE",relation:"OR"};t.querys.push(i)})}return t},handleLoad(e){const t=this.getQueryFilter(e);this.data=this.data||[],this.loadAllJob(t)},loadAllJob(e){this.$requestConfig.getJobList(e).then(e=>{const{rows:t,page:i,pageSize:a,total:s}=e;this.isMobile&&i>1?this.data=this.data.concat(t):this.data=t;const l={page:i,pageSize:a,total:s};this.$set(this,"pagination",l)})},valueChange(e){this.$emit("input",e)},handleChange(e){this.$emit("change",e)},handleSearch(e){e&&e.trim()?(this.searchWord=e,this.mode="search",this.handleLoad()):this.handleReset()},handleReset(){this.searchWord=null,this.mode="search",this.handleLoad()},handlePageChange(e){this.handleLoad(e)},handleSizeChange(e){this.pagination.pageSize=e,this.handlePageChange(this.pagination.page)},getPageBean(e){const t={...this.pagination};return delete t["total"],t.page=e||1,t}}},bu=yu,_u=W(bu,gu,fu,!1,null,null,null),vu=_u.exports;vu.install=function(e){e.component(vu.name,vu)};var wu=vu,Su=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[i("ht-dimension-selector",{attrs:{validate:e.validate,"select-label":"name",placeholder:e.placeholder,permission:e.permission_sub,single:e.single,config:e.config,name:e.inputName,data:e.data,pagination:e.pagination,"append-to-body":e.appendToBody,"quick-search-props":e.quickSearchProps,mode:e.mode},on:{valueChange:e.valueChange,change:e.handleChange,search:e.handleSearch,reset:e.handleReset,"page-change":e.handlePageChange,"size-change":e.handleSizeChange,"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("select-data",t)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e()},Cu=[],Du={name:"HtDimensionSelectorInput",mixins:[de["a"],pe["a"],me["a"]],props:{value:String,single:Boolean,config:Object,appendToBody:{type:Boolean,default:!1},pageSize:{type:Number,default:20},quickSearchProps:{type:String,default:"demName,demCode"}},data(){return{data:[],mode:"search",searchWord:null,pagination:{page:1,pageSize:this.pageSize,total:0,showTotal:!0}}},mounted(){this.data&&0!=this.data.length||this.handleLoad()},methods:{getQueryFilter(e){const t={querys:[],pageBean:this.getPageBean(e)};if(this.quickSearchProps&&this.quickSearchProps.constructor==String&&this.searchWord){const e=this.quickSearchProps.split(",");e.forEach(e=>{let i={property:e,value:this.searchWord,group:"main",operation:"LIKE",relation:"OR"};t.querys.push(i)})}return t},handleLoad(e){const t=this.getQueryFilter(e);this.data=this.data||[],this.loadAllDimension(t)},loadAllDimension(e){this.$requestConfig.getDimensionList(e).then(e=>{const{rows:t,page:i,pageSize:a,total:s}=e;this.isMobile&&i>1?this.data=this.data.concat(t):this.data=t,this.pagination.page=i,this.pagination.pageSize=a,this.pagination.total=s})},valueChange(e){this.$emit("input",e)},handleChange(e){this.$emit("change",e)},handleSearch(e){e&&e.trim()?(this.searchWord=e,this.mode="search",this.handleLoad()):this.handleReset()},handleReset(){this.searchWord=null,this.mode="search",this.handleLoad()},handlePageChange(e){this.handleLoad(e)},handleSizeChange(e){this.pagination.pageSize=e,this.handlePageChange(this.pagination.page)},getPageBean(e){const t={...this.pagination};return delete t["total"],t.page=e||1,t}}},xu=Du,Tu=W(xu,Su,Cu,!1,null,null,null),Pu=Tu.exports;Pu.install=function(e){e.component(Pu.name,Pu)};var Eu=Pu,Ou=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!==e.permission?i("div",{directives:[{name:"express",rawName:"v-express"}],class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[e.isShowSwitch?i("el-switch",{directives:[{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],attrs:{name:e.inputName,width:e.width,"active-color":e.activeColor,"inactive-color":e.inactiveColor,"active-value":e.activeValue,"inactive-value":e.inactiveValue,"active-text":e.activeText,"inactive-text":e.inactiveText,disabled:e.isDisabled},on:{change:function(t){return e.$emit("change",t)}},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}}):e._e(),e.isShowText?i("ht-field-tail",{attrs:{"field-name":e.inputName,readonly:!e.inputWriteable,"input-value":"","tag-format-value":e.tagValue}}):e._e()],1):e._e()},ku=[],Iu={name:"HtSwitch",mixins:[de["a"],pe["a"],me["a"]],props:{value:[String,Number,Boolean],disabled:Boolean,width:Number,activeValue:{type:[String,Number,Boolean],default:!0},inactiveValue:{type:[String,Number,Boolean],default:!1},activeText:String,inactiveText:String,activeColor:String,inactiveColor:String},computed:{inputVal:{get(){return this.value},set(e){(e||[0,!1].includes(e))&&this.$emit("input",e)}},tagValue(){const e=this.value==this.activeValue?this.activeText?this.activeText:this.value:this.inactiveText?this.inactiveText:this.value;return[e]},isShowText(){return"n"!==this.permission&&"input"!==this.currentShowMode},isShowSwitch(){return this.inputWriteable||"input"===this.currentShowMode}}},$u=Iu,Au=W($u,Ou,ku,!1,null,null,null),Bu=Au.exports;Bu.install=function(e){e.component(Bu.name,Bu)};var Mu=Bu,Lu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[e.inputWriteable?i("el-select",{directives:[{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],ref:"fuzzySearch",staticStyle:{width:"100%"},attrs:{size:e.inputSize,filterable:e.filterable,remote:e.filterable,"remote-method":e.remoteMethod,multiple:e.multiple,clearable:"",name:e.inputName},on:{focus:e.focusSelectValue,"visible-change":e.visibleChange},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},e._l(e.options,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1),i("div",{staticClass:"text-center"},[i("a",{staticClass:"text-normal"},[i("el-pagination",{attrs:{layout:"prev, pager, next","page-size":e.pagination.pageSize,"pager-count":5,"current-page":e.pagination.page,total:e.pagination.total},on:{"current-change":e.currentChange}})],1)]),i("div",{staticClass:"ht-tag__append"},[e.creatingTag?i("el-button",{staticStyle:{width:"100%"},attrs:{size:"small",type:"primary",plain:""},on:{click:e.add}},[e._v("\n        "+e._s(e.$t("ht.common.add"))+"\n      ")]):e._e()],1),e.creatingTag?i("template",{slot:"empty"},[e.creatingTag?i("el-button",{staticStyle:{width:"100%"},attrs:{size:"small",type:"primary",plain:""},on:{click:e.add}},[e._v("\n        "+e._s(e.$t("ht.common.add"))+"\n      ")]):e._e()],1):e._e()],2):e._e(),i("ht-field-tail",{attrs:{"field-name":e.inputName,readonly:!e.inputWriteable,"input-value":e.inputVal,"tag-format-value":e.tagValue}})],1):e._e()},Fu=[],Nu={name:"HtTag",mixins:[de["a"],pe["a"],xe,me["a"]],props:{value:String,filterable:{type:Boolean,default:!1},expand:{type:Boolean,default:!1},tagKey:String,multiple:{type:Boolean,default:!1}},data(){return{options:[],pagination:{pageSize:5,page:1,total:0},loading:!1,currentQuery:"",isExistTag:!0}},computed:{inputVal:{set(e){e&&this.multiple?this.$emit("input",e.join(",")):this.$emit("input",e)},get(){return this.value&&this.multiple?this.value.split(","):this.value}},tagValue(){return this.inputVal&&this.inputVal.constructor==Array?this.inputVal:this.inputVal&&this.inputVal.constructor==String?[this.inputVal]:[]},creatingTag(){return this.expand&&""!==this.currentQuery&&!this.isExistTag}},watch:{currentQuery:{handler(e){this.options?this.isExistTag=this.options.some(t=>t.name==e):this.isExistTag=!1}}},mounted(){this.search()},methods:{focusSelectValue(){this.$refs.fuzzySearch.$refs.input&&(this.$refs.fuzzySearch.$refs.input.blur=()=>{this.currentQuery="",this.search()})},visibleChange(e){e||this.multiple||(this.currentQuery="",this.search())},remoteMethod(e){this.currentQuery=e;let t={pageBean:this.pagination,querys:[{property:"type_key_",value:this.tagKey,group:"query",operation:"EQUAL",relation:"AND"}]};e&&t.querys.push({property:"name_",value:e,group:"query",operation:"LIKE",relation:"AND"}),this.loading=!0,this.$requestConfig.getTagList(t).then(e=>{this.options=e.rows,this.isExistTag=this.options.some(e=>e.name==this.currentQuery),this.pagination={pageSize:e.pageSize,page:e.page,total:e.total}}).finally(()=>{this.loading=!1})},currentChange(e){this.pagination.page=e,this.remoteMethod(this.currentQuery)},add(){let e={name:this.currentQuery,typeKey:this.tagKey};this.$requestConfig.saveTag(e).then(e=>{e.state?(this.$message({type:"success",message:"添加成功"}),this.remoteMethod(this.currentQuery)):this.$message({type:"error",message:"添加失败"})}).catch(()=>{})},search(){let e={pageBean:this.pagination,querys:[{property:"type_key_",value:this.tagKey,group:"query",operation:"EQUAL",relation:"AND"}]};this.$requestConfig.getTagList(e).then(e=>{this.options=e.rows,this.pagination={pageSize:e.pageSize,page:e.page,total:e.total}})}}},qu=Nu,Vu=(i("c8d4"),W(qu,Lu,Fu,!1,null,"52385fb5",null)),Ru=Vu.exports;Ru.install=function(e){e.component(Ru.name,Ru)};var zu=Ru,Hu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[e.inputWriteable&&e.ganged?i("el-select",{directives:[{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],ref:"treeselect",staticStyle:{width:"100%"},attrs:{name:e.inputName,size:e.inputSize,clearable:e.clearable,placeholder:e.placeholder,filterable:e.filterable,"filter-method":e.filterMethod,multiple:e.multiple,"popper-class":e.isShowPage?"has-page":"ht-select__dropdown"},on:{clear:function(){return e.$emit("clear")},"remove-tag":e.handleSelectTagRemove,focus:e.selectBlur,"visible-change":e.handleVisibleChange},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}},[e._l(e.tempoptions,(function(e){return i("el-option",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:e.key,attrs:{value:e.key,label:e.value}})})),i("el-option",{attrs:{value:"",disabled:""}},[i("el-tree",{ref:"treeselectElTree",attrs:{"node-key":"key",data:e.options,"highlight-current":!0,"default-expand-all":!0,"expand-on-click-node":!1,props:e.defaultProps,indent:e.indent,"filter-node-method":e.filterNode,"show-checkbox":e.multiple,"check-strictly":!e.cascade},on:{check:e.handleNodeClick,"node-click":e.handleNodeClick,"check-change":e.handleCheckChange}})],1),e.isShowPage?i("el-pagination",{attrs:{"current-page":e.pageBean.page,"page-size":e.pageBean.pageSize,layout:"total, prev, pager, next",total:e.pageBean.total,"pager-count":5,"hide-on-single-page":!1,small:""},on:{"update:currentPage":function(t){return e.$set(e.pageBean,"page",t)},"update:current-page":function(t){return e.$set(e.pageBean,"page",t)},"current-change":e.handleCurrentChange}}):e._e()],2):e._e(),e.inputWriteable&&!e.ganged?i("ht-select",{ref:"selected",attrs:{validate:e.inputValidate,options:e.options,name:e.inputName,size:e.inputSize,clearable:e.clearable,placeholder:e.placeholder,filterable:e.filterable,"reserve-keyword":"",multiple:e.multiple,permission:e.permission_sub},on:{blur:e.selectBlur},nativeOn:{click:function(t){return e.clickNative(t)}},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}}):e._e(),i("ht-field-tail",{attrs:{"field-name":e.inputName,readonly:!e.inputWriteable,"input-value":"","tag-format-value":e.labelValue}})],1):e._e()},Uu=[],Ku={name:"HtSelectTree",mixins:[de["a"],pe["a"],xe,Te,me["a"]],props:{value:String,selectlist:Array,multiple:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},indent:{type:Number,default:8},filterable:{type:Boolean,default:!1},customQuery:Object,cascade:{type:Boolean,default:!1},limitCount:{type:Number,default:0}},data(){return{options:[],tempoptions:[],tagFormatValue:[],defaultProps:{children:"children",label:"value"},pageBean:{page:1,pageSize:20,total:0},queryVersion:0}},computed:{inputVal:{get(){return this.multiple?this.value?this.value.split(","):[]:this.value||0===this.value?this.value+"":this.value},set(e){if(this.multiple)this.$emit("input",e.join(","));else if(this.$emit("input",e),!this.multiple&&e&&this.customQuery&&this.customQuery.custQueryJson&&this.customQuery.custQueryJson.length>0){let e=this.customQuery.custQueryJson;for(let t=0;t<e.length;t++)e[t].conditionfield.length>0?this.doSubCustomQuery(e[t]):console.error("["+e[t].comment+"]"+this.$t("ht.customDialog.relationSearchNotBindField"))}}},labelValue(){const e=[];return this.tempoptions.forEach(t=>{if(this.multiple)this.inputVal.some(e=>e==t.key)&&e.push(t.value);else if(t.key==this.inputVal)return void e.push(t.value)}),e},isShowPage(){return this.ganged&&this.ganged.alias&&1==this.ganged.needPage&&this.pageBean.page}},mounted(){this.loadOption("init")},methods:{handleSelectTagRemove(e){this.$refs.treeselectElTree.setChecked(e,!1,this.cascade)},objIsEmpty(e){for(let t in e)if(e[t])return!1;return!0},loadOption(e=""){if(this.ganged&&this.ganged.alias){if("init"===e&&"true"===this.ganged.noInit)return;this.dynamicLoadOption()}else this.options=this.selectlist?this.selectlist:[]},dynamicLoadOption(){this.queryVersion+=1;let e=this.queryVersion;this.doCustomQuery(null,!1,{page:this.pageBean.page,isChangePage:this.isChangePage}).then(t=>{null===t&&(this.queryVersion-=1),e<this.queryVersion||(t&&this.ganged.PId?(this.tempoptions=[],t=y["a"].tile2nest(t,this.ganged.valueBind||"key",this.ganged.PId),this.addSelectList(t),this.options=t):t&&(this.tempoptions=[],this.addSelectList(t),this.options=t))})},doSubCustomQuery(){},clickNative:function(){this.loadOption()},selectBlur:function(){this.loadOption()},handleCheckChange(e,t){if(this.multiple){let i=this.$refs.treeselectElTree.getCheckedNodes();if(this.limitCount>0&&i.length>this.limitCount&&t)return void this.$refs.treeselectElTree.setChecked(e,!1,!0);let a=[];this.tempoptions=i;for(let e of i)a.push(e.key);this.$emit("input",a.join(","))}},handleNodeClick(e){if(!this.multiple){if(this.$emit("input",e.key),e.key&&this.customQuery&&this.customQuery.custQueryJson&&this.customQuery.custQueryJson.length>0){let e=this.customQuery.custQueryJson;for(let t=0;t<e.length;t++)e[t].conditionfield.length>0?this.doSubCustomQuery(e[t]):console.error("["+e[t].comment+"]"+this.$t("ht.customDialog.relationSearchNotBindField"))}this.$refs.treeselect.blur(),setTimeout(()=>{this.$validator.validate()})}},filterNode(e,t){return!e||-1!==t.value.indexOf(e)},filterMethod(e){this.$refs.treeselectElTree.filter(e)},addSelectList(e){let t="key"==(this.ganged.valueBind||"")?"":this.ganged.valueBind,i="value"==(this.ganged.labelBind||"")?"":this.ganged.labelBind;e&&e.length>0&&e.forEach(e=>{t&&(e["key"]=e[t]),i&&(e["value"]=e[i]),this.tempoptions.push(e),e.children&&this.addSelectList(e.children)})},handleCurrentChange(e){this.isChangePage=!0,this.pageBean.page=e,this.dynamicLoadOption()},handleVisibleChange(){this.pageBean.page=1}}},ju=Ku,Wu=(i("52cb"),W(ju,Hu,Uu,!1,null,"0490c08d",null)),Qu=Wu.exports;Qu.install=function(e){e.component(Qu.name,Qu)};var Ju=Qu,Gu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!==e.permission?i("div",{directives:[{name:"express",rawName:"v-express"}],class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[e.isShowInput?i("ht-input",{attrs:{size:e.inputSize,placeholder:e.placeholder,type:"text",permission:e.permission_sub},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}},[e.inputWriteable?i("template",{slot:"append"},[i("el-button",{attrs:{btn:"btn",size:e.inputSize,type:"primary",icon:e.icon},on:{click:e.customEvilJS}},[e._v("\n        "+e._s(e.btnName)+"\n      ")])],1):e._e()],2):i("el-button",{attrs:{disabled:!e.inputWriteable,btn:"btn",size:e.inputSize,type:"primary",icon:e.icon},on:{click:e.customEvilJS}},[e._v("\n    "+e._s(e.btnName)+"\n  ")])],1):e._e()},Yu=[],Zu={name:"HtButton",mixins:[de["a"],pe["a"],me["a"],xh],props:{value:[String,Number],icon:String,btnName:String,isShowInput:Boolean},computed:{inputVal:{get(){return this.value},set(e){this.$emit("input",e)}}},methods:{customEvilJS(){const e=this.evilJS();null!=e&&void 0!=e&&(this.inputVal=e)}}},Xu=Zu,ed=(i("9a01"),W(Xu,Gu,Yu,!1,null,"52e83331",null)),td=ed.exports;td.install=function(e){e.component(td.name,td)};var id=td,ad=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("img",{style:e.imgStyle,attrs:{src:e.src},on:{click:e.imgClick}}):e._e()},sd=[],ld={name:"HtImage",mixins:[de["a"]],props:{isDisplay:{type:Boolean,default:!0},imgSrc:String,fileJson:String,imgHeight:Number,imgWidth:Number,openUrl:String,openType:String},data(){return{src:""}},computed:{imgStyle(){return{height:this.imgHeight>0?this.imgHeight+"px":"auto",width:this.imgWidth>0?this.imgWidth+"px":"auto",maxWidth:"100%",cursor:this.openUrl?"pointer":""}}},created(){if(this.isDisplay){if(this.fileJson&&this.$requestConfig.download){var e=JSON.parse(this.fileJson);this.$requestConfig.download(e[0].id).then(e=>{const t=e instanceof ArrayBuffer?e:e.data;this.src=Object(_r["a"])(new Blob([t]))}).catch(e=>{this.$message.error(this.$t("ht.image.downloadErrorMsg"))})}}else this.src=this.imgSrc},methods:{imgClick(){this.openUrl&&window.open(this.openUrl,"_blank")}}},nd=ld,od=W(nd,ad,sd,!1,null,null,null),rd=od.exports;rd.install=function(e){e.component(rd.name,rd)};var cd=rd,hd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("a",{staticClass:"site-a",attrs:{href:e.targetAddress,target:e.target}},[e._v(e._s(e.title))]):e._e()},ud=[],dd=i("7b1b"),pd=dd["a"],md=(i("5360"),W(pd,hd,ud,!1,null,null,null)),gd=md.exports;gd.install=function(e){e.component(gd.name,gd)};var fd=gd,yd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("el-tabs",{style:{width:e.charWidth},attrs:{type:"card"},on:{"tab-click":e.initClick}},[i("el-tab-pane",{attrs:{label:e.t("ht.chart.viewChart")}},[e.showTable?i("div",{style:{width:e.charWidth,height:e.charHeight},attrs:{id:e.chartKey}}):e._e()]),i("el-tab-pane",{attrs:{label:e.t("ht.chart.viewData")}},[e.showTable?i("ht-table",{ref:"table",attrs:{data:e.data,"page-result":e.pageResult,"default-querys":e.defaultQuery,selectable:!1,"show-export":!1,"show-custom-column":!1,"quick-search-props":e.quickSearchProp,nopagination:!0,height:"500"},on:{load:e.loadData}},[e._l(e.customChart.xaxisField,(function(e){return i("ht-table-column",{key:e.field,attrs:{prop:e.field.toUpperCase(),label:e.comment}})})),e._l(e.customChart.displayfield,(function(e){return i("ht-table-column",{key:e.field,attrs:{prop:e.field.toUpperCase(),label:e.comment}})}))],2):e._e()],1)],1):e._e()},bd=[],_d={name:"HtChart",mixins:[de["a"],Le],props:{id:{type:[String,Number],required:!0},width:{type:String,default:""},height:{type:String,default:""},selectList:{type:String,default:""},chartKey:{type:[String,Number],required:!0}},data(){return{showTable:!1,customChart:{},pageResult:{page:-1,pageSize:20,total:0},data:[],quickSearchProp:"",defaultQuery:[],queryOpTransObj:{EQ:"EQUAL",BETWEEN:"BETWEEN",GE:"GREAT_EQUAL",LE:"LESS_EQUAL",LK:"LIKE",IN:"IN"},querrySelectList:[],myChart:null}},computed:{charWidth(){return this.width?this.width+"px":"100%"},charHeight(){return this.height?this.height+"px":this.customChart.height+"px"}},watch:{id:function(e){e&&(this.customChart=[],this.data=[],this.quickSearchProp="",this.defaultQuery=[],this.showTable=!1,this.initData())}},created(){this.$root.$on("collapse-active-names",e=>{e&&e.length>0&&this.$nextTick(()=>{this.resizeChart()})})},mounted(){if(this.$nextTick(()=>{this.initData()}),this.selectList){this.querrySelectList=JSON.parse(Object(Re["a"])(this.selectList));const e=y["a"].getOnlineFormInstance(this);this.querrySelectList.forEach(t=>{let i="data."+t.selectField;e.$watch(i,()=>{this.customChart=[],this.data=[],this.quickSearchProp="",this.defaultQuery=[],this.showTable=!1,this.$nextTick(()=>{this.initData()})})})}window.addEventListener("resize",this.resizeChart)},destroyed(){window.removeEventListener("resize",this.resizeChart)},methods:{resizeChart(){this.myChart&&this.myChart.resize()},initClick(e){"1"==e.index&&this.$refs.table.load()},loadData(e,t){if(this.customChart.alias){this.customChart.conf.maxLength&&"0"!=this.customChart.conf.maxLength?e.pageBean.pageSize=parseInt(this.customChart.conf.maxLength):e.pageBean.pageSize=-1;const i=y["a"].getOnlineFormInstance(this);let a=this.customChart.conditionfield,s=this.querrySelectList,l=e&&e.querys?e.querys:[];s.forEach(e=>{let t=y["a"].getValueByPath(i.data,e.selectField),s=a.find(t=>t.field==e.bindSelectd);l.push({property:s.field,value:t,operation:this.queryOpTransObj[s.condition],group:"main"})}),e.querys=l,this.$requestConfig.getChartListData(this.customChart.alias,e).then(e=>{this.data=e.rows,this.customChart.rows=this.data,this.buildChart(this.customChart)}).finally(()=>{t()})}else t()},initData(){this.$requestConfig.getChartById(this.id).then(e=>{e&&(e.conditionfield=JSON.parse(e.conditionfield),e.displayfield=JSON.parse(e.displayfield),e.xaxisField=JSON.parse(e.xaxisField),e.sortfield=JSON.parse(e.sortfield),e.conf=JSON.parse(e.conf),this.customChart=e,this.initCondition(),this.showTable=!0)})},initCondition(){let e=this.customChart.conditionfield;for(let t=0;t<e.length;t++)"1"===e[t].defaultType?this.quickSearchProp+=e[t].field.toUpperCase()+",":this.defaultQuery.push({property:e[t].field,value:e[t].defaultValue,operation:this.queryOpTransObj[e[t].condition],group:"main"})},buildChart(e){this.myChart=this.$echarts.init(document.getElementById(this.chartKey),"default");let t=this.getGrid();e.conf.title.text=e.name,e.conf.title.top=this.getTitlePosition();let i={title:e.conf.title,tooltip:{},toolbox:{feature:{saveAsImage:{}}},legend:{},grid:t,series:{}};switch(e.style){case 1:i=this.buildLine(e,i);break;case 3:i=this.buildPie(e,i);break;case 4:i=this.buildRadar(e,i);break;case 5:i=this.buildFunnel(e,i);break;case 6:i=this.buildScatter(e,i);break;case 7:i=this.buildHeatmap(e,i);break;default:break}this.adjustChatTitle(e,i),this.myChart.setOption(i)},buildLine(e,t){let i=this.customChart.displayfield,a=[],s=[],l=[],n={},o=this.customChart.conf.series;this.customChart.xaxisField&&(n=this.customChart.xaxisField[0]);for(let r,c=0;r=i[c++];)if(r){let i=[],h=r.type;a.push(r.comment);for(let a,l=0;a=e.rows[l++];){if(1===c){let e=a[n.field.toUpperCase()];"date"===n.dbType&&e&&"number"===typeof e&&(e=new Date(e).format(this.defaultFormat)),s.push(e)}if(a){let e=a[r.field.toUpperCase()];e&&e.length>=8&&(t.grid.left="25%"),i.push(e)}}let u={name:r.comment,type:r.type,data:i,stack:o.stack?"one":null};o.doubleYAxis||(u.yAxisIndex=1===r.yAxis?0:1),"line"===h&&(u.smooth=o.smooth),l.push(u)}if(t.series=l,t.tooltip={trigger:"axis"},t.legend.y=50,o.showType||!o.doubleYAxis?(t.xAxis=[{type:"category",data:s}],t.yAxis=o.doubleYAxis?[{type:"value"}]:[{type:"value"},{type:"value"}]):(t.xAxis=[{type:"value"}],t.yAxis=[{type:"category",data:s}]),t.yAxis[0].axisLabel={color:"#444343",formatter:function(e,t){return e>=1e3&&(e=e/1e3+"k"),e}},2===e.style&&(t.xAxis[0]["boundaryGap"]=!0),e.conf){let i=e.conf;2===i.yMin&&(t.yAxis[0]["min"]="dataMin"),2===i.xShowAll&&(t.xAxis[0]["axisLabel"]={interval:0,rotate:30})}return e.rows&&e.rows.length>20&&!o.dataZoom?(t.dataZoom=[{start:0,end:10,handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"80%",handleStyle:{color:"#fff",shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.6)",shadowOffsetX:2,shadowOffsetY:2}}],t.grid.bottom=50):delete t.dataZoom,t.legend=e.conf.legend,t.legend.data=a,t},buildPie(e,t){let i=e.displayfield,a=[],s=[],l=e.xaxisField,n=e.conf.series;if(l&&(l=l[0]),n.showType){let t=100/e.rows.length;for(let o=0;o<e.rows.length;o++){let r=[];for(let t=0;t<i.length;t++)r.push({name:i[t].comment,value:e.rows[o][i[t].field.toUpperCase()]}),0===o&&a.push(i[t].comment);s.push({name:e.rows[o][l.field.toUpperCase()],type:"pie",data:r,radius:[n.radius[0]+"%",n.radius[1]+"%"],center:[Number(n.center[0])+o*t+"%",n.center[1]+"%"],roseType:n.roseType,selectedMode:n.selectedMode,label:{position:n.label.position},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}})}}else{let t=100/i.length;for(let o=0;o<i.length;o++){let r=[];for(let t=0;t<e.rows.length;t++)r.push({name:e.rows[t][l.field.toUpperCase()],value:e.rows[t][i[o].field.toUpperCase()]}),0===o&&a.push(e.rows[t][l.field.toUpperCase()]+"");s.push({name:i[o].comment,type:"pie",data:r,radius:[n.radius[0]+"%",n.radius[1]+"%"],center:[Number(n.center[0])+o*t+"%",n.center[1]+"%"],roseType:n.roseType,selectedMode:n.selectedMode,label:{position:n.label.position},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}})}}return t.series=s,t.tooltip={trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},t.legend=e.conf.legend,t.legend.data=a,t},buildRadar(e,t){let i=e.displayfield,a=[],s=e.xaxisField,l=[],n=[],o=[],r=e.conf.series;if(s&&(s=s[0]),r.showType){for(let t=0;t<e.rows.length;t++){let n=[];for(let a=0;a<i.length;a++)n.push(e.rows[t][i[a].field.toUpperCase()]),0===t&&o.push({name:i[a].comment});a.push(e.rows[t][s.field.toUpperCase()]+""),l.push({name:e.rows[t][s.field.toUpperCase()],value:n,areaStyle:{opacity:"0"}})}n=[{type:"radar",data:l,itemStyle:{emphasis:{areaStyle:{opacity:r.areaStyle?"0":"0.5"}}}}]}else{for(let t=0;t<i.length;t++){let n=[];for(let a=0;a<e.rows.length;a++)n.push(e.rows[a][i[t].field.toUpperCase()]),0===t&&o.push({name:e.rows[a][s.field.toUpperCase()]});a.push(i[t].comment),l.push({name:i[t].comment,value:n,areaStyle:{opacity:"0"}})}n=[{type:"radar",data:l,itemStyle:{emphasis:{areaStyle:{opacity:r.areaStyle?"0":"0.5"}}}}]}return t.series=n,t.radar={center:[r.center[0]+"%",r.center[1]+"%"],radius:r.radius,indicator:o},t.legend=e.conf.legend,t.legend.data=a,t},buildFunnel(e,t){let i=e.displayfield,a=[],s=e.xaxisField,l=[],n=e.conf.series;if(s&&(s=s[0]),n.showType){let t=100/e.rows.length;for(let o=0;o<e.rows.length;o++){let r=[];for(let t=0;t<i.length;t++)r.push({name:i[t].comment,value:e.rows[o][i[t].field.toUpperCase()]}),0===o&&a.push(i[t].comment);l.push({name:e.rows[o][s.field.toUpperCase()],type:"funnel",data:r,width:t-5+"%",left:o*t+"%",funnelAlign:n.funnelAlign,sort:n.sort,label:{position:n.label.position}})}}else{let t=100/i.length;for(let o=0;o<i.length;o++){let r=[];for(let t=0;t<e.rows.length;t++)r.push({name:e.rows[t][s.field.toUpperCase()],value:e.rows[t][i[o].field.toUpperCase()]}),0===o&&a.push(e.rows[t][s.field.toUpperCase()]+"");l.push({name:i[o].comment,type:"funnel",data:r,width:t-5+"%",left:o*t+"%",funnelAlign:n.funnelAlign,sort:n.sort,label:{position:n.label.position}})}}return t.series=l,t.legend=e.conf.legend,t.legend.data=a,t},buildScatter(e,t){let i=e.displayfield,a=[],s=[],l=e.xaxisField,n=[],o=e.conf.series;if(l&&(l=l[0]),o.showType)for(let r=0;r<e.rows.length;r++){let t=[];for(let a=0;a<i.length;a++)0===r&&s.push(i[a].comment),t.push([i[a].comment,e.rows[r][i[a].field.toUpperCase()]]);a.push(e.rows[r][l.field.toUpperCase()]+""),n.push({name:e.rows[r][l.field.toUpperCase()],type:"scatter",data:t})}else for(let r=0;r<i.length;r++){let t=[];for(let a=0;a<e.rows.length;a++)0===r&&s.push(e.rows[a][l.field.toLocaleUpperCase()]),t.push([e.rows[a][l.field.toLocaleUpperCase()],e.rows[a][i[r].field.toLocaleUpperCase()]]);if(a.push(i[r].comment),n.push({name:i[r].comment,type:"scatter",data:t}),i[r].regression&&"none"!==i[r].regression){let e=this.$ecStat.regression(i[r].regression,t);e.points.sort((function(e,t){return e[0]-t[0]})),n.push({name:"line",type:"line",showSymbol:!1,data:e.points,markPoint:{itemStyle:{color:"transparent"},label:{show:!0,position:"left",formatter:e.expression,color:"#333",fontSize:14},data:[{coord:e.points[e.points.length-1]}]}})}}return t.series=n,t.xAxis={type:e.conf.series.xAxisType},"category"===e.conf.series.xAxisType&&(t.xAxis.data=s),t.yAxis={},t.legend=e.conf.legend,t.legend.data=a,t},buildHeatmap(e,t){let i=e.displayfield,a=[],s=[],l=[],n=[],o=0,r=e.xaxisField;r&&(r=r[0]);for(let c=0;c<e.rows.length;c++){for(let t=0;t<i.length;t++)0===c&&l.push(i[t].comment),n.push([c,t,e.rows[c][i[t].field.toUpperCase()]]),e.rows[c][i[t].field.toUpperCase()]>o&&(o=e.rows[c][i[t].field.toUpperCase()]);s.push(e.rows[c][r.field.toUpperCase()])}return t.series=[{type:"heatmap",data:n,label:{normal:{show:!0}}}],t.xAxis={type:"category",data:s,splitArea:{show:!0}},t.yAxis={type:"category",data:l,splitArea:{show:!0}},t.visualMap={min:0,max:o,calculable:!0,orient:"horizontal",left:"center",bottom:"0%"},t.tooltip={position:"top"},t.legend=e.conf.legend,t.legend.data=a,t},getGrid(){let e=0,t=0,i={};return this.customChart.conf.title.show&&("top"===this.customChart.conf.title.top?(e+=7,this.customChart.conf.title.subtext&&(e+=5)):"bottom"===this.customChart.conf.title.top&&(t+=16)),this.customChart.conf.legend.show&&("top"===this.customChart.conf.legend.top?e+=7:"bottom"===this.customChart.conf.legend.top&&(t+=10)),i.top=0!==e?e+"%":"5%",0!==t&&(i.bottom=t+"%"),i},getTitlePosition(){return"top"===this.customChart.conf.title.top?this.customChart.conf.legend.show&&"top"===this.customChart.conf.legend.top?"20":"auto":"bottom"===this.customChart.conf.title.top?this.customChart.conf.legend.show&&"bottom"===this.customChart.conf.legend.top?"84%":"88%":this.customChart.conf.title.top},adjustChatTitle(e,t){t.legend.top=30,t.grid.top=80,e.conf&&e.conf.title&&e.conf.title.subtext&&(t.legend.top=50,t.grid.top=100)}}},vd=_d,wd=(i("1c94"),W(vd,yd,bd,!1,null,"0e6d18d3",null)),Sd=wd.exports;Sd.install=function(e){e.component(Sd.name,Sd)};var Cd=Sd,Dd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!==e.permission?i("div",{staticClass:"amap-page"},["tile"===e.showEffect?[i("ht-input",{attrs:{permission:e.permission_sub,name:e.inputName,title:e.inputVal,"display-style":e.displayStyle,clearable:!1},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}},[e.inputWriteable?i("i",{staticClass:"el-input__icon",attrs:{slot:"prefix",title:e.$t("ht.map.title")},slot:"prefix"},[i("ht-icon",{attrs:{name:"map"}})],1):e._e(),e.inputWriteable&&e.inputVal?i("i",{staticClass:"el-input__icon",attrs:{slot:"suffix",title:e.$t("ht.map.clearMsg")},on:{click:e.clearPosition},slot:"suffix"},[i("ht-icon",{attrs:{name:"close"}})],1):e._e()]),i("div",{staticClass:"amap-page_map_container",style:e.mapStyle},[e.plugin.length>0?i("div",[i("el-amap-search-box",{staticClass:"search-box",attrs:{"search-option":e.searchOption,"on-search-result":e.onSearchResult}}),i("el-amap",{staticClass:"amap-demo",attrs:{vid:"amap",plugin:e.plugin,center:e.mapCenter,zoom:e.zoom,"resize-enable":e.resizeEnable,events:e.events}},e._l(e.markers,(function(e,t){return i("el-amap-marker",{key:t,attrs:{position:e}})})),1)],1):e._e()])]:[i("ht-input",{attrs:{permission:e.permission_sub,name:e.inputName,title:e.inputVal,"display-style":e.displayStyle,clearable:!1,placeholder:"请选择",readonly:"readonly"},nativeOn:{click:function(t){return e.openMapDia(t)}},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}},[e.inputWriteable?i("i",{staticClass:"el-input__icon",attrs:{slot:"prefix",title:e.$t("ht.map.title")},on:{click:e.openMapDia},slot:"prefix"},[i("ht-icon",{attrs:{name:"map"}})],1):e._e(),i("template",{slot:"append"},[i("ht-icon",{staticClass:"amap-page_map",attrs:{name:"gaode"},on:{click:e.openMapDia}})],1),e.inputWriteable&&e.inputVal?i("i",{staticClass:"el-input__icon",attrs:{slot:"suffix",title:e.$t("ht.map.clearMsg")},on:{click:e.clearPosition},slot:"suffix"},[i("ht-icon",{attrs:{name:"close"}})],1):e._e()],2),i("div",{directives:[{name:"show",rawName:"v-show",value:e.mapDiaVisible,expression:"mapDiaVisible"}],staticClass:"amap-page_dialog"},[i("div",{staticClass:"amap-page_dialog_container"},[e.plugin.length>0?i("div",[i("el-amap-search-box",{staticClass:"search-box",attrs:{"search-option":e.searchOption,"on-search-result":e.onSearchResult}}),i("el-amap",{staticClass:"amap-demo",attrs:{vid:"amap",plugin:e.plugin,center:e.mapCenter,zoom:e.zoom,"resize-enable":e.resizeEnable,events:e.events}},e._l(e.markers,(function(e,t){return i("el-amap-marker",{key:t,attrs:{position:e}})})),1)],1):e._e()]),i("div",{staticClass:"amap-page_dialog_text"},[i("div",[e._v(e._s(e.preAddress))]),e.prePosition.length?i("div",[e._v("\n          "+e._s(e.$t("ht.map.longitude"))+"："+e._s(e.prePosition[0])+"，"+e._s(e.$t("ht.map.latitude"))+"："+e._s(e.prePosition[1])+"\n        ")]):e._e()]),i("div",{staticClass:"amap-page_dialog_footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.confirmAddress}},[e._v("\n          "+e._s(e.$t("ht.common.confirm"))+"\n        ")]),i("el-button",{on:{click:function(t){e.mapDiaVisible=!1}}},[e._v("\n          "+e._s(e.$t("ht.common.cancle"))+"\n        ")])],1)])]],2):e._e()},xd=[],Td={name:"HtMap",mixins:[de["a"],pe["a"],me["a"]],props:{value:String,appendPosition:{type:Boolean,default:!1},locationPath:String,showEffect:String,widthMap:String,heightMap:String},data(){const e=this;return{mapCenter:[121.59996,31.197646],markers:[],address:"",zoom:12,resizeEnable:!0,lng:0,lat:0,loaded:!1,searchOption:{city:this.$t("ht.map.nationwide"),citylimit:!1},plugin:[],mapDiaVisible:!1,preAddress:"",prePosition:[],events:{click:e.mapClick},geocoder:null,position:[],addressText:""}},computed:{inputVal(){return this.value},formatAddress(){let e=this.addressText;return e&&this.appendPosition&&(e+=this.$t("ht.map.coordinate")+JSON.stringify(this.position)),e},mapStyle(){return{width:this.widthMap,height:this.heightMap}}},watch:{formatAddress:function(e){e!==this.value&&(this.$emit("input",e),!this.appendPosition&&this.locationPath&&this.updateFormVal(this.position))}},mounted(){"tile"===this.showEffect&&this.initMap()},methods:{onSearchResult(e){e.length>0&&(this.updateMarker(e[0]),this.updateCurVal(e[0].address+e[0].name,[e[0].lng,e[0].lat]))},initMap(){const e=this;setTimeout(()=>{e.plugin=["AMap.Autocomplete",{enableHighAccuracy:!0,timeout:1e4,buttonPosition:"RB",buttonOffset:new AMap.Pixel(5,10),zoomToAccuracy:!0,markerOptions:{offset:new AMap.Pixel(-18,-36),content:'<img src="https://a.amap.com/jsapi_demos/static/resource/img/user.png" style="width:36px;height:36px"/>'},showCircle:!0,circleOptions:{strokeColor:"#0093FF",noSelect:!0,strokeOpacity:.5,strokeWeight:1,fillColor:"#02B0FF",fillOpacity:.25},extensions:"all",pName:"Geolocation",events:{init(t){e.value||t.getCurrentPosition((t,i)=>{i&&i.position&&(e.lng=i.position.lng,e.lat=i.position.lat,e.center=[e.lng,e.lat],e.getAddressByCode(i.position))})}}},{pName:"PlaceSearch",events:{init(){}}}],e.geocoder=new AMap.Geocoder},500)},openMapDia(){this.inputWriteable&&("undefined"!=typeof AMap?(this.mapDiaVisible=!0,this.initMap()):this.$message.error(this.$t("ht.map.notMapComponent")))},confirmAddress(){this.addressText=this.preAddress,this.position=this.prePosition,this.mapDiaVisible=!1},mapClick(e){this.updateMarker(e.lnglat),this.getAddressByCode(e.lnglat)},updateMarker(e){this.mapCenter=[e.lng,e.lat],this.markers.length>0&&this.markers[0][0]!=this.mapCenter[0]&&this.markers[0][1]!=this.mapCenter[1]?(this.markers=[],this.markers.push([e.lng,e.lat])):0==this.markers.length&&this.markers.push([e.lng,e.lat])},getAddressByCode(e){this.geocoder.getAddress([e.lng,e.lat],(t,i)=>{"complete"===t&&i.regeocode&&this.updateCurVal(i.regeocode.formattedAddress,[e.lng,e.lat])})},updateCurVal(e,t){this.inputWriteable&&(this.preAddress=e,this.prePosition=t,"tile"===this.showEffect&&this.confirmAddress())},clearPosition(){this.position=[],this.addressText=""},updateFormVal(e){const t=y["a"].getOnlineFormInstance(this);y["a"].setValueByPath(t,this.locationPath,e&&e.length?JSON.stringify(e):"")}}},Pd=Td,Ed=(i("0132"),W(Pd,Dd,xd,!1,null,null,null)),Od=Ed.exports;Od.install=function(e){e.component(Od.name,Od)};var kd=Od,Id=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{style:e.containerStyle},[i("canvas",{directives:[{name:"show",rawName:"v-show",value:e.showCode,expression:"showCode"}],ref:"htQrcode",staticClass:"qr-canvas"}),e.showCode?e._e():[i("span",[e._v("-")]),e.instId&&!e.isSupportMobile?i("div",{staticClass:"error-tooltip"},[e._v("\n      "+e._s(e.$t("ht.qrCode.tip"))+"\n    ")]):e._e()]],2):e._e()},$d=[],Ad={name:"HtQrcode",mixins:[de["a"]],props:{width:{type:Number,default:130},height:{type:Number,default:130},url:String,instId:[String,Number],isSupportMobile:{type:Boolean,default:!1}},data(){return{showCode:!1,curUrl:null}},computed:{containerStyle(){return{width:this.width+"px",height:this.height+"px",display:"inline-block"}},urlVal(){return this.curUrl?this.curUrl:this.url}},watch:{urlVal:{handler:function(e){e&&this.$nextTick(()=>this.initQrcode())},immediate:!0}},mounted(){!this.url&&this.instId&&this.isSupportMobile&&this.getQrcodeUrl()},methods:{getQrcodeUrl(){if(this.$requestConfig.getQrcodeUrl){const e=this.$requestConfig.getQrcodeUrl(this.instId);e&&(e.constructor==Promise?e.then(e=>{this.curUrl=e&&e.value.shortUrl}):e.constructor==String&&(this.curUrl=e))}},initQrcode(){let e=!0;this.$qrcode.toCanvas(this.$refs.htQrcode,`${this.$requestConfig.getBaseMobileUrl()}/${this.urlVal}`,(function(t){if(t)throw e=!1,t})),this.showCode=e}}},Bd=Ad,Md=(i("b627"),W(Bd,Id,$d,!1,null,"0fb8cc18",null)),Ld=Md.exports;Ld.install=function(e){e.component(Ld.name,Ld)};var Fd=Ld,Nd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{staticClass:"fullWidth"},[i("ht-template-preview",{attrs:{"template-key":e.templateKey,single:"true","is-data-view":!0,"data-view":e.dataView}})],1):e._e()},qd=[],Vd={name:"HtDataView",mixins:[de["a"]],props:{templateKey:{type:String,required:!0},options:{type:String,required:!1},isDataView:{type:Boolean,default:!0}},data(){return{dataView:{}}},mounted(){this.options&&(this.dataView=JSON.parse(this.options))},created(){},methods:{}},Rd=Vd,zd=(i("5a63"),W(Rd,Nd,qd,!1,null,"319bba8a",null)),Hd=zd.exports;Hd.install=function(e){e.component(Hd.name,Hd)};var Ud=Hd,Kd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("el-container",{staticClass:"relevant-container"},[e.inputWriteable?i("el-footer",{staticStyle:{height:"40px","line-height":"40px",padding:"0px"}},[i("el-button",{staticStyle:{"margin-left":"0"},attrs:{type:"primary",size:"small",icon:"el-icon-plus",plain:"",round:""},on:{click:e.flowSelected}},[e._v("\n      "+e._s(e.$t("ht.common.add"))+"\n    ")])],1):e._e(),i("el-input",{directives:[{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],staticStyle:{display:"none"},attrs:{name:e.inputName},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}}),e.dataTable.length>0?i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataTable,border:"","row-key":"subject"}},[i("el-table-column",{attrs:{type:"index",width:"70",align:"center",label:e.$t("ht.common.index")}}),i("el-table-column",{attrs:{label:e.$t("ht.relevantFlow.flowSubject"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"subject",on:{click:function(i){return e.handleRowClick(t.row)}}},[e._v("\n          "+e._s(t.row.subject)+"\n        ")])]}}],null,!1,2877911235)}),i("el-table-column",{attrs:{prop:"creator",align:"center",label:e.$t("ht.relevantFlow.sponsor"),width:"110"}}),i("el-table-column",{attrs:{prop:"createTime",align:"center",width:"160",label:e.$t("ht.relevantFlow.originatingTime")}}),e.inputWriteable?i("el-table-column",{attrs:{prop:"",label:e.$t("ht.common.operation"),align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"small",icon:"el-icon-arrow-up",plain:""},on:{click:function(i){return e.up(t.$index)}}}),i("el-button",{attrs:{size:"small",icon:"el-icon-arrow-down",plain:""},on:{click:function(i){return e.down(t.$index)}}}),i("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:function(i){return e.remove(t.row)}}})]}}],null,!1,2262440661)}):e._e()],1):e._e(),i("el-dialog",{attrs:{title:e.$t("ht.relevantFlow.addFlowTitle"),visible:e.relatedInformationDialog,"close-on-click-modal":!1,width:e.isMobile?"100%":"60%",top:e.isMobile?"0":"8vh","append-to-body":"","custom-class":e.isMobile?"mobile-related-dialog":""},on:{"update:visible":function(t){e.relatedInformationDialog=t}}},[e.isMobile?i("div",{staticClass:"mobile-search"},[i("el-input",{staticClass:"mobile-search_input",attrs:{clearable:"",placeholder:e.$t("ht.relevantFlow.placeholder"),"prefix-icon":"el-icon-search"},model:{value:e.subject,callback:function(t){e.subject=t},expression:"subject"}}),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search()}}},[e._v("\n        "+e._s(e.$t("ht.common.search"))+"\n      ")]),i("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("\n        "+e._s(e.$t("ht.common.reset"))+"\n      ")])],1):i("el-col",{staticClass:"searchStyle",attrs:{span:24}},[i("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("\n        "+e._s(e.$t("ht.relevantFlow.flowTitle"))+"：\n      ")]),i("el-col",{attrs:{span:5}},[i("el-input",{attrs:{size:"small",clearable:"",placeholder:e.$t("ht.relevantFlow.placeholder"),"prefix-icon":"el-icon-search"},model:{value:e.subject,callback:function(t){e.subject=t},expression:"subject"}})],1),i("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("\n        "+e._s(e.$t("ht.relevantFlow.createTime"))+"：\n      ")]),i("el-col",{attrs:{span:9}},[i("ht-date-picker",{attrs:{placeholder:e.$t("ht.relevantFlow.createTime"),"arrow-control":"",format:"yyyy-MM-dd"},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1),i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search()}}},[e._v("\n        "+e._s(e.$t("ht.common.search"))+"\n      ")]),i("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("\n        "+e._s(e.$t("ht.common.reset"))+"\n      ")])],1),i("div",{staticClass:"record-content"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"flowTable",staticStyle:{width:"100%"},attrs:{data:e.rows,stripe:"",border:"","header-cell-class-name":"todo-header-row","row-class-name":"todo-row",size:"medium","default-sort":{prop:"createTime",order:"descending"},height:e.isMobile?e.tableHeight:450},on:{"selection-change":e.handleChecked,select:e.onTableSelect,"row-click":e.RowClick}},[i("el-table-column",{attrs:{type:"selection",width:"60",align:"center",sortable:""}}),i("el-table-column",{attrs:{type:"index",align:"center",width:"70",label:e.$t("ht.common.index")}}),i("el-table-column",{attrs:{prop:"creator",width:"120",label:e.$t("ht.relevantFlow.creator"),align:"center"}}),i("el-table-column",{attrs:{prop:"subject",width:"400",label:e.$t("ht.relevantFlow.flowTitle"),align:"center"}}),i("el-table-column",{attrs:{prop:"procDefName",width:"280",label:e.$t("ht.relevantFlow.procDefName"),align:"center"}}),i("el-table-column",{attrs:{prop:"createTime",label:e.$t("ht.relevantFlow.createTime"),align:"center"}})],1),i("div",{staticClass:"relevant-flow_page",class:e.isMobile?"mobile":""},[i("el-pagination",{attrs:{"current-page":e.pagination.page,"page-sizes":[10,20,50,100,300,500],"page-size":e.pagination.pageSize,layout:e.isMobile?"prev, pager, next":"total, sizes, prev, pager, next, jumper",total:e.total,"pager-count":5,small:e.isMobile},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirm}},[e._v("\n        "+e._s(e.$t("ht.common.confirm"))+"\n      ")]),i("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("\n        "+e._s(e.$t("ht.common.cancle"))+"\n      ")])],1)],1)],1):e._e()},jd=[],Wd={data(){return{pagination:{},rows:[],total:0,tableLoading:!1}},methods:{setPaginationSize(e){this.pagination.pageSize=e},setPaginationPageNum(e){this.pagination.page=e},getlistJson(e){this.tableLoading=!0,this.$requestConfig.getRelevantFlow(e).then(e=>{this.rows=e.rows,this.total=e.total,this.pageBean={page:e.page,pageSize:e.pageSize,showTotal:!0}}).finally(()=>{this.tableLoading=!1})}}};const Qd=["id","subject","creator","createTime","status"];var Jd={name:"HtRelevantFlow",mixins:[de["a"],pe["a"],me["a"],Wd,kt["a"]],props:{value:String,searchConfig:{type:Object,default:()=>({isPaging:!0,pageSize:10})},flowRangeKey:String},data(){return{relatedInformationDialog:!1,checked:!0,subject:"",inputVal:"",createTime:"",checkBoxData:[],checkBoxDataAll:[],dataTable:[]}},computed:{tableHeight(){return window.innerHeight-250}},watch:{inputVal:function(e){this.$emit("input",e)}},created(){this.$validator=this.$root.$validator},mounted(){this.modelName&&(this.value&&Array.isArray(JSON.parse(this.value))?this.dataTable=JSON.parse(this.value):this.dataTable=[])},methods:{cancel(){this.relatedInformationDialog=!1},confirm(){const e=this;if(this.checkBoxData.forEach(t=>{let i=e.indexArray(e.checkBoxDataAll,t);-1==i&&e.checkBoxDataAll.push(t)}),this.dataTable=this.checkBoxDataAll,this.relatedInformationDialog=!1,this.modelName){const e=[];this.dataTable.forEach(t=>{const i={};e.push(i),Qd.forEach(e=>{i[e]=t[e]})}),this.inputVal=JSON.stringify(e)}},handleChecked(e){this.checkBoxData=e},handleSizeChange:function(e){this.setPaginationSize(e),this.search()},handleCurrentChange:function(e){const t=this;void 0!=this.checkBoxData&&this.checkBoxData.length>0&&this.checkBoxData.forEach(e=>{let i=t.indexArray(t.checkBoxDataAll,e);-1==i&&t.checkBoxDataAll.push(e)}),t.checkBoxData=t.checkBoxDataAll,this.setPaginationPageNum(e),this.search()},RowClick(e){this.$refs.flowTable.toggleRowSelection(e)},check(){const e=this;setTimeout(()=>{void 0!=e.checkBoxData&&0!=e.checkBoxData.length||(e.checkBoxData=e.checkBoxDataAll),Array.isArray(e.checkBoxData)&&e.checkBoxData.forEach(t=>{let i=e.indexArray(e.rows,t);-1!=i&&e.$refs.flowTable.toggleRowSelection(e.rows[i])})},250)},onTableSelect(e,t){let i=e.length&&-1!==e.indexOf(t);if(!i){let e=this.indexArray(this.checkBoxDataAll,t);this.checkBoxDataAll.splice(e,1),0==this.checkBoxDataAll.length&&(this.checkBoxData=[])}},search(){let e=[],t={},i={pageBean:this.pagination};""!=this.subject&&e.push({property:"SUBJECT_",value:this.subject,group:"main",operation:"LIKE",relation:"AND"}),""!=this.createTime&&e.push({property:"CREATE_TIME_",value:this.createTime,group:"main",operation:"BETWEEN",relation:"AND"}),this.flowRangeKey&&e.push({property:"procDefKey",value:this.flowRangeKey,group:"main",operation:"IN",relation:"AND"}),e.length>0?(t=this.searchConfig.isPaging?{pageBean:{page:"1",pageSize:this.searchConfig.pageSize,showTotal:"true"},querys:e}:{pageBean:{}},this.getlistJson(t)):this.getlistJson(i),this.check()},flowSelected:function(){void 0!=this.checkBoxData&&0!=this.checkBoxData.length||(this.checkBoxData=this.dataTable),this.relatedInformationDialog=!0;var e={};this.searchConfig.isPaging&&(e={page:1,pageSize:this.searchConfig.pageSize,showTotal:!0});let t={pageBean:e};this.flowRangeKey&&(t.querys=[{property:"procDefKey",value:this.flowRangeKey,group:"main",operation:"IN",relation:"AND"}]),this.getlistJson(t),setTimeout(()=>{this.check()},500)},reset(){this.subject="",this.createTime="",this.search()},remove(e){this.dataTable.remove(e),this.modelName&&(this.dataTable.length<1?this.inputVal="":this.inputVal=JSON.stringify(this.dataTable))},up(e){if(e=Number.parseInt(e),!(e<1)){var t=this.dataTable[e-1];this.$set(this.dataTable,e-1,this.dataTable[e]),this.$set(this.dataTable,e,t),this.modelName&&(this.inputVal=JSON.stringify(this.dataTable))}},down(e){if(e=Number.parseInt(e),!(e>=this.dataTable.length-1)){var t=this.dataTable[e+1];this.$set(this.dataTable,e+1,this.dataTable[e]),this.$set(this.dataTable,e,t),this.modelName&&(this.inputVal=JSON.stringify(this.dataTable))}},handleRowClick(e){this.$requestConfig.handleRelevantFlowClick(e)},uniqueArray(e,t){for(var i=[e[0]],a=1;a<e.length;a++){for(var s=e[a],l=!1,n=0;n<i.length;n++)if(s[t]==i[n][t]){l=!0;break}l||i.push(s)}return i},indexArray(e,t){for(var i=0;i<e.length;i++)if(e[i].id==t.id)return i;return-1}}},Gd=Jd,Yd=(i("6ad9"),W(Gd,Kd,jd,!1,null,"661ca3b1",null)),Zd=Yd.exports;Zd.install=function(e){e.component(Zd.name,Zd)};var Xd=Zd,ep=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("el-steps",{attrs:{active:e.inputVal,direction:e.direction,"align-center":"","finish-status":"success"}},e._l(e.stepList,(function(e){return i("el-step",{key:e.title,attrs:{title:e.title,description:e.description}})})),1):e._e()},tp=[],ip={name:"HtMilepost",mixins:[de["a"],pe["a"],me["a"]],props:{value:[Number,String],direction:{type:String},content:String},computed:{inputVal:function(){if(null===this.value||void 0===this.value)return 1;const e=Number(this.value);return isNaN(e)?1:e},stepList(){return JSON.parse(this.content)}}},ap=ip,sp=W(ap,ep,tp,!1,null,null,null),lp=sp.exports;lp.install=function(e){e.component(lp.name,lp)};var np=lp,op=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{staticClass:"ht-text",style:e.textStyle},[e._t("tip"),e._v("\n  "+e._s(e.doDecode(e.textValue))+"\n")],2):e._e()},rp=[],cp={name:"HtText",mixins:[de["a"]],props:{textValue:String,color:{type:String,default:"#666"},fontSize:{type:String,default:"12px"},fontWeight:{type:String,default:"400"},paddingTop:String,paddingBottom:String,paddingLeft:String,paddingRight:String,textAlign:{type:String,default:"center",validator:e=>["left","center","right"].indexOf(e)>-1}},computed:{textStyle(){return{color:this.color,fontSize:this.fontSize,textAlign:this.textAlign,fontWeight:this.fontWeight,paddingTop:this.paddingTop,paddingBottom:this.paddingBottom,paddingLeft:this.paddingLeft,paddingRight:this.paddingRight}}},methods:{doDecode(e){return Object(Re["c"])(e)?Object(Re["a"])(e):e}}},hp=cp,up=(i("bbd0"),W(hp,op,rp,!1,null,"9162787e",null)),dp=up.exports;dp.install=function(e){e.component(dp.name,dp)};var pp=dp,mp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline"]},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"},{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],attrs:{type:"hidden",name:e.inputName},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),i("el-rate",{attrs:{max:e.max,"allow-half":e.allowHalf,"show-score":e.showScore||!e.inputWriteable,"text-color":e.textColor,disabled:!e.inputWriteable,"icon-classes":e.iconClasses,"void-icon-class":e.iconClass,"disabled-void-icon-class":e.iconClass,colors:e.activeColors},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}}),e.showScore?i("span",{staticClass:"core"},[e._v(e._s(e.$t("ht.common.minute")))]):e._e(),i("ht-field-tail",{staticClass:"ht-rate-field-tail",attrs:{writeable:e.inputWriteable,"field-name":e.inputName,"input-value":e.value},on:{"update:writeable":function(t){e.inputWriteable=t}}})],1):e._e()},gp=[],fp={name:"HtRate",mixins:[de["a"],pe["a"],me["a"]],props:{value:[Number,String],allowHalf:{type:Boolean,default:!1},max:{type:Number,default:5},defaultValue:{type:Number,default:5},showScore:{type:Boolean,default:!1},textColor:{type:String,default:"#1F2D3D"},iconClass:{type:String,default:"el-icon-star-off"},activeColor:{type:String,default:"#F7BA2A"}},computed:{inputVal:{get(){if(null!==this.value&&void 0!==this.value&&this.value.constructor==String){if(""==this.value.trim())return 0;const e=Number(this.value);if(isNaN(e))throw this.$t("ht.rate.tip");return e}return this.value},set(e){this.$emit("input",0===e?"":e)}},iconClasses(){console.log(this.iconClass,"iconClass");let e="el-icon-star-off"===this.iconClass?"el-icon-star-on":this.iconClass;return[e,e,e]},activeColors(){return[this.activeColor,this.activeColor,this.activeColor]}},mounted(){this.value||(this.inputVal=this.defaultValue)}},yp=fp,bp=(i("f422"),W(yp,mp,gp,!1,null,"02cb5775",null)),_p=bp.exports;_p.install=function(e){e.component(_p.name,_p)};var vp=_p,wp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!=e.permission?i("div",{class:["inputs","block"==e.formInputsDisplay?"ht-form-inputs__block":"ht-form-inputs__inline",e.isMobile?"mobile-slider__wrap":""]},[e.isMobile?[e.isPreview?i("span",{staticClass:"tip"},[e._v("\n      "+e._s(e.$t("ht.slider.tip"))+"\n    ")]):i("van-slider",{attrs:{max:e.max,min:e.min,step:e.step,"inactive-color":e.inactiveColor,"active-color":e.activeColor,disabled:!e.inputWriteable},scopedSlots:e._u([{key:"button",fn:function(){return[i("div",{staticClass:"custom-button"},[e._v(e._s(e.inputVal))])]},proxy:!0}],null,!1,1920191881),model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}})]:i("el-slider",{attrs:{max:e.max,min:e.min,step:e.step,"show-input":e.showInput,disabled:!e.inputWriteable},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"},{name:"validate",rawName:"v-validate",value:e.inputValidate,expression:"inputValidate"}],attrs:{type:"hidden",name:e.inputName},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}})],2):e._e()},Sp=[],Cp={name:"HtSlider",mixins:[de["a"],pe["a"],me["a"],kt["a"]],props:{value:[Number,String],max:{type:Number,default:100},min:{type:[String,Number],default:0},defaultValue:{type:Number,default:50},step:{type:Number,default:1},showInput:{type:Boolean,default:!1},activeColor:{type:String,default:"#409EFF"},inactiveColor:{type:String,default:"#e5e5e5"},isPreview:{type:Boolean,default:!1}},computed:{inputVal:{get(){if(null!==this.value&&void 0!==this.value&&this.value.constructor==String){if(""==this.value.trim())return 0;const e=Number(this.value);if(isNaN(e))throw this.$t("ht.slider.errorMsg");return e}return this.value},set(e){this.$emit("input",e)}}},mounted(){this.value||(this.inputVal=this.defaultValue)}},Dp=Cp,xp=(i("4c6c"),W(Dp,wp,Sp,!1,null,"7360a368",null)),Tp=xp.exports;Tp.install=function(e){e.component(Tp.name,Tp)};var Pp=Tp,Ep=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-main",{staticClass:"base-main"},[i("div",{staticClass:"base-main_box"},[i("div",{attrs:{id:"printData"}},[e.inDialog?e._e():i("div",{staticClass:"form-container"},[i("span",[e._v(e._s(e.$t("ht.templateForm.formContent")))])]),i("div",{staticClass:"form-content"},[e.html?i("form",[i("ht-online-form",{ref:"onlineForm",staticClass:"custom-form",attrs:{html:e.html,data:e.data,permission:e.permission,"is-view":e.isView,"is-print":e.print},on:{loadSuccess:e.loadSuccess}})],1):e._e()])]),e.showOperation?i("div",{ref:"btnRegion",staticClass:"base-main_bottom_btn"},[e.startFlow&&"false"!=e.startFlow&&"get"!=e.action?i("el-button",{attrs:{type:"success",disabled:e.disabled},on:{click:e.start}},[e._v("\n        "+e._s(e.startLable)+"\n      ")]):e._e(),e.isShow&&"editDraft"!=e.action?i("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:function(t){return e.boSave()}}},[e._v("\n        "+e._s(e.$t("ht.common.save"))+"\n      ")]):e._e(),i("el-button",{attrs:{type:"default",disabled:e.disabled},on:{click:function(t){return e.printDetail()}}},[e._v("\n        "+e._s(e.printLable)+"\n      ")]),i("el-button",{attrs:{type:"default"},on:{click:function(t){return e.close(!1)}}},[e._v("\n        "+e._s(e.$t("ht.common.return"))+"\n      ")])],1):e._e()])])},Op=[],kp=i("4ebe"),Ip=kp["a"],$p=(i("0fca"),W(Ip,Ep,Op,!1,null,"f78ff794",null)),Ap=$p.exports;Ap.install=function(e){e.component(Ap.name,Ap)};var Bp=Ap,Mp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.dialogFormVisible?i("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,"close-on-click-modal":!1,width:"30%","destroy-on-close":""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{directives:[{name:"form",rawName:"v-form"}],staticStyle:{width:"100%"},attrs:{"data-vv-scope":"custom-form","label-width":"100px",name:"online-form",model:e.updateData}},e._l(e.listForm,(function(t,a){return i("el-form-item",{key:a,attrs:{label:t.desc}},["input"==t.outType?[i("ht-input",{staticStyle:{width:"95%"},attrs:{validate:{required:t.isRequired}},model:{value:e.updateData[t.name],callback:function(i){e.$set(e.updateData,t.name,i)},expression:"updateData[item.name]"}})]:e._e(),"number"==t.outType?[i("ht-input",{staticStyle:{width:"95%"},attrs:{type:"number",validate:{required:t.isRequired}},model:{value:e.updateData[t.name],callback:function(i){e.$set(e.updateData,t.name,i)},expression:"updateData[item.name]"}})]:e._e(),"data"==t.outType?[i("ht-date",{staticStyle:{width:"95%"},attrs:{validate:{required:t.isRequired}},model:{value:e.updateData[t.name],callback:function(i){e.$set(e.updateData,t.name,i)},expression:"updateData[item.name]"}})]:e._e(),"select"==t.outType?[i("ht-select",{staticStyle:{width:"95%"},attrs:{validate:{required:t.isRequired},"model-name":"updateData[item.name]",placeholder:"",ganged:t.ganged,multiple:!1,filterable:!1,"allow-create":!1,permission:"w",selectlist:t.selectData},model:{value:e.updateData[t.name],callback:function(i){e.$set(e.updateData,t.name,i)},expression:"updateData[item.name]"}},[i("span",{attrs:{slot:"labeldesc"},slot:"labeldesc"},[e._v("\n            "+e._s(e.$t("ht.templateBatchUpdateDialog.string"))+"\n          ")])])]:e._e(),"dialog"==t.outType?[i("ht-custom-dialog",{staticStyle:{width:"95%"},attrs:{validate:{required:t.isRequired},"model-name":"updateData."+t.name,custdialog:t.custdialog,permission:"w"},model:{value:e.updateData[t.name],callback:function(i){e.$set(e.updateData,t.name,i)},expression:"updateData[item.name]"}})]:"user"==t.outType?[i("ht-user-selector-input",{staticStyle:{width:"95%"},attrs:{validate:{required:t.isRequired},"select-current":t.selectCurrent,single:t.single,"append-to-body":!0,config:t.bindConfig},model:{value:e.updateData[t.name],callback:function(i){e.$set(e.updateData,t.name,i)},expression:"updateData[item.name]"}})]:"org"==t.outType?[i("ht-org-selector-input",{attrs:{"select-current":t.selectCurrent,single:t.single,"append-to-body":!0,config:t.bindConfig},model:{value:e.updateData[t.name],callback:function(i){e.$set(e.updateData,t.name,i)},expression:"updateData[item.name]"}})]:"post"==t.outType?[i("ht-post-selector-input",{attrs:{"append-to-body":!0,config:t.bindConfig},model:{value:e.updateData[t.name],callback:function(i){e.$set(e.updateData,t.name,i)},expression:"updateData[item.name]"}})]:"role"==t.outType?[i("ht-role-selector-input",{attrs:{"append-to-body":!0,config:t.bindConfig},model:{value:e.updateData[t.name],callback:function(i){e.$set(e.updateData,t.name,i)},expression:"updateData[item.name]"}})]:"job"==t.outType?[i("ht-job-selector-input",{attrs:{"append-to-body":!0,config:t.bindConfig},model:{value:e.updateData[t.name],callback:function(i){e.$set(e.updateData,t.name,i)},expression:"updateData[item.name]"}})]:"dem"==t.outType?[i("ht-dimension-selector-input",{attrs:{"append-to-body":!0,config:t.bindConfig},model:{value:e.updateData[t.name],callback:function(i){e.$set(e.updateData,t.name,i)},expression:"updateData[item.name]"}})]:e._e()],2)})),1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("\n      "+e._s(e.$t("ht.common.cancle"))+"\n    ")]),i("el-button",{attrs:{type:"primary"},on:{click:e.onConfirm}},[e._v("\n      "+e._s(e.$t("ht.common.confirm"))+"\n    ")])],1)],1):e._e()},Lp=[],Fp={name:"HtTemplateBatchUpdateDialog",data(){return{dialogFormVisible:!1,listForm:[],updateData:{},title:"",data:{}}},mounted(){},methods:{onConfirm(){const e=this;y["a"].validateForm(this,"custom-form").then(()=>{let t=JSON.parse(JSON.stringify(e.updateData));Object.keys(e.data).forEach(i=>{t.hasOwnProperty(i)||(t[i]=e.data[i])}),e.dialogFormVisible=!1,e.$emit("onConfirm",t)}).catch(()=>{e.$message.error(e.$t("ht.templateBatchUpdateDialog.errorMsg"))})},closeDialog(){this.dialogFormVisible=!1},showDialog(e,t){Object.assign(this.$data,this.$options.data()),this.dialogFormVisible=!0,this.listForm=t,this.title=e}}},Np=Fp,qp=W(Np,Mp,Lp,!1,null,"3479ec44",null),Vp=qp.exports;Vp.install=function(e){e.component(Vp.name,Vp)};var Rp=Vp,zp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{style:{"--dialogHeight":e.dialogHeight},attrs:{title:e.$t("ht.templateForm.formContent"),visible:e.dialogVisible,width:e.dialogWidth,"custom-class":"template-form-dialog",top:"5vh","append-to-body":e.appendToBody},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",[e.dialogVisible?i("ht-template-form",{staticClass:"template-form-dialog_form",attrs:{"template-key":e.templateKey,"is-share":!1,"open-type":"dialog","in-dialog":!0,"dialog-param":e.dialogParam,action:e.action,"quit-after-saving":e.quitAfterSaving},on:{close:e.close}}):e._e()],1)])},Hp=[],Up={name:"HtTemplateFormDialog",props:{appendToBody:{type:Boolean,default:!1}},data(){return{dialogVisible:!1,templateKey:"",action:"get",dialogWidth:"70%",dialogHeight:"",dialogParam:{},quitAfterSaving:!1}},methods:{showDialog(e){this.templateKey=e.templateKey,this.action=e.action,this.dialogParam=e.dialogParam,this.dialogHeight=e.dialogHeight,this.dialogWidth=e.dialogWidth,this.quitAfterSaving=!(!e.quitAfterSaving||"false"==e.quitAfterSaving),this.dialogVisible=!0},close(){this.dialogVisible=!1,this.$emit("close")}}},Kp=Up,jp=(i("e75e"),W(Kp,zp,Hp,!1,null,"32cad0a1",null)),Wp=jp.exports;Wp.install=function(e){e.component(Wp.name,Wp)};var Qp=Wp,Jp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{style:{"--dialogHeight":e.dialogHeight},attrs:{title:"url"+e.$t("ht.common.content"),visible:e.dialogVisible,width:e.dialogWidth,"custom-class":"template-iframe-dialog",top:"5vh"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("iframe",{staticClass:"template-iframe-dialog_iframe",attrs:{width:"100%",frameborder:"0",hspace:"0",src:e.url}})])},Gp=[],Yp={name:"HtTemplateIframeDialog",data(){return{dialogVisible:!1,dialogWidth:"70%",dialogHeight:"740px",url:""}},methods:{showDialog(e){this.url=e.url,e.dialogWidth,this.dialogWidth=e.dialogWidth&&String(e.dialogWidth).includes("px")?e.dialogWidth:e.dialogWidth?e.dialogWidth+"px":"70%",this.dialogHeight=e.dialogHeight&&String(e.dialogHeight).includes("px")?e.dialogHeight:e.dialogHeight?e.dialogHeight+"px":"740px",this.dialogVisible=!0}}},Zp=Yp,Xp=(i("1fd4"),W(Zp,Jp,Gp,!1,null,"55fe59d8",null)),em=Xp.exports;em.install=function(e){e.component(em.name,em)};var tm=em,im=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{width:"80%",title:e.$t("ht.flowChart.title"),visible:e.showFlowChart,"close-on-click-modal":!1,"append-to-body":"","custom-class":e.customClass},on:{"update:visible":function(t){e.showFlowChart=t}}},[i("div",{staticClass:"btn-group"},e._l(e.btnList,(function(t){return i("div",{key:t.id,staticClass:"btn-item"},[i("span",{staticClass:"icon",style:{background:t.bgColor}}),i("span",{staticClass:"label"},[e._v(e._s(t.label))])])})),0),i("div",{staticClass:"flow-chart"},[i("div",{style:{position:"relative",width:e.imgWidth+"px",height:e.imgHeight+"px",background:"url("+e.backGroundImg+") no-repeat"}},[e._l(e.listLayout,(function(t){return[e.instId?i("el-popover",{key:t.nodeId,attrs:{trigger:"hover",placement:"bottom-start"}},[e.nodeOpinions[t.nodeId]?i("div",{staticClass:"options"},[i("div",{staticClass:"title"},[e._v("\n                "+e._s(e.$t("ht.flowChart.taskApprovalDetail"))+"\n              ")]),e.hasOpinion(t)?e._l(e.getData(t),(function(t){return i("table",{key:t.id},[i("tr",[i("td",{staticClass:"label"},[e._v(e._s(e.$t("ht.flowChart.taskName")))]),i("td",{staticClass:"value"},[e._v(e._s(t.taskName))])]),i("tr",{directives:[{name:"show",rawName:"v-show",value:t.auditor,expression:"op.auditor"}]},[i("td",{staticClass:"label"},[e._v(e._s(e.$t("ht.flowChart.executor")))]),i("td",{staticClass:"value"},[e._v(e._s(t.auditorName))])]),i("tr",{directives:[{name:"show",rawName:"v-show",value:!t.auditor,expression:"!op.auditor"}]},[i("td",{staticClass:"label"},[i("span",[e._v(e._s(e.$t("ht.flowChart.candidate")))]),i("el-tooltip",{attrs:{effect:"light",content:e.$t("ht.flowChart.tooltipContent"),placement:"right"}},[i("i",{staticClass:"el-icon-question"})])],1),i("td",{staticClass:"value"},e._l(t.qualfieds,(function(t){return i("span",{key:t.id},[t.users?e._e():i("el-button",{attrs:{disabled:!0}},[e._v("\n                          "+e._s(t.name)+"\n                        ")]),t.users?i("el-tooltip",{attrs:{effect:"light",content:t.users,placement:"top"}},[i("el-button",[e._v(e._s(t.name))])],1):e._e()],1)})),0)]),i("tr",[i("td",{staticClass:"label"},[e._v(e._s(e.$t("ht.date.startTime")))]),i("td",{staticClass:"value"},[e._v(e._s(t.createTime))])]),i("tr",[i("td",{staticClass:"label"},[e._v(e._s(e.$t("ht.date.endTime")))]),i("td",{staticClass:"value"},[e._v(e._s(t.completeTime))])]),i("tr",[i("td",{staticClass:"label"},[e._v("\n                      "+e._s(e.$t("ht.flowChart.approvalTime"))+"\n                    ")]),i("td",{staticClass:"value"},[e._v(e._s(e._f("calcDuration")(t.durMs)))])]),i("tr",[i("td",{staticClass:"label"},[e._v(e._s(e.$t("ht.common.status")))]),i("td",{staticClass:"value"},[e._v(e._s(t.statusVal))])]),i("tr",[i("td",{staticClass:"label"},[e._v(e._s(e.$t("ht.flowChart.opinion")))]),i("td",{staticClass:"opinion"},[e._v(e._s(t.opinion))])])])})):[i("div",{staticClass:"sub-title"},[e._v("\n                  "+e._s(e.$t("ht.flowChart.nodeSettingDetails"))+"\n                ")]),i("table",[i("tr",[i("td",{staticClass:"label"},[e._v(e._s(e.$t("ht.common.status")))]),i("td",{staticClass:"value"},[e._v("\n                      "+e._s(e.$t("ht.flowChart.notTask"))+"\n                    ")])]),i("tr",[i("td",{staticClass:"label"},[i("span",[e._v(e._s(e.$t("ht.flowChart.tentativeCandidate")))]),i("el-tooltip",{attrs:{effect:"light",content:e.$t("ht.flowChart.tentativeCandidateTip"),placement:"right"}},[i("i",{staticClass:"el-icon-question"})])],1),i("td",{staticClass:"value"},e._l(e.getData(t),(function(t){return i("span",{key:t.id},[t.users?i("el-tooltip",{attrs:{effect:"light",content:t.users,placement:"top"}},[i("el-button",[e._v("\n                            "+e._s(t.name)+"\n                          ")])],1):i("el-button",{staticStyle:{"margin-right":"5px"},attrs:{disabled:!0}},[e._v("\n                          "+e._s(t.name)+"\n                        ")])],1)})),0)])])]],2):e._e(),e.showLayout(t)?i("el-button",{style:e.getStyle(t),attrs:{slot:"reference"},slot:"reference"}):e._e()],1):e._e()]}))],2)])])],1)},am=[],sm=i("f0b6"),lm=sm["a"],nm=(i("8653"),W(lm,im,am,!1,null,"fceb4028",null)),om=nm.exports;om.install=function(e){e.component(om.name,om)};var rm=om,cm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.dialogVisible?i("div",{staticClass:"record-wrap"},[i("el-dialog",{attrs:{title:e.$t("ht.approvalHistory.approvalRecord"),visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.dialogVisible?i("div",{staticClass:"record-content"},[i("ht-table",{attrs:{data:e.rows,"show-export":!1,"show-custom-column":!1,nopagination:!0},on:{loading:e.loadData}},[i("ht-table-column",{attrs:{width:"50",align:"center",label:e.$t("ht.common.index"),type:"index"}}),i("ht-table-column",{attrs:{label:e.$t("ht.approvalHistory.approvalNode"),width:"170",align:"center",prop:"taskName","show-overflow-tooltip":""}}),i("ht-table-column",{attrs:{prop:"qualfiedNames",label:e.$t("ht.approvalHistory.pendingApprovers"),"show-overflow-tooltip":"",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return["awaiting_check"!=a.status&&e.qualfiedsName(a.qualfiedNames,!0)<2?i("span",[e._v("\n              "+e._s(a.qualfiedNames)+"\n            ")]):e._e(),"awaiting_check"===a.status&&a.qualfieds&&1===a.qualfieds.length&&!a.qualfieds[0].users?i("span",[e._v("\n              "+e._s(a.qualfiedNames)+"\n            ")]):e._e(),"awaiting_check"==a.status||e.qualfiedsName(a.qualfiedNames,!0)>1?i("el-popover",{attrs:{placement:"right","popper-class":"right-popover",trigger:"hover"}},[i("div",[i("p",{staticClass:"qualfied_names"},[e._v("\n                  "+e._s(e.$t("ht.approvalHistory.name"))+"\n                ")]),e.isQualfiedListHasUser(a.qualfieds)?i("div",{staticClass:"btn__wrap"},e._l(a.qualfieds,(function(t,a){return i("p",{key:a},[t.users?i("el-tooltip",{staticClass:"item",attrs:{effect:"light",placement:"top",content:t.users}},[i("el-button",{attrs:{plain:"",size:"mini"}},[e._v(e._s(t.name))])],1):e._e(),t.users?e._e():i("el-button",{attrs:{plain:"",size:"mini"}},[e._v("\n                      "+e._s(t.name)+"\n                    ")])],1)})),0):i("div",{staticClass:"btn__wrap"},e._l(e.qualfiedsName(a.qualfiedNames,!1),(function(t,a){return i("p",{key:a},[i("el-button",{attrs:{plain:"",size:"mini"}},[e._v(e._s(t))])],1)})),0)]),e.isQualfiedListHasUser(a.qualfieds)||e.qualfiedsName(a.qualfiedNames,!0)>1?i("i",{staticClass:"el-icon-more qualfied-more__icon",attrs:{slot:"reference"},slot:"reference"}):e._e()]):e._e()]}}],null,!1,4088102685)}),i("ht-table-column",{attrs:{label:e.$t("ht.approvalHistory.handler"),width:"110",align:"center",prop:"auditorName","show-overflow-tooltip":""}}),i("ht-table-column",{attrs:{align:"center",label:e.$t("ht.approvalHistory.handlingSituation"),width:"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return["待审批"==a.statusVal?i("span",[e._v("\n              "+e._s(0==a.isRead?e.$t("ht.approvalHistory.notRead"):e.$t("ht.approvalHistory.read"))+"\n            ")]):i("span",[e._v("\n              "+e._s(a.statusVal)+"\n            ")])]}}],null,!1,3953192907)}),i("ht-table-column",{attrs:{label:e.$t("ht.approvalHistory.handleOpinion"),"show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("strong",[i("span",{staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(a.opinion))])]),i("br"),a.filesArray&&0!=a.filesArray.length?i("div",{staticClass:"appendix"},[i("div",{staticClass:"title"},[e._v(e._s(e.$t("ht.approvalHistory.file"))+"：")]),e._l(a.filesArray,(function(t,a){return i("div",{key:a,staticStyle:{cursor:"pointer"}},[i("el-tag",{on:{click:function(i){return e.search(t)}}},[e._v(e._s(t.name))])],1)}))],2):e._e(),i("br")]}}],null,!1,281907932)}),i("ht-table-column",{attrs:{label:e.$t("ht.approvalHistory.operateTime"),width:"170",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("span",[e._v(e._s(a.completeTime))])]}}],null,!1,2310087064)}),i("ht-table-column",{attrs:{align:"center",label:e.$t("ht.approvalHistory.stayTime"),width:"110","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("span",[e._v(e._s(e.formatTimeLag(a)))])]}}],null,!1,1205228343)})],1)],1):e._e()])],1):e._e()},hm=[],um={name:"ProcessRecord",props:{instId:String,taskId:String,referOpinion:Boolean,nodeType:String,defId:String,nodeId:String,myReadType:{type:String,default:""}},data(){return{src:"",data:{taskId:"",referOpinion:!1},fileId:"",previewNodeFormDialogVisible:!1,opinionSelectNodeId:"",opinionInstId:"",opinionTaskId:"",opinionFormData:"",opinionTaskName:"",opinionProcDefId:"",rows:[],dialogVisible:!1}},created(){this.initParams()},methods:{showDialog(){this.dialogVisible=!0},initParams(){this.instId&&(this.data.instId=this.instId,this.data.taskId=this.taskId,this.data.referOpinion=this.referOpinion,this.data.nodeType=this.nodeType,this.data.defId=this.defId,this.data.nodeId=this.nodeId,"request"===this.myReadType&&(this.data.isRequest=!0))},qualfiedsName(e,t){return e&&t?e.split(",").length:e&&!t?e.split(","):void 0},isQualfiedListHasUser(e){if(Array.isArray(e)){for(let t=0;t<e.length;t++)if(e[t].users)return!0;return!1}},formatTimeLag(e){let t=null;t=e.completeTime?e.completeTime:y["a"].formatDate(new Date);const{days:i,hours:a,minutes:s,seconds:l}=y["a"].dateDuration(e.createTime,t);return i>0?i+this.$t("ht.common.day"):a>0?a+this.$t("ht.common.hour"):s>0?s+this.$t("ht.common.minute"):0==s&&l>=0?this.$t("ht.approvalHistory.lessOneMinute"):void 0},search(e){this.$preview(e)},loadData(e,t){const i={instId:this.instId,taskId:this.taskId,referOpinion:this.referOpinion,nodeType:this.nodeType,defId:this.defId,nodeId:this.nodeId};this.$requestConfig.getOpinionsById(i).then(e=>{e.map(e=>{e.files&&JSON.parse(e.files)&&(e.filesArray=JSON.parse(JSON.parse(e.files)))}),e&&e.length&&(this.rows=e.filter(e=>"skip"!==e.status))}).finally(()=>{t()})}}},dm=um,pm=(i("efc4"),W(dm,cm,hm,!1,null,"e91ba498",null)),mm=pm.exports;mm.install=function(e){e.component(mm.name,mm)};var gm=mm,fm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.dialogVisible?i("el-dialog",{attrs:{title:e.$t("ht.templateImportResult.title"),visible:e.dialogVisible,width:"70%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",[i("el-tabs",{attrs:{type:"card","tab-position":"top"},on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.data,(function(t){return i("el-tab-pane",{key:t.entName,attrs:{label:t.desc+"("+t.entName+")",name:t.entName}},[i("el-table",{attrs:{data:t.pageList&&t.pageList.rows||t.rows,border:"",stripe:"",height:"500px"}},[i("el-table-column",{attrs:{type:"index",align:"center"}}),i("el-table-column",{attrs:{label:e.$t("ht.templateImportResult.mainKey"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[i("span",[e._v("\n                  "+e._s(a.row.dataNode[e.entMap[t.entName].pkKey])+"\n                ")])]}}],null,!0)}),i("el-table-column",{attrs:{label:e.$t("ht.templateImportResult.foreignKey"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[i("span",[e._v("\n                  "+e._s(a.row.dataNode[e.entMap[t.entName].fk])+"\n                ")])]}}],null,!0)}),i("el-table-column",{attrs:{label:e.$t("ht.templateImportResult.validOrNot"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.state?e._e():i("el-tag",{attrs:{type:"danger"}},[e._v("\n                  "+e._s(e.$t("ht.templateImportResult.no"))+"\n                ")]),t.row.state?i("el-tag",{attrs:{type:"success"}},[e._v("\n                  "+e._s(e.$t("ht.templateImportResult.yes"))+"\n                ")]):e._e()]}}],null,!0)}),i("el-table-column",{attrs:{label:e.$t("ht.templateImportResult.errorInfo"),prop:"cause",align:"center"}}),i("el-table-column",{attrs:{label:e.$t("ht.templateImportResult.duplicateOrNot"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.repeat?i("el-tag",{attrs:{type:"danger"}},[e._v("\n                  "+e._s(e.$t("ht.templateImportResult.yes"))+"\n                ")]):i("el-tag",{attrs:{type:"success"}},[e._v("\n                  "+e._s(e.$t("ht.templateImportResult.no"))+"\n                ")])]}}],null,!0)}),e._l(e.attributeMap[t.entName]||[],(function(t){return i("el-table-column",{key:t.id,attrs:{label:t.desc,align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[i("span",[e._v("\n                  "+e._s(a.row.dataNode[t.name])+"\n                ")])]}}],null,!0)})}))],2),i("el-pagination",{attrs:{"current-page":e.pageBean.page,"page-sizes":[20,40,60,80,100,200,300,400],"page-size":e.pageBean.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageBean.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)})),1)],1),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("\n        "+e._s(e.$t("ht.common.cancle"))+"\n      ")]),i("el-button",{attrs:{type:"primary"},on:{click:e.processImportResult}},[e._v("\n        "+e._s(e.$t("ht.templateImportResult.import"))+"\n      ")])],1)]):e._e()],1)},ym=[],bm={name:"TemplateImportResult",props:{templateInfo:{type:Object,default:()=>({})}},data(){return{cacheKey:"",dialogVisible:!1,activeName:"",data:[],entMap:{},attributeMap:{},mapLoaded:!1,pageBean:{page:1,pageSize:20,total:0},currentIndex:0}},methods:{handleSizeChange(e){this.pageBean.pageSize=e,this.loadData(!0)},handleCurrentChange(e){this.pageBean.page=e,this.loadData(!0)},showDialog(e){this.cacheKey=e,this.currentIndex=0,this.loadData()},handleTabClick(e){this.currentIndex=Number(e.index),this.pageBean={page:1,pageSize:20},this.loadData(!0)},loadData(e=!1){const t=this;this.$requestConfig.getTemplateImportResult(t.cacheKey,this.pageBean).then(i=>{if(i&&i.length){if(t.data=i,i[this.currentIndex]&&i[this.currentIndex].pageList){const{page:e,pageSize:t,total:a}=i[this.currentIndex].pageList;this.pageBean={page:e,pageSize:t,total:a}}i.length&&!e&&(this.activeName=i[0].entName);let a={},s={};t.mapLoaded?t.dialogVisible=!0:this.$requestConfig.getBoDefinition(t.templateInfo.boDefAlias).then(e=>{let i=function(e){s[e.name]=e,e.attributeList&&e.attributeList.length&&(a[e.name]=e.attributeList),e.childEnts&&e.childEnts.length&&e.childEnts.forEach(i)};i(e.boEnt),t.attributeMap=a,t.entMap=s,t.mapLoaded=!0,t.dialogVisible=!0})}else t.$message.error(t.$t("ht.templateImportResult.importFail"))})},processImportResult(){const e=this.$loading({text:this.$t("ht.templateImportResult.loadingText")});this.$requestConfig.saveImportResult(this.cacheKey,this.templateInfo.alias).then(t=>{t.state&&(this.$message.success(t.message),this.dialogVisible=!1,e.close(),this.$emit("after-save"))}).catch(()=>{e.close()})}}},_m=bm,vm=W(_m,fm,ym,!1,null,"38e423d6",null),wm=vm.exports;wm.install=function(e){e.component(wm.name,wm)};var Sm=wm,Cm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.dialogVisible?i("el-dialog",{attrs:{title:e.$t("ht.templateTaskCirculate.title"),visible:e.dialogVisible,width:"70%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.closeDialog}},[i("span",[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",inline:!1,size:"normal","data-vv-scope":"todoReadForm"}},[i("ht-form-item",{attrs:{label:e.$t("ht.templateTaskCirculate.circulators"),required:""}},[i("ht-user-selector-input",{ref:"htUserSelector",attrs:{"append-to-body":"","quick-search-props":"fullname,account,phone,email",permission:"b",config:{id:"form"}},on:{input:e.syncInputUserId},model:{value:e.form.users,callback:function(t){e.$set(e.form,"users",t)},expression:"form.users"}})],1),i("ht-form-item",{attrs:{label:e.$t("ht.templateTaskCirculate.circulateExplain"),required:""}},[i("div",{staticClass:"approval-comments"},[i("ht-input",{ref:"opinionInput",attrs:{type:"textarea","display-style":"block",placeholder:e.$t("ht.templateTaskCirculate.placeholder"),name:e.$t("ht.templateTaskCirculate.approvalOpinion"),validate:"required",maxlength:500,max:500,autosize:{minRows:4,maxRows:4},permission:"b"},model:{value:e.form.opinion,callback:function(t){e.$set(e.form,"opinion",t)},expression:"form.opinion"}}),i("div",{staticClass:"common-words"},[i("el-button",{attrs:{title:e.$t("ht.templateTaskCirculate.addCommonWord"),icon:"el-icon-plus",size:"mini"},on:{click:e.addCommonOpinion}}),i("span",[e._v(e._s(e.$t("ht.templateTaskCirculate.commonWord"))+"：")]),e._l(e.commonWordsList,(function(t){return i("span",{key:t},[t.length>30?i("el-tag",{attrs:{title:t},nativeOn:{click:function(i){return e.choseCommonOpinion(t)}}},[e._v("\n                  "+e._s(t.substring(0,30))+"...\n                ")]):i("el-tag",{attrs:{effect:"plain",type:"info"},nativeOn:{click:function(i){return e.choseCommonOpinion(t)}}},[e._v("\n                  "+e._s(t)+"\n                ")])],1)})),i("span",{staticClass:"word-count"},[e._v(e._s(e.wordCount)+"/500")])],2)],1)]),i("ht-form-item",{attrs:{label:e.$t("ht.templateTaskCirculate.uploadFile")}},[i("ht-file",{attrs:{type:"list",downloadable:!1},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1)],1)],1),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("\n        "+e._s(e.$t("ht.common.confirm"))+"\n      ")]),i("el-button",{on:{click:e.closeDialog}},[e._v(e._s(e.$t("ht.common.cancle")))])],1)]):e._e()],1)},Dm=[],xm={name:"TemplateTaskCirculate",data(){return{dialogVisible:!1,form:{users:"",userId:"",opinion:""},fileList:"",defKey:"",instId:"",taskId:"",commonWordsList:[],commonWordLoaded:!1,wordCount:0}},watch:{"form.opinion":{handler(e){this.$emit("get-opinion",e),this.opinionInput()},deep:!0}},methods:{showDialog(e,t){const i=e["bpm_proc_inst_id_"];this.defKey=e["bpm_proc_def_key_"],this.instId=i,i&&(this.taskId=t[i]&&t[i].taskId||""),this.$validator=this.$root.$validator,this.commonWordLoaded||this.loadCommonWord(),this.dialogVisible=!0},confirm(){this.$validator.validateAll("todoReadForm").then(e=>{if(!e)return this.$message.warning(this.$t("ht.templateTaskCirculate.validateErrorMsg")),!1;const t={copyToType:"0",files:JSON.stringify(this.fileList||[]),instanceId:this.instId,opinion:this.form.opinion,messageType:"inner",userId:this.form.userId,taskId:this.taskId};this.$requestConfig.transToMore(t).then(e=>{e.state?(this.$message.success(e.message),this.closeDialog()):e.message&&this.$message.error(e.message)})})},loadCommonWord(){this.$requestConfig.getCommonWordsByDefKeyAndTypeId(this.defKey).then(e=>{this.commonWordLoaded=!0,this.commonWordsList=e})},closeDialog(){this.$set(this,"form",{users:"",userId:"",opinion:""}),this.taskId="",this.instId="",this.fileList="",this.dialogVisible=!1},choseCommonOpinion(e){if(this.form.opinion+=e,this.opinionInput(),this.$nextTick(()=>{this.$refs.opinionInput.$validator.validate()}),this.form.opinion.length>=500)return this.form.opinion=this.form.opinion.substr(0,500),void this.opinionInput()},opinionInput(){this.wordCount=this.form.opinion.length},addCommonOpinion(){this.form.opinion?this.$confirm(this.$t("ht.templateTaskCirculate.confirmMsg",{opinion:this.form.opinion})).then(()=>{const e={expression:this.form.opinion,departmentId:"",postId:"",roleId:"",type:4};this.$requestConfig.savaCommonWords(e).then(e=>{e.state?(this.$message({type:"success",message:e.message}),this.loadCommonWord()):e.message&&this.$message.error(e.message)})}).catch(()=>{}):this.$message.warning(`${this.$t("ht.common.enter")}${this.$t("ht.templateTaskCirculate.approvalOpinion")}`)},syncInputUserId(){let e=this.$refs["htUserSelector"].$refs["userSelectorEl"].selectors;this.form.userId=e.map(e=>e.id).join(",")}}},Tm=xm,Pm=(i("2c66"),W(Tm,Cm,Dm,!1,null,"9642b776",null)),Em=Pm.exports;Em.install=function(e){e.component(Em.name,Em)};var Om=Em,km=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"record-wrap"},[i("div",{staticClass:"record-content"},[i("el-table",{attrs:{"span-method":e.arraySpanMethod,data:e.rows,selectable:!1,"show-export":!1,"show-custom-column":!1,nopagination:!0,border:!0},on:{loading:e.loadData}},[i("el-table-column",{attrs:{width:"60",align:"center",label:e.$t("ht.common.index"),type:"index"}}),i("el-table-column",{attrs:{label:e.$t("ht.approvalHistory.approvalNode"),width:"170",align:"center",prop:"taskName","show-overflow-tooltip":e.overToolTip}}),i("el-table-column",{attrs:{label:e.$t("ht.approvalHistory.pendingApprovers"),"show-overflow-tooltip":e.overToolTip,width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row,s=a.status,l=a.qualfieds,n=a.qualfiedNames;return[e.showQualfiedsNames(s,l,n)?i("span",[e._v("\n            "+e._s(n)+"\n          ")]):e._e(),"awaiting_check"==s||e.qualfiedsName(n,!0)>1?i("el-popover",{attrs:{placement:"right","popper-class":"right-popover",trigger:"hover"}},[i("div",[i("p",{staticClass:"qualfied_names"},[e._v("\n                "+e._s(e.$t("ht.approvalHistory.name"))+"\n              ")]),e.isQualfiedListHasUser(l)?i("div",{staticClass:"btn__wrap"},e._l(l,(function(t,a){return i("p",{key:a},[t.users?i("el-tooltip",{staticClass:"item",attrs:{effect:"light",placement:"top",content:t.users}},[i("el-button",{attrs:{plain:"",size:"mini"}},[e._v(e._s(t.name))])],1):e._e(),t.users?e._e():i("el-button",{attrs:{plain:"",size:"mini"}},[e._v("\n                    "+e._s(t.name)+"\n                  ")])],1)})),0):i("div",{staticClass:"btn__wrap"},e._l(e.qualfiedsName(n,!1),(function(t,a){return i("p",{key:a},[i("el-button",{attrs:{plain:"",size:"mini"}},[e._v(e._s(t))])],1)})),0)]),e.isQualfiedListHasUser(l)||e.qualfiedsName(n,!0)>1?i("i",{staticClass:"el-icon-more qualfied-more__icon",attrs:{slot:"reference"},slot:"reference"}):e._e()]):e._e()]}}])}),i("el-table-column",{attrs:{label:e.$t("ht.approvalHistory.handler"),width:"110",align:"center",prop:"auditorName","show-overflow-tooltip":e.overToolTip},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("span",[e._v(e._s(a.auditorName))])]}}])}),i("el-table-column",{attrs:{align:"center",label:e.$t("ht.approvalHistory.handlingSituation"),width:"140","show-overflow-tooltip":e.overToolTip},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row,s=a.isRead,l=a.statusVal;return[l==e.$t("ht.flowChart.notApproval")?i("span",[e._v("\n            "+e._s(0==s?e.$t("ht.approvalHistory.notRead"):e.$t("ht.approvalHistory.read"))+"\n          ")]):i("span",[e._v("\n            "+e._s(l)+"\n          ")])]}}])}),i("el-table-column",{attrs:{label:e.$t("ht.approvalHistory.handleOpinion"),"show-overflow-tooltip":e.overToolTip,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row,s=a.opinion,l=a.filesArray;return[i("strong",[i("span",{staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(s))])]),l&&l.length?i("div",{staticClass:"appendix"},[i("div",{staticClass:"title"},[e._v(e._s(e.$t("ht.approvalHistory.file"))+"：")]),i("div",{staticClass:"file-content"},e._l(l,(function(t,a){return i("div",{key:a,staticClass:"attachment"},[i("el-tooltip",{attrs:{placement:"bottom-start",effect:"light"}},[i("div",{attrs:{slot:"content"},slot:"content"},[i("el-button",{attrs:{icon:"el-icon-download",circle:""},on:{click:function(i){return e.downloadAttachments(t)}}})],1),i("el-tag",{on:{click:function(i){return e.search(t)}}},[e._v(e._s(t.name))])],1)],1)})),0)]):e._e()]}}])}),i("el-table-column",{attrs:{label:e.$t("ht.approvalHistory.operateTime"),width:"170",align:"center","show-overflow-tooltip":e.overToolTip},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("span",{staticStyle:{"white-space":"pre-wrap"}},[e._v(e._s(a.completeTime))])]}}])}),i("el-table-column",{attrs:{align:"center",label:e.$t("ht.approvalHistory.stayTime"),width:"110","show-overflow-tooltip":e.overToolTip},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("span",[e._v(e._s(e.formatTimeLag(a)))])]}}])})],1)],1)])},Im=[],$m=i("c32d"),Am=i.n($m),Bm={name:"HtHistoricalApproval",componentName:"HtHistoricalApproval",props:{instId:String,order:Boolean},data(){return{nodeIdMap:{},src:"",data:{taskId:"",referOpinion:!1},fileId:"",previewNodeFormDialogVisible:!1,opinionSelectNodeId:"",opinionInstId:"",opinionTaskId:"",opinionFormData:"",opinionTaskName:"",opinionProcDefId:"",rows:[]}},created(){this.initParams(),this.loadData()},methods:{arraySpanMethod({row:e,column:t,rowIndex:i,columnIndex:a}){if(this.order&&1===a)return this.nodeIdMap[e.taskKey].length>1&&this.nodeIdMap[e.taskKey][this.nodeIdMap[e.taskKey].length-1]==e?{rowspan:this.nodeIdMap[e.taskKey].length,colspan:1}:this.nodeIdMap[e.taskKey].length>1?{rowspan:0,colspan:0}:{rowspan:1,colspan:1}},showQualfiedsNames(e,t,i){const a=this.qualfiedsName(i,!0);return a<2&&"awaiting_check"!=e||"awaiting_check"==e&&t&&1==t.length&&!t[0].users},initParams(){this.instId&&(this.data.instId=this.instId,this.data.taskId=this.taskId,this.data.referOpinion=this.referOpinion,this.data.nodeType=this.nodeType,this.data.defId=this.defId,this.data.nodeId=this.nodeId,"request"===this.myReadType&&(this.data.isRequest=!0))},qualfiedsName(e,t){return e&&t?e.split(",").length:e&&!t?e.split(","):void 0},isQualfiedListHasUser(e){if(Array.isArray(e)){for(let t=0;t<e.length;t++)if(e[t].users)return!0;return!1}},formatTimeLag(e){let t=new Am.a;t=e.completeTime?new Am.a(new Date(e.completeTime)):new Am.a(new Date);let i=new Am.a(new Date(e.createTime)),a=Am.a.duration(t.diff(i)),{_data:s}=a;return s.days>0?s.days+this.$t("ht.common.day"):s.hours>0?s.hours+this.$t("ht.common.hour"):s.minutes>0?s.minutes+this.$t("ht.common.minute"):0==s.minutes&&s.seconds>=0?this.$t("ht.approvalHistory.lessOneMinute"):void 0},search(e){this.$preview(e)},downloadAttachments(e){},loadData(e,t){const i={instId:this.instId,taskId:null,referOpinion:!0,defId:null,nodeId:null};this.nodeIdMap={},this.$requestConfig.getOpinionsById(i).then(e=>{this.orderFlag=!0;for(let a=e.length-1;a>-1;a--){let t=e[a];this.nodeIdMap[t.taskKey]||(this.nodeIdMap[t.taskKey]=[]),this.nodeIdMap[t.taskKey].push(t),t.files&&JSON.parse(t.files)&&(e[a].filesArray=JSON.parse(JSON.parse(t.files)))}let t=[],i={};if(this.order){for(let a=e.length-1;a>-1;a--)i[e[a].taskKey]||(t.push.apply(t,this.nodeIdMap[e[a].taskKey]),i[e[a].taskKey]="1");this.rows=t.reverse()}else this.rows=e}).finally(()=>{})}}},Mm=Bm,Lm=(i("df21"),W(Mm,km,Im,!1,null,"5e75cd3c",null)),Fm=Lm.exports;Fm.install=function(e){e.component(Fm.name,Fm)};var Nm=Fm,qm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{name:e.iframeNmae+"Div"}},[e.isReday?i("iframe",{style:e.iframeStyle,attrs:{id:"iframeControl",src:e.endSrc,height:e.endHeight,width:e.width,name:e.iframeNmae,frameborder:e.frameborder}}):e._e()])},Vm=[],Rm=i("ca3a"),zm=Rm["a"],Hm=W(zm,qm,Vm,!1,null,"8d59025c",null),Um=Hm.exports;Um.install=function(e){e.component(Um.name,Um)};var Km=Um,jm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ht-post-dialog"},[e.isMobile?i("post-selector-mobile-dialog",{ref:"postSelectorMobileDialog",attrs:{title:e.title,"append-to-body":e.appendToBody,data:e.data,pagination:e.pagination,"select-label":e.selectLabel,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField},on:{search:e.handleSearch,reset:e.handleReset,"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("on-confirm",t)},"page-change":e.handlePageChange},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}}):i("post-selector-dialog",{ref:"postSelectorDialog",attrs:{title:e.title,"append-to-body":e.appendToBody,data:e.data,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField,mode:e.mode},on:{"filter-type-change":e.handleFilterTypeChange,search:e.handleSearch,reset:e.handleReset,"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("on-confirm",t)},"page-change":e.handlePageChange,"load-org-post":e.loadOrgPost,"load-policy-post":e.loadPolicyPost},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}})],1)},Wm=[],Qm={name:"HtPostDialog",components:{PostSelectorDialog:sn,PostSelectorMobileDialog:hn},mixins:[kt["a"]],props:{value:String,single:Boolean,config:Object,appendToBody:{type:Boolean,default:!1},selectCurrent:Boolean,title:{type:String,default(){return Object(Me["c"])("ht.selector.postTitle")}},showSwitchDimension:{type:Boolean,default:!0},pageSize:{type:Number,default:20},quickSearchProps:{type:String,default:"p.pos_name_,p.code_,o.path_name_"},searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.orgDefaultPlaceholder")}},selectLabel:{type:String,default:"name"},currentSelectPost:Array},data(){return{selectors:[],mode:null,filterType:"org",currentGroup:null,currentOrg:null,currentPolicy:null,searchWord:null,data:[],pagination:{page:1,pageSize:this.pageSize,total:0,showTotal:!0}}},computed:{primaryField:function(){return this.config&&this.config.hasOwnProperty("id")?"id":this.config&&this.config.hasOwnProperty("code")?"code":this.selectLabel}},mounted(){this.data&&0!=this.data.length||this.handleLoad()},methods:{showDialog(){this.selectors=this.currentSelectPost?this.currentSelectPost:[],this.isMobile?this.$refs.postSelectorMobileDialog.showDialog():this.$refs.postSelectorDialog.showDialog()},handleSearch(e){e&&e.trim()?(this.searchWord=e,this.mode="search",this.handleLoad()):this.handleReset()},handleReset(){this.searchWord=null,this.mode=null,this.handleLoad()},handlePageChange(e){if("filter"!=this.mode)this.handleLoad(e);else switch(this.filterType){case"org":this.loadOrgPost(this.currentOrg,e);break;case"policy":this.loadPolicyPost(this.currentPolicy,e);break}},handleFilterTypeChange(e){this.filterType=e},getQueryFilter(e){const t={querys:[],pageBean:this.getPageBean(e)};if(this.quickSearchProps&&this.quickSearchProps.constructor==String&&this.searchWord){const e=this.quickSearchProps.split(",");e.forEach(e=>{let i={property:e,value:this.searchWord,group:"main",operation:"LIKE",relation:"OR"};t.querys.push(i)})}return t},getPageBean(e){const t={...this.pagination};return delete t["total"],t.page=e||1,t},handleLoad(e){const t=this.getQueryFilter(e);this.data=this.data||[],this.loadAllPost(t)},loadAllPost(e){this.$requestConfig.getPostList(e).then(e=>{const{rows:t,page:i,pageSize:a,total:s}=e;this.isMobile&&i>1?this.data=this.data.concat(t):this.data=t;const l={page:i,pageSize:a,total:s};this.$set(this,"pagination",l)})},loadOrgPost(e,t){this.mode="filter",this.currentOrg=e;let i={pageBean:this.getPageBean(t),querys:[]},a={property:"path_",value:e.path,group:"main",operation:"RIGHT_LIKE",relation:"AND"};e.path&&i.querys.push(a),this.loadAllPost(i)},loadPolicyPost(e,t){this.mode="filter",this.currentOrg=e;let i={pageBean:this.getPageBean(t),querys:[]},a=null;const{type:s,ids:l,paths:n}=e;switch(s){case"1":a={property:"o.id_",value:e.id,group:"main",operation:"EQUAL",relation:"AND"},i.querys.push(a),this.loadAllPost(i);break;case"2":a={property:"o.path_",value:e.path,group:"main",operation:"RIGHT_LIKE",relation:"AND"},i.querys.push(a),this.loadAllPost(i);break;case"3":l.forEach(e=>{a={property:"o.id_",value:e,group:"main",operation:"EQUAL",relation:"OR"},i.querys.push(a)}),this.loadAllPost(i);break;case"4":n.forEach(e=>{a={property:"o.path_",value:e,group:"main",operation:"RIGHT_LIKE",relation:"OR"},i.querys.push(a)}),this.loadAllPost(i);break}}}},Jm=Qm,Gm=W(Jm,jm,Wm,!1,null,"442d3650",null),Ym=Gm.exports;Ym.install=function(e){e.component(Ym.name,Ym)};var Zm=Ym,Xm=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:" inputs ht-job-dialog"},[e.isMobile?i("job-selector-mobile-dialog",{ref:"jobSelectorMobileDialog",attrs:{"search-placeholder":e.searchPlaceholder,single:e.single,data:e.data,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,"append-to-body":e.appendToBody,title:e.title,"primary-field":e.primaryField},on:{search:e.handleSearch,reset:e.handleReset,"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("on-confirm",t)},"page-change":e.handlePageChange},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}}):i("job-selector-dialog",{ref:"jobSelectorDialog",attrs:{"search-placeholder":e.searchPlaceholder,single:e.single,data:e.data,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,"append-to-body":e.appendToBody,title:e.title,"primary-field":e.primaryField,mode:e.mode},on:{search:e.handleSearch,reset:e.handleReset,"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("on-confirm",t)},"page-change":e.handlePageChange},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}})],1)},eg=[],tg={name:"HtJobDialog",components:{JobSelectorDialog:Tl,JobSelectorMobileDialog:$l},mixins:[kt["a"]],props:{value:String,single:Boolean,config:Object,appendToBody:{type:Boolean,default:!1},title:{type:String,default(){return Object(Me["c"])("ht.selector.jobTitle")}},pageSize:{type:Number,default:20},quickSearchProps:{type:String,default:"name,code"},searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.nameCode")}},selectLabel:{type:String,default:"name"},currentSelectJob:Array},data(){return{selectors:[],mode:"search",searchWord:null,data:[],pagination:{page:1,pageSize:this.pageSize,total:0,showTotal:!0}}},computed:{primaryField:function(){return this.config&&this.config.hasOwnProperty("id")?"id":this.config&&this.config.hasOwnProperty("code")?"code":this.selectLabel}},mounted(){this.data&&0!=this.data.length||this.handleLoad()},methods:{showDialog(){this.selectors=this.currentSelectJob?this.currentSelectJob:[],this.isMobile?this.$refs.jobSelectorMobileDialog.showDialog():this.$refs.jobSelectorDialog.showDialog()},handleSearch(e){e&&e.trim()?(this.searchWord=e,this.mode="search",this.handleLoad()):this.handleReset()},handleReset(){this.searchWord=null,this.mode="search",this.handleLoad()},handlePageChange(e){this.handleLoad(e)},getPageBean(e){const t={...this.pagination};return delete t["total"],t.page=e||1,t},getQueryFilter(e){const t={querys:[],pageBean:this.getPageBean(e)};if(this.quickSearchProps&&this.quickSearchProps.constructor==String&&this.searchWord){const e=this.quickSearchProps.split(",");e.forEach(e=>{let i={property:e,value:this.searchWord,group:"main",operation:"LIKE",relation:"OR"};t.querys.push(i)})}return t},handleLoad(e){const t=this.getQueryFilter(e);this.data=this.data||[],this.loadAllJob(t)},loadAllJob(e){this.$requestConfig.getJobList(e).then(e=>{const{rows:t,page:i,pageSize:a,total:s}=e;this.isMobile&&i>1?this.data=this.data.concat(t):this.data=t;const l={page:i,pageSize:a,total:s};this.$set(this,"pagination",l)})}}},ig=tg,ag=W(ig,Xm,eg,!1,null,"400f71c0",null),sg=ag.exports;sg.install=function(e){e.component(sg.name,sg)};var lg=sg,ng=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:" inputs ht-job-dialog"},[e.isMobile?i("role-selector-mobile-dialog",{ref:"roleSelectorMobileDialog",attrs:{"search-placeholder":e.searchPlaceholder,single:e.single,data:e.data,"table-columns":e.tableColumns,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,"append-to-body":e.appendToBody,title:e.title,"primary-field":e.primaryField},on:{search:e.handleSearch,reset:e.handleReset,"page-change":e.handlePageChange,"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("on-confirm",t)}},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}}):i("role-selector-dialog",{ref:"roleSelectorDialog",attrs:{title:e.title,"append-to-body":e.appendToBody,data:e.data,pagination:e.pagination,"select-label":e.selectLabel,"quick-search-props":e.quickSearchProps,single:e.single,"search-placeholder":e.searchPlaceholder,"primary-field":e.primaryField,mode:e.mode},on:{search:e.handleSearch,reset:e.handleReset,"page-change":e.handlePageChange,"row-click":function(t){return e.$emit("row-click",t)},"select-data":function(t){return e.$emit("on-confirm",t)}},model:{value:e.selectors,callback:function(t){e.selectors=t},expression:"selectors"}})],1)},og=[],rg={name:"HtRoleDialog",components:{RoleSelectorDialog:qa,RoleSelectorMobileDialog:Wa},mixins:[kt["a"]],props:{value:String,single:Boolean,config:Object,appendToBody:{type:Boolean,default:!1},title:{type:String,default(){return Object(Me["c"])("ht.selector.roleTitle")}},pageSize:{type:Number,default:20},quickSearchProps:{type:String,default:"name,code"},searchPlaceholder:{type:String,default(){return Object(Me["c"])("ht.selector.rolePlaceholder")}},selectLabel:{type:String,default:"name"},currentSelectRole:Array},data(){return{selectors:[],mode:"search",searchWord:null,data:[],pagination:{page:1,pageSize:this.pageSize,total:0,showTotal:!0}}},computed:{primaryField:function(){return this.config&&this.config.hasOwnProperty("id")?"id":this.config&&this.config.hasOwnProperty("code")?"code":this.selectLabel}},mounted(){this.data&&0!=this.data.length||this.handleLoad()},methods:{showDialog(){this.selectors=this.currentSelectRole?this.currentSelectRole:[],this.isMobile?this.$refs.roleSelectorMobileDialog.showDialog():this.$refs.roleSelectorDialog.showDialog()},handleSearch(e){e&&e.trim()?(this.searchWord=e,this.mode="search",this.handleLoad()):this.handleReset()},handleReset(){this.searchWord=null,this.mode="search",this.handleLoad()},handlePageChange(e){this.handleLoad(e)},getPageBean(e){const t={...this.pagination};return delete t["total"],t.page=e||1,t},getQueryFilter(e){const t={querys:[],pageBean:this.getPageBean(e)};if(this.quickSearchProps&&this.quickSearchProps.constructor==String&&this.searchWord){const e=this.quickSearchProps.split(",");e.forEach(e=>{let i={property:e,value:this.searchWord,group:"main",operation:"LIKE",relation:"OR"};t.querys.push(i)})}return t},handleLoad(e){const t=this.getQueryFilter(e);this.data=this.data||[],this.loadAllRole(t)},loadAllRole(e){this.$requestConfig.getRoleList(e).then(e=>{const{rows:t,page:i,pageSize:a,total:s}=e;this.isMobile&&i>1?this.data=this.data.concat(t):this.data=t;const l={page:i,pageSize:a,total:s};this.$set(this,"pagination",l)})}}},cg=rg,hg=W(cg,ng,og,!1,null,"bda1145c",null),ug=hg.exports;ug.install=function(e){e.component(ug.name,ug)};var dg=ug,pg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.loadOver?[i(e.componentName,{ref:e.vueObj.alias,tag:"component",attrs:{data:e.data,permission:e.permission,vueObj:e.vueObj,component:e.component}})]:e._e()],2)},mg=[],gg=i("3c76"),fg=gg["a"],yg=W(fg,pg,mg,!1,null,null,null),bg=yg.exports;bg.install=function(e){e.component(bg.name,bg)};var _g=bg,vg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"n"!==e.permission?i("div",[e._v("\n  "+e._s(e.value)+"\n  ")]):e._e()},wg=[],Sg={mixins:[kt["a"],de["a"],pe["a"],me["a"]],name:"HtUrlParameter",componentName:"HtUrlParameter",props:{value:[String,Number,Boolean],bindKey:[String]},data(){return{}},mounted(){},created(){if(this.bindKey){let e=this.getUrlMap();void 0!=e&&e!=this.value&&this.$emit("input",e)}},methods:{getUrlMap(){let e=window.location.search,t=new Object;if(-1!=e.indexOf("?")){let i=e.substr(1),a=i.split("&");for(let e=0;e<a.length;e++)t[a[e].split("=")[0]]=decodeURI(a[e].split("=")[1])}return t[this.bindKey]}}},Cg=Sg,Dg=W(Cg,vg,wg,!1,null,"42611007",null),xg=Dg.exports;xg.install=function(e){e.component(xg.name,xg)};var Tg=xg,Pg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._t("default")],2)},Eg=[];const{Base64:Og}=i("f43e");var kg={name:"HtGlobalValidate",componentName:"HtGlobalValidate",mixins:[Ne],props:{verificationJson:String,data:Object},data(){return{verificationList:[]}},created(){let e=this;this.$on("global-validate",()=>{e.validate()})},mounted(){this.verificationJson&&(this.verificationList=JSON.parse(Og.decode(this.verificationJson)))},methods:{validate(){let e=!0;if(this.verificationList&&this.verificationList.length>0){let t=y["a"].getOnlineFormInstance(this),i=this,a=[];this.verificationList.forEach(e=>{i.execFun(t,e,a)}),a.length>0&&(e=!1,this.$notify.error({title:this.$t("ht.common.warmTips"),dangerouslyUseHTMLString:!0,message:a.join("<br/>")}))}e&&(e=this.validateTable()),this.dispatch("HtOnlineForm","global-validate-result",[e])},execFun(e,t,i){let a=t.formulasDiyJs;-1===a.indexOf("return")&&(a="return "+a);let s=Function("data","_me","$Formulas",a);try{let a=s(e.data,e,e.$Formulas);a||i.push(t.tips)}catch(l){i.push(this.$t("ht.global.validateErrorMsg",{name:t.name}))}},validateTable(){const e=y["a"].getOnlineFormInstance(this).permission.table,t=y["a"].getOnlineFormInstance(this).data;let i={};for(let a in t)i=t[a];for(let a in e){const t=i["sub_"+a];if((!e[a]||!e[a].hasOwnProperty("export"))&&([!0,"true"].includes(e[a].required)&&t)){if(0==t.length)return this.$message({message:this.$t("ht.global.subTableRequired"),type:"warning"}),!1;if(t.length>0&&this.validateSunTable(e,t).length>0)return this.$message({message:this.$t("ht.global.sunTableRequired"),type:"warning"}),!1}}return!0},validateSunTable(e,t){const i=[],a=[];for(let s in e)[!0,"true"].includes(e[s].required)&&i.push("sub_"+s);return t.map(e=>{for(let t in e)i.includes(t)&&e[t].length<=0&&a.push(t)}),a}}},Ig=kg,$g=W(Ig,Pg,Eg,!1,null,"2b501c50",null),Ag=$g.exports,Bg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span")},Mg=[],Lg={name:"HtGlobalQuery",props:{queryJson:{type:Array,default:()=>[]}},data(){return{formInst:null,subOldValueMap:{},subQueryConfig:[]}},mounted(){if(this.formInst||(this.formInst=y["a"].getOnlineFormInstance(this.$parent)),this.queryJson.length>0){let e=this;this.queryJson.forEach(t=>{if(t.triggerTime){let i={};if(t.resultfield&&t.resultfield.length>0&&t.resultfield.forEach(e=>{i[e.field]=e.fieldPath}),-1!=t.triggerTime.indexOf("change")&&t.triggerField)if("main"===t.entType)e.formInst.$watch(t.triggerField,(function(a,s){""==a&&void 0==s||a===s||e.doQuery(t.alias,t.conditionfield,i,null)}));else{const a=t.triggerField.split("."),s=a[a.length-1];e.subOldValueMap[t.subPath]=[],t.triggerPath=a,t.triggerField=s,t.resultBind=i,e.subQueryConfig.push(t),e.formInst.$watch("data."+t.subPath,(function(i){let a=e.subOldValueMap[t.subPath];e.subQueryConfig.filter(e=>e.subPath===t.subPath).forEach(t=>{if(i!==a){try{if(!i||1!=i.length||i&&0!=i.length){if(i.length>a.length)for(let s=a.length;s<i.length;s++)e.doQuery(t.alias,t.conditionfield,t.resultBind,s);else if(a.length>i.length);else if(i.length>0&&a.length===i.length)for(let s=0;s<i.length;s++)i[s][t.triggerField]!==a[s][t.triggerField]&&e.doQuery(t.alias,t.conditionfield,t.resultBind,s)}else-1!=t.triggerTime.indexOf("load")&&e.doQuery(t.alias,t.conditionfield,t.resultBind,i.length-1)}catch(s){console.error(this.$t("ht.global.errorMsg")+":"+s)}e.subOldValueMap[t.subPath]=JSON.parse(JSON.stringify(i))}})}),{deep:!0})}if(-1!=t.triggerTime.indexOf("load")&&"main"===t.entType){if(t.noValuabletrigger&&t.noValuableField){const e=y["a"].getValueByPath(this.formInst,t.noValuableField);if(""!=e&&void 0!=e&&null!=e)return}setTimeout(()=>{e.doQuery(t.alias,t.conditionfield,i,null)},100)}}})}},methods:{doQuery(e,t,i,a){try{let s=this,l={};t&&t.length>0&&t.forEach(e=>{if(l[e.field]=null,!e.defaultValue&&e.fieldPath){const t=y["a"].getValueByPath(this.formInst,e.fieldPath,a);l[e.field]=t||e.emptyValue}}),N.load(e,l).then(e=>{let t=[];t=e.constructor==Object?e.listKey?e[e.listKey]:e.rows:e,t&&t.constructor==Array&&i&&i.constructor==Object&&Object.keys(i).forEach(e=>{const l=i[e],n=s.getBindValue(t,e);null==a?y["a"].setValueByPath(this.formInst,l,n):y["a"].setValueByPath(this.formInst,l,n,a)})})}catch(s){console.error(this.$t("ht.global.errorMsg")+":"+s)}},getBindValue(e,t){let i=[];return e.forEach(e=>{y["a"].isEmpty(e[t])||i.push(e[t])}),i.join(",")}}},Fg=Lg,Ng=W(Fg,Bg,Mg,!1,null,null,null),qg=Ng.exports;Ag.install=function(e){e.component(Ag.name,Ag)},qg.install=function(e){e.component(qg.name,qg)};var Vg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"inputs",style:{display:"inline-block",float:"right"}},[e.isShow||"true"==e.currentInitFillData?i("el-button",{staticClass:"custom-dialog-btn",attrs:{type:"text",size:"mini"},on:{click:e.showDialog}},[i("i",{staticClass:"custom-dialog-icon",class:e.custdialog.icon?"el-input__icon "+e.custdialog.icon:"el-input__icon icon-department",staticStyle:{"line-height":"10px"}}),e._v("\n    "+e._s(e.custdialog.name)+"\n  ")]):e._e(),i("el-dialog",{attrs:{visible:e.customDialogShowList,title:e.customDialog.name,"close-on-click-modal":!1,"before-close":e.dialogCancel,"append-to-body":"",top:"6vh",width:"60%"},on:{"update:visible":function(t){e.customDialogShowList=t},opened:e.afterOpen}},[i("el-container",{staticStyle:{overflow:"auto"},style:e.style},[2==e.customDialog.style?i("el-aside",{directives:[{name:"show",rawName:"v-show",value:e.treeShow,expression:"treeShow"}],staticStyle:{width:"23%"}},[i("el-card",[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(e.leftTreeTitle))])]),i("el-tree",{ref:"combinationTree",attrs:{data:e.combinationTreeData,props:e.defaultProps,"node-key":e.nodeKey,"highlight-current":"","check-on-click-node":!0,lazy:"",load:e.loadTree},on:{"node-click":e.combiTreeClick}})],1)],1):e._e(),2==e.customDialog.style?i("el-divider",{attrs:{direction:"vertical"}}):e._e(),i("el-container",[e.querysShow?i("el-header",{staticClass:"middle-header"},[e._l(e.conditionBind,(function(t,a){return i("div",{key:a,staticClass:"search-item"},[i("p",{staticStyle:{"font-size":"14px"}},[e._v(e._s(t.comment)+":")]),"1"==t.controllerType?i("div",[i("el-input",{staticStyle:{width:"180px",padding:"10px 0",margin:"0 5px 0 5px"},attrs:{size:"small",clearable:"",placeholder:e.placeholders[a],"prefix-icon":"el-icon-search"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchEnterFun(t)}},model:{value:e.queryParams[a][t.field],callback:function(i){e.$set(e.queryParams[a],t.field,i)},expression:"queryParams[index][condition.field]"}})],1):e._e(),"2"==t.controllerType?i("div",{staticStyle:{"margin-right":"10px"}},e._l(t.config.options,(function(s,l){return i("el-radio",{key:l,attrs:{label:s.key},model:{value:e.queryParams[a][t.field],callback:function(i){e.$set(e.queryParams[a],t.field,i)},expression:"queryParams[index][condition.field]"}},[e._v("\n                "+e._s(s.value)+"\n              ")])})),1):e._e(),"3"==t.controllerType?i("div",{staticStyle:{"margin-right":"10px"}},["static"==t.config.choiceType?i("ht-select",{attrs:{placeholder:e.quickSearch,options:t.config.options},model:{value:e.queryParams[a][t.field],callback:function(i){e.$set(e.queryParams[a],t.field,i)},expression:"queryParams[index][condition.field]"}}):i("ht-select",{attrs:{placeholder:e.quickSearch,ganged:{alias:t.config.customQuery.alias,valueBind:t.config.customQuery.valueBind,noInit:"",labelBind:t.config.customQuery.labelBind,gangedBind:"{}",bind:t.config.bind},multiple:!1,filterable:!1,"allow-create":!1,selectlist:[],"query-params":e.queryParams},model:{value:e.queryParams[t.field],callback:function(i){e.$set(e.queryParams,t.field,i)},expression:"queryParams[condition.field]"}})],1):e._e(),"4"==t.controllerType?i("div",{staticStyle:{"margin-right":"10px"}},[i("ht-tag",{attrs:{"tag-key":t.config.tag,placeholder:e.quickSearch,filterable:t.config.filterable,expand:t.config.expand},model:{value:e.queryParams[a][t.field],callback:function(i){e.$set(e.queryParams[a],t.field,i)},expression:"queryParams[index][condition.field]"}})],1):e._e()])})),e.conditionBind&&e.conditionBind.length>0?i("div",{staticClass:"btn-wrap"},[i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search(!0)}}},[e._v("\n              "+e._s(e.$t("ht.common.search"))+"\n            ")]),i("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("\n              "+e._s(e.$t("ht.common.reset"))+"\n            ")])],1):e._e()],2):e._e(),i("el-main",{staticStyle:{padding:"0 20 0 20"}},[i("el-table",{ref:"orgTable",staticClass:"org-table",staticStyle:{width:"100%"},attrs:{data:e.dialogData,stripe:"",border:"",size:"medium","max-height":"500px"},on:{"row-click":e.orgRowClick,"selection-change":e.orgTableSelection,select:e.onTableSelect,"select-all":e.selectAll}},[1!=e.customDialog.selectNum?i("el-table-column",{attrs:{type:"selection",align:"center",width:"45",selectable:e.selectable}}):e._e(),1===e.customDialog.selectNum?i("el-table-column",{attrs:{align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-radio",{staticClass:"textRadio",attrs:{label:t.$index,disabled:e.selectable(t.row)},on:{"selection-change":e.orgTableSelection},model:{value:e.undefineda,callback:function(t){e.undefineda=t},expression:"undefineda"}})]}}],null,!1,2605609712)}):e._e(),i("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:e.$t("ht.common.index")}}),e._l(e.displayfield,(function(t,a){return i("el-table-column",{key:t.field,staticStyle:{width:"100%"},attrs:{"show-overflow-tooltip":!0,prop:t.field,label:t.comment},scopedSlots:e._u([{key:"default",fn:function(s){return["1"==t.formatterType&&t.dateFormat?i("span",[e._v("\n                  "+e._s(e._f("dateformat")(s.row[t.field],t.dateFormat))+"\n                ")]):"2"==t.formatterType&&t.formatterData.length?i("span",[e._v("\n                  "+e._s(e.formatDictLabel(s.row[t.field],a))+"\n                ")]):i("span",[e._v(e._s(s.row[t.field]))])]}}],null,!0)})}))],2)],1),i("el-footer",[e.customDialog.needPage?i("el-row",{staticStyle:{"padding-top":"15px","justify-content":"space-between"},attrs:{type:"flex",justify:"end"}},[2==e.customDialog.style?i("el-button",{attrs:{icon:e.toggleBtn,size:"mini",type:"default"},on:{click:e.toggleTree}}):e._e(),i("el-pagination",{attrs:{small:"","current-page":e.pagination.page,"page-sizes":[10,20,50,100],"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)],1)],1),i("span",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.dialogConfirm}},[e._v("\n        "+e._s(e.$t("ht.common.confirm"))+"\n      ")]),i("el-button",{attrs:{size:"small"},on:{click:e.dialogCancel}},[e._v("\n        "+e._s(e.$t("ht.common.cancle"))+"\n      ")])],1)],1),i("el-dialog",{attrs:{visible:e.customDialogShowTree,title:e.customDialog.name,"close-on-click-modal":!1,"before-close":e.dialogCancelTree,"append-to-body":"",top:"6vh",width:"40%"},on:{"update:visible":function(t){e.customDialogShowTree=t}}},[i("el-container",{staticStyle:{overflow:"auto","min-height":"300px"},style:e.style},[i("el-tree",{ref:"tree",staticStyle:{width:"100%"},attrs:{data:e.props1,props:e.defaultProps,"node-key":e.nodeKey,"highlight-current":"","show-checkbox":-1===e.customDialog.selectNum,"check-on-click-node":!0,"check-strictly":!1,lazy:"",load:e.loadTree},on:{"node-click":e.treeClick,"check-change":e.getChecked}})],1),i("span",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.dialogTreeConfirm}},[e._v("\n        "+e._s(e.$t("ht.common.confirm"))+"\n      ")]),i("el-button",{attrs:{size:"small"},on:{click:e.dialogCancelTree}},[e._v("\n        "+e._s(e.$t("ht.common.cancle"))+"\n      ")])],1)],1)],1)},Rg=[],zg={data(){return{total:0,dialogData:[]}},methods:{getDialogByAlias(e){return this.$requestConfig.getCustomDialogByAlias(e)},getListJson(e){const t={url:e.queryUrl,method:e.requestType,data:e.pageBean};return this.$requestConfig.request(t).then(t=>{t&&t.constructor===Array?this.dialogData=t:this.dialogData=y["a"].getValueByPath(t,e.listKey||"rows"),this.total=y["a"].getValueByPath(t,e.totalKey||"total")})},setListJson(e){return new Promise(t=>{this.dialogData=e,t()})},getTreeListJson(e){const t={url:e.url,method:e.requestType,data:e.paramsObj};return this.$requestConfig.request(t)}}},Hg={name:"HtSubDialog",mixins:[zg],props:{custdialog:{type:Object,default:()=>({})},initFillData:String,initFillDataType:String,relation:String,extendProp:{type:Object,default:()=>({})},maxRow:Number,newInitVersion:String,initBackFillData:{type:Array,default:()=>[]}},data(){return{quickSearch:"",conditionBind:[],nodeKey:"ID_",customDialogShowList:!1,customDialogShowTree:!1,style:"",selectOrgs:null,config:null,displayfield:[],customDialog:{},queryParam:"",props1:[],showData:[],checkBoxDataAll:[],defaultProps:{children:"children",label:"label"},propsData:[],querysShow:!1,undefineda:"",isCurrentChange:!1,pagination:{page:1,pageSize:10,total:0},param:[],treeList:[],displayField:{},queryParams:[],placeholders:[],oldselectOrgs:[],combinationTreeData:[],combiTreeDisplayField:[],combinationTreeQuerys:[],combinationRule:{},toggleBtn:"el-icon-arrow-left",treeShow:!0,transtionWidth:"25%",leftTreeTitle:"",isShow:!0,currentInitFillData:"false",fixedParams:{}}},watch:{props1:function(){if(void 0!=this.showData&&this.showData.length>0){const e=this;let t=[];for(let i=0;i<this.showData.length;i++)t.push(this.showData[i]);setTimeout(()=>{for(let i=0;i<t.length;i++)e.$refs.tree.setChecked(t[i],!0),e.checkNode(t[i],e)},200)}}},mounted(){(0==Object.keys(this.extendProp).length||this.extendProp.initFillData)&&(this.currentInitFillData=this.initFillData);let e=window.location.href.split("?")[0].split("/"),t=window.location.href.split("/");"get"!=e[e.length-1]&&"get"!=e[e.length-2]&&"doneList"!=t[t.length-1]||(this.isShow=!1),"true"==this.currentInitFillData&&"true"!==this.newInitVersion&&this.initTemplateData()},methods:{selectAll(e){if(null!=this.oldselectOrgs&&e.length>0){for(let t=0;t<e.length;t++)-1===this.indexArray(this.oldselectOrgs,e[t])&&this.oldselectOrgs.push(e[t]);this.selectOrgs=fe.a.cloneDeep(this.oldselectOrgs)}else this.selectOrgs=fe.a.cloneDeep(e)},checkNode(e,t,i){if(e.Pid){let i=t.$refs.tree.getNode(e.Pid);i.indeterminate=!0,i.data.Pid&&(t.$refs.tree.getNode(i.data.Pid).indeterminate=!0,this.checkNode(t.$refs.tree.getNode(i.data.Pid).data,t,t.$refs.tree.getNode(i.data.Pid))),i.indeterminate||(i.indeterminate=!0)}else i&&!i.indeterminate&&(i.indeterminate=!0)},searchEnterFun:function(e){var t=window.event?e.keyCode:e.which;13==t&&this.search()},handleSizeChange:function(e){this.isCurrentChange=!0,this.pagination.pageSize=e,this.search()},handleCurrentChange:function(e){const t=this;void 0!=this.selectOrgs&&this.selectOrgs.length>0&&this.selectOrgs.forEach(e=>{let i=t.indexArray(t.checkBoxDataAll,e);-1==i&&t.checkBoxDataAll.push(e)}),this.isCurrentChange=!0,this.pagination.page=e,this.search()},checkList(){const e=this;setTimeout(()=>{void 0!=e.checkBoxDataAll&&e.checkBoxDataAll.length>0&&e.checkBoxDataAll.forEach(t=>{let i=e.indexArray(e.dialogData,t);e.undefineda=i,-1!=i&&(e.isCurrentChange=!0,e.toggleRowSelection(i,!0))})},300)},toggleRowSelection(e,t){this.$refs.orgTable.toggleRowSelection(this.dialogData[e],t)},showDialog(){const e=this;this.undefineda="",e.selectOrgs&&(e.selectOrgs.splice(0,e.selectOrgs.length),e.checkBoxDataAll.splice(0,e.checkBoxDataAll.length));var t=this.custdialog.custDialog.alias;this.getDialogByAlias(t).then(i=>{if(!i||!i.alias)return void d["Message"].error(e.$t("ht.customDialog.errorMsg",{alias:t}));if(1==i.style){var a=JSON.parse(i.displayfield);e.nodeKey=a.id}if(i.needPage&&"POST"===i.requestType){let e={};this.getLastKeyByPath(e,i.pageKey,1),this.getLastKeyByPath(e,i.pageSizeKey,10),this.getLastKeyByPath(e,i.totalKey,!0);const t=y["a"].parseExp(i.dataParam,e,!0);if(t){const e=JSON.parse(t);e.pageBean&&(this.pagination={...e.pageBean})}}let s=e.custdialog.custDialog.conditions;e.param=[],s.length>0&&s.forEach(t=>{if("3"==t.defaultType&&t.bind){let i={};i.field=t.field,i.bind=t.bind,i.bindType=t.bindType,e.param.push(i)}});let l=JSON.parse(i.conditionfield);e.quickSearch="",e.conditionBind=[];let n=[],o=[];if(l.length>0&&(l.forEach(t=>{var i={};"1"==t.defaultType&&(i[t.field]="",n.push(i),e.conditionBind.push(t),o.push(e.$t("ht.common.enter")+t.comment)),"2"==t.defaultType&&t.defaultValue&&(e.fixedParams[t.field]=t.defaultValue)}),this.$set(this,"queryParams",n),this.$set(this,"placeholders",o)),e.quickSearch,e.querysShow=!0,e.quickSearch=e.$t("ht.common.enter")+this.quickSearch+e.$t("ht.common.search"),e.style="height:"+i.height+"px",window.screen.height&&window.screen.height<=900&&(this.style="height:440px"),0==i.style||2==i.style)e.customDialogShow({alias:t,customDialog:i});else if(1==i.style){e.pageParam={alias:t,customDialog:i},e.customDialog=i;let a={};if(e.conditionfieldTree=[],i.conditionfield&&(e.conditionfieldTree=JSON.parse(i.conditionfield),e.conditionfieldTree.length>0))for(let t=e.conditionfieldTree.length-1;t>=0;t--)"4"==e.conditionfieldTree[t].defaultType&&(a[e.conditionfieldTree[t].field]=e.conditionfieldTree[t].comment);"{}"!=JSON.stringify(a)?e.dialogVisible=!0:e.customDialogTreeShow(e.pageParam)}})},getLastKeyByPath(e,t,i){if(!e||!t||t.constructor!=String)return;if(!/^\w?.*[\w|\]]$/.test(t))return;let a=t.split(".");if(1==a.length)e[t]=i;else{let t=a.length;e[a[t-1]]=i}},indexArray(e,t){if(0==e.length)return-1;for(let i=0;i<e.length;i++)if(JSON.stringify(e[i])==JSON.stringify(t))return i;return-1},onTableSelect(e,t){this.isCurrentChange=!1;let i=this.selectOrgs&&this.selectOrgs.length>0&&-1!==this.indexArray(this.selectOrgs,t);if(i){this.isCurrentChange=!0;let e=this.indexArray(this.selectOrgs,t);this.selectOrgs.splice(e,1)}},orgRowClick(e,t,i){if(1===this.customDialog.selectNum){i.currentTarget&&i.currentTarget.children[0]&&i.currentTarget.children[0].children[0]&&i.currentTarget.children[0].children[0].children[0]&&i.currentTarget.children[0].children[0].children[0].dispatchEvent(new Event("click")),this.selectOrgs=[],this.selectOrgs.push(e);let t=this.indexArray(this.dialogData,e);this.undefineda=t}else if(1!=this.customDialog.selectNum){this.isCurrentChange=!1;let t=this.selectOrgs&&this.selectOrgs.length>0&&-1!==this.indexArray(this.selectOrgs,e);if(t){this.isCurrentChange=!0;let t=this.indexArray(this.selectOrgs,e);this.selectOrgs.splice(t,1)}this.$refs.orgTable.toggleRowSelection(e)}},orgTableSelection(e){if(this.oldselectOrgs=fe.a.cloneDeep(this.selectOrgs),1!=this.customDialog.selectNum&&!this.isCurrentChange&&e&&e.length>0)if(1!=e.length||this.selectOrgs&&0!=this.selectOrgs.length)if((!this.selectOrgs||0==this.selectOrgs.length)&&e.length>1){this.selectOrgs||(this.selectOrgs=[]);for(let t=e.length-1;t>=0;t--)this.selectOrgs.push(e[t])}else if(this.isCurrentChange&&e.length>=10){if(this.selectOrgs)for(let t=this.selectOrgs.length-1;t>=0;t--){let i=this.indexArray(e,this.selectOrgs[t]);-1!=i&&this.selectOrgs.splice(i,1)}else this.selectOrgs=[];for(let t=0;t<e.length;t++)this.selectOrgs.push(e[t])}else for(let t=e.length-1;t>=0;t--){this.selectOrgs.push(e[t]);break}else this.selectOrgs=e},dialogConfirm(){this.selectOrgs&&0!=this.selectOrgs.length?(this.queryParam="",this.customDialogShowList=!1,this.syncInputValue()):this.$message.error(this.$t("ht.subTable.errorMsg"))},reset(){if(this.queryParams.forEach(e=>{for(let t in e)this.queryParams[t]=""}),this.$refs.combinationTree){let e=this.$refs.combinationTree.store.nodesMap;for(let t in e)e[t].expanded=!1}this.combinationTreeQuerys.splice(0),this.search(!0)},search(e){let t=[],i={};"{}"==JSON.stringify(this.pagination)&&(this.pagination={page:1,pageSize:10,showTotal:"true"});let a={pageBean:this.pagination};if(e&&(a.pageBean={page:1,pageSize:10,showTotal:"true"}),0!=this.queryParams.length&&""!=this.queryParams[0]&&this.conditionBind.forEach((e,i)=>{this.queryParams[i][e.field]&&t.push({property:e.field,value:this.queryParams[i][e.field],group:"main",operation:"LIKE",relation:"AND"})}),this.param){const e=y["a"].getOnlineFormInstance(this);this.param.forEach(i=>{t.push({property:i.field,value:2===i.bindType?i.bind:y["a"].getValueByPath(e,i.bind),group:"main",operation:"LIKE",relation:"AND"})})}if(this.combinationTreeQuerys&&0!=this.combinationTreeQuerys.length)for(let l=0;l<this.combinationTreeQuerys.length;l++)t.push(this.combinationTreeQuerys[l]);if("dataSource"!=this.customDialog.dsType&&"POST"==this.customDialog.requestType&&this.customDialog.dataParam&&this.customDialog.dataParam.constructor==String){let e=this.param,i={},l={};this.getLastKeyByPath(l,this.customDialog.pageKey,a.pageBean.page),this.getLastKeyByPath(l,this.customDialog.pageSizeKey,a.pageBean.pageSize),this.getLastKeyByPath(l,this.customDialog.totalKey,a.pageBean.total),t&&t.length&&t.forEach(e=>{i[e.property]=e.value});const n=this.getSearchValueByKey();n.pageSize=a.pageBean.pageSize,n.page=a.pageBean.page,n.total=a.pageBean.total;try{this.$requestConfig.getUserId()&&(i.userId=this.$requestConfig.getUserId()),this.$requestConfig.getOrgId()&&(i.orgId=this.$requestConfig.getOrgId()),this.$requestConfig.getPostId()&&(i.postId=this.$requestConfig.getPostId())}catch(s){console.log(this.$t("ht.customDialog.getIdError"),s)}const o=y["a"].parseExp(this.customDialog.dataParam,{...i,...n,...this.fixedParams});try{e=JSON.parse(o);const t=JSON.parse(this.customDialog.dataParam),a=t&&t.querys&&t.querys.map(e=>{const t=e.value&&e.value.replace("${","").replace("}","");return{...e,value:n[t]||i[t]||""}});e.querys=a,this.customDialog.needPage?e.pageBean=l:e.pageBean.pageSize=-1;let s={pageBean:e,queryUrl:this.customDialog.queryUrl,requestType:this.customDialog.requestType,dsType:this.customDialog.dsType,listKey:this.customDialog.listKey,pageKey:this.customDialog.pageKey,pageSizeKey:this.customDialog.pageSizeKey,totalKey:this.customDialog.totalKey};this.getListJson(s).then(()=>{this.checkList()})}catch(s){this.$message.error(`${this.$t("ht.customDialog.postRequestParamError")}${e}`)}}else t.length>0?(i={pageBean:a.pageBean,querys:t},this.customDialog.pageBean=i,this.getListJson(this.customDialog).then(()=>{this.checkList()})):(this.customDialog.pageBean=a,this.getListJson(this.customDialog).then(()=>{this.checkList()}))},getSearchValueByKey(){let e={};return this.queryParams.length>0&&(e=this.conditionBind.reduce((e,t,i)=>(e[t.field]=this.queryParams[i][t.field],e),{})),e},async doQuery(e){let t=[];const i=y["a"].getOnlineFormInstance(this);for(let l=0;l<e.conditionfield.length;l++)if(""!=e.conditionfield[l].fieldPath){let a=y["a"].getValueByPath(i,e.conditionfield[l].fieldPath,null),s={key:e.conditionfield[l].field,value:a};t.push(s)}let a="dataSource"==e.dsType?"${form}/form/customQuery/v1/doQuery?alias="+e.alias+"&page=1":e.url,s="POST";"dataSource"!=e.dsType&&(s=e.requestType),this.$requestConfig.request({url:a,method:s,data:t}).then(t=>{if(t.data.rows.length>0){for(let s=0;s<e.resultfield.length;s++)if(""!=e.resultfield[s].fieldPath){let l="";for(let i=0;i<t.data.rows.length;i++)t.data.rows[i][e.resultfield[s].field]&&(l=l+t.data.rows[i][e.resultfield[s].field]+",");l=l.substring(0,l.length-1);let n=e.resultfield[s].fieldPath.split(".");if(3==n.length)y["a"].setValueByPath(i,e.resultfield[s].fieldPath,l,null);else if(4==n.length){let t=i.data[n[1]][n[2]];if(0==t.length){let t=n[2].replace("sub_",""),o=i.data[n[1]].initData[t]||{},r=JSON.stringify(o).replace(/null/g,'""'),c=JSON.parse(r);for(var a in c)0==a.indexOf("sub_")&&c[a].length>0&&(c[a]=[]),c[a]&&(c[a]="");i.data[n[1]][n[2]].push(c),y["a"].setValueByPath(i,e.resultfield[s].fieldPath,l,0)}else for(let a=0;a<t.length;a++)y["a"].setValueByPath(i,e.resultfield[s].fieldPath,l,a)}}}else for(let s=0;s<e.resultfield.length;s++)if(""!=e.resultfield[s].fieldPath){let t=e.resultfield[s].fieldPath.split(".");if(3==t.length)y["a"].setValueByPath(i,e.resultfield[s].fieldPath,"",null);else if(4==t.length){let a=i.data[t[1]][t[2]];for(let t=0;t<a.length;t++)y["a"].setValueByPath(i,e.resultfield[s].fieldPath,"",t)}}})},syncInputValue(){for(var e=JSON.parse(this.customDialog.resultfield),t=new Array([e.length]),i=new Array([e.length]),a=[],s=[],l=0;l<e.length;l++)t[l]="dataSource"==this.customDialog.dsType?e[l].field.toLowerCase():e[l].field,i[l]="dataSource"==this.customDialog.dsType?e[l].comment.toLowerCase():e[l].comment;const n=this;this.selectOrgs.forEach(e=>{(n.checkBoxDataAll||n.checkBoxDataAll.length<1||-1==JSON.stringify(n.indexArray).indexOf(JSON.stringify(e)))&&n.checkBoxDataAll.push(e)});var o=this.selectOrgs;if(1===this.customDialog.selectNum){for(var r="",c=0;c<i.length;c++){let e=encodeURIComponent(o[0][t[c]]);r+='"'+i[c]+'":"'+e+'",'}""!=r&&(r="{"+r.substring(0,r.length-1)+"}"),a.push(y["a"].parseToJson(r)),s.push(o[0].id)}else for(var h=0;h<o.length;h++){for(var u="",d=0;d<i.length;d++){let e=encodeURIComponent(o[h][t[d]]);u+='"'+i[d]+'":"'+e+'",'}""!=u&&(u="{"+u.substring(0,u.length-1)+"}"),a.push(y["a"].parseToJson(u)),s.push(o[h].id)}const p=a,m=this,g=y["a"].getOnlineFormInstance(this);this.instId=g.$parent.instId;let f=this.custdialog,b={};if(f.orgConfig&&f.orgConfig.name&&this.fillOrg&&this.fillOrg.id){const e=f.orgConfig.name.split("."),t=e[e.length-1];if(b[t]=this.fillOrg.name,f.orgConfig.id){const e=f.orgConfig.id.split("."),t=e[e.length-1];b[t]=this.fillOrg.id}if(f.orgConfig.code){const e=f.orgConfig.code.split("."),t=e[e.length-1];b[t]=this.fillOrg.code}}if(f.orgConfig&&f.orgConfig.instId){const e=f.orgConfig.instId.split("."),t=e[e.length-1];b[t]=this.instId}try{let e=p.length;if(m.relation&&"onetoone"==m.relation&&e>1)return n.$message.error(n.$t("ht.subTable.subTableError")),void(n.customDialogShowList=!0);p.forEach(t=>{var i=null,a={};if(this.custdialog.custDialog.mappingConf.forEach(e=>{if(e.target[0]){i=e.target[0].split(".");var s="";s="restful"==m.customDialog.dsType?e.from:e.from.toLowerCase(),void 0==t[s]&&(s=s.toUpperCase());const l="undefined"==decodeURIComponent(t[s])?"":decodeURIComponent(t[s]);a[i[i.length-1]]=l}}),i){let t=null,s=null;if(4==i.length){const{index:e}=y["a"].getSubScopeElAndIndex(m.$el);if(null==e)throw m.$t("ht.subTable.sunTableBackfillError");const t=g["data"][i[0]][i[1]];s=t[e][i[2]],s||(s=t[e][i[2]]=[])}else t=g["data"][i[0]][i[1]];if(0!=n.maxRow){if(t&&t.length+e>n.maxRow)throw n.$message.error(n.$t("ht.subTable.exceededMaximumRows")+"【"+n.maxRow+"】"),n.customDialogShowList=!0,new Error("EndIterative");if(s&&s.length+e>n.maxRow)throw n.$message.error(n.$t("ht.subTable.sunTableExceededMaximumRows")+"【"+n.maxRow+"】"),n.customDialogShowList=!0,new Error("EndIterative")}if(t){let e=y["a"].getSomeAttributeFromParentElement(m.$el,"sunBos");if(e){let t=e.split(",");for(let e=0;e<t.length;e++){let i="sub_"+t[e],s=new Array;a[i]=s}}}m.relation&&"onetoone"==m.relation&&(t&&t.splice(0,t.length),s&&s.splice(0,s.length)),b&&"{}"!=JSON.stringify(b)&&(a={...a,...b}),a.sub_guid=this.guid(),m.$root.$emit("add-new-collapse-item",a.sub_guid),t&&t.push(a),s&&(s.push(a),g.data=Object.assign({},g.data)),e--}})}catch(_){if("EndIterative"!=_.message)throw _}},dialogCancel(){const e=this;e.queryParam="",e.setListJson([]).then(()=>{e.customDialogShowList=!1,e.inputVal?(e.selectOrgs=[...e.showData],this.checkBoxDataAll=[...e.selectOrgs]):e.selectOrgs=[]})},dialogTreeConfirm(){const e=this;if(0==e.propsData.length)return void e.$message.error(e.$t("ht.subTable.errorMsg"));this.setListJson([]);for(var t=JSON.parse(this.customDialog.resultfield),i=new Array([t.length]),a=new Array([t.length]),s=[],l=0;l<t.length;l++)i[l]=t[l].field,a[l]=t[l].comment;if(1===this.customDialog.selectNum){for(var n=this.propsData[0],o="",r=0;r<a.length;r++)o+='"'+a[r]+'":"'+n[i[r]]+'",';""!=o&&(o="{"+o.substring(0,o.length-1)+"}"),s.push(y["a"].parseToJson(o))}else{var c=this.propsData;c.forEach((e,t)=>{for(var l="",n=0;n<a.length;n++)l+='"'+a[n]+'":"'+c[i[n]]+'",',l+='"'+a[n]+'":"'+c[t][i[n]]+'",';""!=l&&(l="{"+l.substring(0,l.length-1)+"}"),s.push(y["a"].parseToJson(l))})}const h=s,u=y["a"].getOnlineFormInstance(this);try{let t=h.length;if(e.relation&&"onetoone"==e.relation&&t>1)return e.$message.error(e.$t("ht.subTable.subTableError")),void(e.customDialogShowTree=!0);h.forEach(i=>{var a=null,s={};if(this.custdialog.custDialog.mappingConf.forEach(t=>{if(t.target[0]){a=t.target[0].split(".");var l="";l="restful"==e.customDialog.dsType?t.from:t.from.toLowerCase(),void 0==i[l]&&(l=l.toUpperCase()),s[a[a.length-1]]=decodeURIComponent(i[l])}}),a){var l=u["data"][a[0]][a[1]];if(0!=e.maxRow&&l.length+t>e.maxRow)throw e.$message.error(e.$t("ht.subTable.exceededMaximumRows")+"【"+e.maxRow+"】"),e.customDialogShowTree=!0,new Error("EndIterative");let i=y["a"].getSomeAttributeFromParentElement(e.$el,"sunBos");if(i){let e=i.split(",");for(let t=0;t<e.length;t++){let i="sub_"+e[t],a=new Array;s[i]=a}}e.relation&&"onetoone"==e.relation&&l.splice(0,l.length),l.push(s),t--}}),this.customDialogShowTree=!1}catch(d){if("EndIterative"!=d.message)throw d}},dialogCancelTree(){this.setListJson([]),this.customDialogShowTree=!1},getChecked(e){1===this.customDialog.selectNum?(this.propsData=[],this.propsData.push(e)):this.propsData=this.$refs.tree.getCheckedNodes()},treeClick(e){1===this.customDialog.selectNum&&(this.propsData=[],this.propsData.push(e))},clearAllSelectOrgs(){this.selectOrgs=null,this.$refs.orgTable.clearSelection()},customDialogShow(e){if(this.customDialogShowList=!0,this.customDialog=e.customDialog,this.customDialog.queryUrl="dataSource"==this.customDialog.dsType?"${form}/form/customDialog/v1/getListData?alias="+this.customDialog.alias+"&mapParam="+(this.customDialog.mapParam?this.customDialog.mapParam:""):this.customDialog.url,this.dialogData.length<1){if(this.search(),this.displayfield=JSON.parse(e.customDialog.displayfield),"dataSource"==this.customDialog.dsType)for(var t=0;t<this.displayfield.length;t++)this.displayfield[t].field=this.displayfield[t].field.toLowerCase()}else this.dialogData.length>1&&this.search();if(this.dialogData.length>0&&0==this.displayfield.length&&(this.search(),this.displayfield=JSON.parse(e.customDialog.displayfield),"dataSource"==this.customDialog.dsType))for(var i=0;i<this.displayfield.length;i++)this.displayfield[i].field=this.displayfield[i].field.toLowerCase()},customDialogTreeShow(e){this.customDialog=e.customDialog;var t=this.customDialog,i="";void 0!=e.param&&(i=JSON.stringify(e.param),i=i.substring(1,i.length-1));var a="dataSource"==t.dsType?"GET":t.requestType?t.requestType:"POST",s="${form}/form/customDialog/v1/getTreeData?alias="+e.alias+"&mapParam="+i,l={};if("dataSource"!=t.dsType){s=t.url;var n=t.dataParam;let e={};if(t.conditionfield){for(var o=JSON.parse(t.conditionfield),r=0;r<o.length;r++){var c=o[r];if("POST"==a)n?e[c.field]=c.defaultValue:l[c.field]=c.defaultValue;else{var h=-1==s.indexOf("?")?"?":"&";s=s+h+c.field+"="+c.defaultValue}}try{this.$requestConfig.getUserId()&&(e.userId=this.$requestConfig.getUserId()),this.$requestConfig.getOrgId()&&(e.orgId=this.$requestConfig.getOrgId()),this.$requestConfig.getPostId()&&(e.postId=this.$requestConfig.getPostId())}catch(d){console.log(this.$t("ht.customDialog.getIdError"),d)}n&&(n=y["a"].parseExp(n,e),l=JSON.parse(n))}}var u={};u.requestType=a,u.url=s,u.paramsObj=l,this.searchTree(u),this.customDialogShowTree=!0},searchTree(e){const t=this;this.getTreeListJson(e).then((function(e){let i=JSON.parse(t.customDialog.displayfield);t.displayField=i,t.defaultProps.label=i.displayName,t.treeList=e,t.props1=t.toTreeData(e,i.id,i.pid,i.displayName,i.pvalue?i.pvalue:0)}))},toTreeData(e,t,i,a,s){return this.translateDataToTree(e,i,t,a,s)},translateDataToTree(e,t,i,a,s){let l=e.filter(e=>e[i]==e[t]||null==e[t]||e[t]==s);return l||(l=e.filter(e=>"undefined"!==e[t]&&null!=e[t]&&e[i]!=e[t])),l},loadTree(e,t){if(e){let i=this,a=2==i.customDialog.style?i.combiTreeDisplayField:i.displayField;t(this.treeList.filter(t=>t[a.pid]===e.data[a.id])),this.showData&&this.showData.length>0&&setTimeout(()=>{this.showData.forEach(t=>{t.Pid==e.key?i.$refs.tree.setChecked(t,!0):i.checkNode(t,i)})},400)}},afterOpen(){this.loadCombinationTree()},loadCombinationTree(){if(2!=this.customDialog.style)return;let e=JSON.parse(this.customDialog.combinationRule);this.combinationRule=e;let t=e.leftTree;this.$requestConfig.request({url:"${form}/form/customDialog/v2/getByAlias?alias="+t,method:"get"}).then(e=>{if(e&&e.value){let i=e.value;this.leftTreeTitle=i.name;let a="dataSource"==i.dsType?"GET":i.requestType?i.requestType:"POST",s="${form}/form/customDialog/v1/getTreeData?alias="+t+"&mapParam=",l={};if("dataSource"!=i.dsType){s=i.url;let e=i.dataParam;if(i.conditionfield){let t=JSON.parse(i.conditionfield);for(let i=0;i<t.length;i++){let n=t[i];if("POST"==a)e?e=e.replace(new RegExp("\\{"+n.field+"\\}","g"),n.defaultValue):l[n.field]=n.defaultValue;else{let e=-1==s.indexOf("?")?"?":"&";s=s+e+n.field+"="+n.defaultValue}}e&&(l=JSON.parse(e))}}let n={};n.requestType=a,n.url=s,n.paramsObj=l,this.getTreeListJson(n).then(e=>{if(i.displayfield&&i.resultfield){let t=JSON.parse(i.displayfield),a=JSON.parse(i.resultfield);this.defaultProps.label=t.displayName,this.treeList=e,this.combiTreeDisplayField=t,this.combinationTreeData=this.toTreeData(e,t.id,t.pid,t.displayName,t.pvalue?t.pvalue:"0",a)}})}})},combiTreeClick(e){this.combinationTreeQuerys.splice(0);let t=JSON.parse(this.customDialog.combinationRule);if(!t.rules||0==t.rules.length)return;let i=t.rules;for(let a=0;a<i.length;a++){let t=e[i[a].treeField],s=i[a].listField;this.combinationTreeQuerys.push({property:s,value:t,group:"treeGroup",operation:this.getOperation(i[a].condition),relation:"AND"})}this.search(!0)},getOperation(e){return e?"EQ"==e?"EQUAL":"LK"==e||"LFK"==e?"LIKE":"IN"==e?"IN":void 0:""},toggleTree(){this.treeShow?(this.treeShow=!1,this.transtionWidth="0%",this.toggleBtn="el-icon-arrow-right"):(this.treeShow=!0,this.transtionWidth="25%",this.toggleBtn="el-icon-arrow-left")},initTemplateData(){let e=this;const t=this.custdialog.custDialog;if(!t||!t.mappingConf||t.mappingConf.length<1)return;const i=this.getTargetPath(t.mappingConf),a=i.split("."),s=y["a"].getOnlineFormInstance(this),l=s["data"][a[0]][a[1]];let n=this.initFillDataType;if((!n||"empty"==n)&&l.length>0&&(1!=l.length||"[]"!=JSON.stringify(l[0])))return;"cover"==n&&(s["data"][a[0]][a[1]]=[]);const o=this.$loading({lock:!0,text:this.$t("ht.subTable.loadingText"),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});let r=null;this.$requestConfig.request({url:"${form}/form/customDialog/v1/getByAlias?alias="+t.alias,method:"get"}).then(t=>{r=t,e.customDialog=t},()=>{e.closeLoading(o),e.$message({message:e.$t("ht.subTable.getCustomDialogError"),type:"error"})}).then((function(){const t=JSON.parse(sessionStorage.getItem("currentUser"));e.custdialog.orgConfig.code||e.custdialog.orgConfig.name||e.custdialog.orgConfig.id?t&&localStorage.getItem("curFillOrg_"+t.account)?(e.closeLoading(o),e.fillOrg=JSON.parse(localStorage.getItem("curFillOrg_"+t.account)),e.toFillInitData(e,r.dsType,s["data"])):e.$requestConfig.request({url:"${uc}/api/org/v1/org/getFillOrg",method:"get"}).then(i=>{e.closeLoading(o);const a=i;a.state?(e.fillOrg=a.value,localStorage.setItem("curFillOrg_"+t.account,JSON.stringify(a.value)),e.toFillInitData(e,r.dsType,s["data"])):e.$message({message:a.message,type:"warning"})},()=>{e.closeLoading(o),e.$message({message:e.$t("ht.subTable.getCurrentUserError"),type:"warning"})}):(e.closeLoading(o),e.toFillInitData(e,r.dsType,s["data"]))}))},closeLoading(e){setTimeout((function(){e.close()}),2e3)},getTargetPath(e){let t="";return e&&e.length>0&&e.forEach(e=>{if(e["target"]&&1==e["target"].length&&e["target"][0])return t=e["target"][0],t}),t},toFillInitData(e,t,i){const a=this.custdialog.custDialog;let s=[];if(a.conditions){let e=a.conditions;e.length>0&&e.forEach(e=>{if("3"==e.defaultType&&e.bind){let t={};t.field=e.field;const a=e.bind.split(".");3==a.length&&(t.bind=i[a[1]][a[2]],s.push(t))}})}let l="${form}/form/customDialog/v1/getListData?alias="+a.alias;if(s.length>0){let e="";s.forEach(t=>{e&&(e+=","),e=e+'"'+t.field+'":"'+t.bind+'"'}),l=l+"&mapParam="+e}else l+="&mapParam=";let n="post";"restful"===this.customDialog.dsType&&(l=this.customDialog.url,n=this.customDialog.requestType);const o={pageBean:{page:1,pageSize:1e3,showTotal:!0}};e.$requestConfig.request({url:l,method:n,data:o}).then(i=>{const a=i;if("restful"===this.customDialog.dsType){if(a[this.customDialog.listKey]){const i=a[this.customDialog.listKey];e.syncInitTableValue(e.maxRow>0&&i.length>e.maxRow?i.splice(0,e.maxRow):i,t)}else if(a&&a.constructor===Array){const i=a;e.syncInitTableValue(e.maxRow>0&&i.length>e.maxRow?i.splice(0,e.maxRow):i,t)}}else a.rows&&e.syncInitTableValue(e.maxRow>0&&a.rows.length>e.maxRow?a.rows.splice(0,e.maxRow):a.rows,t)},()=>{e.$message({message:e.$t("ht.subTable.getDefaultDataError"),type:"error"})})},syncInitTableValue(e,t){let i=this.custdialog;for(var a=JSON.parse(this.customDialog.resultfield),s=new Array([a.length]),l=new Array([a.length]),n=[],o=[],r=0;r<a.length;r++)s[r]="dataSource"==t?a[r].field.toLowerCase():a[r].field,l[r]="dataSource"==t?a[r].comment.toLowerCase():a[r].comment;if(1===this.customDialog.selectNum){for(var c="",h=0;h<l.length;h++){let t=e[0][s[h]];t="undefined"==typeof t?"":t,c+='"'+l[h]+'":"'+t+'",'}""!=c&&(c="{"+c.substring(0,c.length-1)+"}"),n.push(y["a"].parseToJson(c)),o.push(e[0].id)}else for(var u=0;u<e.length;u++){for(var d="",p=0;p<l.length;p++){let t=e[u][s[p]];t="undefined"==typeof t?"":t,d+='"'+l[p]+'":"'+t+'",'}""!=d&&(d="{"+d.substring(0,d.length-1)+"}"),n.push(y["a"].parseToJson(d)),o.push(e[u].id)}const m=y["a"].getOnlineFormInstance(this);this.instId=m.$parent.instId;let g={};if(i.orgConfig&&i.orgConfig.name&&this.fillOrg.id){const e=i.orgConfig.name.split("."),t=e[e.length-1];if(g[t]=this.fillOrg.name,i.orgConfig.id){const e=i.orgConfig.id.split("."),t=e[e.length-1];g[t]=this.fillOrg.id}if(i.orgConfig.code){const e=i.orgConfig.code.split("."),t=e[e.length-1];g[t]=this.fillOrg.code}}if(i.orgConfig.instId){const e=i.orgConfig.instId.split("."),t=e[e.length-1];g[t]=this.instId}const f=n,b=this;f.forEach(e=>{var t={},a=null;i.custDialog.mappingConf.forEach(i=>{if(i.target[0]){a=i.target[0].split(".");var s="";s="restful"==b.customDialog.dsType?i.from:i.from.toLowerCase(),t[a[a.length-1]]=e[s]}}),g&&"{}"!=JSON.stringify(g)&&(t={...t,...g}),m["data"][a[0]][a[1]].push(t)})},guid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,i="x"==e?t:3&t|8;return i.toString(16)}))},selectable(e){let t=this.custdialog.resultField.filter(e=>e.isRepeat).map(e=>e.comment);if(t&&t.length){let i=this.displayfield.filter(e=>-1!=t.indexOf(e.comment)).map(e=>e.field),a=this.custdialog.custDialog.mappingConf.filter(e=>-1!=t.indexOf(e.from)).map(e=>e.target&&e.target.join(",")),s=[];if(a.forEach(e=>{s.push(e.split(".")[2])}),this.initBackFillData&&this.initBackFillData.length){let t=[];this.initBackFillData.forEach(e=>{let i="";s.forEach(t=>{i+=e[t]}),t.push(i)});let a="";if(i.forEach(t=>{a+=e[t]}),-1!=t.indexOf(a))return 1===this.customDialog.selectNum}}return 1!==this.customDialog.selectNum},formatDictLabel(e,t){let i=this.displayfield[t].formatterData,a="";return i&&i.length&&i.forEach(t=>{t.key_==e&&(a=t.value_)}),a}}},Ug=Hg,Kg=(i("f38b"),W(Ug,Vg,Rg,!1,null,"360d3b35",null)),jg=Kg.exports,Wg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span")},Qg=[],Jg={name:"HtSubtableBackfill",props:{customQuery:{type:Object,default:()=>({})},maxRow:Number,initFillDataType:String,extendProp:{type:Object,default:()=>({})}},data(){return{dataPath:[]}},watch:{extendProp:function(e){e&&this.initSubData()}},mounted(){this.initSubData()},methods:{initSubData(){if(this.extendProp.initFillData&&this.customQuery.alias&&this.customQuery.resultfield&&this.customQuery.resultfield.length){this.dataPath=this.getDataPath(this.customQuery.resultfield);const e=y["a"].getOnlineFormInstance(this);if(this.dataPath&&"empty"===this.initFillDataType&&e["data"][this.dataPath[0]][this.dataPath[1]].length)return;let t=this.prepareLoadParams(this.customQuery.conditionfield);const i=this.$loading({lock:!0,text:this.$t("ht.subTable.loadingText"),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});N.load(this.customQuery.alias,t).then(e=>{i&&i.close(),this.backfill(this.maxRow>0&&e.length>this.maxRow?e.splice(0,this.maxRow):e)},()=>{i&&i.close()})}},getDataPath(e){let t=[];return e.forEach(e=>{if(e.fieldPath){let i=e.fieldPath.split(".");i.length>1&&(t=i)}}),t},backfill(e){const t=y["a"].getOnlineFormInstance(this);this.customQuery.resultfield&&("cover"===this.initFillDataType&&(t["data"][this.dataPath[0]][this.dataPath[1]]=[]),e.forEach(e=>{let i={},a=null;this.customQuery.resultfield.forEach(t=>{t.fieldPath&&(a=t.fieldPath.split("."),i[a[a.length-1]]=y["a"].isEmpty(e[t.field])?"":e[t.field])}),Object.keys(i).length&&(i.sub_guid=this.guid(),this.$root.$emit("add-new-collapse-item",i.sub_guid),t["data"][a[0]][a[1]].push(i))}))},guid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,i="x"==e?t:3&t|8;return i.toString(16)}))},prepareLoadParams(e){let t={};if(e&&e.length){const i=y["a"].getOnlineFormInstance(this);e.forEach(e=>{if(e.fieldPath){let a=e.fieldPath.split(".");y["a"].isEmpty(i[a[0]][a[1]][a[2]])||(t[e.field]=i[a[0]][a[1]][a[2]])}})}return t}}},Gg=Jg,Yg=W(Gg,Wg,Qg,!1,null,null,null),Zg=Yg.exports,Xg=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:e.layout,"hide-on-single-page":e.hideOnSinglePage,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})},ef=[],tf={name:"HtSubPagination",props:{currentPage:{type:Number,default:1},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},pageSizes:{type:Array,default:function(){return[15,50,100,200,300]}},pageSize:{type:Number,default:15},hideOnSinglePage:{type:Boolean,default:!1},rows:{type:Array,default:function(){return[]}},dataSubname:{type:String,required:!0}},data(){return{myCurrentPage:1,myPageSize:100,total:0,oldTotal:0}},watch:{currentPage:{handler:function(e){this.myCurrentPage=e},immediate:!0},pageSize:{handler:function(e){this.myPageSize=e},immediate:!0},rows:{handler:function(e){if(!e||e.constructor!=Array)throw this.$t("ht.subTable.notArrayError");if(e.length>0){var t=Bh["a"]._map.get(this.dataSubname);t&&0==t.rows.length&&this.paginationChange()}if(this.total=e.length,0==this.total)this.handleCurrentChange(1);else if(this.total>0){const e=Bh["a"].getPageOffset(this.dataSubname,this),t=Math.ceil((e+this.pageSize)/this.pageSize);if(this.total===e&&0!==e&&this.handleCurrentChange(t-1),this.oldTotal>0&&this.total==this.oldTotal+1&&this.oldTotal%this.pageSize==0){const e=Math.ceil(this.total/this.pageSize);e>=0&&(this.handleCurrentChange(e),this.currentPage=e)}}this.oldTotal=this.total},immediate:!0,deep:!0}},mounted(){this.paginationChange()},destroyed(){Bh["a"].clear(this.dataSubname)},methods:{paginationChange(){Bh["a"].set(this.dataSubname,{rows:this.rows||[],currentPage:this.myCurrentPage,pageSize:this.myPageSize})},handleCurrentChange(e){this.myCurrentPage=e,this.paginationChange()},handleSizeChange(e){this.myPageSize=e,this.paginationChange()}}},af=tf,sf=W(af,Xg,ef,!1,null,null,null),lf=sf.exports,nf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[i("span",{staticClass:"el-dropdown-link export_link"},[i("ht-icon",{attrs:{name:"export"}}),e._v("\n    "+e._s(e.$t("ht.subTable.subTableExport"))+"\n  ")],1),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"current"}},[e._v("\n      "+e._s(e.$t("ht.subTable.currentPageData"))+"\n    ")]),i("el-dropdown-item",{attrs:{command:"all"}},[e._v("\n      "+e._s(e.$t("ht.subTable.allData"))+"\n    ")])],1)],1)},of=[],rf=i("d82d"),cf=rf["a"],hf=(i("9c6b"),W(cf,nf,of,!1,null,"85893d6a",null)),uf=hf.exports,df=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"import-container"},[i("el-button",{staticClass:"import-btn",attrs:{type:"text",size:"mini"},on:{click:function(t){e.dialogVisible=!0}}},[i("ht-icon",{attrs:{name:"import"}}),e._v("\n    "+e._s(e.$t("ht.subTable.subTableImport"))+"\n  ")],1),i("el-button",{staticClass:"download-btn",attrs:{type:"text",size:"mini"},on:{click:e.exportFormSub}},[i("ht-icon",{attrs:{name:"download"}}),e._v("\n    "+e._s(e.$t("ht.subTable.template"))+"\n  ")],1),i("el-dialog",{attrs:{visible:e.dialogVisible,width:"600px",title:e.$t("ht.subTable.importDialogTitle"),"append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{directives:[{name:"form",rawName:"v-form",value:{inputsDisplay:"block"},expression:"{ inputsDisplay: 'block' }"}],attrs:{"label-width":"100px","label-position":"left"}},[i("el-form-item",{attrs:{label:e.$t("ht.subTable.importFile")+"："}},[i("input",{ref:"selectFile",attrs:{type:"file",accept:"application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},on:{change:e.fileChange}})]),i("el-form-item",{attrs:{label:e.$t("ht.subTable.importModel")+"："}},[i("ht-radio",{attrs:{options:e.modeOptions,props:{key:"mode",value:"desc"}},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}})],1),e.importRows&&e.importRows.length>0?i("el-tag",{staticClass:"read-success__label",attrs:{type:"warning"}},[e._v("\n        "+e._s(e.$t("ht.subTable.hasRead"))+"\n        "),i("b",[e._v(e._s(e.importRows.length))]),e._v("\n        "+e._s(e.$t("ht.subTable.strip"))+e._s(e.$t("ht.subTable.data"))+"，\n        "),i("a",{on:{click:function(t){e.showRowData=!e.showRowData}}},[e._v("\n          "+e._s(e.$t("ht.subTable.checkDetail"))+"\n        ")]),e._v("\n        。\n      ")]):e._e(),e.showRowData?i("pre",{staticClass:"import-rows__pre"},[e._v(e._s(e.importRows))]):e._e()],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small",type:"primary",disabled:!e.importRows||0==e.importRows.length},on:{click:e.dialogConfirm}},[e._v("\n        "+e._s(e.$t("ht.common.confirm"))+"\n      ")]),i("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("\n        "+e._s(e.$t("ht.common.cancle"))+"\n      ")])],1)],1)],1)},pf=[],mf=i("248e"),gf=mf["a"],ff=(i("0b00"),W(gf,df,pf,!1,null,"58936a44",null)),yf=ff.exports;jg.install=function(e){e.component(jg.name,jg)},Zg.install=function(e){e.component(Zg.name,Zg)},lf.install=function(e){e.component(lf.name,lf)},uf.install=function(e){e.component(uf.name,uf)},yf.install=function(e){e.component(yf.name,yf)};var bf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"template-preview-container",attrs:{name:"data-view"}},[e.html?i("span",{staticClass:"template-content"},[e.showDateView?i("div",{staticClass:"data_view"},[i("ht-dataview-runtime-template",{key:e.refreshTime,staticClass:"data-preview-wrap",attrs:{"template-key":e.templateKey,html:e.html,"search-form":e.searchForm,"template-info":e.templateInfo,single:e.single,"task-type":e.taskType,"is-join-flow":e.isJoinFlow,"def-key":e.defKey,"is-data-view":e.isDataView,"data-view":e.dataView,"current-table-height":e.tableHeight,"parameterq-querys":e.parameterqQuerys}})],1):e._e()]):e._e(),e.loadedFail?i("div",{staticClass:"loaded-fail__div"},[e._v("\n    "+e._s(e.$t("ht.templatePreview.noDataText"))+"\n  ")]):e._e()])},_f=[],vf=i("a8b9"),wf={name:"HtTemplatePreview",props:{templateKey:{type:String,required:!0},parameterqQuerys:String,single:String,taskType:{type:String,default:""},defKey:String,dataView:Object,isDataView:{type:Boolean,default:!1},isJoinFlow:{type:Boolean,default:!1},tableHeight:{type:[Number,Function]}},data(){return{html:"",templateInfo:{},loadedFail:!1,refreshTime:(new Date).getTime(),showDateView:!0}},watch:{templateKey:function(e){e&&this.init()}},created(){this.init()},methods:{init(){let e=this;this.$requestConfig.getBpmDataTemplateInfo({templateKey:this.templateKey}).then(t=>{t.state?(e.templateInfo=t.value,this.getTemplateDataListForm()):this.$message.error(t.message)})},getTemplateDataListForm(){this.$requestConfig.getTemplateDataListForm(this.templateKey).then(e=>{e.state?(this.html=e.value,this.customInit()):(this.loadedFail=!0,this.$message.error(e.message||this.$t("ht.templatePreview.errorMsg")))})},customInit(){l.a.component("ht-dataview-runtime-template",{mixins:[vf["a"]],props:{templateInfo:{type:Object},single:String,currentTableHeight:{type:[Number,Function]},isDataView:{type:Boolean,default:!1}},data(){return{}},template:this.html})}}},Sf=wf,Cf=(i("9942"),i("f333"),W(Sf,bf,_f,!1,null,"726d533d",null)),Df=Cf.exports,xf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.fileList.length>0?i("div",[e.fileList.length<=2?i("div",e._l(e.showList,(function(t,a){return i("div",{key:a,staticStyle:{"margin-right":"10px"}},[i("ht-icon",{attrs:{name:t.icon}}),i("el-link",{attrs:{type:"primary"},on:{click:e.openDialog}},[e._v("\n        "+e._s(t.name)+"\n      ")])],1)})),0):i("div",[e._l(e.showList,(function(e,t){return i("span",{key:t,staticStyle:{"margin-right":"6px"}},[i("ht-icon",{attrs:{name:e.icon}})],1)})),i("el-link",{attrs:{type:"primary"},on:{click:e.openDialog}},[e._v("\n      ..."+e._s(e.$t("ht.templatePreview.fileCount",{fileListCount:e.fileList.length}))+"\n    ")])],2),e.dialogVisible?i("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"40%","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[e._l(e.fileList,(function(t,a){return i("el-row",{key:a},[i("el-col",{staticStyle:{display:"flex","justify-content":"space-between","text-align":"left"},attrs:{span:16}},[i("div",{staticStyle:{"font-size":"14px","font-family":"Source Han Sans SC","font-weight":"400","line-height":"24px",color:"#333333",opacity:"1","white-space":"initial","margin-right":"16px"}},[i("ht-icon",{attrs:{name:t.icon}}),e._v("\n          "+e._s(t.name)+"\n        ")],1),i("span",{staticStyle:{"margin-right":"50px",height:"18px","font-size":"12px","font-family":"Source Han Sans SC","font-weight":"400","line-height":"22px",color:"#999999",opacity:"1"}},[e._v("\n          "+e._s(t.username)+"\n        ")])]),i("el-col",{attrs:{span:8}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){return e.previewFile(t)}}},[e._v("\n          预览\n        ")]),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){return e.download(t.id)}}},[e._v("\n          下载\n        ")])],1)],1)})),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("\n        确 定\n      ")])],1)],2):e._e()],1):e._e()},Tf=[];const{saveAs:Pf}=i("9588");var Ef={name:"HtTemplatePreviewFile",props:["value"],data(){return{fileList:[],showList:[],dialogVisible:!1,dialogTitle:""}},watch:{value(){this.loadFile()}},mounted(){this.loadFile()},methods:{openDialog(){this.dialogTitle=`附件(${this.fileList.length})个`,this.dialogVisible=!0},download(e){this.$requestConfig.download(e).then(({data:e,headers:t})=>{if(e&&t){const i=decodeURIComponent(t["content-disposition"].split(";")[1].split("filename=")[1]),a=new Blob([e]);Pf(a,i)}}).catch(e=>{this.$message.error("附件下载失败："+e)})},previewFile(e){this.$preview(e)},loadFile(){if(this.fileList=[],this.value){let e=JSON.parse(this.value);for(let t=0;t<e.length;t++){let i=e[t].response,a={id:i.fileId,name:i.fileName,username:i.username},s=i.fileName.substring(i.fileName.lastIndexOf(".")+1),l="";l="ppt"==s||"pptx"==s?"ppt":"doc"==s||"docx"==s?"word":"xls"==s||"xlsx"==s?"excel":"file",a.icon=l,a.response=i,this.fileList.push(a),t<3&&this.showList.push(a)}}}}},Of=Ef,kf=W(Of,xf,Tf,!1,null,"5f878c62",null),If=kf.exports,$f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.imageList.length>0?i("div",[e._l(e.showImage,(function(t,a){return i("span",{key:a,staticStyle:{"margin-right":"10px"}},[i("el-image",{style:e.imageStyle,attrs:{src:t,"preview-src-list":e.imageList}},[i("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[i("i",{staticClass:"el-icon-picture-outline"})])])],1)})),e.imageList.length>3?i("span",{staticStyle:{width:"47px",height:"20px","font-size":"14px","font-family":"Source Han Sans SC","font-weight":"400","line-height":"22px",color:"#333333",opacity:"1","margin-left":"-10px"}},[e._v("\n      ..."+e._s(e.$t("ht.templatePreview.imageCount",{imageListCount:e.imageList.length}))+"\n    ")]):e._e()],2):e._e()])},Af=[],Bf={name:"HtTemplatePreviewImage",props:["value"],data(){return{imageList:[],showImage:[]}},computed:{imageStyle(){let e={width:"48px",height:"48px"};return this.imageList>2&&(e={width:"36px",height:"36px"}),e}},watch:{value(){this.loadImg()}},mounted(){this.loadImg()},methods:{loadImg(){if(this.imageList=[],this.value){let e=JSON.parse(this.value);for(let t=0;t<e.length;t++){let i=e[t],a=this.$requestConfig.portalUrl+"/system/file/v1/getImage?fileId="+i.response.fileId;this.imageList.push(a),t<3&&this.showImage.push(a)}}}}},Mf=Bf,Lf=W(Mf,$f,Af,!1,null,"3f7635cf",null),Ff=Lf.exports;Df.install=function(e){e.component(Df.name,Df)},If.install=function(e){e.component(If.name,If)},Ff.install=function(e){e.component(Ff.name,Ff)};var Nf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"data-preview-container",attrs:{name:"online-form"}},[i("el-row",{staticClass:"top-title__row"},[i("h3",{staticClass:"top-title"},[e._v(e._s(e.queryView.name?e.queryView.name:""))])]),e.html?[i("ht-querysql-runtime-template",{staticClass:"data-preview-wrap",attrs:{"sql-alias":e.sqlAlias,alias:e.alias,single:e.single,"search-form":e.searchForm,"query-view":e.queryView}})]:e._e(),e.loadedFail?i("div",{staticClass:"loaded-fail__div"},[e._v("\n    "+e._s(e.alias)+e._s(e.$t("ht.preview.querySqlTip"))+"\n  ")]):e._e()],2)},qf=[],Vf=i("b173"),Rf={name:"HtQuerySqlPreview",props:{viewId:{type:String,default:""}},data(){return{queryView:{},displayFields:[],html:"",alarmSettingMap:{},summaryTypeMap:{},loadedFail:!1,sqlAlias:"",alias:""}},watch:{viewId:function(e){e&&this.init()}},created(){this.init()},methods:{init(){let e=this;this.$requestConfig.getQuerySqlView(this.viewId).then(t=>{t?(e.queryView=t,e.sqlAlias=t.sqlAlias,e.alias=t.alias,e.html=t.template,this.customInit()):this.loadedFail=!0}).finally(()=>{})},customInit(){l.a.component("ht-querysql-runtime-template",{mixins:[Vf["a"]],props:{single:String,sqlAlias:String,alias:String,queryView:Object},data(){return{}},template:this.html})}}},zf=Rf,Hf=(i("be8d"),W(zf,Nf,qf,!1,null,"644815a2",null)),Uf=Hf.exports;Uf.install=function(e){e.component(Uf.name,Uf)};var Kf=Uf,jf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"manage-dialog__wrap",attrs:{title:e.title,visible:e.dialogVisible,"before-close":e.handleClose,"close-on-click-modal":!1,"append-to-body":!0,top:"6vh"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.dialogVisible?i("batch-save-dialog-show-detail",{ref:"customDialogShowDetail",attrs:{alias:e.alias,"custom-dialog":e.customDialog},on:{orgRowClick:e.orgRowClick}}):e._e(),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("确 定")]),i("el-button",{on:{click:e.handleClose}},[e._v("取 消")])],1)],1)},Wf=[],Qf=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{staticClass:"dialog-el-container"},[2==e.customDialog.style?i("el-aside",{directives:[{name:"show",rawName:"v-show",value:e.treeShow,expression:"treeShow"}],staticClass:"tree-aside",staticStyle:{width:"23%"}},[i("el-card",[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(e.leftTreeTitle))])]),i("el-tree",{ref:"combinationTree",attrs:{data:e.combinationTreeData,props:e.defaultProps,"node-key":e.nodeKey,"highlight-current":"","check-on-click-node":!0,lazy:"",load:e.loadTree},on:{"node-click":e.combiTreeClick}})],1)],1):e._e(),i("el-main",{class:{"combination-dialog_main":2==e.customDialog.style}},[i("ht-table",{ref:"htTable",attrs:{data:e.tableData,pageResult:e.pageResult,selectable:e.selectable,nopagination:e.nopagination,"show-export":!1,"show-custom-column":!1,pagerCount:5,paginationJustify:"end"},on:{load:e.loadData,"row-click":e.orgRowClick},scopedSlots:e._u([e.customDialog.conditionfield.length>0&&e.isShowSearch?{key:"search",fn:function(){return[i("ht-table-search-panel",{attrs:{divide:2==e.customDialog.style?2:3,isFlexLayout:!1,"label-width":120},nativeOn:{submit:function(e){e.preventDefault()}}},e._l(e.customDialog.conditionfield.filter((function(e){return"1"==e.defaultType})),(function(t,a){return i("ht-table-search-field",{key:a,attrs:{type:t.type,label:t.comment,"value-format":"date"==t.type?"yyyy-MM-dd HH:mm:ss":"",prop:t.field,isAlignRight:"",config:t.config,operation:e.getOperation(t.condition)}})})),1)]},proxy:!0}:null],null,!0)},[[e.selectable?e._e():i("ht-table-column",{attrs:{align:"center",width:"40"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row,s=t.index;return[i("el-radio",{attrs:{label:a[e.customDialog.displayfield[0].field]+s},model:{value:e.textRadio,callback:function(t){e.textRadio=t},expression:"textRadio"}})]}}],null,!1,3781559584)}),i("ht-table-column",{attrs:{type:"index",width:"50",align:"center",label:"序号"}}),e._l(e.customDialog.displayfield,(function(e,t){return i("ht-table-column",{key:t,attrs:{prop:e.field,label:e.comment,width:e.width,sortable:!0,"show-overflow-tooltip":!0}})}))]],2)],1)],1)},Jf=[],Gf={name:"batch-save-dialog-show-detail",props:{alias:{type:String,required:!0},customDialog:{type:Object,required:!0}},mounted(){const e=JSON.stringify(this.customDialog.displayfield).toLowerCase();this.customDialog.displayfield=JSON.parse(e),this.afterOpen()},data(){return{customDialogPostParam:[],customDialogGetUrl:"",selectionRadio:[],textRadio:"",selectable:!0,isShowSearch:!1,nopagination:!1,tableData:[],pageResult:{page:1,pageSize:20,total:0},combinationTreeData:[],treeShow:!0,leftTreeTitle:"",defaultProps:{childen:"children",label:"label"},nodeKey:"ID_",treeList:[],combinationTreeQuerys:[],combineQueryLength:0,queryParam:{}}},created(){this.initData()},methods:{initData(){if(this.customDialogPostParam=[],this.customDialogGetUrl="",this.selectionRadio=[],this.textRadio="",this.isShowSearch=!1,1==this.customDialog.selectNum?this.selectable=!1:this.selectable=!0,this.customDialog.needPage){this.nopagination=!1;let e={};const{page:t,pageSize:i,total:a}=this.pageResult;this.getLastKeyByPath(e,this.customDialog.pageKey,t),this.getLastKeyByPath(e,this.customDialog.pageSizeKey,i),this.getLastKeyByPath(e,this.customDialog.totalKey,a);const s=y["a"].parseExp(this.customDialog.dataParam,e,!0);if(s){const e=JSON.parse(s);e.pageBean&&(this.pageResult={...e.pageBean})}}else this.nopagination=!0;if(this.customDialog.conditionfield.length>0&&("dataSource"==this.customDialog.dsType||"dataSource"!=this.customDialog.dsType&&"POST"==this.customDialog.requestType))for(let e=this.customDialog.conditionfield.length-1;e>=0;e--)this.customDialog.conditionfield[e].controllerType&&"1"==this.customDialog.conditionfield[e].defaultType?(this.isShowSearch=!0,"date"==this.customDialog.conditionfield[e].dbType?this.customDialog.conditionfield[e].type="date":this.customDialog.conditionfield[e].type="text"):"dataSource"!=this.customDialog.dsType&&"POST"==this.customDialog.requestType&&this.customDialogPostParam.push(this.customDialog.conditionfield[e]);if(this.customDialog.conditionfield.length>0&&"dataSource"!=this.customDialog.dsType&&"GET"==this.customDialog.requestType)for(let e=this.customDialog.conditionfield.length-1;e>=0;e--)"2"==this.customDialog.conditionfield[e].defaultType?(-1==this.customDialog.url.indexOf("?")?this.customDialog.url=this.customDialog.url+"?"+this.customDialog.conditionfield[e].comment+"="+this.customDialog.conditionfield[e].defaultValue:this.customDialog.url=this.customDialog.url+"&"+this.customDialog.conditionfield[e].comment+"="+this.customDialog.conditionfield[e].defaultValue,this.customDialogGetUrl=this.customDialog.url):this.customDialog.conditionfield[e].controllerType&&"1"==this.customDialog.conditionfield[e].defaultType&&(this.isShowSearch=!0)},async loadData(e,t){let i={},a={};if(this.getLastKeyByPath(i,this.customDialog.pageKey,e.pageBean.page),this.getLastKeyByPath(i,this.customDialog.pageSizeKey,e.pageBean.pageSize),this.getLastKeyByPath(i,this.customDialog.totalKey,e.pageBean.total),e&&e.pageBean&&(e.pageBean=i,a={...i}),this.queryParam=e,this.combinationTreeQuerys&&this.combinationTreeQuerys.length>0){e.querys||(e.querys=[]);let t=0;for(var s=0;s<e.querys.length;s++)if(e.querys[s].group&&"treeGroup"==e.querys[s].group){t=s;break}e.querys.slice(0,t);for(let i=0;i<this.combinationTreeQuerys.length;i++)e.querys.push(this.combinationTreeQuerys[i])}if("dataSource"!=this.customDialog.dsType&&"POST"==this.customDialog.requestType&&this.customDialog.dataParam&&this.customDialog.dataParam.constructor==String){let t=[];try{const i=this.customDialog.conditionfield;i&&i.constructor==Array&&i.length>0&&i.forEach(i=>{if("1"==i.defaultType){let i=[];e&&e.querys&&e.querys.forEach(e=>{let t={key:e.property,value:e.value};i.push(t)}),t=[...i]}else{let e={key:i.field,value:i.defaultValue};t.push(e)}console.log(t)})}catch(o){this.$message.error("条件字段的JSON格式错误"+o)}e=this._handlePostData(this.customDialog,t,a);let i={};e&&e.pageBean&&(i=e.pageBean),e.pageBean=i}if(this.customDialog.conditionfield.length>0&&"dataSource"!=this.customDialog.dsType&&"GET"==this.customDialog.requestType&&e.querys&&e.querys.length>0){for(let r=this.customDialog.conditionfield.length-1;r>=0;r--)if(this.customDialog.conditionfield[r].controllerType&&"1"==this.customDialog.conditionfield[r].defaultType)for(let t=0;t<e.querys.length;t++)""!=this.customDialogGetUrl?this.customDialog.url=this.customDialogGetUrl:this.customDialogGetUrl=this.customDialog.url,-1==this.customDialog.url.indexOf("?")?this.customDialog.url=this.customDialog.url+"?"+e.querys[t].property+"="+e.querys[t].value:this.customDialog.url=this.customDialog.url+"&"+e.querys[t].property+"="+e.querys[t].value}else""!=this.customDialogGetUrl&&(this.customDialog.url=this.customDialogGetUrl);let l=this.customDialog.url,n=this.customDialog.requestType;"selectedApi"==this.customDialog.dsType?(l="${portal}/portal/portalInterfaceManager/v1/doQuery?alias="+this.customDialog.apiAlias,n="GET"):"dataSource"==this.customDialog.dsType&&(l="${form}/form/customDialog/v1/getListData?alias="+this.alias+"&mapParam=",n="POST"),this.nopagination&&(e.pageBean.page=1,e.pageBean.pageSize=-1),this.$requestConfig.request({url:l,method:n,data:e}).then(e=>{if("selectedApi"==this.customDialog.dsType&&e){let t=e.constructor==Array?e:[e],i=[];if(t&&t.length>0)for(let e=0;e<t.length;e++){let a=t[e],s=Object.keys(a),l={};s.forEach(e=>{l[e.toLowerCase()]=a[e]}),i.push(l)}i.length>0?this.tableData=i:this.tableData=t}else{if("dataSource"!=this.customDialog.dsType&&"GET"==this.customDialog.requestType&&(this.tableData=e,this.nopagination=!0),"dataSource"!=this.customDialog.dsType&&"POST"==this.customDialog.requestType||"selectedApi"==this.customDialog.dsType){let t=y["a"].getValueByPath(e,this.customDialog.listKey),i=[];if(t&&t.length>0)for(let e=0;e<t.length;e++){let a=t[e],s=Object.keys(a),l={};s.forEach(e=>{l[e.toLowerCase()]=a[e]}),i.push(l)}i.length>0?this.tableData=i:this.tableData=t,y["a"].getValueByPath(e,this.customDialog.pageKey)&&this.customDialog.needPage?(this.pageResult={page:y["a"].getValueByPath(e,this.customDialog.pageKey),pageSize:y["a"].getValueByPath(e,this.customDialog.pageSizeKey),total:y["a"].getValueByPath(e,this.customDialog.totalKey)},this.nopagination=!1):this.nopagination=!0}"dataSource"==this.customDialog.dsType&&(e&&e.rows?(this.tableData=e.rows,e.page?(this.pageResult={page:e.page,pageSize:e.pageSize,total:e.total},this.customDialog.needPage?this.nopagination=!1:this.nopagination=!0):this.nopagination=!0):(this.tableData=[],this.nopagination=!0))}}).finally(()=>t&&t())},getLastKeyByPath(e,t,i){if(!e||!t||t.constructor!=String)return;if(!/^\w?.*[\w|\]]$/.test(t))return;let a=t.split(".");if(1==a.length)e[t]=i;else{let t=a.length;e[a[t-1]]=i}},orgRowClick(e,t,i){1===this.customDialog.selectNum?(this.textRadio=i.currentTarget.children[0].children[0].children[0].__vue__.$refs.radio.value,this.selectionRadio=[e],this.$emit("orgRowClick",e)):this.$refs.htTable.$refs.htTable.toggleRowSelection(e)},afterOpen(){this.loadCombinationTree()},loadCombinationTree(){if(2!=this.customDialog.style)return;let e=JSON.parse(this.customDialog.combinationRule);this.combinationRule=e;let t=e.leftTree;this.$requestConfig.request({url:"${form}/form/customDialog/v1/getByAlias?alias="+t,method:"get"}).then(e=>{console.log(e.data,"res.data");let i=e.data;this.leftTreeTitle=i.name;let a=i.url,s=i.requestType?i.requestType:"POST";"selectedApi"==i.dsType?(a="${portal}/portal/portalInterfaceManager/v1/doQuery?alias="+i.apiAlias,s="GET"):"dataSource"==i.dsType&&(a="${form}/form/customDialog/v1/getTreeData?alias="+t+"&mapParam=",s="GET");let l={};if("dataSource"!=i.dsType){let e=i.dataParam;if(i.conditionfield){let t=JSON.parse(i.conditionfield);for(let i=0;i<t.length;i++){let n=t[i];if("POST"==s)e?e=e.replace(new RegExp("\\{"+n.field+"\\}","g"),n.defaultValue):l[n.field]=n.defaultValue;else{let e=-1==a.indexOf("?")?"?":"&";a=a+e+n.field+"="+n.defaultValue}}e&&(l=JSON.parse(e))}}let n={};n.requestType=s,n.url=a,n.paramsObj=l;let o="POST"==n.requestType?this.$requestConfig.request({url:n.url,method:"post",data:n.paramsObj}):this.$requestConfig.request({url:n.url,method:"get"});o.then(e=>{if(e=e.data,i.displayfield&&i.resultfield){let t=JSON.parse(i.displayfield),a=JSON.parse(i.resultfield);this.defaultProps.label=t.displayName,this.treeList=e,this.combiTreeDisplayField=t,this.combinationTreeData=this.toTreeData(e,t.id,t.pid,t.displayName,t.pvalue?t.pvalue:"0",a)}})})},combiTreeClick(e,t,i){this.combineQueryLength=this.combinationTreeQuerys.length,this.combinationTreeQuerys.splice(0);let a=JSON.parse(this.customDialog.combinationRule);if(!a.rules||0===a.rules.length)return;let s=a.rules;for(let l=0;l<s.length;l++){let t=e[s[l].treeField],i=s[l].listField;this.combinationTreeQuerys.push({property:i,value:t,group:"treeGroup",operation:this.getOperation(s[l].condition),relation:"AND"})}this.loadData(this.queryParam)},getOperation(e){return e?"EQ"==e?"EQUAL":"EIC"==e?"EQUAL_IGNORE_CASE":"LT"==e?"LESS":"GT"==e?"GREAT":"LE"==e?"LESS_EQUAL":"GE"==e?"GREAT_EQUAL":"NE"==e?"NOT_EQUAL":"LK"==e?"LIKE":"LFK"==e?"LEFT_LIKE":"RHK"==e?"RIGHT_LIKE":"ISNULL"==e?"IS_NULL":"NOTNULL"==e?"NOTNULL":"IN"==e?"IN":"BETWEEN"==e?"BETWEEN":"LIKE":""},toggleTree(){this.treeShow?(this.treeShow=!1,this.transtionWidth="0%",this.toggleBtn="el-icon-arrow-right"):(this.treeShow=!0,this.transtionWidth="25%",this.toggleBtn="el-icon-arrow-left")},loadTree(e,t){if(e){let i=this,a=2==i.customDialog.style?i.combiTreeDisplayField:i.displayField;t(this.treeList.filter(t=>t[a.pid]===e.data[a.id])),this.showData&&this.showData.length>0&&setTimeout(()=>{this.showData.forEach(t=>{t.Pid==e.key?i.$refs.tree.setChecked(t,!0):i.checkNode(t,i)})},400)}},toTreeData(e,t,i,a,s,l){let n=e.filter(e=>e[t]==e[i]||null==e[i]||null==e[i]||0==e[i]);return n||(n=e.filter(e=>"undefined"!==e[i]&&null!=e[i]&&e[t]!=e[i])),n},_handlePostData:(e,t,i)=>{if(!e.dataParam||e.dataParam.constructor!=String)return t;let a={...i};t&&t.forEach(e=>{a[e.key]=e.value});const s=y["a"].parseExp(e.dataParam,a);try{return JSON.parse(s)}catch(l){(void 0).$message.error("POST参数不是有效的JSON格式"+e.dataParam)}}}},Yf=Gf,Zf=(i("c816"),W(Yf,Qf,Jf,!1,null,"0a421ae5",null)),Xf=Zf.exports;const{Base64:ey}=i("f43e");var ty={name:"HtBatchSaveDialog",components:{BatchSaveDialogShowDetail:Xf},props:{custdialog:{type:String,default:""}},data(){return{customDialogPostParam:[],customDialogGetUrl:"",selectionRadio:[],textRadio:"",selectable:!0,isShowSearch:!1,nopagination:!1,dialogVisible:!1,tableData:[],pageResult:{page:1,pageSize:20,total:0},customDialog:{},alias:"",settingData:{},viewRow:{},title:"批量新增"}},methods:{showDialog(e){if(!this.alias)return void d["Message"].error("请先配置对话框");this.viewRow=e,this.customDialogPostParam=[],this.customDialogGetUrl="",this.selectionRadio=[],this.textRadio="",this.isShowSearch=!1;let t="${form}/form/customDialog/v1/getByAlias?alias="+this.alias;this.$requestConfig.request({url:t,method:"get"}).then(e=>{e.displayfield=JSON.parse(e.displayfield);for(let t=0;t<e.displayfield.length;t++)e.displayfield[t].field=e.displayfield[t].field.toLowerCase();e.resultfield=JSON.parse(e.resultfield),e.sortfield=JSON.parse(e.sortfield),e.conditionfield=JSON.parse(e.conditionfield),this.customDialog=e,setTimeout(()=>{this.dialogVisible=!0})})},orgRowClick(e){this.selectionRadio=[e]},handleSave(){let e=this.$refs.customDialogShowDetail.$refs.htTable;e&&e.$refs.htTable&&(e=e.$refs.htTable),e&&e.selection&&0==e.selection.length&&-1===this.customDialog.selectNum?d["Message"].error("请至少选择一条数据"):0!=this.selectionRadio||1!==this.customDialog.selectNum?(1===this.customDialog.selectNum?this.viewRow["data"]=this.selectionRadio:this.viewRow["data"]=e.selection,this.$requestConfig.saveBatchSave(this.viewRow).then(e=>{e.state&&(this.$message({type:"success",message:e.message}),this.$emit("onConfirm")),this.dialogVisible=!1})):d["Message"].error("请至少选择一条数据")},handleClose(){this.dialogVisible=!1}},watch:{custdialog:{handler(e){e&&(this.settingData=JSON.parse(ey.decode(e))),this.settingData.custDialog.alias&&(this.alias=this.settingData.custDialog.alias)},immediate:!0,deep:!0}}},iy=ty,ay=(i("93cc"),W(iy,jf,Wf,!1,null,"3fda3444",null)),sy=ay.exports;sy.install=function(e){e.component(sy.name,sy)};var ly=sy;const ny={HtUrlParameter:Tg,HtCustomComponent:_g,HtIframe:Km,HtHistoricalApproval:Nm,version:Jr["a"],HtInput:we,HtCheckbox:$e,HtRadio:Pt,HtDate:Mt,HtTimeSelect:zt,HtTimePicker:Jt,HtTable:Xe,HtTableColumn:nt,HtTableSearchPanel:pt,HtTableSearchField:vt,HtSelect:si,HtFile:Ri,HtDemension:ia,HtTree:ca,HtAddQueryStrategy:fa,HtSidebarDialog:Ca,Selector:Yi,HtRoleSelector:Za,HtUserSelector:Rs,HtOrgSelector:bl,HtJobSelector:Fl,HtPostSelector:gn,HtDimensionSelector:Sn,HtFormItem:Bo,HtSaveButton:Ro,HtUserDialog:On,HtDialog:Fn,HtCustomDialog:lo,HtTreeDialog:vo,HtTreeListDialog:Po,HtOrgPostDialog:po,HtDuration:Qo,HtFieldTail:ue,HtFileUpload:pi,HtIcon:cr,HtEditor:fr,HtAvatarImage:Rr,HtH1:Hr,HtH2:Ur,HtH3:Kr,HtH4:jr,HtH5:Wr,HtH6:Qr,HtCollapse:sc,HtCollapseItem:uc,HtStep:bc,HtSteps:xc,HtStepLayout:$c,HtDivider:qc,HtTabs:jc,HtAutocomplete:Xc,HtCascader:nh,HtDatePicker:ph,HtDictionary:vh,HtReadonlyInput:kh,HtOnlineForm:Vh,HtUserSelectorInput:Wh,HtOrgSelectorInput:eu,HtRoleSelectorInput:ou,HtPostSelectorInput:mu,HtJobSelectorInput:wu,HtDimensionSelectorInput:Eu,HtSwitch:Mu,HtTag:zu,HtSelectTree:Ju,HtButton:id,HtImage:cd,HtChart:Cd,HtMap:kd,HtQrcode:Fd,HtDataView:Ud,HtTemplatePreview:Df,HtTemplatePreviewFile:If,HtTemplatePreviewImage:Ff,HtRelevantFlow:Xd,HtMilepost:np,HtText:pp,HtRate:vp,HtSlider:Pp,HtTemplateForm:Bp,HtTemplateBatchUpdateDialog:Rp,HtGlobalValidate:Ag,HtGlobalQuery:qg,HtSubDialog:jg,HtSubtableBackfill:Zg,HtSubPagination:lf,HtSubExportDialog:uf,HtSubImportDialog:yf,HtQuerySqlPreview:Kf,HtTemplateFormDialog:Qp,HtTemplateIframeDialog:tm,HtPicture:Tr,FlowChart:rm,ProcessRecord:gm,HtExplain:Ar,TemplateImportResult:Sm,TemplateTaskCirculate:Om,HtPostDialog:Zm,HtJobDialog:lg,HtRoleDialog:dg,HtHyperlink:fd,HtBatchSaveDialog:ly,install:(e,t={})=>{t.smallScreenDialog||(t.smallScreenDialog=!1),t.paginationBackground||(t.paginationBackground=!1),t.readonlyInput||(t.readonlyInput=!1),t.hideTip||(t.hideTip=!1),t.requestConfig||(t.requestConfig={}),t.allPaginationJustify||(t.allPaginationJustify=""),e.prototype.$smallScreenDialog=t.smallScreenDialog,e.prototype.$paginationBackground=t.paginationBackground,e.prototype.$readonlyInput=t.readonlyInput,e.prototype.$hideTip=t.hideTip,e.prototype.$requestConfig=t.requestConfig,e.prototype.$allPaginationJustify=t.allPaginationJustify,e.prototype.$HOTENT={size:t.size||"small"},e.prototype.$imageCompressConfig=t.imageCompressConfig,Me["a"].use(t.locale),Me["a"].i18n(t.i18n),e.use(X["a"]),e.use(ie),e.use(Z),Object.keys(ny).forEach(t=>{const i=ny[t];i&&i.name&&e.component(i.name,i)}),e.component("ht-vnode",{functional:!0,render:(e,t)=>{let i={...t.props.vnode.componentOptions.propsData,...t.props};return delete i["vnode"],t.props.vnode.componentOptions.propsData=i,t.props.vnode.componentOptions.listeners=t.listeners,t.props.vnode}})}};"undefined"!==typeof window&&window.Vue&&ny.install(window.Vue);var oy=ny;t["default"]=oy},fe07:function(e,t,i){"use strict";i.d(t,"c",(function(){return g})),i.d(t,"b",(function(){return y}));var a={ht:{common:{add:"添加",delete:"删除",copy:"复制",seq:"序号",operation:"操作",search:"查询",reset:"重置",save:"保存",cancle:"取消",up:"上移",down:"下移",remove:"删除",clear:"清空",index:"序号",selected:"已选择",enter:"请输入",toSearch:"来搜索",errTip:"错误提示",warmTips:"温馨提示",close:"关闭",confirm:"确认",select:"请选择",equal:"等于",lessThan:"小于",greaterThan:"大于",lessThanOrEqual:"小于等于",notEqual:"不等于",like:"相似",left:"左",right:"右",isNull:"为空",notNull:"非空",between:"在...之间",in:"在...中",keyword:"关键字",content:"内容",day:"天",hour:"时",minute:"分",second:"秒",status:"状态",noMore:"没有更多了",searchFor:"搜索",return:"返回",tips:"提示"},tree:{filterText:"输入关键字进行过滤",collapse:"收起",expand:"展开",refresh:"刷新"},selectLang:{switchLang:"切换语言"},file:{nopreview:"没有预览权限",forbiddenPreview:"未上传成功的附件禁止预览",download:"下载",preview:"预览",sort:"排序",confirmDelete:"确定要删除吗?",fileName:"附件名称",fileType:"附件类型",fileSize:"附件大小",uploader:"上传人",accept:"支持{acceptType}格式",limitFileSize:"文件大小不超过{size}",limitCount:"文件个数不超过{limit}个",all:"所有格式",validateMsg:"请选择规定范围的文件进行上传!",fileDownloadError:"附件下载失败",confirmClear:"确定要清空吗？",fileAcceptType:"附件格式支持",fileSizeLimit:"附件大小限制：单个文件不超过",fileCountLimit:"附件个数限制：最多{limit}个",fileSizeErrorMsg:"附件的大小为{computerSize}，超过了允许的最大尺寸",fileLimitErrorMsg:"最多允许上传{limit}个附件",fileUploadErrorMsg:"附件{fileName}上传失败"},date:{startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",to:"至",lastWeek:"最近一周",lastMonth:"最近一个月",lastThreeMonths:"最近三个月"},picture:{uploadButtonText:"上传",imgName:"图片名称",imgUrl:"图片地址",imgNamePlaceHolder:"请输入图片名称",imgUrlPlaceHolder:"请输入图片地址",uploadWebImg:"上传网络图片",viewOriginalImage:"查看原图",limitCountTip:"最多允许上传{limit}张图片",limitTypeTip:"请上传后缀名为jpg、png、gif、ico、jpeg类型的图片",onlyUploadOne:"只能上传一张图片",deleteTip:"确认要{clear}图片?"},addQueryStrategy:{title:"新建查询策略",strategyName:"策略名称",searchQuery:"查询条件",addSearchQuery:"添加查询条件",isDefault:"是否默认",equalIgnoreCase:"等于忽略大小写",errorMsg:"表单验证失败，请检查"},chart:{viewChart:"查看图表",viewData:"查看数据"},customDialog:{title:"动态传入参数查询",errorMsg:"对话框别名{alias}不存在！",getIdError:"获取岗位id、用户id、组织id异常",postRequestParamError:"POST参数不是有效的JSON格式",relationSearchNotBindField:"关联查询取值参数未绑定表单字段",dynamicIncomingParameterQuery:"动态传入参数查询",searching:"查询中...",customDialogWarnMsg:"自定义对话框未获取到数据返回的listKey，数据加载可能产生异常。"},selector:{dimensionTitle:"选择维度",nameCode:"名称、编码",dialog:"对话框",dimensionList:"维度列表",jobTitle:"选择职务",jobList:"职务列表",roleTitle:"选择角色",orgTitle:"选择组织",orgDefaultPlaceholder:"名称、编码、路径",orgList:"组织列表",org:"组织",tactics:"策略",not:"无",MyDepartment:"我的主部门",MyDepartmentAndSub:"我的主部门及下属部门",myAllDepartment:"我的所有部门",myAllDepartmentAndSub:"我的所有部门及下属部门",notGetDepartmentData:"未获取到当前用户的部门信息，无法按照该策略加载数据。",postTitle:"选择岗位",postList:"岗位列表",name:"名称",code:"编码",orgName:"所属组织",rolePlaceholder:"角色名称、编码",roleList:"角色列表",notGetData:"未获取到数据列表，无法选择数据。",userAndAccount:"用户名称、账号",userTitle:"选择用户",roleName:"角色名称",all:"全部",userList:"用户列表",topContacts:"常用联系人",role:"角色"},editor:{errorMsg:"要使用富文本组件，必须引入wangeditor，并安装插件hotent-ui/packages/plugins/wangeditor"},explain:{label:"说明"},flowChart:{title:"流程图",taskApprovalDetail:"任务审批详情",taskName:"任务名称",executor:"执行人",candidate:"候选人",tooltipContent:"有资格审批的用户及用户组",approvalTime:"审批用时",opinion:"意见",nodeSettingDetails:"节点设置详情",notTask:"未产生过任务",tentativeCandidate:"暂定候选人",tentativeCandidateTip:"暂定的有审批资格的用户及用户组，实际候选人要在产生任务以后才能确定",notApproval:"待审批",commit:"提交",recommit:"重新提交",agree:"同意",suspend:"挂起",oppose:"反对",reject:"驳回",rejectToStart:"驳回到发起人",withdraw:"撤回",withdrawToPromoter:"撤回到发起人",countersignaturePassed:"会签通过",countersignatureNotPassed:"会签不通过",manualTermination:"人工终止",finish:"完成"},global:{errorMsg:"关联查询出错",validateErrorMsg:"全局校验【{name}】脚本错误",subTableRequired:"子表必填一条记录",sunTableRequired:"孙表必填一条记录"},approvalHistory:{approvalNode:"审批节点",pendingApprovers:"待审批人",name:"名称",handler:"处理人",handlingSituation:"处理情况",notRead:"待阅",read:"已阅",handleOpinion:"处理意见",file:"附件",operateTime:"操作时间",stayTime:"停留时长",lessOneMinute:"小于1分钟",approvalRecord:"审批记录"},iframe:{notUrl:"当前URL表单地址未填写。",errorMsg:"当前URL表单加载不正确。"},image:{downloadErrorMsg:"文件下载失败，请重新上传"},input:{serialNumberErrorMsg:"流水号生成规则字段不能绑定流水号显示字段"},map:{title:"地图选点",clearMsg:"清除地址数据",longitude:"经度",latitude:"纬度",nationwide:"全国",coordinate:"坐标",notMapComponent:"当前未引入地图组件，无法加载地图。"},onlineForm:{loadFormError:"表单加载失败,可能是表单配置发生了变化,请联系管理员..."},preview:{tip:"系统出错了",back:"返回上一级页面",defaultLoadingTip:"正在加载...",filePreview:"附件预览",loadError:"加载要预览的附件时出错",notExistMsg:"要预览的附件不存在",notSupported:"当前附件格式不支持预览",notSupportedOnlinePreview:"不支持压缩文件的在线预览",notSupportedPlayVideo:"不支持视频的在线播放",notSupportedPreview:"不支持预览",previewError:"预览失败",querySqlTip:"视图不存在..."},qrCode:{tip:"请绑定手机表单"},rate:{tip:"HtRate组件的值必须是数字或值为数字的字符串。"},relevantFlow:{flowSubject:"流程主题",sponsor:"发起人",originatingTime:"发起时间",addFlowTitle:"添加相关流程",flowTitle:"流程标题",placeholder:"请输入流程标题",createTime:"创建时间",creator:"创建人",procDefName:"流程名称"},savaButton:{errorMsg:"有{errorLength}个字段未通过校验，请正确填写表单内容。"},select:{errorMsg:"多选不支持数字类型"},slider:{tip:"此控件不支持pc端预览，请前往移动端查看",errorMsg:"HtSlider组件的值必须是数字或值为数字的字符串。"},step:{pre:"上一步",next:"下一步"},subTable:{errorMsg:"请选择数据回填",subTableError:"一对一子表只能选择一条数据",sunTableBackfillError:"未获取到子表的当前行索引，无法进行孙表回填",exceededMaximumRows:"子表数据已超过最大行数",sunTableExceededMaximumRows:"孙表数据已超过最大行数",loadingText:"正在初始化填报模板...",getCustomDialogError:"获取自定义对话框失败！",getCurrentUserError:"获取当前用户填制单位失败！",getDefaultDataError:"获取初始化数据失败！",subTableExport:"子表导出",currentPageData:"当前页数据",allData:"所有数据",subTableData:"子表数据",xlsxWarnMsg:"要使用子表导入/导出功能需要安装XLSX插件",exportError:"数据导出失败",subTableImport:"子表导入",template:"下载模板",importDialogTitle:"导入子表数据",importFile:"导入文件",importModel:"导入模式",hasRead:"已经读取到",strip:"条",data:"数据",checkDetail:"点击查看详情",notArrayError:"EipSubPagination组件的rows属性只能传入数组",subTableTemplate:"子表模板",append:"追加导入",override:"覆盖导入",merge:"合并导入",downloadTemplateError:"模板下载失败",selectImportData:"请选择要导入的文件",cannotImport:"未获取到表单数据，无法完成导入",importSuccess:"导入成功！",importError:"数据导入失败",notValidExcelFile:"所选文件不是有效的Excel文件",cannotHaveMergedCells:"Excel中不能有合并的单元格，请检查第{rowNum}行数据。",dataWrongFormat:"读取的数据格式错误。",upWarning:"已经是列表中第一位",downWarning:"已经是列表中最后一位",subTablePathError:"子表路径有误",sunTablePathError:"孙表路径有误",clearAllTip:"确认执行该操作?",cancelOperate:"已取消操作",deleteSunTableTip:"孙表必填，至少保留一条记录",deleteSubTableTip:"子表必填，至少保留一条记录。"},table:{customColumn:"自定义列",customColumnDesc:"勾选需要显示的列，设置列的宽度。",required:"必选",width:"宽度",restoreDefault:"恢复默认",baseSearch:"基础搜索",advanceSearch:"高级搜索",exportData:"导出数据",refresh:"刷新数据",cardView:"卡片视图",tableView:"表格视图",searchPlaceholder:"请输入搜索内容",validateErrorMsg:"有{itemsLength}个字段未通过校验，请正确填写表单内容。"},templateBatchUpdateDialog:{string:"字符串",errorMsg:"还有内容未填写。"},templateForm:{formContent:"表单内容"},templateImportResult:{title:"导入结果",mainKey:"主键",foreignKey:"外键",yes:"是",no:"否",validOrNot:"是否有效",errorInfo:"错误信息",duplicateOrNot:"是否重复",import:"导入",importFail:"导入失败",loadingText:"正在保存数据"},templatePreview:{noDataText:"报表不存在...",errorMsg:"获取表单列表模板html失败",fileCount:"共{fileListCount}个附件",imageCount:"共{ imageListCount}张",selectSummary:"选择汇总",allSummary:"全部汇总",currentPageSummary:"当前页汇总",templateTypeError:"上传模板只能是PDF格式!",selectUploadFile:"请选择要上传的附件",uploadSuccess:"上传成功",selectExportField:"请选择要导出的字段！",isFirst:"已经是列表中第一位",isLast:"已经是列表中最后一位",total:"合计",notExist:"此任务已被处理或不存在！",notSupported:"暂不支持！",selectLeastOneData:"请至少选中一条数据!",qrCode:"二维码",copy:"内容已复制到剪切板！",copyError:"抱歉，复制失败！",sortWarning:"当前排序方法handleSortChange已经弃用，请重新保存该表单列表。",deleteWaring:"请选择要删除的数据!",deleteTip:"此操作将删除该文件, 是否继续?",cancelDelete:"已取消删除",deleteDataTip:"此操作将删除该数据, 是否继续?",notUrl:"js中没有提供viewReportURLHandler方法来构建页面访问地址",notGetMenu:"未获取到{alias}对应的菜单页面，请确认是否已发布为前端资源。",pageJumpFail:"页面跳转失败",isChangeDataTip:"将会修改该数据，是否继续?",savaSuccess:"保存成功",savaFail:"保存失败",hasCancelOperate:"已取消该操作",selectLeastOneDataToOperate:"请至少选择一条数据进行操作!",notUpdate:"未设置更新内容",updateDataTip:"此操作将批量更新数据, 是否继续?",updateDataAllTip:"您没有选择任何数据，是否确认更新全部数据?",cancelUpdate:"已取消更新",selectOneDateTip:"请选择一条数据进行操作!",selectOneData:"您选择了多条数据，请选择其中一条进行操作!",copyTip:"此操作将复制一份数据, 是否继续?",copyLoadingText:"表单复制中",cancelCopy:"已取消复制",copyWaning:"请选择数据复制!",copyAllDataTip:"此操作将复制所选数据, 是否继续?",applicationSideNotConfigured:"应用端未配置",notConfigured:"中未配置",hasRevoke:"已撤回， 不能再撤回",revokeReason:"请输入撤回原因",deleteDraftSuccess:"删除草稿成功",deleteDraftTip:"删除后无法恢复，是否确定该流程草稿？",confirmDeleteTip:"确认删除此流程?",importSuccess:"导入成功",importAccount:"导入账号",importUser:"导入人"},templateTaskCirculate:{title:"流程传阅",circulators:"传阅人员",circulateExplain:"传阅说明",placeholder:"请输入意见内容......",approvalOpinion:"审批意见",addCommonWord:"添加常用语",commonWord:"常用语",uploadFile:"附件上传",validateErrorMsg:"表单校验不通过，请完善表单信息",confirmMsg:"确认添加 【{opinion}】 为常用语?"},linkage:{objectIsEmpty:"传入的对象为空或者不是VueComponent类型",typeError:"传入的对象{exp}为空，或者既不是Object类型也不是Array类型.",getFormError:"没有获取到控件所在的表单",appendValidationRulesError:"联动时要追加的验证规则{value}既不是String类型也不是Object类型",decreaseValidationRulesError:"联动时要减少的验证规则{value}既不是String类型也不是Object类型"},onlineHottable:{loadingText:"正在获取初始化信息..."},regionValidator:{errorMsg:"未找到选择器{querySelector}所对应的元素。"},validate:{jsError:"js脚本执行错误"}}},s=i("8bbf"),l=i.n(s),n=i("dab3"),o=i.n(n);const r=Object.prototype.hasOwnProperty,c=/(%|)\{([0-9a-zA-Z_]+)\}/g;var h=function(){function e(e,...t){return 1===t.length&&"object"===typeof t[0]&&(t=t[0]),t&&t.hasOwnProperty||(t={}),e.replace(c,(i,a,s,l)=>{let n;return"{"===e[l-1]&&"}"===e[l+i.length]?s:(n=r.call(t,s)?t[s]:null,null===n||void 0===n?"":n)})}return e};const u=h(l.a);let d=a,p=!1,m=function(){const e=Object.getPrototypeOf(this||l.a).$t;if("function"===typeof e&&l.a.locale)return p||(p=!0,l.a.locale(l.a.config.lang,o()(d,l.a.locale(l.a.config.lang)||{},{clone:!0}))),e.apply(this,arguments)};const g=function(e,t){let i=m.apply(this,arguments);if(null!==i&&void 0!==i)return i;const a=e.split(".");let s=d;for(let l=0,n=a.length;l<n;l++){const e=a[l];if(i=s[e],l===n-1)return u(i,t);if(!i)return"";s=i}return""},f=function(e){d=e||d},y=function(e){m=e||m};t["a"]={use:f,t:g,i18n:y}},ff71:function(e,t,i){},ff82:function(e,t,i){},ffa9:function(e,t,i){},ffdb:function(e,t,i){"use strict";i("2d16")}})}));